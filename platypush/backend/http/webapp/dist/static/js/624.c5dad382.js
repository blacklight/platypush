"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[624,4279,1039,2991],{624:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var l=i(6252);const o={class:"media-jellyfin-container browser"},n={class:"media-jellyfin-browser"};function s(t,e,i,s,a,c){const r=(0,l.up)("MediaNav"),d=(0,l.up)("Loading"),u=(0,l.up)("Movies"),p=(0,l.up)("Media");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(r,{path:a.path,onBack:e[0]||(e[0]=e=>t.$emit("back")),onSelect:c.select},null,8,["path","onSelect"]),(0,l._)("div",n,[c.isLoading?((0,l.wg)(),(0,l.j4)(d,{key:0})):"movies"===c.currentView?((0,l.wg)(),(0,l.j4)(u,(0,l.dG)({key:1},c.componentData.props,(0,l.mx)(c.componentData.on),{collection:a.collection,onSelect:c.select}),null,16,["collection","onSelect"])):((0,l.wg)(),(0,l.j4)(p,(0,l.dG)({key:2},c.componentData.props,(0,l.mx)(c.componentData.on),{collection:a.collection,onSelect:c.select,onSelectCollection:c.selectCollection}),null,16,["collection","onSelect","onSelectCollection"]))])])}i(560);var a=i(6791),c=i(2991),r=i(6640),d=i(1039),u=i(6593),p={mixins:[r["default"]],components:{Loading:a.Z,MediaNav:c["default"],Media:d["default"],Movies:u["default"]},emits:["add-to-playlist","back","download","path-change","play","play-with-opts"],data(){return{collection:null,loading_:!1,path:[]}},computed:{componentData(){return{props:{collection:this.collection,filter:this.filter,loading:this.isLoading,path:this.path},on:{"add-to-playlist":t=>this.$emit("add-to-playlist",t),download:t=>this.$emit("download",t),play:t=>this.$emit("play",t),"play-with-opts":t=>this.$emit("play-with-opts",t)}}},currentView(){if(!this.collection)return"index";switch(this.collection.collection_type){case"movies":return"movies";case"homevideos":return"videos";case"music":return"music";default:return"index"}},isLoading(){return this.loading_||this.loading},rootItem(){const t={id:"",title:"Jellyfin",type:"index",icon:{class:"fas fa-server"}};return t.click=()=>{this.collection=null,this.select(t)},t}},methods:{select(t){if(t){if(this.path.length>0&&this.path[this.path.length-1].id===t.id)return;if("index"===t.type)this.path=[this.rootItem];else{const e=this.path.findIndex((e=>e.id===t.id));e>=0?this.path=this.path.slice(0,e+1):this.path.push({title:t.name,click:()=>this.selectCollection(t),...t})}}else this.path=[];this.$emit("path-change",this.path)},selectCollection(t){this.collection=t,this.select(t)}},watch:{collection(){this.setUrlArgs({collection:this.collection?.id})}},mounted(){this.path=[this.rootItem]},unmounted(){this.setUrlArgs({collection:null})}},h=i(3744);const m=(0,h.Z)(p,[["render",s],["__scopeId","data-v-3c67e03c"]]);var f=m},4279:function(t,e,i){i.r(e),i.d(e,{default:function(){return $}});var l=i(6252);const o={class:"sort-buttons"},n={class:"sort-buttons-dropdown-body"},s=(0,l._)("div",{class:"title"},"Sort Direction",-1),a=(0,l._)("div",{class:"title"},"Sort By",-1);function c(t,e,i,c,r,d){const u=(0,l.up)("DropdownItem"),p=(0,l.up)("Dropdown");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(p,{"icon-class":d.btnIconClass,glow:"",right:"",title:d.title},{default:(0,l.w5)((()=>[(0,l._)("div",n,[s,(0,l.Wm)(u,{text:"Ascending","icon-class":"fa fa-arrow-up-short-wide","item-class":{active:!i.value?.desc},onInput:e[0]||(e[0]=t=>d.onDescChange(!1))},null,8,["item-class"]),(0,l.Wm)(u,{text:"Descending","icon-class":"fa fa-arrow-down-wide-short","item-class":{active:i.value?.desc},onInput:e[1]||(e[1]=t=>d.onDescChange(!0))},null,8,["item-class"]),a,(0,l.Wm)(u,{text:"Name","icon-class":"fa fa-font","item-class":{active:"title"===i.value?.attr},onInput:e[2]||(e[2]=t=>d.onAttrChange("title"))},null,8,["item-class"]),i.withReleaseDate?((0,l.wg)(),(0,l.j4)(u,{key:0,text:"Release Date","icon-class":"fa fa-calendar","item-class":{active:"year"===i.value?.attr},onInput:e[3]||(e[3]=t=>d.onAttrChange("year"))},null,8,["item-class"])):(0,l.kq)("",!0),i.withCriticRating?((0,l.wg)(),(0,l.j4)(u,{key:1,text:"Critics Rating","icon-class":"fa fa-star","item-class":{active:"critic_rating"===i.value?.attr},onInput:e[4]||(e[4]=t=>d.onAttrChange("critic_rating"))},null,8,["item-class"])):(0,l.kq)("",!0),i.withCommunityRating?((0,l.wg)(),(0,l.j4)(u,{key:2,text:"Community Rating","icon-class":"fa fa-users","item-class":{active:"community_rating"===i.value?.attr},onInput:e[5]||(e[5]=t=>d.onAttrChange("community_rating"))},null,8,["item-class"])):(0,l.kq)("",!0)])])),_:1},8,["icon-class","title"])])}var r=i(9963),d=i(3577);const u={class:"floating-dropdown-container"},p={class:"body-container hidden",ref:"dropdownContainer"};function h(t,e,i,o,n,s){const a=(0,l.up)("FloatingButton"),c=(0,l.up)("DropdownBody");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(a,{disabled:t.disabled,iconClass:t.iconClass,iconUrl:t.iconUrl,glow:t.glow,left:t.left,right:t.right,title:t.title,top:t.top,bottom:t.bottom,ref:"button",onClick:e[0]||(e[0]=(0,r.iM)((e=>t.toggle(e)),["stop"]))},null,8,["disabled","iconClass","iconUrl","glow","left","right","title","top","bottom"]),(0,l._)("div",p,[(0,l.Wm)(c,{id:t.id,keepOpenOnItemClick:t.keepOpenOnItemClick,style:(0,d.j5)(t.style),ref:"dropdown",onClick:t.onClick},{default:(0,l.w5)((()=>[(0,l.WI)(t.$slots,"default",{},void 0,!0)])),_:3},8,["id","keepOpenOnItemClick","style","onClick"])],512)])}var m=i(4642),f=i(3218),g=i(3825),w={mixins:[m.Z,g.Z],emits:["click"],components:{DropdownBody:f.Z,FloatingButton:g.Z}},y=i(3744);const v=(0,y.Z)(w,[["render",h],["__scopeId","data-v-2e3f2ab5"]]);var k=v,_=i(7597),C=i(8637),D={emits:["input"],mixins:[C.Z],components:{Dropdown:k,DropdownItem:_.Z},props:{value:{type:Object,required:!0},withReleaseDate:{type:Boolean,default:!1},withCriticRating:{type:Boolean,default:!1},withCommunityRating:{type:Boolean,default:!1}},computed:{btnIconClass(){return this.value?.desc?"fa fa-arrow-down-wide-short":"fa fa-arrow-up-short-wide"},title(){return"Sort By: "+(this.value?.attr??"[none]")+" "+(this.value?.desc?"descending":"ascending")}},methods:{onAttrChange(t){this.$emit("input",{attr:t,desc:!!this.value?.desc})},onDescChange(t){this.$emit("input",{attr:this.value?.attr,desc:t})}},watch:{value(){this.setUrlArgs({sort:this.value?.attr,desc:this.value?.desc})}},mounted(){const t=this.getUrlArgs(),e=t.sort,i="true"===t.desc?.toString();(e||i)&&this.$emit("input",{attr:e,desc:i})},unmounted(){this.setUrlArgs({sort:null,desc:null})}};const I=(0,y.Z)(D,[["render",c]]);var $=I},1039:function(t,e,i){i.r(e),i.d(e,{default:function(){return w}});var l=i(6252);const o={class:"videos index"},n={key:1,class:"wrapper music-wrapper"},s={key:3,class:"wrapper items-wrapper"};function a(t,e,i,a,c,r){const d=(0,l.up)("Loading"),u=(0,l.up)("Music"),p=(0,l.up)("NoItems"),h=(0,l.up)("Collections"),m=(0,l.up)("Results");return(0,l.wg)(),(0,l.iD)("div",o,[t.isLoading?((0,l.wg)(),(0,l.j4)(d,{key:0})):"music"===t.collection?.collection_type?((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(u,{collection:t.collection,filter:t.filter,loading:t.isLoading,path:t.path,onPlay:e[0]||(e[0]=e=>t.$emit("play",e)),onPlayWithOpts:e[1]||(e[1]=e=>t.$emit("play-with-opts",e)),onSelect:e[2]||(e[2]=e=>{t.selectedResult=e,t.$emit("select",e)}),onSelectCollection:r.selectCollection},null,8,["collection","filter","loading","path","onSelectCollection"])])):t.items?.length?((0,l.wg)(),(0,l.iD)("div",s,[r.collections.length>0?((0,l.wg)(),(0,l.j4)(h,{key:0,collection:t.collection,filter:t.filter,items:r.collections,loading:t.isLoading,"parent-id":t.collection?.id,onSelect:r.selectCollection},null,8,["collection","filter","items","loading","parent-id","onSelect"])):(0,l.kq)("",!0),r.mediaItems.length>0?((0,l.wg)(),(0,l.j4)(m,{key:1,results:r.mediaItems,sources:{jellyfin:!0},filter:t.filter,"selected-result":t.selectedResult,onAddToPlaylist:e[3]||(e[3]=e=>t.$emit("add-to-playlist",e)),onDownload:e[4]||(e[4]=e=>t.$emit("download",e)),onPlay:e[5]||(e[5]=e=>t.$emit("play",e)),onPlayWithOpts:e[6]||(e[6]=e=>t.$emit("play-with-opts",e)),onRemoveFromPlaylist:e[7]||(e[7]=e=>t.$emit("remove-from-playlist",e)),onSelect:e[8]||(e[8]=e=>t.selectedResult=e)},null,8,["results","filter","selected-result"])):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.j4)(p,{key:2,"with-shadow":!1},{default:(0,l.w5)((()=>[(0,l.Uk)(" No videos found. ")])),_:1}))])}var c=i(1112),r=i(6791),d=i(8113),u=i(1137),p=i(3222),h=i(5167),m={mixins:[d["default"]],emits:["select","select-collection"],components:{Collections:c["default"],Loading:r.Z,Music:u["default"],NoItems:p.Z,Results:h.Z},computed:{collections(){return this.sortedItems?.filter((t=>"collection"===t.item_type))??[]},mediaItems(){const t=this.sortedItems?.filter((t=>"collection"!==t.item_type))??[];return this.collection&&!this.collection.collection_type?t.sort(((t,e)=>{if(t.created_at&&e.created_at)return new Date(t.created_at)<new Date(e.created_at);if(t.created_at)return-1;if(e.created_at)return 1;let i=[t.name||t.title||"",e.name||e.title||""];return i[0].localeCompare(i[1])})):t}},methods:{selectCollection(t){this.$emit("select-collection",{type:"homevideos",...t})},async init(){const t=this.getUrlArgs();let e=t?.collection;if(e){this.loading_=!0;try{e=await this.request("media.jellyfin.info",{item_id:e}),e&&this.selectCollection(e)}finally{this.loading_=!1}}},async refresh(){if("music"!==this.collection?.collection_type){this.loading_=!0;try{"tvshows"===this.collection?.collection_type?this.items=(await this.request("media.jellyfin.get_collections",{parent_id:this.collection.id})).map((t=>({...t,item_type:"collection"}))):this.items=this.collection?.id?await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:25e3}):(await this.request("media.jellyfin.get_collections")).map((t=>({...t,item_type:"collection"})))}finally{this.loading_=!1}}}},async mounted(){this.init(),await this.refresh()}},f=i(3744);const g=(0,f.Z)(m,[["render",a],["__scopeId","data-v-d3b1ee0c"]]);var w=g},6593:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var l=i(6252);const o={class:"movies index"};function n(t,e,i,n,s,a){const c=(0,l.up)("Loading"),r=(0,l.up)("NoItems"),d=(0,l.up)("Results"),u=(0,l.up)("SortButton");return(0,l.wg)(),(0,l.iD)("div",o,[t.isLoading?((0,l.wg)(),(0,l.j4)(c,{key:0})):0===a.movies.length?((0,l.wg)(),(0,l.j4)(r,{key:1,"with-shadow":!1},{default:(0,l.w5)((()=>[(0,l.Uk)(" No movies found. ")])),_:1})):((0,l.wg)(),(0,l.j4)(d,{key:2,results:a.movies,sources:{jellyfin:!0},filter:t.filter,"selected-result":t.selectedResult,onAddToPlaylist:e[0]||(e[0]=e=>t.$emit("add-to-playlist",e)),onDownload:e[1]||(e[1]=e=>t.$emit("download",e)),onPlay:e[2]||(e[2]=e=>t.$emit("play",e)),onPlayWithOpts:e[3]||(e[3]=e=>t.$emit("play-with-opts",e)),onRemoveFromPlaylist:e[4]||(e[4]=e=>t.$emit("remove-from-playlist",e)),onSelect:e[5]||(e[5]=e=>t.selectedResult=e)},null,8,["results","filter","selected-result"])),a.movies.length>0?((0,l.wg)(),(0,l.j4)(u,{key:3,value:t.sort,"with-release-date":!0,"with-critic-rating":!0,"with-community-rating":!0,onInput:e[6]||(e[6]=e=>t.sort=e)},null,8,["value"])):(0,l.kq)("",!0)])}var s=i(6791),a=i(8113),c=i(3222),r=i(5167),d=i(4279),u={mixins:[a["default"]],components:{Loading:s.Z,NoItems:c.Z,Results:r.Z,SortButton:d["default"]},computed:{movies(){return this.sortedItems?.filter((t=>"movie"===t.item_type))??[]}},async mounted(){await this.refresh()}},p=i(3744);const h=(0,p.Z)(u,[["render",n],["__scopeId","data-v-f07087c4"]]);var m=h},2991:function(t,e,i){i.r(e),i.d(e,{default:function(){return k}});var l=i(6252),o=i(3577);const n=t=>((0,l.dD)("data-v-1e886630"),t=t(),(0,l.Cn)(),t),s={class:"nav"},a={class:"path"},c=n((()=>(0,l._)("i",{class:"fas fa-home"},null,-1))),r=[c],d=n((()=>(0,l._)("span",{class:"separator"},[(0,l._)("i",{class:"fas fa-chevron-right"})],-1))),u=["title","onClick"],p={key:1},h={key:0,class:"separator"},m=n((()=>(0,l._)("i",{class:"fas fa-chevron-right"},null,-1))),f=[m];function g(t,e,i,n,c,m){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("span",a,[(0,l._)("span",{class:"back token",title:"Back",onClick:e[0]||(e[0]=e=>t.$emit("back"))},r),d]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.path,((e,n)=>((0,l.wg)(),(0,l.iD)("span",{class:"path",key:n},[(0,l._)("span",{class:"token",title:e.title,onClick:t=>m.onClick(e)},[(t.icon=e.icon?.["class"])?((0,l.wg)(),(0,l.iD)("i",{key:0,class:(0,o.C_)(["icon",t.icon])},null,2)):(0,l.kq)("",!0),e.title?((0,l.wg)(),(0,l.iD)("span",p,(0,o.zw)(e.title),1)):(0,l.kq)("",!0)],8,u),(n>0||i.path.length>1)&&n<i.path.length-1?((0,l.wg)(),(0,l.iD)("span",h,f)):(0,l.kq)("",!0)])))),128))])}var w={emits:["back","select"],props:{path:{type:Array,default:()=>[]}},methods:{onClick(t){t.click&&(t.click(),this.$emit("select",t))}}},y=i(3744);const v=(0,y.Z)(w,[["render",g],["__scopeId","data-v-1e886630"]]);var k=v}}]);
//# sourceMappingURL=624.c5dad382.js.map