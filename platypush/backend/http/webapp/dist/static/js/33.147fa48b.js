"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[33,2399,8113,6640],{3222:function(t,e,i){i.d(e,{Z:function(){return d}});var l=i(6252),s=i(3577);const a={class:"no-items-container"};function o(t,e,i,o,n,r){return(0,l.wg)(),(0,l.iD)("div",a,[(0,l._)("div",{class:(0,s.C_)(["no-items fade-in",{shadow:i.withShadow}])},[(0,l.WI)(t.$slots,"default",{},void 0,!0)],2)])}var n={name:"NoItems",props:{withShadow:{type:Boolean,default:!0}}},r=i(3744);const c=(0,r.Z)(n,[["render",o],["__scopeId","data-v-4856c4d7"]]);var d=c},1112:function(t,e,i){i.r(e),i.d(e,{default:function(){return y}});var l=i(6252),s=i(3577);const a={class:"collections items"},o=["onClick"],n={class:"image"},r=["src","alt","onError"],c={key:0,class:"name"},d={key:1,class:"float bottom-right"};function m(t,e,i,m,u,h){return(0,l.wg)(),(0,l.iD)("div",{class:(0,s.C_)(["collections index",{"is-root":!i.parentId}])},[(0,l._)("div",a,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.filteredItems,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"collection item",key:e.id,onClick:i=>t.$emit("select",e)},[(0,l._)("div",n,[u.fallbackImageCollections[e.id]?((0,l.wg)(),(0,l.iD)("i",{key:1,class:(0,s.C_)(h.collectionsIcons[e.type]??"fas fa-folder")},null,2)):((0,l.wg)(),(0,l.iD)("img",{key:0,src:e.image,alt:e.name,onError:t=>h.onImageError(e)},null,40,r))]),u.fallbackImageCollections[e.id]||i.parentId?((0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("h2",null,(0,s.zw)(e.name),1)])):(0,l.kq)("",!0),e.year?((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("span",null,(0,s.zw)(e.year),1)])):(0,l.kq)("",!0)],8,o)))),128))])],2)}var u={props:{filter:{type:String},items:{type:Array,default:()=>[]},parentId:{type:String}},data(){return{fallbackImageCollections:{}}},computed:{collectionsIcons(){return{books:"fas fa-book",homevideos:"fas fa-video",movies:"fas fa-film",music:"fas fa-music",playlists:"fas fa-list",photos:"fas fa-image",series:"fas fa-tv"}},filteredItems(){return Object.values(this.items).filter((t=>!this.filter||t.name.toLowerCase().includes(this.filter.toLowerCase()))).sort(((t,e)=>"album"===t.item_type&&"album"===e.item_type&&t.year&&e.year&&t.year!==e.year?e.year-t.year:t.name.localeCompare(e.name)))}},methods:{onImageError(t){this.fallbackImageCollections[t.id]=!0}}},h=i(3744);const f=(0,h.Z)(u,[["render",m],["__scopeId","data-v-bd50ef86"]]);var y=f},8113:function(t,e,i){i.r(e),i.d(e,{default:function(){return o}});var l=i(6640),s={mixins:[l["default"]],emits:["add-to-playlist","back","download","play","play-with-opts","select"],props:{collection:{type:Object},path:{type:Array,default:()=>[]}},data(){return{items:[],loading_:!1,selectedResult:null,sort:{attr:"title",desc:!1}}},computed:{isLoading(){return this.loading_||this.loading},sortedItems(){return this.items?[...this.items].sort(((t,e)=>{const i=this.sort.attr,l=this.sort.desc;let s=t[i],a=e[i];return"number"===typeof s||"number"===typeof a?(s=s||0,a=a||0,l?a-s:s-a):(s=(s||"").toString().toLowerCase(),a=(a||"").toString().toLowerCase(),l?a.localeCompare(s):s.localeCompare(a))})).map((t=>({item_type:t.type,...t,type:"jellyfin"}))):[]}},methods:{async refresh(){const t=this.collection?.name;if(t?.length){this.loading_=!0;try{this.items=await this.request("media.jellyfin.search",{collection:t,limit:1e3})}finally{this.loading_=!1}}}},watch:{collection(){this.refresh()}}};const a=s;var o=a},33:function(t,e,i){i.r(e),i.d(e,{default:function(){return R}});var l=i(6252),s=i(3577),a=i(9963);const o=t=>((0,l.dD)("data-v-46fd671c"),t=t(),(0,l.Cn)(),t),n={class:"music index"},r={key:0,class:"artist header"},c={key:0,class:"image"},d=["src"],m={class:"info"},u=["textContent"],h={key:1,class:"album header"},f={key:0,class:"image"},y=["src"],p={class:"info"},g=["textContent"],w={key:0,class:"artist"},_=["textContent"],v=["textContent"],k={class:"details"},b={key:0,class:"row"},C=o((()=>(0,l._)("span",{class:"label"},"Year:",-1))),I=["textContent"],D={key:1,class:"row"},A=o((()=>(0,l._)("span",{class:"label"},"Duration:",-1))),x=["textContent"];function q(t,e,i,o,q,j){const S=(0,l.up)("Loading"),L=(0,l.up)("NoItems"),U=(0,l.up)("Collections"),$=(0,l.up)("Results");return(0,l.wg)(),(0,l.iD)("div",n,[t.isLoading?((0,l.wg)(),(0,l.j4)(S,{key:0})):t.items?.length?((0,l.wg)(),(0,l.iD)("main",{key:2,class:(0,s.C_)({album:"album"===j.view,artist:"artist"===j.view})},["artist"===j.view?((0,l.wg)(),(0,l.iD)("div",r,[t.collection.image?((0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("img",{src:t.collection.image},null,8,d)])):(0,l.kq)("",!0),(0,l._)("div",m,[(0,l._)("h1",{textContent:(0,s.zw)(t.collection.name)},null,8,u)])])):(0,l.kq)("",!0),"album"===j.view?((0,l.wg)(),(0,l.iD)("div",h,[t.collection.image?((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("img",{src:t.collection.image},null,8,y)])):(0,l.kq)("",!0),(0,l._)("div",p,[(0,l._)("h1",{textContent:(0,s.zw)(t.collection.name)},null,8,g),j.displayedArtist?.id?((0,l.wg)(),(0,l.iD)("div",w,[j.displayedArtist?((0,l.wg)(),(0,l.iD)("a",{key:0,href:"#",textContent:(0,s.zw)(j.displayedArtist.name),onClick:e[0]||(e[0]=(0,a.iM)(((...t)=>j.selectArtist&&j.selectArtist(...t)),["prevent","stop"]))},null,8,_)):((0,l.wg)(),(0,l.iD)("span",{key:1,textContent:(0,s.zw)(j.displayedArtist.name)},null,8,v))])):(0,l.kq)("",!0),(0,l._)("div",k,[t.collection.year?((0,l.wg)(),(0,l.iD)("div",b,[C,(0,l._)("span",{class:"value",textContent:(0,s.zw)(t.collection.year)},null,8,I)])):(0,l.kq)("",!0),t.collection.duration?((0,l.wg)(),(0,l.iD)("div",D,[A,(0,l._)("span",{class:"value",textContent:(0,s.zw)(t.formatDuration(t.collection.duration,!0))},null,8,x)])):(0,l.kq)("",!0)])])])):(0,l.kq)("",!0),j.collections?.length>0?((0,l.wg)(),(0,l.j4)(U,{key:2,collection:t.collection,filter:t.filter,items:j.collections,loading:t.isLoading,"parent-id":t.collection?.id,onSelect:j.selectCollection},null,8,["collection","filter","items","loading","parent-id","onSelect"])):(0,l.kq)("",!0),j.mediaItems?.length>0?((0,l.wg)(),(0,l.j4)($,{key:3,results:j.mediaItems,sources:{jellyfin:!0},filter:t.filter,"list-view":!0,"selected-result":t.selectedResult,"show-date":!1,onAddToPlaylist:e[1]||(e[1]=e=>t.$emit("add-to-playlist",e)),onDownload:e[2]||(e[2]=e=>t.$emit("download",e)),onPlay:e[3]||(e[3]=e=>t.$emit("play",e)),onPlayWithOpts:e[4]||(e[4]=e=>t.$emit("play-with-opts",e)),onRemoveFromPlaylist:e[5]||(e[5]=e=>t.$emit("remove-from-playlist",e)),onSelect:e[6]||(e[6]=e=>t.selectedResult=e)},null,8,["results","filter","selected-result"])):(0,l.kq)("",!0)],2)):((0,l.wg)(),(0,l.j4)(L,{key:1,"with-shadow":!1},{default:(0,l.w5)((()=>[(0,l.Uk)(" No music found. ")])),_:1}))])}var j=i(1112),S=i(6791),L=i(8113),U=i(3222),$=i(5167),z={mixins:[L["default"]],emits:["select","select-collection"],components:{Collections:j["default"],Loading:S.Z,NoItems:U.Z,Results:$.Z},data(){return{artist:null}},computed:{collections(){return(this.sortedItems?.filter((t=>["collection","artist","album"].includes(t.item_type)))??[]).sort(((t,e)=>t.name.localeCompare(e.name)))},displayedArtist(){return this.artist||this.collection?.artist},mediaItems(){return(this.sortedItems?.filter((t=>!["collection","artist","album"].includes(t.item_type)))??[]).sort(((t,e)=>"album"===this.view&&t.track_number&&e.track_number&&t.track_number!==e.track_number?t.track_number-e.track_number:t.name.localeCompare(e.name))).map((t=>("album"===this.view&&(t.artist=this.artist||this.collection.artist,t.album=this.collection,t.image=this.collection.image),t)))},view(){switch(this.collection?.item_type){case"artist":return"artist";case"album":return"album";default:return"index"}}},methods:{async selectArtist(){const t=this.displayedArtist?.id||this.getUrlArgs().artist;if(t?.length){this.loading_=!0;try{const e=this.displayedArtist||await this.request("media.jellyfin.info",{item_id:t});e&&(this.selectCollection(e),this.$nextTick((()=>{this.setUrlArgs({artist:e.id,collection:e.id})})))}finally{this.loading_=!1}}},selectCollection(t){t&&t?.id!==this.collection?.id&&("artist"===t.item_type?this.setUrlArgs({artist:t.id}):"album"===t.item_type?this.setUrlArgs({collection:t.id}):this.setUrlArgs({collection:null}),this.$emit("select-collection",{collection_type:"music",...t}))},async init(){const t=this.getUrlArgs();let e=t?.collection;if(e){this.loading_=!0;try{e=await this.request("media.jellyfin.info",{item_id:e}),e&&this.selectCollection(e)}finally{this.loading_=!1}}},async refresh(){this.loading_=!0;try{switch(this.view){case"artist":this.artist={...this.collection},this.setUrlArgs({artist:this.collection.id,collection:this.collection.id}),this.items=(await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:5e3})).map((t=>("album"===this.collection?.item_type&&(t.image=this.collection.image),t)));break;case"album":this.setUrlArgs({collection:this.collection.id,artist:this.collection.artist?.id}),this.items=await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:5e3});break;default:this.artist=null,this.items=await this.request("media.jellyfin.get_artists",{limit:5e3});break}}finally{this.loading_=!1}}},async mounted(){await this.init(),await this.refresh()},unmounted(){this.setUrlArgs({collection:null,artist:null,album:null})}},Z=i(3744);const P=(0,Z.Z)(z,[["render",q],["__scopeId","data-v-46fd671c"]]);var R=P},6640:function(t,e,i){i.r(e),i.d(e,{default:function(){return o}});var l=i(8637),s={mixins:[l.Z],emits:["add-to-playlist","back","create-playlist","download","download-audio","path-change","play","remove-from-playlist","remove-playlist","rename-playlist"],props:{filter:{type:String,default:""},loading:{type:Boolean,default:!1},mediaPlugin:{type:String},selectedPlaylist:{default:null},selectedChannel:{default:null}},data(){return{loading_:!1}},computed:{isLoading(){return this.loading||this.loading_}}};const a=s;var o=a}}]);
//# sourceMappingURL=33.147fa48b.js.map