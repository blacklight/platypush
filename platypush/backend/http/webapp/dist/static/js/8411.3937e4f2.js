"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[8411],{8411:function(e,t,l){l.r(t),l.d(t,{default:function(){return E}});var a=l(641),s=l(33),i=l(3751);const o=e=>((0,a.Qi)("data-v-2b3713e6"),e=e(),(0,a.jt)(),e),n={class:"collections items"},c=["onClick"],r={class:"image"},u=["src","alt","onError"],m={key:0,class:"name"},d={key:1,class:"float bottom-right"},y={key:0,class:"add-playlist floating-btn-container"},f={key:1,class:"add-playlist-modal"},p=o((()=>(0,a.Lk)("div",{class:"row"},[(0,a.Lk)("label",{for:"newPlaylistName"},"Playlist Name"),(0,a.Lk)("input",{name:"name",type:"text",id:"newPlaylistName",placeholder:"Playlist Name",required:""})],-1))),h=o((()=>(0,a.Lk)("div",{class:"row"},[(0,a.Lk)("label",{for:"newPlaylistPublic"},"Public"),(0,a.Lk)("input",{name:"public",type:"checkbox",checked:"",id:"newPlaylistPublic"})],-1))),b={class:"row buttons"},k=o((()=>(0,a.Lk)("button",{type:"submit"},"Create",-1)));function C(e,t,l,o,C,v){const g=(0,a.g2)("FloatingButton"),w=(0,a.g2)("Modal");return(0,a.uX)(),(0,a.CE)("div",{class:(0,s.C4)(["collections index",{"is-root":!l.parentId}])},[(0,a.Lk)("div",n,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.filteredItems,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"collection item",key:t.id,onClick:l=>e.$emit("select",t)},[(0,a.Lk)("div",r,[C.fallbackImageCollections[t.id]?((0,a.uX)(),(0,a.CE)("i",{key:1,class:(0,s.C4)(v.collectionsIcons[t.type]??"fas fa-folder")},null,2)):((0,a.uX)(),(0,a.CE)("img",{key:0,src:t.image,alt:t.name,onError:e=>v.onImageError(t)},null,40,u))]),C.fallbackImageCollections[t.id]||l.parentId?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("h2",null,(0,s.v_)(t.name),1)])):(0,a.Q3)("",!0),t.year?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("span",null,(0,s.v_)(t.year),1)])):(0,a.Q3)("",!0)],8,c)))),128))]),v.isPlaylistsCollection?((0,a.uX)(),(0,a.CE)("div",y,[(0,a.bF)(g,{"icon-class":"fa fa-plus",title:"Create Playlist",disabled:C.loading,onClick:t[0]||(t[0]=e=>C.showNewPlaylist=!0)},null,8,["disabled"])])):(0,a.Q3)("",!0),C.showNewPlaylist?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(w,{title:"Create Playlist",visible:!0,onClose:t[3]||(t[3]=e=>C.showNewPlaylist=!1)},{default:(0,a.k6)((()=>[(0,a.Lk)("form",{class:"modal-body",onSubmit:t[2]||(t[2]=(0,i.D$)(((...e)=>v.createPlaylist&&v.createPlaylist(...e)),["prevent"]))},[p,h,(0,a.Lk)("div",b,[(0,a.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>C.showNewPlaylist=!1)},"Cancel"),k])],32)])),_:1})])):(0,a.Q3)("",!0)],2)}var v=l(7998),g=l(9513),w=l(2002),P={mixins:[w.A],emits:["refresh","select"],components:{FloatingButton:v.A,Modal:g.A},props:{collection:{type:Object},filter:{type:String},items:{type:Array,default:()=>[]},batchItems:{type:Number,default:100},parentId:{type:String}},data(){return{fallbackImageCollections:{},loading:!1,maxResultIndex:this.batchItems,showNewPlaylist:!1}},computed:{collectionsIcons(){return{books:"fas fa-book",homevideos:"fas fa-video",movies:"fas fa-film",music:"fas fa-music",playlists:"fas fa-list",photos:"fas fa-image",series:"fas fa-tv"}},filteredItems(){return Object.values(this.items).filter((e=>!this.filter||e.name.toLowerCase().includes(this.filter.toLowerCase()))).sort(((e,t)=>"album"===e.item_type&&"album"===t.item_type&&e.year&&t.year&&e.year!==t.year?t.year-e.year:e.name.localeCompare(t.name))).slice(0,this.maxResultIndex)},isPlaylistsCollection(){return"playlists"===this.collection?.collection_type}},methods:{async createPlaylist(e){const t=new FormData(e.target);await this.request("media.jellyfin.create_playlist",{name:t.get("name"),public:"on"===t.get("public")}),this.$emit("refresh")},onImageError(e){this.fallbackImageCollections[e.id]=!0},onScroll(e){const t=e.target;if(!t)return;const l=t.scrollHeight-t.scrollTop<=t.clientHeight+150;l&&(this.maxResultIndex+=this.batchItems)}},watch:{showNewPlaylist(e){e&&this.$nextTick((()=>this.$el.querySelector('input[name="name"]').focus()))}},mounted(){this.$el.parentElement?.addEventListener("scroll",this.onScroll)},unmounted(){this.$el.parentElement?.removeEventListener("scroll",this.onScroll)}},I=l(6262);const L=(0,I.A)(P,[["render",C],["__scopeId","data-v-2b3713e6"]]);var E=L}}]);
//# sourceMappingURL=8411.3937e4f2.js.map