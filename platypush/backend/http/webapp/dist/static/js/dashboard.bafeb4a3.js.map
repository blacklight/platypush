{"version":3,"file":"static/js/dashboard.bafeb4a3.js","mappings":"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","sources":["webpack://platypush/./src/views/Dashboard.vue","webpack://platypush/./src/components/widgets/Row.vue","webpack://platypush/./src/components/widgets/Row.vue?bc29","webpack://platypush/./src/components/widgets/Widget.vue","webpack://platypush/./src/components/widgets/Widget.vue?043c","webpack://platypush/./src/views/Dashboard.vue?040e","webpack://platypush/./src/components/widgets/ lazy ^\\.\\/.*\\/Index$ namespace object"],"sourcesContent":["<template>\n  <Loading v-if=\"loading\" />\n\n  <div id=\"dashboard\" class=\"col-12\" :class=\"classes\" :style=\"style\">\n    <Row v-for=\"(row, i) in rows\" :key=\"i\" :class=\"row.class\" :style=\"row.style\">\n      <keep-alive v-for=\"(widget, j) in row.widgets\" :key=\"j\">\n        <Widget :style=\"widget.style\" :class=\"widget.class\">\n          <component :is=\"widget.component\" v-bind=\"getWidgetProps(widget)\" />\n        </Widget>\n      </keep-alive>\n    </Row>\n  </div>\n</template>\n\n<script>\nimport { defineAsyncComponent, shallowRef } from 'vue'\nimport Utils from '@/Utils'\nimport Loading from \"@/components/Loading\";\nimport Row from \"@/components/widgets/Row\";\nimport Widget from \"@/components/widgets/Widget\";\n\nexport default {\n  name: 'Dashboard',\n  mixins: [Utils],\n  components: {Widget, Loading, Row},\n  props: {\n    // Refresh interval in seconds.\n    refreshSeconds: {\n      type: Number,\n      required: false,\n      default: 0,\n    },\n  },\n\n  data() {\n    return {\n      rows: [],\n      loading: false,\n      style: undefined,\n      class: undefined,\n    }\n  },\n\n  computed: {\n    classes() {\n      return this.class\n    },\n\n    _refreshSeconds() {\n      return parseFloat(this.refreshSeconds) || 0\n    },\n  },\n\n  methods: {\n    getWidgetProps(widget) {\n      const props = {...widget.props}\n      if (props.class)\n        delete props.class\n\n      return props\n    },\n\n    parseTemplate(tmpl) {\n      const node = new DOMParser().parseFromString(tmpl, 'text/xml').childNodes[0]\n      const self = this\n      this.style = node.attributes.style?.nodeValue\n      this.class = node.attributes.class?.nodeValue\n\n      this.rows = [...node.getElementsByTagName('Row')].map((row) => {\n        return {\n          style: row.attributes.style?.nodeValue,\n          class: row.attributes.class?.nodeValue,\n          widgets: [...row.children].map((el) => {\n            const component = shallowRef(\n              defineAsyncComponent(\n                () => import(`@/components/widgets/${el.nodeName}/Index`)\n              )\n            )\n\n            const style = el.attributes.style?.nodeValue\n            const classes = el.attributes.class?.nodeValue\n            const attrs = [...el.attributes].reduce((obj, node) => {\n              if (node.nodeName !== 'style') {\n                obj[node.nodeName] = node.nodeValue\n              }\n\n              return obj\n            }, {\n              content: el.innerHTML,\n            })\n\n            const widget = {\n              component: component,\n              style: style,\n              class: classes,\n              props: attrs || {},\n            }\n\n            self.$options.components[el.nodeName] = component\n            return widget\n          })\n        }\n      })\n\n      this.loading = false\n    },\n\n    async refreshDashboard() {\n      this.loading = true\n      this.widgets = []\n      const name = this.$route.params.name\n      const template = (await this.request('config.get_dashboard', { name: name }))\n\n      if (!template) {\n        this.notifyError(`Dashboard ${name} not found`)\n      }\n\n      this.parseTemplate(template)\n    },\n  },\n\n  mounted() {\n    this.refreshDashboard()\n    if (this._refreshSeconds) {\n      const self = this\n      setInterval(() => {\n        self.refreshDashboard()\n      }, parseInt((this._refreshSeconds*1000).toFixed(0)))\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"~lato-font/scss/public-api\";\n$lato-font-path: \"~lato-font/fonts\";\n\n@include lato-include-font('medium');\n\n#dashboard {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n  padding: 1em 1em 0 1em;\n  background: $dashboard-bg;\n  background-size: cover;\n  font-family: Lato, proxima-nova, Helvetica Neue, Arial, sans-serif;\n\n  .blurred {\n    filter: blur(0.075em);\n  }\n}\n</style>\n\n<style>\nhtml {\n  overflow: auto !important;\n}\n</style>\n","<template>\n  <div class=\"row\" :class=\"classes\" :style=\"style\">\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Row\",\n  props: {\n    // Class override\n    class: {\n      type: String,\n      required: false,\n      default: '',\n    },\n\n    // Style override\n    style: {\n      type: String,\n      required: false,\n      default: '',\n    },\n  },\n\n  computed: {\n    classes() {\n      return this.class\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.row {\n  width: 100%;\n  height: 49%;\n\n  &:not(:last-child) {\n    margin-bottom: 1%;\n  }\n}\n</style>\n","import { render } from \"./Row.vue?vue&type=template&id=1b4663f2&scoped=true\"\nimport script from \"./Row.vue?vue&type=script&lang=js\"\nexport * from \"./Row.vue?vue&type=script&lang=js\"\n\nimport \"./Row.vue?vue&type=style&index=0&id=1b4663f2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1b4663f2\"]])\n\nexport default __exports__","<template>\n  <div :style=\"style\" :class=\"classes\">\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Widget\",\n  props: {\n    // Widget style override\n    style: {\n      type: String,\n      required: false,\n      default: '',\n    },\n\n    // Widget class override\n    class: {\n      type: String,\n      required: false,\n      default: '',\n    },\n  },\n\n  computed: {\n    classes() {\n      return (this.class?.length ? this.class.split(' ') : ['col-3']).concat(['widget', 'column'])\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.widget {\n  height: calc(100% - 1em);\n  background: $background-color;\n  border-radius: 5px;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 3px 3px 0 rgba(0,0,0,0.16), 0 0 0 1px rgba(0,0,0,0.08);\n}\n</style>\n","import { render } from \"./Widget.vue?vue&type=template&id=5df52982&scoped=true\"\nimport script from \"./Widget.vue?vue&type=script&lang=js\"\nexport * from \"./Widget.vue?vue&type=script&lang=js\"\n\nimport \"./Widget.vue?vue&type=style&index=0&id=5df52982&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5df52982\"]])\n\nexport default __exports__","import { render } from \"./Dashboard.vue?vue&type=template&id=462fad8c&scoped=true\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=462fad8c&lang=scss&scoped=true\"\nimport \"./Dashboard.vue?vue&type=style&index=1&id=462fad8c&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-462fad8c\"]])\n\nexport default __exports__","var map = {\n\t\"./Calendar/Index\": [\n\t\t5638,\n\t\t5638\n\t],\n\t\"./Camera/Index\": [\n\t\t446,\n\t\t446\n\t],\n\t\"./Component/Index\": [\n\t\t1449,\n\t\t7651,\n\t\t2844,\n\t\t1449\n\t],\n\t\"./DateTime/Index\": [\n\t\t4619,\n\t\t1391,\n\t\t4619\n\t],\n\t\"./DateTimeWeather/Index\": [\n\t\t9962,\n\t\t9211,\n\t\t1391,\n\t\t9962\n\t],\n\t\"./ImageCarousel/Index\": [\n\t\t2140,\n\t\t9211,\n\t\t1391,\n\t\t2140\n\t],\n\t\"./Music/Index\": [\n\t\t7841,\n\t\t7651,\n\t\t906,\n\t\t7841\n\t],\n\t\"./Plugin/Index\": [\n\t\t8179,\n\t\t8179\n\t],\n\t\"./RssNews/Index\": [\n\t\t6523,\n\t\t6523\n\t],\n\t\"./Weather/Index\": [\n\t\t9211,\n\t\t9211\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 6725;\nmodule.exports = webpackAsyncContext;"],"names":["$data","loading","_createBlock","_component_Loading","key","_createElementVNode","id","class","_normalizeClass","$options","classes","style","_normalizeStyle","_createElementBlock","_Fragment","_renderList","rows","row","i","_component_Row","widgets","widget","j","_KeepAlive","_createVNode","_component_Widget","_resolveDynamicComponent","component","_mergeProps","ref_for","getWidgetProps","$props","_renderSlot","_ctx","$slots","undefined","name","props","type","String","required","default","computed","this","__exports__","length","split","concat","mixins","Utils","components","Widget","Loading","Row","refreshSeconds","Number","data","_refreshSeconds","parseFloat","methods","parseTemplate","tmpl","node","DOMParser","parseFromString","childNodes","self","attributes","nodeValue","getElementsByTagName","map","children","el","shallowRef","defineAsyncComponent","nodeName","attrs","reduce","obj","content","innerHTML","refreshDashboard","$route","params","template","request","notifyError","mounted","setInterval","parseInt","toFixed","render","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","all","slice","keys","Object","module","exports"],"sourceRoot":""}