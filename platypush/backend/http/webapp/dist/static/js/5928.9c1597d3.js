(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[5928],{7907:function(){},5928:function(e,t,n){"use strict";n.d(t,{A:function(){return Re}});var s=n(641),i=n(33),r=n(3751);const o=e=>((0,s.Qi)("data-v-521241df"),e=e(),(0,s.jt)(),e),a={class:"action-editor"},l={class:"curl-modal-container"},c=["innerHTML"],u={class:"header-container"},h={class:"tabs-container"},d={key:0,class:"buttons"},g=["disabled"],p=o((()=>(0,s.Lk)("i",{class:"fas fa-save"},null,-1))),m=[p],v={key:0,class:"request structured"},f={class:"autocomplete-container"},b=["type","disabled"],y=o((()=>(0,s.Lk)("i",{class:"fas fa-play"},null,-1))),k=[y],A={key:0,class:"args"},x=o((()=>(0,s.Lk)("h2",null,[(0,s.Lk)("i",{class:"fas fa-code"}),(0,s.eW)("   Arguments ")],-1))),I={key:1,class:"request raw-request"},L={class:"first-row"},C=["placeholder"],w=["type","disabled"],E=o((()=>(0,s.Lk)("i",{class:"fas fa-play"},null,-1))),S=[E];function $(e,t,n,o,p,y){const E=(0,s.g2)("Loading"),$=(0,s.g2)("Modal"),T=(0,s.g2)("Tab"),O=(0,s.g2)("Tabs"),q=(0,s.g2)("Autocomplete"),X=(0,s.g2)("ActionDoc"),D=(0,s.g2)("ActionArgs"),j=(0,s.g2)("Response");return(0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["action-editor-container",{"with-save":n.withSave}]),onClick:t[13]||(t[13]=(...e)=>y.onClick&&y.onClick(...e))},[p.loading?((0,s.uX)(),(0,s.Wv)(E,{key:0})):(0,s.Q3)("",!0),(0,s.Lk)("div",a,[(0,s.Lk)("div",l,[y.curlSnippet?.length?((0,s.uX)(),(0,s.Wv)($,{key:0,ref:"curlModal",title:"curl request"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"output curl-snippet",onClick:t[0]||(t[0]=t=>e.copyToClipboard(y.curlSnippet))},[(0,s.Lk)("pre",null,[(0,s.Lk)("code",{innerHTML:y.highlightedCurlSnippet},null,8,c)])])])),_:1},512)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",u,[(0,s.Lk)("div",h,[(0,s.bF)(O,null,{default:(0,s.k6)((()=>[(0,s.bF)(T,{selected:p.structuredInput,"icon-class":"fas fa-list",onInput:t[1]||(t[1]=e=>y.onInputTypeChange(!0))},{default:(0,s.k6)((()=>[(0,s.eW)(" Structured ")])),_:1},8,["selected"]),(0,s.bF)(T,{selected:!p.structuredInput,"icon-class":"fas fa-code",onInput:t[2]||(t[2]=e=>y.onInputTypeChange(!1))},{default:(0,s.k6)((()=>[(0,s.eW)(" Raw ")])),_:1},8,["selected"])])),_:1})]),n.withSave?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("button",{type:"submit",class:"save-btn btn-primary",disabled:p.running||!y.isValidAction,title:"Save",onClick:t[3]||(t[3]=(0,r.D$)(((...e)=>y.onSubmit&&y.onSubmit(...e)),["stop"]))},m,8,g)])):(0,s.Q3)("",!0)]),(0,s.Lk)("form",{ref:"actionForm",autocomplete:"off",onSubmit:t[12]||(t[12]=(0,r.D$)(((...e)=>y.onSubmit&&y.onSubmit(...e)),["prevent"]))},[p.structuredInput?((0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("header",null,[(0,s.Lk)("div",f,[(0,s.bF)(q,{ref:"autocomplete",items:y.autocompleteItems,onInput:y.updateAction,placeholder:"Action","show-results-when-blank":"",autofocus:"",disabled:p.running,value:p.action.name},null,8,["items","onInput","disabled","value"]),(0,s.Lk)("button",{type:n.withSave?"button":"submit",class:"run-btn btn-primary",disabled:p.running||!y.isValidAction,title:"Run",onClick:t[4]||(t[4]=(0,r.D$)(((...e)=>y.executeAction&&y.executeAction(...e)),["stop"]))},k,8,b)])]),(0,s.bF)(X,{action:p.action,"curl-snippet":y.curlSnippet,loading:p.docLoading,doc:p.selectedDoc,onCurlModal:t[5]||(t[5]=t=>e.$refs.curlModal.show())},null,8,["action","curl-snippet","loading","doc"]),p.action.name in p.actions&&(Object.keys(p.action.args).length||p.action.supportsExtraArgs)?((0,s.uX)(),(0,s.CE)("section",A,[x,(0,s.bF)(D,{action:p.action,context:n.context,loading:p.loading,running:p.running,"selected-arg":p.selectedArg,"selected-argdoc":p.selectedArgdoc,onAdd:y.addArg,onInput:t[6]||(t[6]=e=>y.emitInput({name:p.action.name,args:e})),onSelect:y.selectArgdoc,onRemove:y.removeArg,onArgEdit:t[7]||(t[7]=e=>p.action.args[e.name].value=e.value),onExtraArgNameEdit:t[8]||(t[8]=e=>p.action.extraArgs[e.index].name=e.value),onExtraArgValueEdit:t[9]||(t[9]=e=>p.action.extraArgs[e.index].value=e.value)},null,8,["action","context","loading","running","selected-arg","selected-argdoc","onAdd","onSelect","onRemove"])])):(0,s.Q3)("",!0),(0,s.bF)(j,{response:p.response,error:p.error},null,8,["response","error"])])):(0,s.Q3)("",!0),p.structuredInput?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",I,[(0,s.Lk)("div",L,[(0,s.Lk)("label",null,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>p.rawRequest=e),ref:"rawAction",placeholder:p.rawRequestPlaceholder},null,8,C),[[r.Jo,p.rawRequest]])]),(0,s.Lk)("button",{type:n.withSave?"button":"submit",disabled:p.running,class:"raw-run-btn btn-primary",title:"Run",onClick:t[11]||(t[11]=(0,r.D$)(((...e)=>y.executeAction&&y.executeAction(...e)),["stop"]))},S,8,w)]),(0,s.bF)(j,{response:p.response,error:p.error},null,8,["response","error"])]))],544)])],2)}n(4114),n(1545),n(7907);var T=n(9878);const O=e=>((0,s.Qi)("data-v-f4ee7f72"),e=e(),(0,s.jt)(),e),q={key:0,class:"args-list"},X={key:0,class:"required-flag"},D={key:0,class:"extra-args"},j={class:"col-5"},R=["disabled","value","onInput"],_={class:"col-6"},B={class:"col-1 buttons"},K=["onClick"],Q=O((()=>(0,s.Lk)("i",{class:"fas fa-trash"},null,-1))),N=[Q],F={key:1,class:"add-arg"},W=O((()=>(0,s.Lk)("i",{class:"fas fa-plus"},null,-1))),M=[W];function H(e,t,n,i,r,o){const a=(0,s.g2)("ContextAutocomplete"),l=(0,s.g2)("Argdoc");return(0,s.uX)(),(0,s.CE)("div",{class:"args-body",onKeydown:t[2]||(t[2]=(...e)=>o.onKeyDown&&o.onKeyDown(...e))},[Object.keys(n.action.args).length||n.action.supportsExtraArgs?((0,s.uX)(),(0,s.CE)("div",q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Object.keys(n.action.args),(i=>((0,s.uX)(),(0,s.CE)("div",{class:"arg",key:i},[(0,s.Lk)("label",null,[(0,s.bF)(a,{value:n.action.args[i].value,disabled:n.running,items:e.contextAutocompleteItems,placeholder:i,quote:!0,"select-on-tab":!1,onInput:e=>o.onArgEdit(i,e),onBlur:t[0]||(t[0]=e=>o.onSelect(null)),onFocus:e=>o.onSelect(i)},null,8,["value","disabled","items","placeholder","onInput","onFocus"]),n.action.args[i].required?((0,s.uX)(),(0,s.CE)("span",X,"*")):(0,s.Q3)("",!0)]),n.selectedArgdoc&&n.selectedArg&&i===n.selectedArg?((0,s.uX)(),(0,s.Wv)(l,{key:0,name:n.selectedArg,args:n.action.args[n.selectedArg],doc:n.selectedArgdoc,loading:n.loading,"is-mobile":""},null,8,["name","args","doc","loading"])):(0,s.Q3)("",!0)])))),128)),Object.keys(n.action.extraArgs).length?((0,s.uX)(),(0,s.CE)("div",D,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.action.extraArgs,((t,i)=>((0,s.uX)(),(0,s.CE)("div",{class:"arg extra-arg",key:i},[(0,s.Lk)("label",j,[(0,s.Lk)("input",{type:"text",class:"action-extra-arg-name",placeholder:"Name",disabled:n.running,value:t.name,onInput:e=>o.onExtraArgNameEdit(i,e.target.value)},null,40,R)]),(0,s.Lk)("label",_,[(0,s.bF)(a,{value:t.value,disabled:n.running,items:e.contextAutocompleteItems,quote:!0,"select-on-tab":!1,placeholder:"Value",onInput:e=>o.onExtraArgValueEdit(i,e.detail)},null,8,["value","disabled","items","onInput"])]),(0,s.Lk)("label",B,[(0,s.Lk)("button",{type:"button",class:"action-extra-arg-del",title:"Remove argument",onClick:t=>e.$emit("remove",i)},N,8,K)])])))),128))])):(0,s.Q3)("",!0),n.action.supportsExtraArgs?((0,s.uX)(),(0,s.CE)("div",F,[(0,s.Lk)("button",{type:"button",title:"Add an argument",onClick:t[1]||(t[1]=(...e)=>o.onArgAdd&&o.onArgAdd(...e))},M)])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),n.selectedArgdoc&&n.selectedArg?((0,s.uX)(),(0,s.Wv)(l,{key:1,name:n.selectedArg,args:n.action.args[n.selectedArg],doc:n.selectedArgdoc,loading:n.loading},null,8,["name","args","doc","loading"])):(0,s.Q3)("",!0)],32)}const U=e=>((0,s.Qi)("data-v-2df98b7b"),e=e(),(0,s.jt)(),e),J=["textContent"],P={key:0,class:"flag required"},V={key:1,class:"flag optional"},G={class:"doc html"},z={key:1},Y=["innerHTML"],Z={key:1,class:"type"},ee=U((()=>(0,s.Lk)("b",null,"Type:",-1)));function te(e,t,n,r,o,a){const l=(0,s.g2)("Loading");return(0,s.uX)(),(0,s.CE)("article",{class:(0,i.C4)(["argdoc-container",{mobile:n.isMobile,widescreen:!n.isMobile}])},[(0,s.Lk)("h2",null,[(0,s.eW)(" Argument: "),(0,s.Lk)("div",{class:"argname",textContent:(0,i.v_)(n.name)},null,8,J),n.args.required?((0,s.uX)(),(0,s.CE)("span",P,"[Required]")):((0,s.uX)(),(0,s.CE)("span",V,"[Optional]"))]),(0,s.Lk)("div",G,[n.loading?((0,s.uX)(),(0,s.Wv)(l,{key:0})):((0,s.uX)(),(0,s.CE)("span",z,[n.doc?.length?((0,s.uX)(),(0,s.CE)("span",{key:0,innerHTML:n.doc},null,8,Y)):(0,s.Q3)("",!0),n.args.type?((0,s.uX)(),(0,s.CE)("div",Z,[ee,(0,s.eW)("   "+(0,i.v_)(n.args.type),1)])):(0,s.Q3)("",!0)]))])],2)}var ne=n(9828),se={name:"Argdoc",components:{Loading:ne.A},props:{args:{type:Object,default:()=>({})},name:{type:String,required:!0},doc:String,loading:Boolean,isMobile:Boolean}},ie=n(6262);const re=(0,ie.A)(se,[["render",te],["__scopeId","data-v-2df98b7b"]]);var oe=re,ae=n(3714),le=n(875),ce={mixins:[le.A],components:{Argdoc:oe,ContextAutocomplete:ae.A},emits:["add","arg-edit","extra-arg-name-edit","extra-arg-value-edit","input","remove","select"],props:{action:Object,loading:Boolean,running:Boolean,selectedArg:String,selectedArgdoc:String},computed:{allArgs(){return{...this.action.args,...this.action.extraArgs.reduce(((e,t)=>(e[t.name]=t,e)),{})}}},methods:{onArgAdd(){this.$emit("add"),this.$nextTick((()=>{const e=this.$el.querySelectorAll(".action-extra-arg-name");e.length&&e[e.length-1].focus()}))},onArgEdit(e,t){this.$emit("arg-edit",{name:e,value:t.target?.value||t.detail})},onExtraArgNameEdit(e,t){this.$emit("extra-arg-name-edit",{index:e,value:t})},onExtraArgValueEdit(e,t){this.$emit("extra-arg-value-edit",{index:e,value:t})},onSelect(e){this.$emit("select",e)},onKeyDown(e){"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||this.onEnter(e)},onEnter(e){e.target.tagName.match(/input|textarea/i)&&(e.preventDefault(),this.$emit("input",this.allArgs))}}};const ue=(0,ie.A)(ce,[["render",H],["__scopeId","data-v-f4ee7f72"]]);var he=ue;const de=e=>((0,s.Qi)("data-v-105c186a"),e=e(),(0,s.jt)(),e),ge={key:0,class:"doc-container"},pe={class:"title"},me=de((()=>(0,s.Lk)("i",{class:"fas fa-book"},null,-1))),ve=["href"],fe={key:0,class:"buttons"},be=de((()=>(0,s.Lk)("i",{class:"fas fa-puzzle-piece"},null,-1))),ye=[be],ke=de((()=>(0,s.Lk)("i",{class:"fas fa-terminal"},null,-1))),Ae=[ke],xe={class:"doc html"},Ie=["innerHTML"];function Le(e,t,n,i,r,o){const a=(0,s.g2)("Loading");return n.doc?.length?((0,s.uX)(),(0,s.CE)("section",ge,[(0,s.Lk)("h2",null,[(0,s.Lk)("div",pe,[me,(0,s.eW)("   "),(0,s.Lk)("a",{href:n.action?.doc_url},"Action documentation",8,ve)]),n.action?.name?((0,s.uX)(),(0,s.CE)("div",fe,[o.pluginName?.length?((0,s.uX)(),(0,s.CE)("button",{key:0,type:"button",title:"Go to extension",onClick:t[0]||(t[0]=(...e)=>o.onExtClick&&o.onExtClick(...e))},ye)):(0,s.Q3)("",!0),n.curlSnippet?.length?((0,s.uX)(),(0,s.CE)("button",{key:1,type:"button",title:"cURL command",onClick:t[1]||(t[1]=t=>e.$emit("curl-modal"))},Ae)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",xe,[n.loading?((0,s.uX)(),(0,s.Wv)(a,{key:0})):((0,s.uX)(),(0,s.CE)("span",{key:1,innerHTML:n.doc},null,8,Ie))])])):(0,s.Q3)("",!0)}var Ce={name:"ActionDoc",components:{Loading:ne.A},emits:["curl-modal"],props:{action:Object,doc:String,curlSnippet:String,loading:Boolean},computed:{pluginName(){const e=(this.action?.name||"").split(".");return e.length>1?e.slice(0,-1).join("."):null}},methods:{onExtClick(){window.location.href=`/#extensions?extension=${this.pluginName}`}}};const we=(0,ie.A)(Ce,[["render",Le],["__scopeId","data-v-105c186a"]]);var Ee=we,Se=n(9427),$e=n(9513),Te=n(9954),Oe=n(5054),qe=n(3556),Xe=n(2002),De={mixins:[Xe.A],emits:["input"],components:{ActionArgs:he,ActionDoc:Ee,Autocomplete:Se.A,Loading:ne.A,Modal:$e.A,Response:Te.A,Tab:Oe.A,Tabs:qe.A},props:{context:{type:Object,default:()=>({})},value:{type:Object},withSave:{type:Boolean,default:!1}},data(){return{loading:!1,running:!1,docLoading:!1,structuredInput:!0,selectedDoc:void 0,selectedArg:void 0,selectedArgdoc:void 0,response:void 0,error:void 0,rawRequest:void 0,rawRequestPlaceholder:'Raw JSON request. Example:\n\n{"type": "request", "action": "file.list", "args": {"path": "/"}}',actions:{},plugins:{},procedures:{},actionDocsCache:{},action:{name:void 0,args:{},extraArgs:[],supportsExtraArgs:!1}}},computed:{currentActionDocURL(){return this.action?.doc_url},isValidAction(){return this.action?.name?.length&&this.action.name in this.actions&&Object.values(this.action.args).every((e=>!e.required||e.value?.length))},autocompleteItems(){let e=this.getPluginName(this.action.name),t=[];return e in this.plugins?t=Object.keys(this.actions).sort():(e=void 0,t=Object.keys(this.plugins).sort().map((e=>`${e}.`))),t.map((t=>{const n=e||t.replace(/\.+$/,"");return{prefix:`\n            <img src="https://static.platypush.tech/icons/${n}-64.png"\n                 style="width: 1em; height: 1em; margin-right: 0.75em"\n                 class="plugin-icon" />`,text:t}}))},actionInput(){return this.$refs.autocomplete.$el.parentElement.querySelector("input[type=text]")},requestArgs(){return this.action.name?{...Object.entries(this.action.args).reduce(((e,t)=>{if(null!=t[1].value){let s=t[1].value;try{s=JSON.parse(s)}catch(n){console.debug("Not a valid JSON value"),console.debug(s)}e[t[0]]=s}return e}),{}),...(this.action.extraArgs||[]).reduce(((e,t)=>{let n=t.value;try{n=JSON.parse(n)}catch(s){console.debug("Not a valid JSON value"),console.debug(n)}return e[t.name]=n,e}),{})}:{}},curlURL(){return`${window.location.protocol}//${window.location.host}/execute`},curlSnippet(){if(!this.action.name)return"";const e={type:"request",action:this.action.name,args:this.requestArgs},t=JSON.stringify(e,null,2);return`curl -XPOST -H "Content-Type: application/json" \\\n  -H "Cookie: session_token=${this.getCookies()["session_token"]}" \\\n  -d '\n  {\n    `+this.indent(t.split("\n").slice(1,t.length-2).join("\n"),2).trim()+"' \\\n  "+`'${this.curlURL}'`},highlightedCurlSnippet(){return T.A.highlight("# Note: Replace the cookie with a JWT token for production cases\n"+this.curlSnippet,{language:"bash"}).value}},methods:{async refresh(){this.loading=!0;try{[this.procedures,this.plugins]=await Promise.all([this.request("inspect.get_procedures"),this.request("inspect.get_all_plugins")])}finally{this.loading=!1}this.plugins.procedure={name:"procedure",actions:Object.entries(this.procedures||{}).reduce(((e,[t,n])=>(e[t]={name:t,args:(n.args||[]).reduce(((e,t)=>(e[t]={name:t,required:!1},e)),{}),supportsExtraArgs:!0},e)),{})};for(const n of Object.values(this.plugins))for(const e of Object.values(n.actions))e.name=n.name+"."+e.name,e.supportsExtraArgs=!!e.has_kwargs,delete e.has_kwargs,this.actions[e.name]=e;const e=this.getUrlArgs(),t=e?.action;t?.length&&t in this.actions&&t!==this.action.name&&this.updateAction(t)},async updateAction(e,t){let{force:n,args:s,extraArgs:i}=t||{};if(s||(s={}),i||(i=[]),e!==this.action.name||n){if(this.action.name=e,!(this.action.name in this.actions))return this.selectedDoc=void 0,void this.resetArgdoc();this.resetArgdoc(),this.docLoading=!0;try{this.action={...this.actions[this.action.name],args:Object.entries(this.actions[this.action.name].args).reduce(((e,t)=>(e[t[0]]={...t[1],value:s?.[t[0]]??t[1].default},e)),{}),extraArgs:i||[]}}finally{this.docLoading=!1}this.selectedDoc=this.actionDocsCache[this.action.name]?.html||await this.parseDoc(this.action.doc),this.actionDocsCache[this.action.name]||(this.actionDocsCache[this.action.name]={}),this.actionDocsCache[this.action.name].html=this.selectedDoc,this.setUrlArgs({action:this.action.name}),this.$nextTick((()=>{const e=this.$el.querySelector(".args-body input[type=text]");e?e.focus():this.actionInput.focus()})),this.response=void 0,this.error=void 0}},async parseDoc(e){return e?.length?await this.request("utils.rst_to_html",{text:e}):e},addArg(){this.action.extraArgs.push({name:void 0,value:void 0})},removeArg(e){this.action.extraArgs.pop(e)},async selectArgdoc(e){e?.length&&(this.selectedArg=e,this.selectedArgdoc=this.actionDocsCache[this.action.name]?.[e]?.html||await this.parseDoc(this.action.args[e].doc),this.actionDocsCache[this.action.name]||(this.actionDocsCache[this.action.name]={}),this.actionDocsCache[this.action.name][e]={html:this.selectedArgdoc})},resetArgdoc(){this.selectedArg=void 0,this.selectedArgdoc=void 0},onInputTypeChange(e){this.structuredInput=e,this.response=void 0,this.error=void 0,this.$nextTick((()=>{e?this.actionInput.focus():(this.$refs.rawAction.focus(),this.isValidAction&&(this.rawRequest=JSON.stringify(this.toRequest(this.action),null,2)))}))},onResponse(e){this.response=("string"===typeof e?e:JSON.stringify(e,null,2)).trim(),this.error=void 0},onError(e){this.response=void 0,this.error=e},onDone(){this.running=!1},getPluginName(e){return e?.length?e.split(".").slice(0,-1).join("."):""},executeAction(){if((this.action.name||this.rawRequest)&&!this.running)if(this.running=!0,this.structuredInput)this.request(this.action.name,this.requestArgs).then(this.onResponse).catch(this.onError).finally(this.onDone);else try{const e=JSON.parse(this.rawRequest);this.execute(e).then(this.onResponse).catch(this.onError).finally(this.onDone)}catch(e){this.notify({error:!0,title:"Invalid JSON request",text:e.toString()})}},toRequest(e){return{type:"request",action:e.name,args:this.requestArgs}},emitInput(e){e=e||this.value,e&&this.$emit("input",this.toRequest(e))},onClick(e){"a"===e.target.tagName.toLowerCase()&&(e.stopPropagation(),e.preventDefault(),window.open(e.target.getAttribute("href","_blank")))},onValueChanged(e){if(e=e||this.value,!e)return;const t=e.name||e.action;this.$nextTick((()=>{this.updateAction(t,{force:!0,args:e.args||{},extraArgs:e.extraArgs||[]})}))},onSubmit(){this.isValidAction&&(this.withSave?this.emitInput(this.action):this.executeAction())}},watch:{value:{immediate:!0,handler(e){this.onValueChanged(e)}}},async mounted(){await this.refresh(),this.onValueChanged()},unmounted(){this.actionDocsCache={},this.setUrlArgs({action:void 0})}};const je=(0,ie.A)(De,[["render",$],["__scopeId","data-v-521241df"]]);var Re=je},3714:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var s=n(641);const i={class:"autocomplete-with-context"},r={class:"spacer",ref:"spacer"};function o(e,t,n,o,a,l){const c=(0,s.g2)("Autocomplete");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(c,(0,s.v6)(l.autocompleteProps,{onBlur:l.onBlur,onFocus:l.onFocus,onInput:l.onInput,onSelect:l.onSelect,ref:"input"}),null,16,["onBlur","onFocus","onInput","onSelect"]),(0,s.Lk)("div",r,null,512)])}var a=n(9427),l=n(7352),c={emits:["blur","focus","input"],components:{Autocomplete:a.A},mixins:[l.A],props:{quote:{type:Boolean,default:!1}},computed:{autocompleteItemsElement(){return this.$refs.input?.$el?.querySelector(".items")},autocompleteItemsHeight(){return this.autocompleteItemsElement?.clientHeight||0},autocompleteProps(){return{...Object.fromEntries(Object.entries(this.$props).filter((([e])=>"quote"!==e))),items:this.items,value:this.value,inputOnBlur:!1,inputOnSelect:!1,showAllItems:!0,showResultsWhenBlank:!0}},textInput(){return this.$refs.input?.$refs?.input}},methods:{emitInput(e){this.$emit("input",new CustomEvent("input",{detail:e,bubbles:!0,cancelable:!0}))},isWithinQuote(e){let t=!1,n=""+this.value;e=[...e];while(e[0]>0){if("$"===n[e[0]-1]&&"{"===n[e[0]]){t=!0;break}e[0]--}if(!t)return!1;t=!1;while(e[1]<n.length){if("}"===n[e[1]]){t=!0;break}e[1]++}return t},onBlur(e){this.$emit("blur",e),this.$refs.spacer.style.height="0"},onFocus(e){this.$emit("focus",e),setTimeout((()=>{this.$refs.spacer.style.height=`${this.autocompleteItemsHeight}px`}),10)},onInput(e){const t=this.textSelection();this.emitInput(e),this.resetSelection(t)},onSelect(e){this.$nextTick((()=>{const t=this.textSelection();e=this.quote&&!this.isWithinQuote(t)?`\${${e}}`:e;const n="string"===typeof this.value?this.value.slice(0,t[0])+e+this.value.slice(t[1]):e;this.emitInput(n),this.resetSelection([t[0]+e.length,t[0]+e.length])}))},resetSelection(e){setTimeout((()=>{this.textInput?.focus(),this.textInput?.setSelectionRange(e[0],e[1])}),10)},textSelection(){return[this.textInput?.selectionStart,this.textInput?.selectionEnd]}}},u=n(6262);const h=(0,u.A)(c,[["render",o]]);var d=h},875:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});n(4114);var s={props:{context:{type:Object,default:()=>({})}},computed:{contextAutocompleteItems(){return Object.entries(this.context).reduce(((e,[t,n])=>{let s='<span class="source">from <b>'+("local"===n?.source?"local context":n?.source)+"</b>";return"action"===n?.source&&n?.action?.action&&(s+=` (<i>${n?.action?.action}</i>)`),s+="</span>",e.push({text:t,suffix:s}),e}),[])},textInput(){return this.$refs.input?.$refs?.input?.$refs?.input}},methods:{getCondition(e){return e=this.getKey(e)||e,e?.trim?.()?.match(/^if\s*\$\{(.*)\}\s*$/i)?.[1]?.trim?.()},getFor(e){e=this.getKey(e)||e;let t=e?.trim?.()?.match(/^for(k?)\s*(.*)\s*in\s*\$\{(.*)\}\s*$/i);return t?{async:t[1].length>0,iterator:t[2].trim(),iterable:t[3].trim()}:null},getKey(e){return this.isKeyword(e)?Object.keys(e)[0]:null},getWhile(e){return e=this.getKey(e)||e,e?.trim?.()?.match(/^while\s*\$\{(.*)\}\s*$/i)?.[1]?.trim?.()},isAction(e){return"object"===typeof e&&!Array.isArray(e)&&(e.action||e.name)},isActionsBlock(e){return this.getCondition(e)||this.isElse(e)||this.getFor(e)||this.getWhile(e)},isBreak(e){return"break"===e?.toLowerCase?.()?.trim?.()},isContinue(e){return"continue"===e?.toLowerCase?.()?.trim?.()},isKeyword(e){return e&&"object"===typeof e&&!Array.isArray(e)&&1===Object.keys(e).length&&!this.isAction(e)},isElse(e){return"else"===(this.getKey(e)||e)?.toLowerCase?.()?.trim?.()},isReturn(e){return!!e&&(Array.isArray(e)?1===e.length&&e[0]?.length&&e[0].match(/^return\s*$/i):"return"===this.getKey(e))},isSet(e){return"set"===this.getKey(e)}}};const i=s;var r=i},9954:function(e,t,n){"use strict";n.d(t,{A:function(){return I}});var s=n(641),i=n(33);const r=e=>((0,s.Qi)("data-v-6d883d44"),e=e(),(0,s.jt)(),e),o={class:"response"},a={key:0},l={class:"title"},c={class:"buttons"},u=r((()=>(0,s.Lk)("i",{class:"fas fa-clipboard"},null,-1))),h=[u],d={key:1,class:"output response"},g=["innerHTML"],p=["textContent"],m={key:2,class:"output error"},v=["textContent"];function f(e,t,n,r,u,f){return(0,s.uX)(),(0,s.CE)("section",o,[null!=n.error||null!=n.response?((0,s.uX)(),(0,s.CE)("h2",a,[(0,s.Lk)("span",l,(0,i.v_)(null!=n.error?"Error":"Output"),1),(0,s.Lk)("span",c,[(0,s.Lk)("button",{type:"button",title:"Copy to clipboard",onClick:t[0]||(t[0]=t=>e.copyToClipboard(n.response))},h)])])):(0,s.Q3)("",!0),null!=n.response?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("pre",null,[null!=f.jsonResponse?((0,s.uX)(),(0,s.CE)("code",{key:0,innerHTML:f.jsonResponse},null,8,g)):((0,s.uX)(),(0,s.CE)("code",{key:1,textContent:(0,i.v_)(n.response)},null,8,p))])])):null!=n.error?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("pre",{textContent:(0,i.v_)(n.error)},null,8,v)])):(0,s.Q3)("",!0)])}n(1545),n(7907);var b=n(9878),y=n(2002),k={name:"Response",mixins:[y.A],props:{response:{type:[String,Object,Array,Number,Boolean]},error:{type:[String,Object]}},computed:{isJSON(){try{return null!=JSON.parse(this.response)}catch(e){return!1}},jsonResponse(){return this.isJSON?b.A.highlight(this.response.toString(),{language:"json"}).value:null}}},A=n(6262);const x=(0,A.A)(k,[["render",f],["__scopeId","data-v-6d883d44"]]);var I=x},9427:function(e,t,n){"use strict";n.d(t,{A:function(){return y}});var s=n(641),i=n(33),r=n(3751);const o=["text"],a=["placeholder","disabled","value"],l={key:0,class:"items",ref:"items"},c=["data-item","onClick"],u=["innerHTML"],h={key:1,class:"matching"},d={class:"normal"},g=["innerHTML"];function p(e,t,n,p,m,v){return(0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["autocomplete",{"with-items":v.showItems}])},[(0,s.Lk)("label",{text:e.label},[(0,s.Lk)("input",{type:"text",class:"input",ref:"input",placeholder:e.placeholder,disabled:e.disabled,value:e.value,onFocus:t[0]||(t[0]=(0,r.D$)(((...e)=>v.onFocus&&v.onFocus(...e)),["stop"])),onInput:t[1]||(t[1]=(0,r.D$)(((...e)=>v.onInput&&v.onInput(...e)),["stop"])),onBlur:t[2]||(t[2]=(...e)=>v.onBlur&&v.onBlur(...e)),onKeydown:t[3]||(t[3]=(...e)=>v.onInputKeyDown&&v.onInputKeyDown(...e)),onKeyup:t[4]||(t[4]=(...e)=>v.onInputKeyUp&&v.onInputKeyUp(...e))},null,40,a)],8,o),v.showItems?((0,s.uX)(),(0,s.CE)("div",l,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.visibleItems,((t,n)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["item",{active:n===m.curIndex}]),key:v.getItemText(t),"data-item":v.getItemText(t),onClick:(0,r.D$)((e=>v.onItemSelect(t)),["stop"])},[t.prefix?((0,s.uX)(),(0,s.CE)("span",{key:0,class:"prefix",innerHTML:t.prefix},null,8,u)):(0,s.Q3)("",!0),e.value?.length?((0,s.uX)(),(0,s.CE)("span",h,(0,i.v_)(v.getItemText(t).substr(0,e.value.length)),1)):(0,s.Q3)("",!0),(0,s.Lk)("span",d,(0,i.v_)(v.getItemText(t).substr(e.value?.length||0)),1),t.suffix?((0,s.uX)(),(0,s.CE)("span",{key:2,class:"suffix",innerHTML:t.suffix},null,8,g)):(0,s.Q3)("",!0)],10,c)))),128))],512)):(0,s.Q3)("",!0)],2)}var m=n(7352),v={emits:["blur","focus","input","select"],mixins:[m.A],data(){return{visible:!1,curIndex:null,selectItemTimer:null}},computed:{itemsText(){return this.items.map((e=>this.getItemText(e)))},visibleItems(){if(!this.value?.length||this.showAllItems)return this.items;const e=this.value.toUpperCase();return e?.length?this.items.filter((t=>this.getItemText(t).substr(0,e.length).toUpperCase()===e)):this.showResultsWhenBlank?this.items:[]},showItems(){return this.visible&&this.items?.length}},methods:{getItemText(e){return e?.text||e},valueIsInItems(){return!!this.showAllItems||!!this.value&&this.itemsText.indexOf(this.value)>=0},onFocus(e){this.$emit("focus",e),(this.showResultsWhenBlank||this.value?.length)&&(this.visible=!0)},onInput(e){let t=e.target?.value;null!=t?(this.valueIsInItems()&&(this.visible=!1),e.stopPropagation(),this.$emit("input",t.text||t),this.curIndex=null,this.visible=!0):e.stopPropagation?.()},onBlur(e){if(this.inputOnBlur)return this.onInput(e),void this.$nextTick((()=>{this.valueIsInItems()&&(this.visible=!1)}));e.stopPropagation(),this.$nextTick((()=>this.$refs.input.focus())),setTimeout((()=>{this.selectItemTimer?this.$nextTick((()=>this.$refs.input.focus())):(this.$emit("blur",e),this.valueIsInItems()&&(this.visible=!1))}),200)},onItemSelect(e){this.selectItemTimer&&(clearTimeout(this.selectItemTimer),this.selectItemTimer=null),this.selectItemTimer=setTimeout((()=>{this.selectItemTimer=null}),250);const t=e.text||e;this.$emit("select",t),this.inputOnSelect&&this.$emit("input",t),this.$nextTick((()=>{this.valueIsInItems()&&(this.inputOnSelect?this.visible=!1:(this.visible=!0,this.curIndex=this.visibleItems.indexOf(e),this.curIndex<0&&(this.curIndex=null),this.$refs.input.focus()))}))},onInputKeyUp(e){(["ArrowUp","ArrowDown","Escape"].indexOf(e.key)>=0||"Tab"===e.key&&this.selectOnTab||"Enter"===e.key&&null!=this.curIndex)&&e.stopPropagation(),"Enter"===e.key&&this.valueIsInItems()&&null!=this.curIndex&&(this.$refs.input.blur(),this.visible=!1)},onInputKeyDown(e){this.showItems&&(e.stopPropagation(),"ArrowDown"===e.key||"Tab"===e.key&&!e.shiftKey&&this.selectOnTab||"j"===e.key&&e.ctrlKey?(this.curIndex=null==this.curIndex?0:this.curIndex+1,e.preventDefault()):"ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey&&this.selectOnTab||"k"===e.key&&e.ctrlKey?(this.curIndex=null==this.curIndex?this.visibleItems.length-1:this.curIndex-1,e.preventDefault()):"Enter"===e.key?null!=this.curIndex&&this.curIndex>=0&&this.visible&&(e.preventDefault(),this.onItemSelect(this.visibleItems[this.curIndex]),this.$nextTick((()=>this.$refs.input.focus()))):"Escape"===e.key&&(this.visible=!1))},onDocumentClick(e){this.$el.contains(e.target)||e.target.classList.contains("item")||(this.visible=!1)}},watch:{curIndex(){if(null==this.curIndex)return;this.curIndex>=this.visibleItems.length&&(this.curIndex=0),this.curIndex<0&&(this.curIndex=this.visibleItems.length-1);const e=this.getItemText(this.visibleItems[this.curIndex]),t=this.$el.querySelector(`[data-item='${e}']`);t&&t.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}},mounted(){document.addEventListener("click",this.onDocumentClick),this.autofocus&&this.$refs.input.focus()}},f=n(6262);const b=(0,f.A)(v,[["render",p],["__scopeId","data-v-b5c29388"]]);var y=b},5054:function(e,t,n){"use strict";n.d(t,{A:function(){return h}});var s=n(641),i=n(33);const r={key:0,class:"icon"};function o(e,t,n,o,a,l){const c=(0,s.g2)("Icon");return(0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["tab",n.selected?"selected":""]),onClick:t[0]||(t[0]=t=>e.$emit("input"))},[n.iconClass?.length||n.iconUrl?.length?((0,s.uX)(),(0,s.CE)("span",r,[(0,s.bF)(c,{class:(0,i.C4)(n.iconClass),url:n.iconUrl},null,8,["class","url"])])):(0,s.Q3)("",!0),(0,s.eW)("   "),(0,s.RG)(e.$slots,"default",{},void 0,!0)],2)}var a=n(3778),l={name:"Tab",components:{Icon:a.A},emits:["input"],props:{selected:{type:Boolean,default:!1},iconClass:{type:String},iconUrl:{type:String}}},c=n(6262);const u=(0,c.A)(l,[["render",o],["__scopeId","data-v-f3217d34"]]);var h=u},3556:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var s=n(641);const i={class:"tabs"};function r(e,t,n,r,o,a){return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.RG)(e.$slots,"default",{},void 0,!0)])}var o={name:"Tabs"},a=n(6262);const l=(0,a.A)(o,[["render",r],["__scopeId","data-v-f4300bb0"]]);var c=l},7352:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var s={props:{items:{type:Array,required:!0},value:{type:[String,Number,Object,Array,Boolean],default:""},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},label:{type:String},placeholder:{type:String},inputOnBlur:{type:Boolean,default:!0},inputOnSelect:{type:Boolean,default:!0},selectOnTab:{type:Boolean,default:!0},showAllItems:{type:Boolean,default:!1},showResultsWhenBlank:{type:Boolean,default:!1}}};const i=s;var r=i},3094:function(e,t,n){var s=n(8416);s.registerLanguage("xml",n(114)),s.registerLanguage("bash",n(8641)),s.registerLanguage("c",n(722)),s.registerLanguage("cpp",n(6570)),s.registerLanguage("csharp",n(7120)),s.registerLanguage("css",n(8612)),s.registerLanguage("markdown",n(602)),s.registerLanguage("diff",n(8596)),s.registerLanguage("ruby",n(5015)),s.registerLanguage("go",n(9777)),s.registerLanguage("graphql",n(7474)),s.registerLanguage("ini",n(1533)),s.registerLanguage("java",n(4895)),s.registerLanguage("javascript",n(6035)),s.registerLanguage("json",n(621)),s.registerLanguage("kotlin",n(2838)),s.registerLanguage("less",n(8330)),s.registerLanguage("lua",n(3873)),s.registerLanguage("makefile",n(7667)),s.registerLanguage("perl",n(946)),s.registerLanguage("objectivec",n(943)),s.registerLanguage("php",n(3111)),s.registerLanguage("php-template",n(1726)),s.registerLanguage("plaintext",n(9040)),s.registerLanguage("python",n(1117)),s.registerLanguage("python-repl",n(2664)),s.registerLanguage("r",n(8129)),s.registerLanguage("rust",n(5409)),s.registerLanguage("scss",n(1611)),s.registerLanguage("shell",n(8813)),s.registerLanguage("sql",n(315)),s.registerLanguage("swift",n(1496)),s.registerLanguage("yaml",n(5588)),s.registerLanguage("typescript",n(8640)),s.registerLanguage("vbnet",n(8928)),s.registerLanguage("wasm",n(9351)),s.HighlightJS=s,s.default=s,e.exports=s},1545:function(e,t,n){"use strict";n(3094)}}]);
//# sourceMappingURL=5928.9c1597d3.js.map