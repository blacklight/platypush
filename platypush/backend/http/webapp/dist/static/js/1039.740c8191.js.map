{"version":3,"file":"static/js/1039.740c8191.js","mappings":"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","sources":["webpack://platypush/./src/components/panels/Media/Providers/Jellyfin/views/Media/Index.vue","webpack://platypush/./src/components/panels/Media/Providers/Jellyfin/views/Media/Index.vue?0661"],"sourcesContent":["<template>\n  <div class=\"videos index\">\n    <Loading v-if=\"isLoading\" />\n\n    <div class=\"wrapper music-wrapper\" v-else-if=\"collection?.collection_type === 'music'\">\n      <Music :collection=\"collection\"\n             :filter=\"filter\"\n             :loading=\"isLoading\"\n             :path=\"path\"\n             @play=\"$emit('play', $event)\"\n             @play-with-opts=\"$emit('play-with-opts', $event)\"\n             @select=\"selectedResult = $event; $emit('select', $event)\"\n             @select-collection=\"selectCollection\" />\n    </div>\n\n    <NoItems :with-shadow=\"false\"\n             v-else-if=\"!items?.length\">\n      No videos found.\n    </NoItems>\n\n    <div class=\"wrapper items-wrapper\" v-else>\n      <Collections :collection=\"collection\"\n                   :filter=\"filter\"\n                   :items=\"collections\"\n                   :loading=\"isLoading\"\n                   :parent-id=\"collection?.id\"\n                   @select=\"selectCollection\"\n                   v-if=\"collections.length > 0\" />\n\n      <Results :results=\"mediaItems\"\n               :sources=\"{'jellyfin': true}\"\n               :filter=\"filter\"\n               :selected-result=\"selectedResult\"\n               @add-to-playlist=\"$emit('add-to-playlist', $event)\"\n               @download=\"$emit('download', $event)\"\n               @play=\"$emit('play', $event)\"\n               @play-with-opts=\"$emit('play-with-opts', $event)\"\n               @remove-from-playlist=\"$emit('remove-from-playlist', $event)\"\n               @select=\"selectedResult = $event\"\n               v-if=\"mediaItems.length > 0\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Collections from \"@/components/panels/Media/Providers/Jellyfin/Collections\";\nimport Loading from \"@/components/Loading\";\nimport Mixin from \"@/components/panels/Media/Providers/Jellyfin/Mixin\";\nimport Music from \"../Music/Index\";\nimport NoItems from \"@/components/elements/NoItems\";\nimport Results from \"@/components/panels/Media/Results\";\n\nexport default {\n  mixins: [Mixin],\n  emits: ['select', 'select-collection'],\n  components: {\n    Collections,\n    Loading,\n    Music,\n    NoItems,\n    Results,\n  },\n\n  computed: {\n    collections() {\n      return this.sortedItems?.filter((item) => item.item_type === 'collection') ?? []\n    },\n\n    mediaItems() {\n      const items = this.sortedItems?.filter((item) => item.item_type !== 'collection') ?? []\n\n      if (this.collection && !this.collection.collection_type) {\n        return items.sort((a, b) => {\n          if (a.created_at && b.created_at)\n            return (new Date(a.created_at)) < (new Date(b.created_at))\n\n          if (a.created_at)\n            return -1\n\n          if (b.created_at)\n            return 1\n\n          let names = [a.name || a.title || '', b.name || b.title || '']\n          return names[0].localeCompare(names[1])\n        })\n      }\n\n      return items\n    },\n  },\n\n  methods: {\n    selectCollection(collection) {\n      this.$emit('select-collection', {\n        type: 'homevideos',\n        ...collection,\n      })\n    },\n\n    async init() {\n      const args = this.getUrlArgs()\n      let collection = args?.collection\n      if (!collection)\n        return\n\n      this.loading_ = true\n      try {\n        collection = await this.request('media.jellyfin.info', {\n          item_id: collection,\n        })\n\n        if (collection)\n          this.selectCollection(collection)\n      } finally {\n        this.loading_ = false\n      }\n    },\n\n    async refresh() {\n      // Don't fetch items if we're in the music view -\n      // we'll fetch them in the Music component\n      if (this.collection?.collection_type === 'music')\n        return\n\n      this.loading_ = true\n      try {\n        if (this.collection?.collection_type === 'tvshows') {\n          this.items = (\n            await this.request('media.jellyfin.get_collections', {\n              parent_id: this.collection.id,\n            })\n          ).map((collection) => ({\n            ...collection,\n            item_type: 'collection',\n          }))\n        } else {\n          this.items = this.collection?.id ?\n            (\n              await this.request('media.jellyfin.get_items', {\n                parent_id: this.collection.id,\n                limit: 25000,\n              })\n            ) : (await this.request('media.jellyfin.get_collections')).map((collection) => ({\n              ...collection,\n              item_type: 'collection',\n            }))\n        }\n      } finally {\n        this.loading_ = false\n      }\n    },\n  },\n\n  async mounted() {\n    this.init()\n    await this.refresh()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/components/panels/Media/Providers/Jellyfin/common.scss\";\n\n.index {\n  position: relative;\n\n  :deep(.items-wrapper) {\n    height: 100%;\n    position: relative;\n    overflow: auto;\n\n    .index {\n      height: fit-content;\n    }\n\n    .items {\n      overflow: hidden;\n    }\n  }\n\n  .music-wrapper {\n    height: 100%;\n  }\n}\n</style>\n","import { render } from \"./Index.vue?vue&type=template&id=d3b1ee0c&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=d3b1ee0c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d3b1ee0c\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_ctx","isLoading","_createBlock","_component_Loading","key","collection","collection_type","_hoisted_2","_createVNode","_component_Music","filter","loading","path","onPlay","_cache","$event","$emit","onPlayWithOpts","onSelect","selectedResult","onSelectCollection","$options","selectCollection","items","length","_hoisted_3","collections","_component_Collections","id","mediaItems","_component_Results","results","sources","onAddToPlaylist","onDownload","onRemoveFromPlaylist","_component_NoItems","mixins","Mixin","emits","components","Collections","Loading","Music","NoItems","Results","computed","this","sortedItems","item","item_type","sort","a","b","created_at","Date","names","name","title","localeCompare","methods","type","init","args","getUrlArgs","loading_","request","item_id","refresh","parent_id","map","limit","mounted","__exports__","render"],"sourceRoot":""}