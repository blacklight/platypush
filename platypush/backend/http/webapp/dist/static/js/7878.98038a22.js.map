{"version":3,"file":"static/js/7878.98038a22.js","mappings":"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","sources":["webpack://platypush/./src/components/panels/Entities/Index.vue","webpack://platypush/./src/components/panels/Entities/Index.vue?4523","webpack://platypush/./src/components/panels/Entities/Selector.vue","webpack://platypush/./src/components/panels/Entities/Selector.vue?bf8b","webpack://platypush/./src/components/panels/Entities/VariableModal.vue","webpack://platypush/./src/components/panels/Entities/VariableModal.vue?db72"],"sourcesContent":["<template>\n  <div class=\"row plugin entities-container\">\n    <Loading v-if=\"loading\" />\n\n    <header>\n      <Selector\n        :entity-groups=\"entityGroups\"\n        :value=\"selector\"\n        @input=\"selector = $event\"\n        @refresh=\"refresh\"\n        @show-variable-modal=\"variableModalVisible = true\"\n      />\n    </header>\n\n    <div class=\"groups-canvas\">\n      <EntityModal\n        :entity=\"entities[modalEntityId]\"\n        :parent=\"entities[entities[modalEntityId].parent_id]\"\n        :children=\"childrenByParentId(modalEntityId)\"\n        :visible=\"modalVisible\"\n        :config-values=\"configValuesByParentId(modalEntityId)\"\n        @close=\"onEntityModal\"\n        @entity-update=\"modalEntityId = $event\"\n        v-if=\"modalEntityId && entities[modalEntityId]\"\n      />\n\n      <VariableModal :visible=\"variableModalVisible\" @close=\"variableModalVisible = false\" />\n      <NoItems v-if=\"!Object.keys(displayGroups || {})?.length\">No entities found</NoItems>\n\n      <div class=\"groups-container\" v-else>\n        <div class=\"group fade-in\" v-for=\"group in displayGroups\" :key=\"group.name\">\n          <div class=\"frame\">\n            <div class=\"header\">\n              <span class=\"section left\">\n                <Icon v-bind=\"entitiesMeta[typesByCategory[group.name]].icon || {}\"\n                  v-if=\"selector.grouping === 'category' && entitiesMeta[typesByCategory[group.name]]\" />\n                <Icon :class=\"pluginIcons[group.name]?.class\" :url=\"pluginIcons[group.name]?.imgUrl\"\n                  v-else-if=\"selector.grouping === 'plugin' && pluginIcons[group.name]\" />\n              </span>\n\n              <span class=\"section center\">\n                <div class=\"title\" v-text=\"group.name\" />\n              </span>\n\n              <span class=\"section right\">\n                <Dropdown title=\"Actions\" icon-class=\"fa fa-ellipsis-h\">\n                  <DropdownItem text=\"Refresh\" icon-class=\"fa fa-sync-alt\" @click=\"refresh(group)\" />\n                  <DropdownItem text=\"Hide\" icon-class=\"fa fa-eye-slash\" @click=\"hideGroup(group)\" />\n                  <DropdownItem text=\"Collapse\" icon-class=\"fa fa-caret-up\"\n                    @click=\"collapsedGroups[group.name] = true\" v-if=\"!collapsedGroups[group.name]\" />\n                  <DropdownItem text=\"Expand\" icon-class=\"fa fa-caret-down\"\n                    @click=\"collapsedGroups[group.name] = false\" v-else />\n                </Dropdown>\n              </span>\n            </div>\n\n            <div class=\"body\" v-if=\"!collapsedGroups[group.name]\">\n              <div class=\"entity-frame\"\n                 v-for=\"entity in Object.values(group.entities).sort((a, b) => a.name.localeCompare(b.name))\"\n                 :key=\"entity.id\">\n                <Entity\n                  :value=\"entity\"\n                  :children=\"childrenByParentId(entity.id)\"\n                  :all-entities=\"entities\"\n                  @show-modal=\"onEntityModal($event)\"\n                  @input=\"onEntityInput(entity)\"\n                  :error=\"!!errorEntities[entity.id]\"\n                  :key=\"entity.id\"\n                  :loading=\"!!loadingEntities[entity.id]\"\n                  @loading=\"loadingEntities[entity.id] = $event\"\n                  v-if=\"!entity.parent_id\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Utils from \"@/Utils\"\nimport Dropdown from \"@/components/elements/Dropdown\";\nimport DropdownItem from \"@/components/elements/DropdownItem\";\nimport Loading from \"@/components/Loading\";\nimport Icon from \"@/components/elements/Icon\";\nimport NoItems from \"@/components/elements/NoItems\";\nimport Entity from \"./Entity.vue\";\nimport Selector from \"./Selector.vue\";\nimport EntityModal from \"./Modal\"\nimport VariableModal from \"./VariableModal\"\nimport { bus } from \"@/bus\";\nimport icons from '@/assets/icons.json'\nimport meta from './meta.json'\n\nexport default {\n  name: \"Entities\",\n  mixins: [Utils],\n  components: {\n    Dropdown,\n    DropdownItem,\n    Entity,\n    EntityModal,\n    Icon,\n    Loading,\n    NoItems,\n    Selector,\n    VariableModal,\n  },\n\n  props: {\n    // Entity scan timeout in seconds\n    entityScanTimeout: {\n      type: Number,\n      default: 30,\n    },\n  },\n\n  data() {\n    return {\n      loading: false,\n      loadingEntities: {},\n      errorEntities: {},\n      entityTimeouts: {},\n      entities: {},\n      entityGroups: {\n        id: {},\n        category: {},\n        plugin: {},\n        type: {},\n      },\n      modalEntityId: null,\n      modalVisible: false,\n      variableModalVisible: false,\n      selector: {\n        grouping: 'plugin',\n        selectedEntities: {},\n        selectedGroups: {},\n      },\n      collapsedGroups: {},\n    }\n  },\n\n  computed: {\n    entitiesMeta() {\n      return meta\n    },\n\n    pluginIcons() {\n      return icons\n    },\n\n    typesByCategory() {\n      return Object.entries(meta).reduce((obj, [type, meta]) => {\n          obj[meta.name_plural] = type\n          return obj\n      }, {})\n    },\n\n    displayGroups() {\n      return Object.entries(this.entityGroups[this.selector.grouping])\n        .filter((entry) => this.selector.selectedGroups[entry[0]])\n        .map(\n          ([grouping, entities]) => {\n            return {\n              name: grouping,\n              entities: Object.values(entities).filter(\n                (e) => e.id in this.selector.selectedEntities\n              ),\n            }\n          }\n        )\n        .filter((group) => group.entities?.length > 0)\n        .sort((a, b) => a.name.localeCompare(b.name))\n    },\n  },\n\n  methods: {\n    addEntity(entity) {\n      this.entities[entity.id] = entity\n\n      if (entity.parent_id != null)\n        return  // Only group entities that have no parent\n\n      ['id', 'type', 'category', 'plugin'].forEach((attr) => {\n        if (entity[attr] == null)\n          return\n\n        if (attr == 'id')\n          this.entityGroups[attr][entity[attr]] = entity\n        else {\n          if (!this.entityGroups[attr][entity[attr]])\n            this.entityGroups[attr][entity[attr]] = {}\n          this.entityGroups[attr][entity[attr]][entity.id] = entity\n        }\n      })\n    },\n\n    removeEntity(entity) {\n      if (entity.parent_id != null)\n        return  // Only group entities that have no parent\n\n      ['id', 'type', 'category', 'plugin'].forEach((attr) => {\n        if (this.entityGroups[attr][entity[attr]][entity.id])\n          delete this.entityGroups[attr][entity[attr]][entity.id]\n      })\n\n      if (this.entities[entity.id])\n        delete this.entities[entity.id]\n    },\n\n    _shouldSkipLoading(entity) {\n      const children = Object.values(this.childrenByParentId(entity.id))\n      const hasReadableChildren = children.filter((child) => {\n        return (\n          !child.is_configuration &&\n          !child.is_write_only &&\n          !child.is_query_disabled\n        )\n      }).length > 0\n\n      return (\n        entity.is_query_disabled ||\n        entity.is_write_only ||\n        (children.length && !hasReadableChildren)\n      )\n    },\n\n    hideGroup(group) {\n      Object.keys(group.entities).forEach((id) => {\n        if (this.selector.selectedEntities[id])\n          delete this.selector.selectedEntities[id]\n      })\n      delete this.selector.selectedGroups[group.name]\n    },\n\n    async refresh(group, setLoading=true) {\n      const entities = (group ? group.entities : this.entities) || {}\n      const args = {}\n      if (group)\n        args.plugins = Object.values(entities).reduce((obj, entity) => {\n          obj[entity.plugin] = true\n          return obj\n        }, {})\n\n      if (setLoading)\n        this.loadingEntities = Object.values(entities).reduce((obj, entity) => {\n            if (this._shouldSkipLoading(entity))\n              return obj\n\n            const self = this\n            const id = entity.id\n            if (this.entityTimeouts[id])\n              clearTimeout(this.entityTimeouts[id])\n\n            this.addEntity(entity)\n            this.entityTimeouts[id] = setTimeout(() => {\n                if (self.loadingEntities[id])\n                  delete self.loadingEntities[id]\n                if (self.entityTimeouts[id])\n                  delete self.entityTimeouts[id]\n\n                self.errorEntities[id] = entity\n                console.warn(`Scan timeout for ${entity.name}`)\n            }, this.entityScanTimeout * 1000)\n\n            obj[id] = true\n            return obj\n        }, {})\n\n      this.request('entities.scan', args)\n    },\n\n    async sync(setLoading=true) {\n      if (setLoading)\n        this.loading = true\n\n      try {\n        this.entities = (await this.request('entities.get')).reduce((obj, entity) => {\n          entity.name = entity?.meta?.name_override || entity.name\n          entity.category = meta[entity.type].name_plural\n          entity.meta = {\n            ...(meta[entity.type] || {}),\n            ...(entity.meta || {}),\n          }\n\n          obj[entity.id] = entity\n          this.addEntity(entity)\n          return obj\n        }, {})\n\n        this.selector.selectedEntities = this.entityGroups.id\n        this.refreshEntitiesCache()\n      } finally {\n        if (setLoading)\n          this.loading = false\n      }\n    },\n\n    childrenByParentId(parentId, selectConfig) {\n      const entity = this.entities?.[parentId]\n      if (!entity?.children_ids?.length)\n        return {}\n\n      return entity.children_ids.reduce((obj, id) => {\n        const child = this.entities[id]\n        if (\n          child && (\n            (!selectConfig && !child.is_configuration) ||\n            (selectConfig && child.is_configuration)\n          )\n        )\n          obj[id] = this.entities[id]\n        return obj\n      }, {})\n    },\n\n    configValuesByParentId(parentId) {\n      return this.childrenByParentId(parentId, true)\n    },\n\n    clearEntityTimeouts(entityId) {\n      if (this.errorEntities[entityId])\n        delete this.errorEntities[entityId]\n      if (this.loadingEntities[entityId])\n        delete this.loadingEntities[entityId]\n      if (this.entityTimeouts[entityId]) {\n        clearTimeout(this.entityTimeouts[entityId])\n        delete this.entityTimeouts[entityId]\n      }\n    },\n\n    onEntityInput(entity) {\n      entity.category = meta[entity.type].name_plural\n      this.entities[entity.id] = entity\n      this.clearEntityTimeouts(entity.id)\n      if (this.loadingEntities[entity.id])\n        delete this.loadingEntities[entity.id]\n    },\n\n    onEntityUpdate(event) {\n      const entityId = event.entity.id\n      if (entityId == null)\n        return\n\n      this.clearEntityTimeouts(entityId)\n      const entity = {...event.entity}\n      if (event.entity?.state == null)\n        entity.state = this.entities[entityId]?.state\n      if (entity.meta?.name_override?.length)\n        entity.name = entity.meta.name_override\n      else if (this.entities[entityId]?.meta?.name_override?.length)\n        entity.name = this.entities[entityId].meta.name_override\n      else\n        entity.name = event.entity?.name || this.entities[entityId]?.name\n\n      entity.category = meta[entity.type].name_plural\n      entity.meta = {\n        ...(meta[event.entity.type] || {}),\n        ...(this.entities[entityId]?.meta || {}),\n        ...(event.entity?.meta || {}),\n      }\n\n      this.addEntity(entity)\n      bus.publishEntity(entity)\n    },\n\n    onEntityDelete(event) {\n      const entityId = event.entity?.id\n      if (entityId == null)\n        return\n      if (entityId === this.modalEntityId)\n        this.modalEntityId = null\n      if (this.entities[entityId])\n        this.removeEntity(this.entities[entityId])\n    },\n\n    onEntityModal(entityId) {\n      if (entityId) {\n        this.modalEntityId = entityId\n        this.modalVisible = true\n      } else {\n        this.modalEntityId = null\n        this.modalVisible = false\n      }\n    },\n\n    loadCachedEntities() {\n      const cachedEntities = window.localStorage.getItem('entities')\n      if (cachedEntities) {\n        try {\n          this.entities = JSON.parse(cachedEntities)\n          if (!this.entities)\n            throw Error('The list of cached entities is null')\n        } catch (e) {\n          console.warning('Could not parse cached entities', e)\n          return false\n        }\n\n        Object.values(this.entities).forEach((entity) => this.onEntityUpdate({entity: entity}))\n        this.selector.selectedEntities = this.entityGroups.id\n        return true\n      }\n\n      return false\n    },\n\n    refreshEntitiesCache() {\n      if (this.loading)\n        return\n\n      window.localStorage.setItem('entities', JSON.stringify(this.entities))\n    },\n  },\n\n  async mounted() {\n    this.subscribe(\n      this.onEntityUpdate,\n      'on-entity-update',\n      'platypush.message.event.entities.EntityUpdateEvent'\n    )\n\n    this.subscribe(\n      this.onEntityDelete,\n      'on-entity-delete',\n      'platypush.message.event.entities.EntityDeleteEvent'\n    )\n\n    const hasCachedEntities = this.loadCachedEntities()\n    await this.sync(!hasCachedEntities)\n    await this.refresh(null, !hasCachedEntities)\n    setInterval(() => this.refreshEntitiesCache(), 10000)\n  },\n\n  unmounted() {\n    this.unsubscribe('on-entity-update')\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"vars\";\n@import \"~@/style/items\";\n\n.entities-container {\n  --groups-per-row: 1;\n\n  @include from($desktop) {\n    --groups-per-row: 2;\n  }\n\n  @include from($fullhd) {\n    --groups-per-row: 3;\n  }\n\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  color: $default-fg-2;\n  font-weight: 400;\n\n  button {\n    background: transparent;\n    border: 0;\n\n    &:hover {\n      color: $default-hover-fg;\n    }\n  }\n\n  header {\n    width: calc(100% - 2px);\n    height: $selector-height;\n    display: flex;\n    background: $default-bg-2;\n    margin-left: 2px;\n    box-shadow: $border-shadow-bottom;\n    position: relative;\n\n    .right {\n      position: absolute;\n      right: 0;\n      text-align: right;\n      margin-right: 0.5em;\n      padding-right: 0;\n\n      button {\n        padding: 0.5em 0;\n      }\n    }\n  }\n\n  .groups-canvas {\n    width: 100%;\n    height: calc(100% - #{$selector-height});\n    overflow: auto;\n  }\n\n  .groups-container {\n    @include until(#{$tablet - 1}) {\n      background: $default-bg-2;\n    }\n\n    @include until(#{$desktop - 1}) {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }\n\n    @include from($desktop) {\n      column-count: var(--groups-per-row);\n    }\n  }\n\n  .group {\n    width: 100%;\n    max-width: 600px;\n    max-height: 100%;\n    position: relative;\n    display: flex;\n    break-inside: avoid;\n\n    @include until(#{$tablet - 1}) {\n      padding: 0;\n      margin-bottom: $main-margin;\n    }\n\n    @include from($tablet) {\n      padding: $main-margin;\n    }\n\n    .frame {\n      @include from($desktop) {\n        max-height: calc(100vh - #{$header-height} - #{$main-margin});\n      }\n\n      display: flex;\n      flex-direction: column;\n      flex-grow: 1;\n      position: relative;\n      border-radius: 1em;\n      box-shadow: $group-shadow;\n    }\n\n    .header {\n      width: 100%;\n      height: $header-height;\n      display: table;\n      background: $header-bg;\n      box-shadow: $header-shadow;\n\n      @include until(#{$tablet - 1}) {\n        border-bottom: 1px solid $border-color-2;\n      }\n\n      @include from($tablet) {\n        border-radius: 1em 1em 0 0;\n      }\n\n      .section {\n        height: 100%;\n        display: table-cell;\n        vertical-align: middle;\n\n        &.left, &.right {\n          width: 10%;\n        }\n\n        &.right {\n          text-align: right;\n        }\n\n        &.center {\n          width: 80%;\n          text-align: center;\n        }\n      }\n\n      .title {\n        text-transform: capitalize;\n\n        @include until(#{$tablet - 1}) {\n          font-weight: bold;\n        }\n      }\n    }\n\n    .body {\n      max-height: calc(100% - #{$header-height});\n      overflow: auto;\n      flex-grow: 1;\n\n      @include from($tablet) {\n        background: $default-bg-2;\n      }\n\n      .entity-frame {\n        background: $background-color;\n\n        &:last-child {\n          border-radius: 0 0 1em 1em;\n        }\n      }\n    }\n  }\n\n  :deep(.dropdown-container) {\n    .dropdown {\n      min-width: 10em;\n      margin-left: 0;\n\n      .item {\n        box-shadow: none;\n      }\n    }\n\n    button {\n      background: none;\n    }\n  }\n}\n</style>\n","import { render } from \"./Index.vue?vue&type=template&id=59321353&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=59321353&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-59321353\"]])\n\nexport default __exports__","<template>\n  <div class=\"entities-selectors-container\">\n    <div class=\"selector search-container col-11\"\n      v-if=\"Object.keys(entityGroups.id || {}).length\">\n      <input ref=\"search\" type=\"text\" class=\"search-bar\"\n        title=\"Filter by name, plugin or ID\" placeholder=\"ðŸ”Ž\"\n        v-model=\"searchTerm\">\n    </div>\n\n    <div class=\"selector actions-container col-1 pull-right\">\n      <Dropdown title=\"Actions\" icon-class=\"fas fa-ellipsis\">\n        <DropdownItem  icon-class=\"fas fa-sync-alt\" text=\"Refresh\"\n          @click=\"$emit('refresh')\" />\n        <DropdownItem  icon-class=\"fas fa-square-root-variable\"\n          text=\"Set Variable\" @click=\"$emit('show-variable-modal')\" />\n\n        <Dropdown title=\"Group by\" text=\"Group by\"\n          icon-class=\"fas fa-object-ungroup\" ref=\"groupingSelector\">\n          <DropdownItem v-for=\"g in visibleGroupings\" :key=\"g\" :text=\"prettifyGroupingName(g)\"\n            :item-class=\"{selected: value?.grouping === g}\"\n            @click=\"onGroupingChanged(g)\" />\n        </Dropdown>\n\n        <Dropdown title=\"Filter groups\" text=\"Filter groups\"\n            :icon-class=\"{fas: true, 'fa-filter': true, active: hasActiveFilter}\"\n            ref=\"groupSelector\" keep-open-on-item-click>\n          <DropdownItem v-for=\"g in sortedGroups\" :key=\"g\" :text=\"g\"\n            v-bind=\"iconForGroup(g)\" :item-class=\"{selected: !!selectedGroups[g]}\"\n            @click.stop=\"toggleGroup(g)\" />\n        </Dropdown>\n      </Dropdown>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Utils from '@/Utils'\nimport Dropdown from \"@/components/elements/Dropdown\";\nimport DropdownItem from \"@/components/elements/DropdownItem\";\nimport meta from './meta.json'\nimport pluginIcons from '@/assets/icons.json'\nimport { bus } from \"@/bus\";\n\nexport default {\n  name: \"Selector\",\n  emits: ['input', 'refresh', 'show-variable-modal'],\n  mixins: [Utils],\n  components: {Dropdown, DropdownItem},\n  props: {\n    entityGroups: {\n      type: Object,\n      required: true,\n    },\n\n    value: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      selectedGroups: {},\n      searchTerm: '',\n    }\n  },\n\n  computed: {\n    visibleGroupings() {\n      return Object.keys(this.entityGroups).filter(\n        (grouping) => grouping !== 'id'\n      )\n    },\n\n    hasActiveFilter() {\n      return Object.values(this.selectedGroups).filter((val) => val === false).length > 0\n    },\n\n    sortedGroups() {\n      return Object.keys(this.entityGroups[this.value?.grouping] || {}).sort()\n    },\n\n    typesMeta() {\n      return meta\n    },\n\n    isGroupFilterActive() {\n      return Object.keys(this.selectedGroups).length !== this.sortedGroups.length\n    },\n\n    selectedEntities() {\n      if (!this.searchTerm?.length)\n        return this.entityGroups.id\n\n      const searchTerm = this.searchTerm.toLowerCase().trim()\n      return Object.values(this.entityGroups.id).filter((entity) => {\n        if (!this.selectedGroups[entity[this.value?.grouping]])\n          return false\n\n        if (!searchTerm?.length)\n          return true\n\n        for (const attr of ['id', 'external_id', 'name', 'plugin']) {\n          if (!entity[attr])\n            continue\n\n          const entityValue = entity[attr].toString().toLowerCase()\n          if (entityValue.indexOf(searchTerm) >= 0)\n            return true\n        }\n\n        return false\n      }).reduce((obj,  entity) => {\n        obj[entity.id] = entity\n        return obj\n      }, {})\n    },\n  },\n\n  methods: {\n    prettifyGroupingName(name) {\n      if (!name)\n        return ''\n\n      name = this.prettify(name)\n      if (name.endsWith('y'))\n        name = name.slice(0, name.length-1) + 'ie'\n\n      name += 's'\n      return name\n    },\n\n    iconForGroup(group) {\n      if (this.value.grouping === 'plugin' && pluginIcons[group]) {\n        const icon = pluginIcons[group]\n        return {\n          'icon-class': icon['class']?.length || !icon.imgUrl?.length ?\n              icon['class'] : 'fas fa-gears',\n          'icon-url': icon.imgUrl,\n        }\n      }\n\n      return {}\n    },\n\n    sync() {\n      const value = {...this.value}\n      value.searchTerm = this.searchTerm\n      value.selectedEntities = this.selectedEntities\n      value.selectedGroups = this.selectedGroups\n      this.$emit('input', value)\n    },\n\n    refreshGroupFilter() {\n      this.selectedGroups = Object.keys(\n        this.entityGroups[this.value?.grouping] || {}\n      ).reduce(\n        (obj, group) => {\n          obj[group] = true\n          return obj\n        }, {}\n      )\n\n      this.sync()\n    },\n\n    toggleGroup(group) {\n      this.selectedGroups[group] = !this.selectedGroups[group]\n      this.sync()\n    },\n\n    processEntityUpdate(entity) {\n      const group = entity[this.value?.grouping]\n      if (group && this.selectedGroups[group] == null) {\n        this.selectedGroups[group] = true\n      }\n    },\n\n    onGroupingChanged(grouping) {\n      if (!this.entityGroups[grouping] || grouping === this.value?.grouping)\n        return false\n\n      const value = {...this.value}\n      value.grouping = grouping\n      this.$emit('input', value)\n    },\n  },\n\n  mounted() {\n    this.refreshGroupFilter()\n    this.$watch(() => this.value?.grouping, () => { this.refreshGroupFilter() })\n    this.$watch(() => this.searchTerm, this.sync)\n    bus.onEntity(this.processEntityUpdate)\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.entities-selectors-container {\n  width: 100%;\n  display: flex;\n  align-items: center;\n\n  .selector {\n    height: 100%;\n    display: inline-flex;\n  }\n\n  @media (max-width: 330px) {\n    .search-bar {\n      display: none;\n    }\n  }\n\n  .search-bar {\n    margin: 0.25em 0;\n  }\n\n  @include until(#{$tablet - 1 }) {\n    .search-bar {\n      width: 100%;\n      margin-right: 2em;\n    }\n  }\n\n  @include from($tablet) {\n    .search-bar {\n      min-width: 400px;\n      margin-left: 0.5em;\n    }\n  }\n\n  :deep(.dropdown-container) {\n    height: 100%;\n    display: flex;\n\n    .dropdown {\n      min-width: 11em;\n    }\n\n    .icon.active {\n      color: $selected-fg;\n    }\n\n    button {\n      height: 100%;\n    }\n  }\n}\n</style>\n","import { render } from \"./Selector.vue?vue&type=template&id=334516c0&scoped=true\"\nimport script from \"./Selector.vue?vue&type=script&lang=js\"\nexport * from \"./Selector.vue?vue&type=script&lang=js\"\n\nimport \"./Selector.vue?vue&type=style&index=0&id=334516c0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-334516c0\"]])\n\nexport default __exports__","<template>\n  <Modal :visible=\"visible\" title=\"Set Variable\" ref=\"modal\"\n      @open=\"onOpen\" @close=\"$emit('close', $event)\">\n    <div class=\"variable-modal-container\">\n      <form @submit.prevent=\"setValue\">\n        <div class=\"row\">\n          <div class=\"col-s-12 col-m-4 label\">\n            <label for=\"name\">Variable Name</label>\n          </div>\n          <div class=\"col-s-12 col-m-8 value\">\n            <input type=\"text\" id=\"variable-name\" v-model=\"varName\"\n              placeholder=\"Variable Name\" :disabled=\"loading\" ref=\"varName\" />\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-s-12 col-m-4 label\">\n            <label for=\"name\">Variable Value</label>\n          </div>\n          <div class=\"col-s-12 col-m-8 value\">\n            <input type=\"text\" id=\"variable-value\" v-model=\"varValue\" ref=\"varValue\"\n              placeholder=\"Variable Value\" :disabled=\"loading\" />\n          </div>\n        </div>\n\n        <div class=\"row button-container\">\n          <button type=\"submit\" title=\"Set\" :disabled=\"loading\">\n            <i class=\"fas fa-check\" />\n          </button>\n        </div>\n      </form>\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport Modal from \"@/components/Modal\";\nimport Utils from \"@/Utils\";\n\nexport default {\n  name: \"VariableModal\",\n  components: {Modal},\n  mixins: [Utils],\n  emits: ['close'],\n  props: {\n    visible: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      loading: false,\n      varName: null,\n      varValue: null,\n    };\n  },\n\n  methods: {\n    async clearValue() {\n      this.loading = true\n      try {\n        await this.request('variable.unset', {name: this.varName.trim()})\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async setValue() {\n      const varName = this.varName.trim()\n      if (!varName?.length) {\n        this.notifyWarning('No variable name has been specified')\n      }\n\n      const value = this.varValue\n      if (!value?.length) {\n        await this.clearValue()\n      } else {\n        this.loading = true\n        try {\n          const args = {}\n          args[varName] = value\n          await this.request('variable.set', args)\n        } finally {\n          this.loading = false\n        }\n      }\n\n      this.$refs.varName.value = ''\n      this.$refs.varValue.value = ''\n      this.$refs.modal.close()\n    },\n\n    onOpen() {\n      this.$nextTick(() => {\n        this.$refs.varName.focus()\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"common\";\n\n.variable-modal-container {\n  form {\n    padding: 1em 0;\n\n    label {\n      font-weight: bold;\n    }\n\n    .row {\n      padding: 0.25em 1em;\n      display: flex;\n      align-items: center;\n\n      @include until($tablet) {\n        flex-direction: column;\n      }\n\n      input[type=text] {\n        width: 100%;\n      }\n    }\n\n    .button-container {\n      display: flex;\n      justify-content: center;\n      margin-top: 0.5em;\n      margin-bottom: -0.75em;\n      padding-top: 0.5em;\n      border-top: 1px solid $border-color-1;\n\n      button {\n        min-width: 10em;\n        background: none;\n        border-radius: 1.5em;\n\n        &:hover {\n          background: $hover-bg;\n        }\n      }\n    }\n\n    @include from($tablet) {\n      .value {\n        text-align: right;\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./VariableModal.vue?vue&type=template&id=4e3d4a40&scoped=true\"\nimport script from \"./VariableModal.vue?vue&type=script&lang=js\"\nexport * from \"./VariableModal.vue?vue&type=script&lang=js\"\n\nimport \"./VariableModal.vue?vue&type=style&index=0&id=4e3d4a40&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4e3d4a40\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","$data","loading","_createBlock","_component_Loading","key","_createElementVNode","_createVNode","_component_Selector","entityGroups","value","selector","onInput","_cache","$event","onRefresh","$options","refresh","onShowVariableModal","variableModalVisible","_hoisted_2","modalEntityId","entities","_component_EntityModal","entity","parent","parent_id","children","childrenByParentId","visible","modalVisible","configValuesByParentId","onClose","onEntityModal","onEntityUpdate","_component_VariableModal","Object","keys","displayGroups","length","_hoisted_3","_Fragment","_renderList","group","name","_hoisted_4","_hoisted_5","_hoisted_6","grouping","entitiesMeta","typesByCategory","_component_Icon","_normalizeProps","_mergeProps","icon","pluginIcons","_normalizeClass","url","imgUrl","_hoisted_7","_toDisplayString","_hoisted_9","_component_Dropdown","title","_component_DropdownItem","text","onClick","hideGroup","collapsedGroups","_hoisted_10","values","sort","a","b","localeCompare","id","_component_Entity","onShowModal","onEntityInput","error","errorEntities","loadingEntities","onLoading","_component_NoItems","mixins","Utils","components","Dropdown","DropdownItem","Entity","EntityModal","Icon","Loading","NoItems","Selector","VariableModal","props","entityScanTimeout","type","Number","default","data","entityTimeouts","category","plugin","selectedEntities","selectedGroups","computed","meta","icons","entries","reduce","obj","name_plural","this","filter","entry","map","e","methods","addEntity","forEach","attr","removeEntity","_shouldSkipLoading","hasReadableChildren","child","is_configuration","is_write_only","is_query_disabled","setLoading","args","plugins","self","clearTimeout","setTimeout","console","warn","request","sync","name_override","refreshEntitiesCache","parentId","selectConfig","children_ids","clearEntityTimeouts","entityId","event","state","bus","publishEntity","onEntityDelete","loadCachedEntities","cachedEntities","window","localStorage","getItem","JSON","parse","Error","warning","setItem","stringify","mounted","subscribe","hasCachedEntities","setInterval","unmounted","unsubscribe","__exports__","render","$props","ref","placeholder","searchTerm","_ctx","$emit","visibleGroupings","g","prettifyGroupingName","selected","onGroupingChanged","fas","active","hasActiveFilter","sortedGroups","iconForGroup","_withModifiers","toggleGroup","emits","required","val","typesMeta","isGroupFilterActive","toLowerCase","trim","entityValue","toString","indexOf","prettify","endsWith","slice","refreshGroupFilter","processEntityUpdate","$watch","onEntity","for","_hoisted_12","_component_Modal","onOpen","onSubmit","setValue","varName","disabled","_hoisted_8","varValue","Modal","Boolean","clearValue","notifyWarning","$refs","modal","close","$nextTick","focus"],"sourceRoot":""}