{"version":3,"file":"static/js/8411.3937e4f2.js","mappings":"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","sources":["webpack://platypush/./src/components/panels/Media/Providers/Jellyfin/Collections.vue","webpack://platypush/./src/components/panels/Media/Providers/Jellyfin/Collections.vue?e185"],"sourcesContent":["<template>\n  <div class=\"collections index\" :class=\"{ 'is-root': !parentId }\">\n    <div class=\"collections items\">\n      <div class=\"collection item\"\n           v-for=\"collection in filteredItems\"\n           :key=\"collection.id\"\n           @click=\"$emit('select', collection)\">\n        <div class=\"image\">\n          <img :src=\"collection.image\"\n               :alt=\"collection.name\"\n               @error=\"onImageError(collection)\"\n               v-if=\"!fallbackImageCollections[collection.id]\">\n          <i :class=\"collectionsIcons[collection.type] ?? 'fas fa-folder'\" v-else />\n        </div>\n\n        <div class=\"name\" v-if=\"fallbackImageCollections[collection.id] || parentId\">\n          <h2>{{ collection.name }}</h2>\n        </div>\n\n        <div class=\"float bottom-right\" v-if=\"collection.year\">\n          <span>{{ collection.year }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"add-playlist floating-btn-container\" v-if=\"isPlaylistsCollection\">\n      <FloatingButton icon-class=\"fa fa-plus\"\n                      title=\"Create Playlist\"\n                      :disabled=\"loading\"\n                      @click=\"showNewPlaylist = true\" />\n    </div>\n\n    <div class=\"add-playlist-modal\" v-if=\"showNewPlaylist\">\n      <Modal title=\"Create Playlist\"\n             :visible=\"true\"\n             @close=\"showNewPlaylist = false\">\n        <form class=\"modal-body\" @submit.prevent=\"createPlaylist\">\n          <div class=\"row\">\n            <label for=\"newPlaylistName\">Playlist Name</label>\n            <input name=\"name\"\n                   type=\"text\"\n                   id=\"newPlaylistName\"\n                   placeholder=\"Playlist Name\"\n                   required>\n          </div>\n\n          <div class=\"row\">\n            <label for=\"newPlaylistPublic\">Public</label>\n            <input name=\"public\" type=\"checkbox\" checked id=\"newPlaylistPublic\">\n          </div>\n\n          <div class=\"row buttons\">\n            <button type=\"button\" @click=\"showNewPlaylist = false\">Cancel</button>\n            <button type=\"submit\">Create</button>\n          </div>\n        </form>\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FloatingButton from \"@/components/elements/FloatingButton\";\nimport Modal from \"@/components/Modal\";\nimport Utils from '@/Utils'\n\nexport default {\n  mixins: [Utils],\n  emits: ['refresh', 'select'],\n  components: {\n    FloatingButton,\n    Modal,\n  },\n\n  props: {\n    collection: {\n      type: Object,\n    },\n\n    filter: {\n      type: String,\n    },\n\n    items: {\n      type: Array,\n      default: () => [],\n    },\n\n    batchItems: {\n      type: Number,\n      default: 100,\n    },\n\n    parentId: {\n      type: String,\n    },\n  },\n\n  data() {\n    return {\n      fallbackImageCollections: {},\n      loading: false,\n      maxResultIndex: this.batchItems,\n      showNewPlaylist: false,\n    };\n  },\n\n  computed: {\n    collectionsIcons() {\n      return {\n        books: \"fas fa-book\",\n        homevideos: \"fas fa-video\",\n        movies: \"fas fa-film\",\n        music: \"fas fa-music\",\n        playlists: \"fas fa-list\",\n        photos: \"fas fa-image\",\n        series: \"fas fa-tv\",\n      };\n    },\n\n    filteredItems() {\n      return Object.values(this.items).filter(\n        (item) => !this.filter || item.name.toLowerCase().includes(this.filter.toLowerCase())\n      ).sort((a, b) => {\n        if (a.item_type === 'album' && b.item_type === 'album') {\n          if (a.year && b.year) {\n            if (a.year !== b.year) {\n              return b.year - a.year\n            }\n          }\n        }\n\n        return a.name.localeCompare(b.name)\n      }).slice(0, this.maxResultIndex)\n    },\n\n    isPlaylistsCollection() {\n      return this.collection?.collection_type === 'playlists'\n    },\n  },\n\n  methods: {\n    async createPlaylist(event) {\n      const form = new FormData(event.target)\n      await this.request('media.jellyfin.create_playlist', {\n        name: form.get('name'),\n        public: form.get('public') === 'on',\n      })\n\n      this.$emit('refresh')\n    },\n\n    onImageError(collection) {\n      this.fallbackImageCollections[collection.id] = true\n    },\n\n    onScroll(e) {\n      const el = e.target\n      if (!el)\n        return\n\n      const bottom = (el.scrollHeight - el.scrollTop) <= el.clientHeight + 150\n      if (!bottom)\n        return\n\n      this.maxResultIndex += this.batchItems\n    },\n  },\n\n  watch: {\n    showNewPlaylist(value) {\n      if (value)\n        this.$nextTick(() => this.$el.querySelector('input[name=\"name\"]').focus())\n    },\n  },\n\n  mounted() {\n    this.$el.parentElement?.addEventListener('scroll', this.onScroll)\n  },\n\n  unmounted() {\n    this.$el.parentElement?.removeEventListener('scroll', this.onScroll)\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./common.scss\";\n\n.index {\n  .item {\n    position: relative;\n\n    h2 {\n      font-size: 1.25em;\n      font-weight: bold;\n      overflow: auto;\n      text-overflow: ellipsis;\n    }\n\n    .float {\n      position: absolute;\n      background: rgba(0, 0, 0, 0.5);\n      color: white;\n      z-index: 1;\n      padding: 0.25em;\n      font-size: 0.9em;\n      border-radius: 0.5em;\n\n      &.bottom-right {\n        right: 0;\n        bottom: 0;\n      }\n    }\n  }\n\n  &.is-root {\n    .item {\n      h2 {\n        font-size: 2em;\n      }\n    }\n  }\n\n  :deep(.add-playlist-modal) {\n    .modal-body {\n      min-width: 30em;\n      max-width: calc(100% - 2em);\n    }\n\n    form {\n      display: flex;\n      flex-direction: column;\n\n      .row {\n        margin-bottom: 1em;\n\n        label {\n          @extend .col-m-4;\n          @extend .col-s-12;\n        }\n\n        input {\n          @extend .col-m-8;\n          @extend .col-s-12;\n        }\n\n        &.buttons {\n          display: flex;\n          justify-content: flex-end;\n\n          button {\n            margin-left: 1em;\n\n            &[type=\"submit\"] {\n              width: 10em;\n              cursor: pointer;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./Collections.vue?vue&type=template&id=2b3713e6&scoped=true\"\nimport script from \"./Collections.vue?vue&type=script&lang=js\"\nexport * from \"./Collections.vue?vue&type=script&lang=js\"\n\nimport \"./Collections.vue?vue&type=style&index=0&id=2b3713e6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b3713e6\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","name","type","id","placeholder","required","checked","_createElementBlock","_normalizeClass","$props","parentId","_hoisted_1","_Fragment","_renderList","$options","filteredItems","collection","key","onClick","$event","_ctx","$emit","_hoisted_3","$data","fallbackImageCollections","collectionsIcons","src","image","alt","onError","onImageError","_hoisted_5","_toDisplayString","year","_hoisted_6","isPlaylistsCollection","_hoisted_7","_createVNode","_component_FloatingButton","title","disabled","loading","_cache","showNewPlaylist","_hoisted_8","_component_Modal","visible","onClose","onSubmit","_withModifiers","args","createPlaylist","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","mixins","Utils","emits","components","FloatingButton","Modal","props","Object","filter","String","items","Array","default","batchItems","Number","data","maxResultIndex","this","computed","books","homevideos","movies","music","playlists","photos","series","values","item","toLowerCase","includes","sort","a","b","item_type","localeCompare","slice","collection_type","methods","event","form","FormData","target","request","get","public","onScroll","e","el","bottom","scrollHeight","scrollTop","clientHeight","watch","value","$nextTick","$el","querySelector","focus","mounted","parentElement","addEventListener","unmounted","removeEventListener","__exports__","render"],"sourceRoot":""}