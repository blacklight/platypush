"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[8516],{710:function(t,e,s){s.d(e,{A:function(){return m}});var i=s(641),o=s(3751),a=s(33);const n=t=>((0,i.Qi)("data-v-77ea2884"),t=t(),(0,i.jt)(),t),l={class:"dialog-content"},c={class:"buttons"},d=n((()=>(0,i.Lk)("i",{class:"fas fa-check"},null,-1))),r=n((()=>(0,i.Lk)("i",{class:"fas fa-xmark"},null,-1)));function u(t,e,s,n,u,v){const p=(0,i.g2)("Modal");return(0,i.uX)(),(0,i.Wv)(p,{ref:"modal",title:s.title},{default:(0,i.k6)((()=>[(0,i.Lk)("form",{onSubmit:e[5]||(e[5]=(0,o.D$)(((...t)=>v.onConfirm&&v.onConfirm(...t)),["prevent"]))},[(0,i.Lk)("div",l,[(0,i.RG)(t.$slots,"default",{},void 0,!0),(0,i.bo)((0,i.Lk)("input",{type:"text",ref:"input","onUpdate:modelValue":e[0]||(e[0]=t=>u.value_=t)},null,512),[[o.Jo,u.value_]])]),(0,i.Lk)("div",c,[(0,i.Lk)("button",{type:"submit",class:"ok-btn",onClick:e[1]||(e[1]=(...t)=>v.onConfirm&&v.onConfirm(...t)),onTouch:e[2]||(e[2]=(...t)=>v.onConfirm&&v.onConfirm(...t))},[d,(0,i.eW)("   "+(0,a.v_)(s.confirmText),1)],32),(0,i.Lk)("button",{type:"button",class:"cancel-btn",onClick:e[3]||(e[3]=(...t)=>v.close&&v.close(...t)),onTouch:e[4]||(e[4]=(...t)=>v.close&&v.close(...t))},[r,(0,i.eW)("   "+(0,a.v_)(s.cancelText),1)],32)])],32)])),_:3},8,["title"])}var v=s(9513),p={emits:["input"],components:{Modal:v.A},props:{title:{type:String},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},visible:{type:Boolean,default:!1},value:{type:String,default:""}},data(){return{value_:"",visible_:!1}},methods:{onConfirm(){this.value_?.trim()?.length&&this.$emit("input",this.value_),this.close()},open(){this.visible_||(this.value_=this.value,this.$refs.modal.show(),this.visible_=!0,this.focus())},close(){this.visible_&&(this.value_="",this.$refs.modal.hide(),this.visible_=!1)},show(){this.open()},hide(){this.close()},focus(){this.$nextTick((()=>{this.$refs.input.focus()}))}},watch:{visible(t){t?this.open():this.close()}},mounted(){this.visible_=this.visible,this.value_=this.value||""}},h=s(6262);const k=(0,h.A)(p,[["render",u],["__scopeId","data-v-77ea2884"]]);var m=k},11:function(t,e,s){s.d(e,{A:function(){return h}});var i=s(641),o=s(33),a=s(3751);const n=t=>((0,i.Qi)("data-v-eff375b6"),t=t(),(0,i.jt)(),t),l=["checked","id"],c=n((()=>(0,i.Lk)("div",{class:"switch"},[(0,i.Lk)("div",{class:"dot"})],-1))),d={class:"label"};function r(t,e,s,n,r,u){return(0,i.uX)(),(0,i.CE)("div",{class:(0,o.C4)(["power-switch",{disabled:s.disabled}]),onClick:e[0]||(e[0]=(0,a.D$)(((...t)=>u.onInput&&u.onInput(...t)),["stop"]))},[(0,i.Lk)("input",{type:"checkbox",checked:s.value,id:s.id},null,8,l),(0,i.Lk)("label",null,[c,(0,i.Lk)("span",d,[(0,i.RG)(t.$slots,"default",{},void 0,!0)])])],2)}var u={name:"ToggleSwitch",emits:["input"],props:{id:{type:String},value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{onInput(t){if(this.disabled)return!1;this.$emit("input",t)}}},v=s(6262);const p=(0,v.A)(u,[["render",r],["__scopeId","data-v-eff375b6"]]);var h=p},8516:function(t,e,s){s.r(e),s.d(e,{default:function(){return I}});var i=s(641),o=s(33),a=s(3751);const n=t=>((0,i.Qi)("data-v-d7bb5c5e"),t=t(),(0,i.jt)(),t),l={class:"entity assistant-container"},c={class:"col-1 icon entity-icon",ref:"icon"},d={class:"label"},r=["textContent"],u={class:"value-container"},v=n((()=>(0,i.Lk)("div",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-comment-slash"})],-1))),p=n((()=>(0,i.Lk)("div",{class:"label"},[(0,i.Lk)("div",{class:"name"},"Stop Conversation")],-1))),h={class:"value"},k=n((()=>(0,i.Lk)("div",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-comment"})],-1))),m=n((()=>(0,i.Lk)("div",{class:"label"},[(0,i.Lk)("div",{class:"name"},"Start Conversation")],-1))),f={class:"value"},b=n((()=>(0,i.Lk)("div",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-microphone-lines-slash"})],-1))),C=n((()=>(0,i.Lk)("div",{class:"label"},[(0,i.Lk)("div",{class:"name"},"Muted")],-1))),g={class:"value"},y=n((()=>(0,i.Lk)("div",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-keyboard"})],-1))),L=n((()=>(0,i.Lk)("div",{class:"label"},[(0,i.Lk)("div",{class:"name"},"Send query from text prompt")],-1))),_={class:"value"};function x(t,e,s,n,x,$){const w=(0,i.g2)("TextPrompt"),P=(0,i.g2)("EntityIcon"),S=(0,i.g2)("ToggleSwitch");return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.bF)(w,{ref:"prompt"},{default:(0,i.k6)((()=>[(0,i.eW)(" Enter a text query to send to the assistant. ")])),_:1},512),(0,i.Lk)("div",{class:"head",onClick:e[1]||(e[1]=(...t)=>$.onHeadClick&&$.onHeadClick(...t))},[(0,i.Lk)("div",c,[(0,i.bF)(P,{entity:t.value,class:(0,o.C4)({active:t.value.conversation_running}),loading:t.loading,error:t.error},null,8,["entity","class","loading","error"])],512),(0,i.Lk)("div",d,[(0,i.Lk)("div",{class:"name",ref:"name",textContent:(0,o.v_)(t.value.name)},null,8,r)]),(0,i.Lk)("div",u,[(0,i.Lk)("button",{onClick:e[0]||(e[0]=(0,a.D$)((t=>x.collapsed=!x.collapsed),["stop"]))},[(0,i.Lk)("i",{class:(0,o.C4)(["fas",{"fa-angle-up":!x.collapsed,"fa-angle-down":x.collapsed}])},null,2)])])]),x.collapsed?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",{key:0,class:"body",ref:"body",onClick:e[6]||(e[6]=(0,a.D$)(((...e)=>t.prevent&&t.prevent(...e)),["stop"]))},[t.value.conversation_running?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"row",onClick:e[2]||(e[2]=(0,a.D$)(((...t)=>$.stopConversation&&$.stopConversation(...t)),["stop"]))},[v,p,(0,i.Lk)("div",h,[(0,i.bF)(S,{onClick:(0,a.D$)($.stopConversation,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])):((0,i.uX)(),(0,i.CE)("div",{key:1,class:"row",onClick:e[3]||(e[3]=(0,a.D$)(((...t)=>$.startConversation&&$.startConversation(...t)),["stop"]))},[k,m,(0,i.Lk)("div",f,[(0,i.bF)(S,{onClick:(0,a.D$)($.startConversation,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])),(0,i.Lk)("div",{class:"row",onClick:e[4]||(e[4]=(0,a.D$)(((...t)=>$.toggleMute&&$.toggleMute(...t)),["stop"]))},[b,C,(0,i.Lk)("div",g,[(0,i.bF)(S,{onClick:(0,a.D$)($.toggleMute,["stop"]),value:t.value.is_muted,disabled:t.loading},null,8,["onClick","value","disabled"])])]),(0,i.Lk)("div",{class:"row",onClick:e[5]||(e[5]=(0,a.D$)(((...t)=>$.showPrompt&&$.showPrompt(...t)),["stop"]))},[y,L,(0,i.Lk)("div",_,[(0,i.bF)(S,{onClick:(0,a.D$)($.showPrompt,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])],512))])}var $=s(710),w=s(11),P=s(1029),S=s(4897),T={name:"Assistant",mixins:[S["default"]],components:{EntityIcon:P["default"],TextPrompt:$.A,ToggleSwitch:w.A},data(){return{collapsed:!0,showTextQueryPrompt:!1,modalId:"assistant-text-prompt-modal"}},methods:{hidePrompt(){document.body.querySelector(`#${this.modalId}`)?.remove()},showPrompt(){const t=this.$refs.prompt.$el;this.hidePrompt(),t.id=this.modalId,t.classList.remove("hidden");const e=t.querySelector('input[type="text"]'),s=t.querySelector("form");s&&s.addEventListener("submit",(t=>{t.stopPropagation(),this.onTextPrompt(e?.value)}));const i=t.querySelector(".cancel-btn");i&&(i.onclick=t=>{this.hidePrompt(),t.stopPropagation()}),t.onclick=e=>{const s=t.querySelector(".modal");if(s?.contains(e.target))return e.stopPropagation(),!1;this.hidePrompt()},document.body.appendChild(t),this.$nextTick((()=>{t.querySelector('input[type="text"]').focus()}))},onHeadClick(t){if(this.$refs.name.contains(t.target)||this.$refs.icon.contains(t.target))return!0;this.collapsed=!this.collapsed,t.stopPropagation()},async toggleMute(){await this.request("entities.execute",{id:this.value.id,action:"toggle_mute"})},async startConversation(){await this.request("entities.execute",{id:this.value.id,action:"start_conversation"})},async stopConversation(){await this.request("entities.execute",{id:this.value.id,action:"stop_conversation"})},async onTextPrompt(t){await this.request("entities.execute",{id:this.value.id,action:"send_text_query",query:t}),this.hidePrompt()}}},q=s(6262);const D=(0,q.A)(T,[["render",x],["__scopeId","data-v-d7bb5c5e"]]);var I=D}}]);
//# sourceMappingURL=8516.042b478a.js.map