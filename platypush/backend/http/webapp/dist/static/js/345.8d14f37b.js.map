{"version":3,"file":"static/js/345.8d14f37b.js","mappings":"8LACOA,MAAM,Y,SAGJA,MAAM,a,SAINA,MAAM,wB,uCAGJA,MAAM,Q,SAMRA,MAAM,c,4HAhBb,QAuBM,MAvBN,EAuBM,CAtBW,EAAAC,UAAA,WAAf,QAA0B,YAES,EAAAC,OAAOC,OAIG,EAAAD,OAAOC,OAAM,eAA1D,QAOM,MAPN,EAOM,EANJ,OAA6D,OAAxDH,MAAM,O,aAAO,QAAoC,EAAlB,WAAC,EAAAE,OAAM,GAAIE,SAA/C,WACA,OAAsD,OAAjDJ,MAAM,U,aAAU,QAA0B,EAAZ,UAAIK,UAAvC,WACA,OAGM,MAHN,GAGM,QAFD,EAAAC,WAAW,EAAAJ,OAAM,GAAIE,OAAK,IAAW,OACxC,QAAG,EAAAE,WAAW,EAAAJ,OAAM,GAAIK,KAAG,WAL/B,iBAJ0C,WAA1C,QAEM,MAFN,EAAkD,sBAapB,EAAAL,OAAOC,OAAM,eAA3C,QAMM,MANN,EAMM,gBALJ,QAIM,mBAJ6B,EAAAD,OAAOM,MAAK,EAAI,EAAAC,YAAzBC,K,WAA1B,QAIM,OAJDV,MAAM,QAAqDW,IAAKD,EAAME,IAA3E,EACE,OAA+D,OAA1DZ,MAAM,a,aAAa,QAAgC,EAAd,WAACU,EAAMN,SAAjD,WACA,OAAsE,OAAjEJ,MAAM,a,aAAa,QAAuC,EAArB,WAACU,EAAMN,OAAK,KAAtD,WACA,OAAwD,OAAnDJ,MAAM,gB,aAAgB,QAAsB,EAARK,UAAzC,eAHF,UADF,gB,yBAcJ,GACEQ,KAAM,WACNC,WAAY,CAACC,QAAO,KACpBC,OAAQ,CAACC,EAAA,GACTC,MAAO,CAELT,UAAW,CACTU,KAAMC,OACNC,UAAU,EACVC,QAAS,IAIXC,eAAgB,CACdJ,KAAMC,OACNC,UAAU,EACVC,QAAS,MAIbE,KAAM,WACJ,MAAO,CACLtB,OAAQ,GACRD,SAAS,EAEZ,EAEDwB,QAAS,CACPC,QAASC,iBACPC,KAAK3B,SAAU,EAEf,IACE2B,KAAK1B,cAAgB0B,KAAKC,QAAQ,iCAAiCC,KAAIpB,IACjEA,EAAMN,QACRM,EAAMN,MAAQ,IAAI2B,KAAKrB,EAAMN,MAAM4B,UAAYtB,EAAMN,MAAM6B,OACzDvB,EAAMH,MACRG,EAAMH,IAAM,IAAIwB,KAAKrB,EAAMH,IAAIyB,UAAYtB,EAAMH,IAAI0B,OAEhDvB,IAIX,CAXA,QAUEkB,KAAK3B,SAAU,CACjB,CACD,GAGHiC,QAAS,WACPN,KAAKF,UACLS,YAAYP,KAAKF,QAASU,UAA8B,IAApBR,KAAKL,gBAAqBc,QAAQ,IACvE,G,UCzEH,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://platypush/./src/components/widgets/Calendar/Index.vue","webpack://platypush/./src/components/widgets/Calendar/Index.vue?ec45"],"sourcesContent":["<template>\n  <div class=\"calendar\">\n    <Loading v-if=\"loading\" />\n\n    <div class=\"no-events\" v-else-if=\"!events.length\">\n      No events found\n    </div>\n\n    <div class=\"event upcoming-event\" v-else-if=\"events.length > 0\">\n      <div class=\"date\" v-text=\"formatDate(events[0].start)\"></div>\n      <div class=\"summary\" v-text=\"events[0].summary\"></div>\n      <div class=\"time\">\n        {{ formatTime(events[0].start, false) }} -\n        {{ formatTime(events[0].end, false) }}\n      </div>\n    </div>\n\n    <div class=\"event-list\" v-if=\"events.length > 1\">\n      <div class=\"event\" v-for=\"event in events.slice(1, maxEvents)\" :key=\"event.id\">\n        <div class=\"date col-2\" v-text=\"formatDate(event.start)\"></div>\n        <div class=\"time col-2\" v-text=\"formatTime(event.start, false)\"></div>\n        <div class=\"summary col-8\" v-text=\"event.summary\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Utils from \"@/Utils\";\nimport Loading from \"@/components/Loading\";\n\nexport default {\n  name: \"Calendar\",\n  components: {Loading},\n  mixins: [Utils],\n  props: {\n    // Maximum number of events to be rendered.\n    maxEvents: {\n      type: Number,\n      required: false,\n      default: 10,\n    },\n\n    // Refresh interval in seconds.\n    refreshSeconds: {\n      type: Number,\n      required: false,\n      default: 600,\n    },\n  },\n\n  data: function() {\n    return {\n      events: [],\n      loading: false,\n    }\n  },\n\n  methods: {\n    refresh: async function() {\n      this.loading = true\n\n      try {\n        this.events = (await this.request('calendar.get_upcoming_events')).map(event => {\n          if (event.start)\n            event.start = new Date(event.start.dateTime || event.start.date)\n          if (event.end)\n            event.end = new Date(event.end.dateTime || event.end.date)\n\n          return event\n        })\n      } finally {\n        this.loading = false\n      }\n    },\n  },\n\n  mounted: function() {\n    this.refresh()\n    setInterval(this.refresh, parseInt((this.refreshSeconds*1000).toFixed(0)))\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.calendar {\n  display: flex;\n  padding: 1em;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n\n  .no-events {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.75em;\n  }\n\n  .event {\n    font-size: 1.1em;\n  }\n\n  .event-list {\n    margin-top: 2em;\n  }\n\n  .upcoming-event {\n    text-align: center;\n    margin-bottom: .15em;\n    font-size: 1.2em;\n\n    .date {\n      font-size: 1.1em;\n    }\n\n    .summary {\n      text-transform: uppercase;\n      font-size: 1.3em;\n    }\n  }\n}\n</style>\n","import { render } from \"./Index.vue?vue&type=template&id=44a3b988&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=44a3b988&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/blacklight/git_tree/platypush/platypush/backend/http/webapp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-44a3b988\"]])\n\nexport default __exports__"],"names":["class","loading","events","length","start","summary","formatTime","end","slice","maxEvents","event","key","id","name","components","Loading","mixins","Utils","props","type","Number","required","default","refreshSeconds","data","methods","refresh","async","this","request","map","Date","dateTime","date","mounted","setInterval","parseInt","toFixed","__exports__","render"],"sourceRoot":""}