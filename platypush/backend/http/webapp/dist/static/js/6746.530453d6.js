"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[6746],{6746:function(e,t,i){i.d(t,{Z:function(){return ni}});var s=i(6252),n=i(3577);const o=e=>((0,s.dD)("data-v-6dfbd530"),e=e(),(0,s.Cn)(),e),l={class:"browser"},a={class:"nav",ref:"nav"},r={class:"path-container"},h={key:0,class:"path"},c=o((()=>(0,s._)("i",{class:"fa fa-home"},null,-1))),p=[c],d={key:0,class:"separator"},u=o((()=>(0,s._)("i",{class:"fa fa-chevron-right"},null,-1))),f=[u],m=["onClick"],y={class:"token"},g={key:0,class:"separator"},v=o((()=>(0,s._)("i",{class:"fa fa-chevron-right"},null,-1))),x=[v],w={class:"btn-container"},k={key:2,class:"items",ref:"items"},b=o((()=>(0,s._)("div",{class:"col-10 left side"},[(0,s._)("i",{class:"icon fa fa-folder"}),(0,s._)("span",{class:"name"},"..")],-1))),_=[b],C=o((()=>(0,s._)("div",{class:"col-10 left side"},[(0,s._)("i",{class:"icon fa fa-hand-point-right"}),(0,s._)("span",{class:"name"},"<Select This Directory>")],-1))),F=[C],D=["onClick"],T={class:"col-10"},I={class:"name"},$={key:0,class:"col-2 actions"},U={class:"modal-body"},S={key:3,class:"upload-file-container"},q={key:4,class:"info-modal-container"},B={class:"modal-body"},j=o((()=>(0,s._)("br",null,null,-1))),H=o((()=>(0,s._)("br",null,null,-1))),Z=o((()=>(0,s._)("br",null,null,-1))),R=o((()=>(0,s._)("br",null,null,-1))),W=o((()=>(0,s._)("br",null,null,-1))),z=o((()=>(0,s._)("br",null,null,-1))),E=o((()=>(0,s._)("br",null,null,-1))),M=o((()=>(0,s._)("br",null,null,-1))),L={class:"copy-modal-container"},O={class:"modal-body"};function N(e,t,i,o,c,u){const v=(0,s.up)("Loading"),b=(0,s.up)("DropdownItem"),C=(0,s.up)("Dropdown"),N=(0,s.up)("Home"),K=(0,s.up)("BrowserOptions"),A=(0,s.up)("Modal"),P=(0,s.up)("FileUploader"),Y=(0,s.up)("FileInfo"),V=(0,s.up)("ConfirmDialog"),G=(0,s.up)("FileEditor"),J=(0,s.up)("TextPrompt"),Q=(0,s.up)("Browser",!0);return(0,s.wg)(),(0,s.iD)("div",l,[c.loading?((0,s.wg)(),(0,s.j4)(v,{key:0})):(0,s.kq)("",!0),(0,s._)("div",a,[(0,s._)("div",r,[u.hasHomepage?((0,s.wg)(),(0,s.iD)("span",h,[(0,s._)("span",{class:"token",onClick:t[0]||(t[0]=e=>c.path=null)},p),u.pathTokens.length?((0,s.wg)(),(0,s.iD)("span",d,f)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.pathTokens,((e,t)=>((0,s.wg)(),(0,s.iD)("span",{class:"path",key:t,onClick:e=>c.path=u.pathTokens.slice(0,t+1).join("/").slice(1)},[(0,s._)("span",y,(0,n.zw)(e),1),(t>0||u.pathTokens.length>1)&&t<u.pathTokens.length-1?((0,s.wg)(),(0,s.iD)("span",g,x)):(0,s.kq)("",!0)],8,m)))),128))]),(0,s._)("div",w,[(0,s.Wm)(C,{style:{"min-width":"11em"}},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{"icon-class":"fa fa-plus",text:"New Folder",onInput:t[1]||(t[1]=e=>c.showCreateDirectory=!0)}),(0,s.Wm)(b,{"icon-class":"fa fa-file",text:"Create File",onInput:t[2]||(t[2]=e=>c.showCreateFile=!0)}),(0,s.Wm)(b,{"icon-class":"fa fa-upload",text:"Upload",onInput:t[3]||(t[3]=e=>c.showUpload=!0)}),(0,s.Wm)(b,{"icon-class":"fa fa-sync",text:"Refresh",onInput:u.refresh},null,8,["onInput"]),(0,s.Wm)(b,{"icon-class":"fa fa-cog",text:"Options",onInput:t[4]||(t[4]=e=>c.showOptions=!0)})])),_:1})])],512),!c.path&&u.hasHomepage?((0,s.wg)(),(0,s.j4)(N,{key:1,items:i.homepage,filter:i.filter,"has-back":i.hasBack,onBack:u.onBack,onInput:u.onItemSelect},null,8,["items","filter","has-back","onBack","onInput"])):((0,s.wg)(),(0,s.iD)("div",k,[c.path?.length&&"/"!==c.path||i.hasBack?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"row item",onClick:t[5]||(t[5]=(...e)=>u.onBack&&u.onBack(...e))},_)):(0,s.kq)("",!0),i.hasSelectCurrentDirectory?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"row item",ref:"selectCurrent",onClick:t[6]||(t[6]=(...e)=>u.onSelectCurrentDirectory&&u.onSelectCurrentDirectory(...e))},F,512)):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.filteredFiles,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"row item",key:t,onClick:t=>u.onItemSelect(e)},[(0,s._)("div",T,[(0,s._)("i",{class:(0,n.C_)(["icon fa",u.fileIcons[e.path]])},null,2),(0,s._)("span",I,(0,n.zw)(e.name),1)]),Object.keys(u.fileActions[e.path]||{})?.length?((0,s.wg)(),(0,s.iD)("div",$,[(0,s.Wm)(C,{style:{"min-width":"11em"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.fileActions[e.path],((t,i)=>((0,s.wg)(),(0,s.j4)(b,{key:i,"icon-class":t.iconClass,text:t.text,onInput:i=>t.onClick(e)},null,8,["icon-class","text","onInput"])))),128))])),_:2},1024)])):(0,s.kq)("",!0)],8,D)))),128))],512)),(0,s.Wm)(A,{title:"Options",visible:c.showOptions,onClose:t[7]||(t[7]=e=>c.showOptions=!1)},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s.Wm)(K,{value:c.opts,onInput:u.onOptsChange},null,8,["value","onInput"])])])),_:1},8,["visible"]),c.showUpload?((0,s.wg)(),(0,s.iD)("div",S,[(0,s.Wm)(P,{path:c.path,visible:c.showUpload,ref:"uploader",onComplete:u.onUploadCompleted,onClose:t[8]||(t[8]=e=>c.showUpload=!1)},null,8,["path","visible","onComplete"])])):(0,s.kq)("",!0),null!=c.showInfoFile?((0,s.wg)(),(0,s.iD)("div",q,[(0,s.Wm)(A,{title:"File Info",visible:null!=c.showInfoFile,onClose:t[9]||(t[9]=e=>c.showInfoFile=null)},{default:(0,s.w5)((()=>[(0,s._)("div",B,[(0,s.Wm)(Y,{file:c.showInfoFile,loading:c.loading},null,8,["file","loading"])])])),_:1},8,["visible"])])):(0,s.kq)("",!0),(0,s.Wm)(V,{visible:c.editWarnings.length>0,onClose:u.clearEditFile,onInput:t[10]||(t[10]=e=>u.editFile(c.editedFile,{force:!0}))},{default:(0,s.w5)((()=>[(0,s.Uk)(" The following warnings were raised: "),(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.editWarnings,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t},(0,n.zw)(e),1)))),128))]),(0,s.Uk)(" Are you sure you that you want to edit the file? ")])),_:1},8,["visible","onClose"]),(0,s.Wm)(V,{visible:null!=c.fileToRemove,onClose:t[11]||(t[11]=e=>c.fileToRemove=null),onInput:t[12]||(t[12]=e=>u.deleteFile(c.fileToRemove))},{default:(0,s.w5)((()=>[(0,s.Uk)(" Are you sure you that you want to delete this file?"),j,H,(0,s._)("b",null,(0,n.zw)(c.fileToRemove),1)])),_:1},8,["visible"]),(0,s.Wm)(V,{visible:null!=c.directoryToRemove,onClose:t[13]||(t[13]=e=>c.directoryToRemove=null),onInput:t[14]||(t[14]=e=>u.deleteDirectory(c.directoryToRemove))},{default:(0,s.w5)((()=>[(0,s.Uk)(" Are you sure you that you want to delete this directory?"),Z,R,(0,s._)("b",null,(0,n.zw)(c.directoryToRemove),1)])),_:1},8,["visible"]),(0,s.Wm)(V,{visible:null!=c.directoryToRemove&&c.directoryNotEmpty,onClose:t[15]||(t[15]=e=>{c.directoryToRemove=null,c.directoryNotEmpty=!1}),onInput:t[16]||(t[16]=e=>u.deleteDirectory(c.directoryToRemove,{recursive:!0}))},{default:(0,s.w5)((()=>[(0,s.Uk)(" This directory is not empty. Are you sure you that you want to delete it?"),W,z,(0,s._)("b",null,(0,n.zw)(c.directoryToRemove),1)])),_:1},8,["visible"]),c.editedFile&&!c.editWarnings?.length?((0,s.wg)(),(0,s.j4)(G,{key:5,file:c.editedFile,"is-new":c.isNewFileEdit,visible:null!=c.editedFile,uppercase:!1,onClose:u.clearEditFile,onSave:u.refresh},null,8,["file","is-new","visible","onClose","onSave"])):(0,s.kq)("",!0),(0,s.Wm)(J,{visible:c.showCreateDirectory,onInput:t[17]||(t[17]=e=>u.createDirectory(e)),onClose:t[18]||(t[18]=e=>c.showCreateDirectory=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)(" Enter the name of the new directory: ")])),_:1},8,["visible"]),(0,s.Wm)(J,{visible:c.showCreateFile,onInput:u.editNewFile,onClose:t[19]||(t[19]=e=>c.showCreateFile=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)(" Enter the name of the new file: ")])),_:1},8,["visible","onInput"]),(0,s.Wm)(J,{visible:null!=c.fileToRename,value:u.displayedFileToRename,onInput:u.renameFile,onClose:t[20]||(t[20]=e=>c.fileToRename=null)},{default:(0,s.w5)((()=>[(0,s.Uk)(" Enter a new name for this file:"),E,M,(0,s._)("b",null,(0,n.zw)(c.fileToRename),1)])),_:1},8,["visible","value","onInput"]),(0,s._)("div",L,[u.showCopyModal?((0,s.wg)(),(0,s.j4)(A,{key:0,title:(null!=c.copyFile?"Copy":"Move")+" File",visible:u.showCopyModal,onClose:t[22]||(t[22]=e=>u.showCopyModal=!1)},{default:(0,s.w5)((()=>[(0,s._)("div",O,[(0,s.Wm)(Q,{path:c.path,"has-back":!0,"has-select-current-directory":!0,"show-directories":!0,"show-files":!1,onBack:t[21]||(t[21]=e=>{c.copyFile=null,c.moveFile=null}),onInput:u.copyOrMove},null,8,["path","onInput"])])])),_:1},8,["title","visible"])):(0,s.kq)("",!0)])])}i(560);const K={class:"browser-options"},A={key:1,class:"options-body"},P={class:"row item"},Y=["checked","value"],V={class:"row item sort-container"},G=["value"],J=["selected"],Q=["selected"],X=["selected"],ee=["selected"],te=["checked"],ie=["checked"];function se(e,t,i,n,o,l){const a=(0,s.up)("Loading");return(0,s.wg)(),(0,s.iD)("div",K,[i.loading?((0,s.wg)(),(0,s.j4)(a,{key:0})):((0,s.wg)(),(0,s.iD)("div",A,[(0,s._)("div",P,[(0,s._)("label",null,[(0,s._)("input",{type:"checkbox",checked:i.value.showHidden,value:i.value.showHidden,onInput:t[0]||(t[0]=t=>e.$emit("input",{...i.value,showHidden:t.target.checked}))},null,40,Y),(0,s.Uk)(" Show hidden files ")])]),(0,s._)("div",V,[(0,s._)("span",null,[(0,s._)("label",null,[(0,s.Uk)(" Sort by "),(0,s._)("span",null,[(0,s._)("select",{value:i.value.sortBy,onInput:t[1]||(t[1]=t=>e.$emit("input",{...i.value,sortBy:t.target.value}))},[(0,s._)("option",{value:"name",selected:"name"===i.value.sortBy},"Name",8,J),(0,s._)("option",{value:"size",selected:"size"===i.value.sortBy},"Size",8,Q),(0,s._)("option",{value:"created",selected:"created"===i.value.sortBy},"Creation Date",8,X),(0,s._)("option",{value:"last_modified",selected:"last_modified"===i.value.sortBy},"Last Modified",8,ee)],40,G)])])]),(0,s._)("span",null,[(0,s._)("label",null,[(0,s._)("input",{type:"radio",checked:!i.value.reverseSort,onInput:t[2]||(t[2]=t=>e.$emit("input",{...i.value,reverseSort:!1}))},null,40,te),(0,s.Uk)(" Ascending ")]),(0,s._)("label",null,[(0,s._)("input",{type:"radio",checked:i.value.reverseSort,onInput:t[3]||(t[3]=t=>e.$emit("input",{...i.value,reverseSort:!0}))},null,40,ie),(0,s.Uk)(" Descending ")])])])]))])}var ne=i(6791),oe=i(8637),le={emits:["input"],mixins:[oe.Z],components:{Loading:ne.Z},props:{loading:{type:Boolean,default:!1},value:{type:Object,required:!0}}},ae=i(3744);const re=(0,ae.Z)(le,[["render",se],["__scopeId","data-v-c4abebfe"]]);var he=re,ce=i(3513),pe=i(9095),de=i(7597);const ue={class:"file-editor-root"},fe={class:"modal-body"},me={class:"confirm-dialog-container"};function ye(e,t,i,o,l,a){const r=(0,s.up)("FileEditor"),h=(0,s.up)("Modal"),c=(0,s.up)("ConfirmDialog");return(0,s.wg)(),(0,s.iD)("div",ue,[(0,s._)("div",{class:(0,n.C_)(["file-editor-modal",{maximized:l.maximized}])},[(0,s.Wm)(h,(0,s.dG)(a.proxiedProperties,{ref:"modal",onClose:a.onClose}),{default:(0,s.w5)((()=>[(0,s._)("div",fe,[i.file?((0,s.wg)(),(0,s.j4)(r,{key:0,ref:"fileEditor",file:i.file,"is-new":i.isNew,onSave:t[0]||(t[0]=t=>e.$emit("save",t))},null,8,["file","is-new"])):(0,s.kq)("",!0)])])),_:1},16,["onClose"]),(0,s._)("div",me,[(0,s.Wm)(c,{ref:"confirmClose",onInput:a.forceClose},{default:(0,s.w5)((()=>[(0,s.Uk)(" This file has unsaved changes. Are you sure you want to close it? ")])),_:1},8,["onInput"])])],2)])}var ge=i(9963);const ve={class:"file-editor"},xe={class:"editor-container"},we={key:0,class:"editor-highlight-loading"},ke={class:"editor-body"},be={class:"line-numbers",ref:"lineNumbers"},_e=["textContent"],Ce={ref:"pre"},Fe=["innerHTML"];function De(e,t,i,o,l,a){const r=(0,s.up)("Loading"),h=(0,s.up)("FloatingButton");return(0,s.wg)(),(0,s.iD)("div",ve,[l.loading?((0,s.wg)(),(0,s.j4)(r,{key:0})):(0,s.kq)("",!0),(0,s._)("div",xe,[a.isProcessing?((0,s.wg)(),(0,s.iD)("div",we,[(0,s.Wm)(r)])):(0,s.kq)("",!0),(0,s._)("div",ke,[(0,s._)("div",be,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.lines,(e=>((0,s.wg)(),(0,s.iD)("span",{class:"line-number",key:e,textContent:(0,n.zw)(e)},null,8,_e)))),128))],512),(0,s._)("pre",Ce,[(0,s._)("code",{ref:"content",innerHTML:a.displayedContent},null,8,Fe)],512),(0,s.wy)((0,s._)("textarea",{ref:"textarea","onUpdate:modelValue":t[0]||(t[0]=e=>l.content=e),onScroll:t[1]||(t[1]=(...e)=>a.syncScroll&&a.syncScroll(...e)),onInput:t[2]||(t[2]=(0,ge.iM)((()=>{}),["stop"]))},null,544),[[ge.nr,l.content]])]),i.withSave?((0,s.wg)(),(0,s.j4)(h,{key:1,"icon-class":"fa fa-save",title:"Save",disabled:!a.hasChanges||l.saving,onClick:a.saveFile},null,8,["disabled","onClick"])):(0,s.kq)("",!0)])])}var Te=i(7066),Ie=i(637),$e=i(8807);const Ue={actionscript:{extensions:[".as"],types:["text/x-actionscript"]},ada:{extensions:[".ada",".adb",".ads"],types:["text/x-ada"]},apache:{extensions:[".htaccess",".htpasswd"],types:["text/x-apache"]},arduino:{extensions:[".ino"],types:["text/x-arduino"]},autoit:{extensions:[".au3"],types:["text/x-autoit"]},awk:{extensions:[".awk"],types:["text/x-awk"]},bash:{extensions:[".sh",".bash"],types:["text/x-sh"]},basic:{extensions:[".bas",".basic"],types:["text/x-basic"]},bnf:{extensions:[".bnf"],types:["text/x-bnf"]},c:{extensions:[".c",".h"],types:["text/x-c"]},clojure:{extensions:[".clj",".cljc",".cljx",".cljs",".edn"],types:["text/x-clojure"]},cmake:{extensions:[".cmake",".cmake.in"],types:["text/x-cmake"]},coffeescript:{extensions:[".coffee"],types:["text/x-coffeescript"]},cpp:{extensions:[".cpp",".cc",".cxx",".c++",".h",".hh",".hpp",".hxx",".h++"],types:["text/x-c++src"]},crystal:{extensions:[".cr"],types:["text/x-crystal"]},css:{extensions:[".css"],types:["text/css"]},d:{extensions:[".d"],types:["text/x-d"]},dart:{extensions:[".dart"],types:["text/x-dart"]},delphi:{extensions:[".pas",".dpr",".dfm",".dpk",".dproj"],types:["text/x-pascal"]},diff:{extensions:[".diff",".patch"],types:["text/x-diff"]},dns:{extensions:[".zone",".arpa"],types:["text/x-dns"]},dockerfile:{extensions:["Dockerfile"],types:["text/x-dockerfile"]},dos:{extensions:[".bat",".cmd"],types:["text/x-dos"]},dsconfig:{extensions:[".dsconfig"],types:["text/x-dsconfig"]},dts:{extensions:[".dts",".dtsi"],types:["text/x-dts"]},dust:{extensions:[".dust"],types:["text/x-dust"]},ebnf:{extensions:[".ebnf"],types:["text/x-ebnf"]},elixir:{extensions:[".ex",".exs"],types:["text/x-elixir"]},elm:{extensions:[".elm"],types:["text/x-elm"]},erlang:{extensions:[".erl"],types:["text/x-erlang"]},excel:{extensions:[".xls",".xlsx"],types:["text/x-excel"]},fortran:{extensions:[".f",".f77",".f90",".f95"],types:["text/x-fortran"]},fsharp:{extensions:[".fs",".fsi",".fsx",".fsscript"],types:["text/x-fsharp"]},gherkin:{extensions:[".feature"],types:["text/x-feature"]},go:{extensions:[".go"],types:["text/x-go"]},gradle:{extensions:[".gradle"],types:["text/x-gradle"]},graphql:{extensions:[".graphql"],types:["text/x-graphql"]},groovy:{extensions:[".groovy",".gradle"],types:["text/x-groovy"]},handlebars:{extensions:[".hbs",".handlebars"],types:["text/x-handlebars-template"]},haskell:{extensions:[".hs",".lhs"],types:["text/x-haskell"]},http:{extensions:[".http"],types:["message/http"]},ini:{extensions:[".ini",".toml"],types:["text/x-ini"]},java:{extensions:[".java"],types:["text/x-java"]},html:{extensions:[".html",".htm"],types:["text/html"]},javascript:{extensions:[".js",".mjs"],types:["application/javascript"]},json:{extensions:[".json"],types:["application/json"]},julia:{extensions:[".jl"],types:["text/x-julia"]},kotlin:{extensions:[".kt",".kts"],types:["text/x-kotlin"]},latex:{extensions:[".tex"],types:["text/x-latex"]},less:{extensions:[".less"],types:["text/x-less"]},lisp:{extensions:[".lisp",".lsp"],types:["text/x-lisp"]},llvm:{extensions:[".ll"],types:["text/x-llvm"]},lua:{extensions:[".lua"],types:["text/x-lua"]},makefile:{extensions:["Makefile"],types:["text/x-makefile"]},markdown:{extensions:[".md",".markdown"],types:["text/markdown"]},mathematica:{extensions:[".m"],types:["text/x-mathematica"]},matlab:{extensions:[".m"],types:["text/x-matlab"]},nginx:{extensions:[".nginx","nginx.conf"],contains:["/sites-available/","/sites-enabled/"],types:["text/x-nginx-conf"]},nim:{extensions:[".nim",".nimble"],types:["text/x-nim"]},nix:{extensions:[".nix"],types:["text/x-nix"]},objectivec:{extensions:[".m"],types:["text/x-objectivec"]},ocaml:{extensions:[".ml",".mli"],types:["text/x-ocaml"]},perl:{extensions:[".pl",".pm"],types:["text/x-perl"]},pgsql:{extensions:[".pgsql"],types:["text/x-pgsql"]},php:{extensions:[".php"],types:["text/x-php"]},plaintext:{extensions:[".txt"]},powershell:{extensions:[".ps1",".psm1",".psd1"],types:["text/x-powershell"]},prolog:{extensions:[".pro",".prolog"],types:["text/x-prolog"]},protobuf:{extensions:[".proto"],types:["text/x-protobuf"]},puppet:{extensions:[".pp"],types:["text/x-puppet"]},python:{extensions:[".py"],types:["text/x-python"]},r:{extensions:[".r"],types:["text/x-r"]},ruby:{extensions:[".rb"],types:["text/x-ruby"]},rust:{extensions:[".rs"],types:["text/x-rust"]},scala:{extensions:[".scala"],types:["text/x-scala"]},scheme:{extensions:[".scm",".ss"],types:["text/x-scheme"]},scss:{extensions:[".scss"],types:["text/x-scss"]},smalltalk:{extensions:[".st"],types:["text/x-stsrc"]},sql:{extensions:[".sql"],types:["text/x-sql"]},swift:{extensions:[".swift"],types:["text/x-swift"]},tcl:{extensions:[".tcl"],types:["text/x-tcl"]},typescript:{extensions:[".ts"],types:["application/typescript"]},vbnet:{extensions:[".vb"],types:["text/x-vb"]},vbscript:{extensions:[".vbs"],types:["text/vbscript"]},vhdl:{extensions:[".vhd",".vhdl"],types:["text/x-vhdl"]},vim:{extensions:[".vim",".vimrc"],types:["text/x-vim"]},wasm:{extensions:[".wasm"],types:["application/wasm"]},x86asm:{extensions:[".asm",".s"],types:["text/x-asm"]},xml:{extensions:[".xml"],types:["application/xml"]},yaml:{extensions:[".yaml",".yml"],types:["text/x-yaml"]}};var Se={methods:{getLanguageType(e){for(const[t,i]of Object.entries(Ue)){const s=i.extensions?.filter((t=>e.path.toLowerCase().endsWith(t)));if(s?.length)return t;const n=i.contains?.filter((t=>e.path.toLowerCase().includes(t)));if(n?.length)return t;const o=i.types?.filter((t=>e.type===t));if(o?.length)return t}return"plaintext"}}};const qe=Se;var Be=qe,je={mixins:[Be,oe.Z],emits:["save"],components:{FloatingButton:$e.Z,Loading:ne.Z},props:{file:{type:String,required:!0},isNew:{type:Boolean,default:!1},withSave:{type:Boolean,default:!0}},data(){return{content:"",currentContentHash:0,highlightedContent:"",highlighting:!1,highlightTimer:null,info:{},initialContentHash:0,loading:!1,saving:!1,type:null}},computed:{codeClass(){return this.type?.length?`language-${this.type}`:"language-plaintext"},displayedContent(){return this.highlightedContent?.length?this.highlightedContent:this.content},hasChanges(){return this.initialContentHash!==this.currentContentHash},isProcessing(){return this.highlighting||this.highlightTimer||this.saving},lines(){return this.content?.length?this.content.split("\n").length:1}},methods:{async loadFile(){if(this.setUrlArgs({file:this.file}),this.isNew)return this.content="",this.initialContentHash=0,this.highlightedContent="",this.info={},void(this.type=this.getLanguageType({path:this.file}));this.loading=!0;try{this.info=(await this.request("file.info",{files:[this.file]}))[this.file]||{},this.type=this.getLanguageType(this.info),this.content=(await Te.Z.get(`/file?path=${encodeURIComponent(this.file)}`)).data,"object"===typeof this.content&&(this.content=JSON.stringify(this.content,null,2)),this.initialContentHash=this.content.hashCode()}catch(e){this.notify({error:!0,text:e.message,title:"Failed to load file"})}finally{this.loading=!1}},async saveFile(){if(this.hasChanges){this.saving=!0;try{await Te.Z.put(`/file?path=${encodeURIComponent(this.file)}`,this.content),this.initialContentHash=this.content.hashCode(),this.notify({title:"File saved",text:`${this.file} saved`,image:{icon:"check"}})}catch(e){this.notify({error:!0,text:e.message,title:"Failed to save file"})}finally{this.saving=!1}this.$emit("save")}},syncScroll(e){const[t,i]=[e.target.scrollTop,e.target.scrollLeft],s=Math.min(e.target.scrollHeight,this.$refs.pre.scrollHeight),n=Math.min(e.target.clientHeight,this.$refs.pre.clientHeight),o=s-n,l={top:Math.min(t,o),left:i,behavior:"auto"};e.target.scrollTo(l),this.$refs.pre.scrollTo(l),this.$refs.lineNumbers.scrollTo({top:l.top,behavior:"auto"})},highlightContent(){this.highlighting=!0;try{clearTimeout(this.highlightTimer),this.highlightTimer=null,this.highlightedContent=Ie.Z.highlight(this.content,{language:this.type||"plaintext"}).value}finally{this.highlighting=!1}},async keyListener(e){"s"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),await this.saveFile())},addKeyListener(){window.addEventListener("keydown",(e=>{"s"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.saveFile())}))},removeKeyListener(){window.removeEventListener("keydown",(e=>{"s"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.saveFile())}))},beforeUnload(e){this.hasChanges&&(e.preventDefault(),e.returnValue="")},addBeforeUnload(){window.addEventListener("beforeunload",this.beforeUnload)},removeBeforeUnload(){window.removeEventListener("beforeunload",this.beforeUnload)},reset(){this.setUrlArgs({file:null}),this.removeBeforeUnload(),this.removeKeyListener()}},watch:{file(){this.loadFile()},content(){this.content?.length&&(this.currentContentHash=this.content.hashCode(),this.highlightedContent?.length?(this.highlightTimer&&clearTimeout(this.highlightTimer),this.highlightTimer=setTimeout(this.highlightContent,1e3),this.highlightedContent=this.content):this.highlightContent())}},mounted(){this.loadFile(),this.addBeforeUnload(),this.addKeyListener(),this.$nextTick((()=>{this.$refs.textarea.focus()}))},unmouted(){this.reset()}};const He=(0,ae.Z)(je,[["render",De],["__scopeId","data-v-b6853582"]]);var Ze=He,Re=i(3848),We={emits:["close","open","save"],mixins:[Re.Z],components:{ConfirmDialog:ce.Z,FileEditor:Ze,Modal:Re.Z},props:{file:{type:String,required:!0},isNew:{type:Boolean,default:!1},withSave:{type:Boolean,default:!0}},data(){return{confirmClose:!0,maximized:!1}},computed:{filename(){return this.file.split("/").pop()||"Untitled"},headerButtons(){const e=[];return this.maximized?e.push({title:"Restore",icon:"far fa-window-restore",action:()=>this.maximized=!1}):e.push({title:"Maximize",icon:"far fa-window-maximize",action:()=>this.maximized=!0}),e},proxiedProperties(){const e={...this.$props};return delete e.file,delete e.withSave,e.buttons=this.headerButtons,e.title=this.filename,e.beforeClose=this.checkClose,e}},methods:{checkClose(){return!(this.withSave&&this.confirmClose&&this.$refs.fileEditor.hasChanges)||(this.$refs.confirmClose.open(),!1)},forceClose(){this.confirmClose=!1,this.$refs.modal.close()},onClose(){this.$refs.fileEditor.reset(),this.$emit("close")}}};const ze=(0,ae.Z)(We,[["render",ye],["__scopeId","data-v-0ff2b53a"]]);var Ee=ze;const Me=e=>((0,s.dD)("data-v-417b1bc7"),e=e(),(0,s.Cn)(),e),Le={class:"file-info"},Oe={key:1,class:"file-info-container"},Ne={class:"row item"},Ke=Me((()=>(0,s._)("div",{class:"label"},"Path",-1))),Ae={class:"value"},Pe={key:0,class:"row item"},Ye=Me((()=>(0,s._)("div",{class:"label"},"Size",-1))),Ve={class:"value"},Ge={key:1,class:"row item"},Je=Me((()=>(0,s._)("div",{class:"label"},"Creation Date",-1))),Qe={class:"value"},Xe={key:2,class:"row item"},et=Me((()=>(0,s._)("div",{class:"label"},"Last Modified",-1))),tt={class:"value"},it={key:3,class:"row item"},st=Me((()=>(0,s._)("div",{class:"label"},"MIME type",-1))),nt={class:"value"},ot={key:4,class:"row item"},lt=Me((()=>(0,s._)("div",{class:"label"},"Permissions",-1))),at={class:"value"},rt={key:5,class:"row item"},ht=Me((()=>(0,s._)("div",{class:"label"},"Owner ID",-1))),ct={class:"value"},pt={key:6,class:"row item"},dt=Me((()=>(0,s._)("div",{class:"label"},"Group ID",-1))),ut={class:"value"};function ft(e,t,i,o,l,a){const r=(0,s.up)("Loading");return(0,s.wg)(),(0,s.iD)("div",Le,[l.loading?((0,s.wg)(),(0,s.j4)(r,{key:0})):l.info?((0,s.wg)(),(0,s.iD)("div",Oe,[(0,s._)("div",Ne,[Ke,(0,s._)("div",Ae,(0,n.zw)(l.info.path),1)]),null!=l.info.size?((0,s.wg)(),(0,s.iD)("div",Pe,[Ye,(0,s._)("div",Ve,(0,n.zw)(e.convertSize(l.info.size)),1)])):(0,s.kq)("",!0),null!=l.info.created?((0,s.wg)(),(0,s.iD)("div",Ge,[Je,(0,s._)("div",Qe,(0,n.zw)(e.formatDate(l.info.created,!0)),1)])):(0,s.kq)("",!0),null!=l.info.last_modified?((0,s.wg)(),(0,s.iD)("div",Xe,[et,(0,s._)("div",tt,(0,n.zw)(e.formatDate(l.info.last_modified,!0)),1)])):(0,s.kq)("",!0),null!=l.info.mime_type?((0,s.wg)(),(0,s.iD)("div",it,[st,(0,s._)("div",nt,(0,n.zw)(l.info.mime_type),1)])):(0,s.kq)("",!0),null!=l.info.permissions?((0,s.wg)(),(0,s.iD)("div",ot,[lt,(0,s._)("div",at,(0,n.zw)(l.info.permissions),1)])):(0,s.kq)("",!0),null!=l.info.owner?((0,s.wg)(),(0,s.iD)("div",rt,[ht,(0,s._)("div",ct,(0,n.zw)(l.info.owner),1)])):(0,s.kq)("",!0),null!=l.info.group?((0,s.wg)(),(0,s.iD)("div",pt,[dt,(0,s._)("div",ut,(0,n.zw)(l.info.group),1)])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}var mt=i(1065),yt={components:{Loading:ne.Z},mixins:[oe.Z,mt.Z],props:{file:{type:String}},data(){return{info:{},loading:!1}},methods:{async refresh(){this.loading=!0;try{this.info=(await this.request("file.info",{files:[this.file]}))[this.file]}finally{this.loading=!1}}},watch:{file(){this.refresh()}},mounted(){this.refresh()}};const gt=(0,ae.Z)(yt,[["render",ft],["__scopeId","data-v-417b1bc7"]]);var vt=gt;const xt={class:"upload-file-modal-container"},wt={class:"modal-body"};function kt(e,t,i,n,o,l){const a=(0,s.up)("FileUploader"),r=(0,s.up)("Modal");return(0,s.wg)(),(0,s.iD)("div",xt,[(0,s.Wm)(r,{title:"Upload File(s)",visible:e.visible,onClose:t[3]||(t[3]=t=>e.$emit("close"))},{default:(0,s.w5)((()=>[(0,s._)("div",wt,[(0,s.Wm)(a,{path:e.path,onComplete:t[0]||(t[0]=t=>e.$emit("complete")),onStart:t[1]||(t[1]=t=>e.$emit("start")),onError:t[2]||(t[2]=t=>e.$emit("error"))},null,8,["path"])])])),_:1},8,["visible"])])}const bt=e=>((0,s.dD)("data-v-67b7ea3b"),e=e(),(0,s.Cn)(),e),_t={class:"upload-file-container"},Ct={class:"row file-input"},Ft=["disabled"],Dt={class:"row btn-container"},Tt=["disabled"],It=bt((()=>(0,s._)("i",{class:"fa fa-upload"},null,-1))),$t={class:"existing-files-container"},Ut={key:1,class:"progress-container"},St={class:"filename"},qt={class:"progress-bar-container"},Bt=["value"];function jt(e,t,i,o,l,a){const r=(0,s.up)("Loading"),h=(0,s.up)("ConfirmDialog");return(0,s.wg)(),(0,s.iD)("div",_t,[l.uploading?((0,s.wg)(),(0,s.j4)(r,{key:0})):(0,s.kq)("",!0),(0,s._)("form",{ref:"uploadForm",class:"upload-form",onSubmit:t[1]||(t[1]=(0,ge.iM)((e=>a.uploadFiles()),["prevent"]))},[(0,s._)("div",Ct,[(0,s._)("input",{type:"file",ref:"files",multiple:"",disabled:l.uploading,onInput:t[0]||(t[0]=(...e)=>a.onFilesInput&&a.onFilesInput(...e))},null,40,Ft)]),(0,s._)("div",Dt,[(0,s._)("button",{type:"submit",disabled:l.uploading||!l.hasFiles},[It,(0,s.Uk)("  Upload ")],8,Tt)])],544),(0,s._)("div",$t,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.existingFiles,(e=>((0,s.wg)(),(0,s.j4)(h,{key:e.name,visible:!0,onClose:t=>delete l.existingFiles[e.name],onInput:t=>a.uploadFiles([e],{force:!0})},{default:(0,s.w5)((()=>[(0,s.Uk)(" The file "),(0,s._)("b",null,(0,n.zw)(e.name),1),(0,s.Uk)(" already exists. Do you want to overwrite it? ")])),_:2},1032,["onClose","onInput"])))),128))]),Object.keys(l.progress||{}).length?((0,s.wg)(),(0,s.iD)("div",Ut,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.progress,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"row progress",key:t},[(0,s._)("span",St,(0,n.zw)(t),1),(0,s._)("span",qt,[(0,s._)("progress",{class:"progress-bar",value:e,max:"100"},null,8,Bt)])])))),128))])):(0,s.kq)("",!0)])}var Ht={emits:["complete","error","start"],mixins:[oe.Z],components:{ConfirmDialog:ce.Z,Loading:ne.Z},props:{path:{type:String,required:!0}},data(){return{existingFiles:{},hasFiles:!1,progress:{},uploading:!1}},computed:{formFiles(){return this.$refs.files?.files?Array.from(this.$refs.files.files):[]}},methods:{async uploadFile(e,t){const{force:i}=t||{};i&&delete this.existingFiles[e.name];try{const t=i?"put":"post",s=await Te.Z[t](`/file?path=${this.path}/${e.name}`,e,{onUploadProgress:t=>{this.progress[e.name]=Math.round(100*t.loaded/t.total)},headers:{"Content-Type":e.type}});return this.notify({title:"File uploaded",text:`${e.name} uploaded to ${this.path}`,image:{icon:"check"}}),{file:e,status:s.status}}catch(s){const t={file:e,status:s.response?.status,error:s.response?.data?.error};return 409!==t.status&&this.onUploadError(s),t}},async uploadFiles(e,t){const{force:i}=t||{};if(e=e||this.formFiles,e.forEach((e=>{delete this.existingFiles[e.name]})),!e?.length)return void this.notify({title:"No files selected",text:"Please select files to upload",warning:!0,image:{icon:"upload"}});this.onUploadStarted(e);const s=[];try{const t=await Promise.all(e.map((e=>this.uploadFile(e,{force:i}))));s.push(...t.filter((e=>e?.error))),s.length||this.onUploadCompleted()}finally{this.uploading=!1}const n=s.filter((e=>409===e?.status&&e?.error));this.existingFiles={...this.existingFiles,...n.reduce(((e,t)=>(e[t.file.name]=t.file,e)),{})}},onFilesInput(e){this.hasFiles=Array.from(e.target.files).length>0},onUploadStarted(e){this.uploading=!0,this.$emit("start"),this.notify({title:"Upload started",text:`Uploading ${e.length} file(s) to ${this.path}`,image:{icon:"upload"}})},onUploadCompleted(){this.uploading=!1,this.$emit("complete")},onUploadError(e){const t=e.response?.data?.error;t&&(e.message=`${e.message}: ${t}`),this.$emit("error",e),this.notify({title:"Upload error",text:e.message,error:!0,image:{icon:"upload"}})}}};const Zt=(0,ae.Z)(Ht,[["render",jt],["__scopeId","data-v-67b7ea3b"]]);var Rt=Zt,Wt={mixins:[Rt,Re.Z],components:{FileUploader:Rt,Modal:Re.Z}};const zt=(0,ae.Z)(Wt,[["render",kt],["__scopeId","data-v-f6e584b8"]]);var Et=zt;const Mt=e=>((0,s.dD)("data-v-e2c178b2"),e=e(),(0,s.Cn)(),e),Lt={class:"browser-home"},Ot={class:"items",ref:"items"},Nt=Mt((()=>(0,s._)("div",{class:"icon-container"},[(0,s._)("i",{class:"icon fa fa-chevron-left"})],-1))),Kt=Mt((()=>(0,s._)("span",{class:"name"},"Back",-1))),At=[Nt,Kt],Pt=["onClick"],Yt={class:"icon-container"},Vt=["src"],Gt={class:"name"};function Jt(e,t,i,o,l,a){return(0,s.wg)(),(0,s.iD)("div",Lt,[(0,s._)("div",Ot,[i.hasBack?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"row item",onClick:t[0]||(t[0]=t=>e.$emit("back"))},At)):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.filteredItems,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"row item",key:i,onClick:i=>e.$emit("input",t)},[(0,s._)("div",Yt,[t.icon?.url?.length?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"icon",src:t.icon.url},null,8,Vt)):((0,s.wg)(),(0,s.iD)("i",{key:1,class:(0,n.C_)(["icon",t.icon?.["class"]||"fas fa-folder"])},null,2))]),(0,s._)("span",Gt,(0,n.zw)(i),1)],8,Pt)))),128))],512)])}var Qt={mixins:[oe.Z],emits:["back","input"],props:{hasBack:{type:Boolean,default:!1},filter:{type:String,default:""},items:{type:Object,required:!0},includeHome:{type:Boolean,default:!0},includeRoot:{type:Boolean,default:!0}},data(){return{userHome:null}},computed:{allItems(){return Object.entries({...this.includeRoot?{Root:{name:"Root",path:"/",icon:{class:"fas fa-hard-drive"}}}:{},...this.includeHome&&this.userHome?{Home:{name:"Home",path:this.userHome,icon:{class:"fas fa-home"}}}:{},...this.items}).reduce(((e,[t,i])=>(i.type?.length||(i.type="directory"),e[t]={name:t,...i},e)),{})},filteredItems(){return Object.fromEntries(Object.entries(this.allItems).filter((e=>e[0].toLowerCase().includes(this.filter.toLowerCase()))))}},methods:{async getUserHome(){return this.userHome||(this.userHome=await this.request("file.get_user_home")),this.userHome}},mounted(){this.getUserHome()}};const Xt=(0,ae.Z)(Qt,[["render",Jt],["__scopeId","data-v-e2c178b2"]]);var ei=Xt,ti=i(671),ii={emits:["back","input","path-change","play"],mixins:[oe.Z,mt.Z],components:{BrowserOptions:he,ConfirmDialog:ce.Z,DropdownItem:de.Z,Dropdown:pe.Z,FileEditor:Ee,FileInfo:vt,FileUploader:Et,Home:ei,Loading:ne.Z,Modal:Re.Z,TextPrompt:ti.Z},props:{hasBack:{type:Boolean,default:!1},hasSelectCurrentDirectory:{type:Boolean,default:!1},initialPath:{type:String},isMedia:{type:Boolean},filter:{type:String,default:""},filterTypes:{type:Array,default:()=>[]},homepage:{type:Object},showDirectories:{type:Boolean,default:!0},showFiles:{type:Boolean,default:!0}},data(){return{copyFile:null,directoryNotEmpty:!1,directoryToRemove:null,editedFile:null,editWarnings:[],files:[],fileToRemove:null,fileToRename:null,info:{},isNewFileEdit:!1,loading:!1,mimeTypes:{},moveFile:null,opts:{showHidden:!1,sortBy:"name",reverseSort:!1},path:this.initialPath,showCreateDirectory:!1,showCreateFile:!1,showInfoFile:null,showOptions:!1,showUpload:!1,uploading:!1}},computed:{displayedFileToRename(){return this.fileToRename?.slice(this.path.length+1)||""},editedFileName(){return this.editedFile?.split("/").pop()||"Untitled"},filteredTypesMap(){return this.filterTypes.reduce(((e,t)=>(e[t]=!0,t.split("/").forEach((t=>{e[t]=!0})),e)),{})},filteredFiles(){return this.files.filter((e=>{if("directory"===e.type&&!this.showDirectories)return!1;if("directory"!==e.type&&!this.showFiles)return!1;if((e?.name||"").toLowerCase().indexOf(this.filter.toLowerCase())<0)return!1;if(!this.opts.showHidden&&e.name.startsWith("."))return!1;if(this.filterTypes.length){const t=this.mimeTypes[e.path]||"",i=[t,...t.split("/")];if(!i.some((e=>this.fileredTypesMap[e])))return!1}return!0}))},fileActions(){return this.files.reduce(((e,t)=>{const i=this.mimeTypes[t.path]||"";return e[t.path]={},this.isMedia&&(i.startsWith("audio/")||i.startsWith("video/"))&&(e[t.path]={play:{iconClass:"fa fa-play",text:"Play",onClick:e=>this.$emit("play",{type:"file",url:`file://${e.path}`})}}),"directory"!==t.type?(e[t.path].view={iconClass:"fa fa-eye",text:"View",onClick:e=>this.viewFile(e.path)},e[t.path].download={iconClass:"fa fa-download",text:"Download",onClick:e=>this.downloadFile(e.path)},e[t.path].edit={iconClass:"fa fa-edit",text:"Edit",onClick:e=>this.editFile(e.path)},e[t.path].copy={iconClass:"fa fa-copy",text:"Copy",onClick:e=>this.copyFile=e.path},e[t.path].move={iconClass:"fa fa-arrows-alt",text:"Move",onClick:e=>this.moveFile=e.path},e[t.path].rename={iconClass:"fa fa-pen",text:"Rename",onClick:e=>this.fileToRename=e.path},e[t.path].info={iconClass:"fa fa-info",text:"Info",onClick:e=>this.showInfoFile=e.path},e[t.path].delete={iconClass:"delete fa fa-trash",text:"Delete",onClick:e=>this.fileToRemove=e.path}):e[t.path].delete={iconClass:"delete fa fa-trash",text:"Delete",onClick:e=>this.directoryToRemove=e.path},e}),{})},fileIcons(){return this.files.reduce(((e,t)=>{if("directory"===t.type)e[t.path]="fa-folder";else{const i=this.mimeTypes[t.path]||"";switch(!0){case i.startsWith("audio/"):e[t.path]="fa-file-audio";break;case i.startsWith("video/"):e[t.path]="fa-file-video";break;case i.startsWith("image/"):e[t.path]="fa-file-image";break;case i.startsWith("text/"):e[t.path]="fa-file-alt";break;default:e[t.path]="fa-file";break}}return e}),{})},hasHomepage(){return Object.keys(this.homepage||{}).length},pathTokens(){return this.path?this.path?.length?["/",...this.path.split(/(?<!\\)\//).slice(1)].filter((e=>e.length)):["/"]:[]},showCopyModal(){return null!=this.copyFile||null!=this.moveFile}},methods:{initOpts(){const e=this.getUrlArgs();null!=e.showHidden&&(this.opts.showHidden=!!e.showHidden),null!=e.sortBy&&(this.opts.sortBy=e.sortBy),null!=e.reverseSort&&(this.opts.reverseSort=!!e.reverseSort),null!=e.file&&(this.editedFile=e.file)},async refresh(){this.loading=!0,this.$nextTick((()=>{this.$refs.nav&&(this.$refs.nav.scrollLeft=99999),this.$refs.items&&(this.$refs.items.scrollTop=0)}));try{this.files=await this.request("file.list",{path:this.path,sort:this.opts.sortBy,reverse:this.opts.reverseSort}),this.$emit("path-change",this.path),this.setUrlArgs({path:decodeURIComponent(this.path)})}finally{this.loading=!1}await this.refreshMimeTypes()},async refreshMimeTypes(){this.mimeTypes=await this.request("file.get_mime_types",{files:this.files.filter((e=>"directory"!==e.type)).map((e=>e.path))})},viewFile(e){window.open(`/file?path=${encodeURIComponent(e)}`,"_blank")},async editNewFile(e){return await this.editFile(`${this.path}/${e}`,{newFile:!0})},async editFile(e,t){const i=!!t?.force,s=this.isNewFileEdit=!!t?.newFile;if(i)this.editWarnings=[];else if(!s){const[t,i]=await Promise.all([this.request("file.info",{files:[e]}),this.request("file.is_binary",{file:e})]),s=t?.[e]?.size||0;if(i&&this.editWarnings.push("File is binary"),(t[e]?.size||0)>1048576&&this.editWarnings.push(`File is too large (${this.convertSize(s)})`),this.editWarnings.length)return void(this.editedFile=e)}this.editedFile=e},async deleteFile(){if(this.fileToRemove){this.loading=!0;try{await this.request("file.unlink",{file:this.fileToRemove})}finally{this.loading=!1,this.fileToRemove=null}this.refresh()}},async deleteDirectory(e,t){if(e=e||this.directoryToRemove,!e)return;const i=!!t?.recursive;let s=!1;this.loading=!0;try{await this.request("file.rmdir",{directory:e,recursive:i})}catch(n){"string"===typeof n&&n.search(/^\[?Errno 39\]?/i)>=0&&(s=!0)}finally{this.loading=!1,this.directoryNotEmpty=s,s||(this.directoryToRemove=null)}s?this.directoryToRemove=e:this.refresh()},async createDirectory(e){if(e){this.loading=!0;try{await this.request("file.mkdir",{directory:`${this.path}/${e}`})}finally{this.loading=!1}this.refresh()}},async copyOrMove(e){let t=null,i=null;if(this.copyFile)t="copy",i=this.copyFile;else{if(!this.moveFile)return;t="move",i=this.moveFile}this.loading=!0;try{await this.request(`file.${t}`,{source:i,target:e}),this.notify({text:`File ${t} completed successfully`,title:"Success",image:{icon:"check"}})}finally{this.loading=!1,this.copyFile=null,this.moveFile=null}this.refresh()},async renameFile(e){if(this.fileToRename&&e?.trim()?.length){this.loading=!0;try{await this.request("file.rename",{file:this.fileToRename,name:`${this.path}/${e}`})}finally{this.loading=!1,this.fileToRename=null}this.refresh()}},clearEditFile(){this.editedFile=null,this.editWarnings=[]},downloadFile(e){window.open(`/file?path=${encodeURIComponent(e)}&download=true`,"_blank")},onOptsChange(e){this.opts=e},onBack(){this.path?.length&&"/"!==this.path?this.path=[...this.pathTokens].slice(0,-1).join("/").slice(1):this.$emit("back")},onItemSelect(e){"directory"===e.type?this.path=e.path:this.$emit("input",e.path)},onSelectCurrentDirectory(){this.$emit("input",this.path)},onUploadCompleted(){this.refresh()}},watch:{initialPath(){this.path=this.initialPath},opts:{deep:!0,handler(){this.setUrlArgs(this.opts),this.refresh()}},path(e,t){t!==e&&this.refresh()},showUpload(e){const t=this.$refs.uploader;e?(t?.open(),this.$nextTick((()=>{t?.focus()}))):t?.close()}},mounted(){const e=this.getUrlArgs();e.path&&(this.path=e.path),this.initOpts(),this.refresh()}};const si=(0,ae.Z)(ii,[["render",N],["__scopeId","data-v-6dfbd530"]]);var ni=si},1065:function(e,t,i){i.d(t,{Z:function(){return l}});i(560);var s=i(8637),n={name:"Utils",mixins:[s.Z],computed:{audioExtensions(){return new Set(["3gp","aa","aac","aax","act","aiff","amr","ape","au","awb","dct","dss","dvf","flac","gsm","iklax","ivs","m4a","m4b","m4p","mmf","mp3","mpc","msv","nmf","nsf","ogg,","opus","ra,","raw","sln","tta","vox","wav","wma","wv","webm","8svx"])},videoExtensions(){return new Set(["webm","mkv","flv","flv","vob","ogv","ogg","drc","gif","gifv","mng","avi","mts","m2ts","mov","qt","wmv","yuv","rm","rmvb","asf","amv","mp4","m4p","m4v","mpg","mp2","mpeg","mpe","mpv","mpg","mpeg","m2v","m4v","svi","3gp","3g2","mxf","roq","nsv","flv","f4v","f4p","f4a","f4b"])},mediaExtensions(){return new Set([...this.videoExtensions,...this.audioExtensions])}},methods:{convertTime(e){e=parseFloat(e);const t={};t.h=""+parseInt(e/3600),t.m=""+parseInt(e/60-60*t.h),t.s=""+parseInt(e-(3600*t.h+60*t.m));for(const s of["m","s"])parseInt(t[s])<10&&(t[s]="0"+t[s]);const i=[];return parseInt(t.h)&&i.push(t.h),i.push(t.m,t.s),i.join(":")},async startStreaming(e,t,i=!1){let s=e,n=null;e instanceof Object?(s=e.url,n=e.subtitles):e={url:s};const o=await this.request(`${t}.start_streaming`,{media:s,subtitles:n,download:i});return{...e,...o}},async stopStreaming(e,t){await this.request(`${t}.stop_streaming`,{media_id:e})}}};const o=n;var l=o},8807:function(e,t,i){i.d(t,{Z:function(){return p}});var s=i(6252),n=i(3577);const o=["disabled","title"];function l(e,t,i,l,a,r){const h=(0,s.up)("Icon");return(0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(["floating-btn",r.className])},[(0,s._)("button",{type:"button",class:"btn btn-primary",disabled:i.disabled,title:i.title,onClick:t[0]||(t[0]=t=>e.$emit("click",t))},[(0,s.Wm)(h,{class:(0,n.C_)(i.iconClass),url:i.iconUrl},null,8,["class","url"])],8,o)],2)}var a=i(657),r={name:"FloatingButton",components:{Icon:a.Z},emits:["click"],props:{disabled:{type:Boolean,default:!1},iconClass:{type:String},iconUrl:{type:String},class:{type:String},title:{type:String}},computed:{className(){return this.class}}},h=i(3744);const c=(0,h.Z)(r,[["render",l],["__scopeId","data-v-77c2517e"]]);var p=c},671:function(e,t,i){i.d(t,{Z:function(){return y}});var s=i(6252),n=i(9963),o=i(3577);const l=e=>((0,s.dD)("data-v-77ea2884"),e=e(),(0,s.Cn)(),e),a={class:"dialog-content"},r={class:"buttons"},h=l((()=>(0,s._)("i",{class:"fas fa-check"},null,-1))),c=l((()=>(0,s._)("i",{class:"fas fa-xmark"},null,-1)));function p(e,t,i,l,p,d){const u=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(u,{ref:"modal",title:i.title},{default:(0,s.w5)((()=>[(0,s._)("form",{onSubmit:t[5]||(t[5]=(0,n.iM)(((...e)=>d.onConfirm&&d.onConfirm(...e)),["prevent"]))},[(0,s._)("div",a,[(0,s.WI)(e.$slots,"default",{},void 0,!0),(0,s.wy)((0,s._)("input",{type:"text",ref:"input","onUpdate:modelValue":t[0]||(t[0]=e=>p.value_=e)},null,512),[[n.nr,p.value_]])]),(0,s._)("div",r,[(0,s._)("button",{type:"submit",class:"ok-btn",onClick:t[1]||(t[1]=(...e)=>d.onConfirm&&d.onConfirm(...e)),onTouch:t[2]||(t[2]=(...e)=>d.onConfirm&&d.onConfirm(...e))},[h,(0,s.Uk)("   "+(0,o.zw)(i.confirmText),1)],32),(0,s._)("button",{type:"button",class:"cancel-btn",onClick:t[3]||(t[3]=(...e)=>d.close&&d.close(...e)),onTouch:t[4]||(t[4]=(...e)=>d.close&&d.close(...e))},[c,(0,s.Uk)("   "+(0,o.zw)(i.cancelText),1)],32)])],32)])),_:3},8,["title"])}var d=i(3848),u={emits:["input"],components:{Modal:d.Z},props:{title:{type:String},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},visible:{type:Boolean,default:!1},value:{type:String,default:""}},data(){return{value_:"",visible_:!1}},methods:{onConfirm(){this.value_?.trim()?.length&&this.$emit("input",this.value_),this.close()},open(){this.visible_||(this.value_=this.value,this.$refs.modal.show(),this.visible_=!0,this.focus())},close(){this.visible_&&(this.value_="",this.$refs.modal.hide(),this.visible_=!1)},show(){this.open()},hide(){this.close()},focus(){this.$nextTick((()=>{this.$refs.input.focus()}))}},watch:{visible(e){e?this.open():this.close()}},mounted(){this.visible_=this.visible,this.value_=this.value||""}},f=i(3744);const m=(0,f.Z)(u,[["render",p],["__scopeId","data-v-77ea2884"]]);var y=m}}]);
//# sourceMappingURL=6746.530453d6.js.map