"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[9784,2519],{6561:function(e,n,t){t.d(n,{A:function(){return d}});var i=t(641),s=t(33);const l={class:"no-items-container"};function a(e,n,t,a,o,r){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",{class:(0,s.C4)(["no-items fade-in",{shadow:t.withShadow}])},[(0,i.RG)(e.$slots,"default",{},void 0,!0)],2)])}var o={name:"NoItems",props:{withShadow:{type:Boolean,default:!0}}},r=t(6262);const c=(0,r.A)(o,[["render",a],["__scopeId","data-v-4856c4d7"]]);var d=c},2519:function(e,n,t){t.r(n),t.d(n,{default:function(){return $}});var i=t(641),s=t(33);const l={class:"media-youtube-channel"},a={key:1,class:"channel"},o={class:"header"},r={class:"banner"},c=["src"],d={class:"row info-container"},u={class:"info"},h={class:"row"},g={class:"title-container"},p=["href"],b={class:"image"},m=["src"],y=["href"],w={class:"actions"},f=["title"],k={key:0,class:"subscribers"},v={key:0,class:"row description-container"},C={class:"description-toggle"},_=["title"];function L(e,n,t,L,E,P){const S=(0,i.g2)("Loading"),x=(0,i.g2)("Results");return(0,i.uX)(),(0,i.CE)("div",l,[P.isLoading?((0,i.uX)(),(0,i.Wv)(S,{key:0})):E.channel?((0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",o,[(0,i.Lk)("div",r,[E.banner?.length?((0,i.uX)(),(0,i.CE)("img",{key:0,src:E.channel.banner,onError:n[0]||(n[0]=(...e)=>P.onBannerError&&P.onBannerError(...e))},null,40,c)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",d,[(0,i.Lk)("div",u,[(0,i.Lk)("div",h,[(0,i.Lk)("div",g,[E.image?.length?((0,i.uX)(),(0,i.CE)("a",{key:0,href:E.channel.url,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",b,[(0,i.Lk)("img",{src:E.image,onError:n[1]||(n[1]=(...e)=>P.onImageError&&P.onImageError(...e))},null,40,m)])],8,p)):(0,i.Q3)("",!0),(0,i.Lk)("a",{class:"title",href:E.channel.url,target:"_blank",rel:"noopener noreferrer"},(0,s.v_)(E.channel?.name),9,y)]),(0,i.Lk)("div",w,[(0,i.Lk)("button",{title:E.subscribed?"Unsubscribe":"Subscribe",onClick:n[2]||(n[2]=(...e)=>P.toggleSubscription&&P.toggleSubscription(...e))},(0,s.v_)(E.subscribed?"Unsubscribe":"Subscribe"),9,f),null!=E.channel.subscribers&&(E.channel.subscribers||0)>=0?((0,i.uX)(),(0,i.CE)("div",k,(0,s.v_)(e.formatNumber(E.channel.subscribers))+" subscribers ",1)):(0,i.Q3)("",!0)])])])])]),E.channel?.description?((0,i.uX)(),(0,i.CE)("div",v,[(0,i.Lk)("div",C,[(0,i.Lk)("button",{title:E.showDescription?"Hide description":"Show description",onClick:n[3]||(n[3]=e=>E.showDescription=!E.showDescription)},[(0,i.Lk)("i",{class:(0,s.C4)(["fas",{"fa-chevron-down":!E.showDescription,"fa-chevron-up":E.showDescription}])},null,2)],8,_)]),E.channel?.description?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,s.C4)(["description",{hidden:!E.showDescription}])},(0,s.v_)(E.channel.description),3)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.bF)(x,{results:E.channel.items,filter:t.filter,"result-index-step":null,"selected-result":E.selectedResult,ref:"results",onAddToPlaylist:n[4]||(n[4]=n=>e.$emit("add-to-playlist",n)),onDownload:n[5]||(n[5]=n=>e.$emit("download",n)),onDownloadAudio:n[6]||(n[6]=n=>e.$emit("download-audio",n)),onOpenChannel:n[7]||(n[7]=n=>e.$emit("open-channel",n)),onPlay:n[8]||(n[8]=n=>e.$emit("play",n)),onPlayWithOpts:n[9]||(n[9]=n=>e.$emit("play-with-opts",n)),onScrollEnd:P.loadNextPage,onSelect:n[10]||(n[10]=e=>E.selectedResult=e),onView:n[11]||(n[11]=n=>e.$emit("view",n))},null,8,["results","filter","selected-result","onScrollEnd"])])):(0,i.Q3)("",!0)])}var E=t(9828),P=t(3149),S=t(2002),x={mixins:[S.A],emits:["add-to-playlist","download","download-audio","open-channel","play","play-with-opts","view"],components:{Loading:E.A,Results:P.A},props:{id:{type:String,required:!0},filter:{type:String,default:null},loading:{type:Boolean,default:!1}},data(){return{banner:null,channel:null,image:null,loading_:!1,loadingNextPage:!1,nextPageToken:null,renderedPageTokens:{},selectedResult:null,showDescription:!1,subscribed:!1}},computed:{isLoading(){return this.loading||this.loading_},itemsByUrl(){return this.channel?.items.reduce(((e,n)=>(e[n.url]=n,e)),{})}},methods:{async loadChannel(){this.loading_=!0;try{await this.updateChannel(!0),this.subscribed=await this.request("youtube.is_subscribed",{channel_id:this.id})}finally{this.loading_=!1}},async updateChannel(e){const n=this.channel?.next_page_token,t=await this.request("youtube.get_channel",{id:this.id,page:n});n&&(this.renderedPageTokens[n]=!0),this.nextPageToken=t.next_page_token,this.image=t.image,this.banner=t.banner;const i=this.itemsByUrl||{};let s=t.items.filter((e=>!i[e.url])).map((e=>({type:"youtube",...e})));e||(s=this.channel.items.concat(s)),this.channel=t,this.channel.items=s},async loadNextPage(){if(this.nextPageToken&&!this.renderedPageTokens[this.nextPageToken]&&!this.loadingNextPage){this.loadingNextPage=!0;try{await this.timeout(500),await this.updateChannel()}finally{this.loadingNextPage=!1}}},async toggleSubscription(){const e=this.subscribed?"unsubscribe":"subscribe";await this.request(`youtube.${e}`,{channel_id:this.id}),this.subscribed=!this.subscribed},onBannerError(){this.banner=null},onImageError(){this.image=null}},async mounted(){this.setUrlArgs({channel:this.id}),await this.loadChannel()},unmounted(){this.setUrlArgs({channel:null})}},A=t(6262);const X=(0,A.A)(x,[["render",L],["__scopeId","data-v-1dc82e96"]]);var $=X},9784:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var i=t(641),s=t(33);const l={class:"media-youtube-subscriptions"},a={key:2,class:"body grid"},o=["onClick"],r={class:"image"},c=["src","alt"],d={class:"title"},u={key:1,class:"subscription-body"};function h(e,n,t,h,g,p){const b=(0,i.g2)("Loading"),m=(0,i.g2)("NoItems"),y=(0,i.g2)("Channel");return(0,i.uX)(),(0,i.CE)("div",l,[t.selectedChannel?.id?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(y,{id:t.selectedChannel.id,filter:t.filter,onAddToPlaylist:n[1]||(n[1]=n=>e.$emit("add-to-playlist",n)),onDownload:n[2]||(n[2]=n=>e.$emit("download",n)),onDownloadAudio:n[3]||(n[3]=n=>e.$emit("download-audio",n)),onPlay:n[4]||(n[4]=n=>e.$emit("play",n)),onPlayWithOpts:n[5]||(n[5]=n=>e.$emit("play-with-opts",n)),onView:n[6]||(n[6]=n=>e.$emit("view",n))},null,8,["id","filter"])])):((0,i.uX)(),(0,i.CE)("div",{key:0,class:"subscriptions-index",onScroll:n[0]||(n[0]=(...e)=>p.onScroll&&p.onScroll(...e))},[p.showLoading?((0,i.uX)(),(0,i.Wv)(b,{key:0})):g.channels?.length?((0,i.uX)(),(0,i.CE)("div",a,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(p.channelsById,((n,t)=>((0,i.uX)(),(0,i.CE)("div",{class:"channel item",key:t,onClick:t=>e.$emit("select",n)},[(0,i.Lk)("div",r,[(0,i.Lk)("img",{src:n.image,alt:n.name},null,8,c)]),(0,i.Lk)("div",d,(0,s.v_)(n.name),1)],8,o)))),128))])):((0,i.uX)(),(0,i.Wv)(m,{key:1,"with-shadow":!1},{default:(0,i.k6)((()=>n[7]||(n[7]=[(0,i.eW)(" No channels found. ")]))),_:1}))],32))])}var g=t(2519),p=t(6561),b=t(9828),m=t(2002),y={mixins:[m.A],emits:["add-to-playlist","download","download-audio","play","play-with-opts","select","view"],components:{Channel:g["default"],Loading:b.A,NoItems:p.A},props:{selectedChannel:{type:Object,default:null},filter:{type:String,default:null}},data(){return{channels:[],loading:!1,nextPageToken:null}},computed:{channelsById(){return this.channels.filter((e=>!this.filter||e.name.toLowerCase().includes(this.filter.toLowerCase()))).reduce(((e,n)=>(e[n.id]=n,e)),{})},showLoading(){return this.loading&&!this.channels.length}},methods:{async loadSubscriptions(){if(!this.loading){this.loading=!0;try{this.channels=[...this.channels,...await this.request("youtube.get_subscriptions",{page:this.nextPageToken})],this.channels.length&&(this.nextPageToken=this.channels[this.channels.length-1].next_page_token)}finally{this.loading=!1}}},initView(){const e=this.getUrlArgs();e.channel&&this.$emit("select",{id:e.channel})},onScroll(e){const n=e.target;if(!n)return;const t=n.scrollHeight-n.scrollTop<=n.clientHeight+150;t&&this.loadSubscriptions()}},async mounted(){await this.loadSubscriptions(),this.initView()}},w=t(6262);const f=(0,w.A)(y,[["render",h],["__scopeId","data-v-681f78c0"]]);var k=f}}]);
//# sourceMappingURL=9784.7c8fe984.js.map