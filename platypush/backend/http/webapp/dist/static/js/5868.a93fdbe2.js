"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[5868,4028,8113,4279,6640],{3222:function(t,e,i){i.d(e,{Z:function(){return d}});var l=i(6252),o=i(3577);const s={class:"no-items-container"};function n(t,e,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",{class:(0,o.C_)(["no-items fade-in",{shadow:i.withShadow}])},[(0,l.WI)(t.$slots,"default",{},void 0,!0)],2)])}var a={name:"NoItems",props:{withShadow:{type:Boolean,default:!0}}},r=i(3744);const c=(0,r.Z)(a,[["render",n],["__scopeId","data-v-4856c4d7"]]);var d=c},3549:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var l=i(6252),o=i(3577);const s={class:"collections items"},n=["onClick"],a={class:"image"},r=["src","alt","onError"],c={key:0,class:"name"};function d(t,e,i,d,u,m){return(0,l.wg)(),(0,l.iD)("div",{class:(0,o.C_)(["collections index",{"is-root":!i.parentId}])},[(0,l._)("div",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.filteredItems,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"collection item",key:e.id,onClick:i=>t.$emit("select",e)},[(0,l._)("div",a,[u.fallbackImageCollections[e.id]?((0,l.wg)(),(0,l.iD)("i",{key:1,class:(0,o.C_)(m.collectionsIcons[e.type]??"fas fa-folder")},null,2)):((0,l.wg)(),(0,l.iD)("img",{key:0,src:e.image,alt:e.name,onError:t=>m.onImageError(e)},null,40,r))]),u.fallbackImageCollections[e.id]||i.parentId?((0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("h2",null,(0,o.zw)(e.name),1)])):(0,l.kq)("",!0)],8,n)))),128))])],2)}var u={props:{filter:{type:String},items:{type:Array,default:()=>[]},parentId:{type:String}},data(){return{fallbackImageCollections:{}}},computed:{collectionsIcons(){return{books:"fas fa-book",homevideos:"fas fa-video",movies:"fas fa-film",music:"fas fa-music",playlists:"fas fa-list",photos:"fas fa-image",series:"fas fa-tv"}},filteredItems(){return Object.values(this.items).filter((t=>!this.filter||t.name.toLowerCase().includes(this.filter.toLowerCase()))).sort(((t,e)=>t.name.localeCompare(e.name)))}},methods:{onImageError(t){this.fallbackImageCollections[t.id]=!0}}},m=i(3744);const f=(0,m.Z)(u,[["render",d],["__scopeId","data-v-75f01cbb"]]);var p=f},8113:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});var l=i(6640),o={mixins:[l["default"]],emits:["add-to-playlist","back","download","play","play-with-opts","select"],props:{collection:{type:Object},path:{type:Array,default:()=>[]}},data(){return{items:[],loading_:!1,selectedResult:null,sort:{attr:"title",desc:!1}}},computed:{isLoading(){return this.loading_||this.loading},sortedItems(){return this.items?[...this.items].sort(((t,e)=>{const i=this.sort.attr,l=this.sort.desc;let o=t[i],s=e[i];return"number"===typeof o||"number"===typeof s?(o=o||0,s=s||0,l?s-o:o-s):(o=(o||"").toString().toLowerCase(),s=(s||"").toString().toLowerCase(),l?s.localeCompare(o):o.localeCompare(s))})).map((t=>({item_type:t.type,...t,type:"jellyfin"}))):[]}},methods:{async refresh(){const t=this.collection?.name;if(t?.length){this.loading_=!0;try{this.items=await this.request("media.jellyfin.search",{collection:t,limit:1e3})}finally{this.loading_=!1}}}},watch:{collection(){this.refresh()}}};const s=o;var n=s},4279:function(t,e,i){i.r(e),i.d(e,{default:function(){return D}});var l=i(6252);const o={class:"sort-buttons"},s={class:"sort-buttons-dropdown-body"},n=(0,l._)("div",{class:"title"},"Sort Direction",-1),a=(0,l._)("div",{class:"title"},"Sort By",-1);function r(t,e,i,r,c,d){const u=(0,l.up)("DropdownItem"),m=(0,l.up)("Dropdown");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(m,{"icon-class":d.btnIconClass,glow:"",right:"",title:d.title},{default:(0,l.w5)((()=>[(0,l._)("div",s,[n,(0,l.Wm)(u,{text:"Ascending","icon-class":"fa fa-arrow-up-short-wide","item-class":{active:!i.value?.desc},onInput:e[0]||(e[0]=t=>d.onDescChange(!1))},null,8,["item-class"]),(0,l.Wm)(u,{text:"Descending","icon-class":"fa fa-arrow-down-wide-short","item-class":{active:i.value?.desc},onInput:e[1]||(e[1]=t=>d.onDescChange(!0))},null,8,["item-class"]),a,(0,l.Wm)(u,{text:"Name","icon-class":"fa fa-font","item-class":{active:"title"===i.value?.attr},onInput:e[2]||(e[2]=t=>d.onAttrChange("title"))},null,8,["item-class"]),i.withReleaseDate?((0,l.wg)(),(0,l.j4)(u,{key:0,text:"Release Date","icon-class":"fa fa-calendar","item-class":{active:"year"===i.value?.attr},onInput:e[3]||(e[3]=t=>d.onAttrChange("year"))},null,8,["item-class"])):(0,l.kq)("",!0),i.withCriticRating?((0,l.wg)(),(0,l.j4)(u,{key:1,text:"Critics Rating","icon-class":"fa fa-star","item-class":{active:"critic_rating"===i.value?.attr},onInput:e[4]||(e[4]=t=>d.onAttrChange("critic_rating"))},null,8,["item-class"])):(0,l.kq)("",!0),i.withCommunityRating?((0,l.wg)(),(0,l.j4)(u,{key:2,text:"Community Rating","icon-class":"fa fa-users","item-class":{active:"community_rating"===i.value?.attr},onInput:e[5]||(e[5]=t=>d.onAttrChange("community_rating"))},null,8,["item-class"])):(0,l.kq)("",!0)])])),_:1},8,["icon-class","title"])])}var c=i(9963),d=i(3577);const u={class:"floating-dropdown-container"},m={class:"body-container hidden",ref:"dropdownContainer"};function f(t,e,i,o,s,n){const a=(0,l.up)("FloatingButton"),r=(0,l.up)("DropdownBody");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(a,{disabled:t.disabled,iconClass:t.iconClass,iconUrl:t.iconUrl,glow:t.glow,left:t.left,right:t.right,title:t.title,top:t.top,bottom:t.bottom,ref:"button",onClick:e[0]||(e[0]=(0,c.iM)((e=>t.toggle(e)),["stop"]))},null,8,["disabled","iconClass","iconUrl","glow","left","right","title","top","bottom"]),(0,l._)("div",m,[(0,l.Wm)(r,{id:t.id,keepOpenOnItemClick:t.keepOpenOnItemClick,style:(0,d.j5)(t.style),ref:"dropdown",onClick:t.onClick},{default:(0,l.w5)((()=>[(0,l.WI)(t.$slots,"default",{},void 0,!0)])),_:3},8,["id","keepOpenOnItemClick","style","onClick"])],512)])}var p=i(1370),h=i(3218),g=i(3825),y={mixins:[p.Z,g.Z],emits:["click"],components:{DropdownBody:h.Z,FloatingButton:g.Z}},w=i(3744);const v=(0,w.Z)(y,[["render",f],["__scopeId","data-v-2e3f2ab5"]]);var C=v,k=i(7597),_=i(8637),I={emits:["input"],mixins:[_.Z],components:{Dropdown:C,DropdownItem:k.Z},props:{value:{type:Object,required:!0},withReleaseDate:{type:Boolean,default:!1},withCriticRating:{type:Boolean,default:!1},withCommunityRating:{type:Boolean,default:!1}},computed:{btnIconClass(){return this.value?.desc?"fa fa-arrow-down-wide-short":"fa fa-arrow-up-short-wide"},title(){return"Sort By: "+(this.value?.attr??"[none]")+" "+(this.value?.desc?"descending":"ascending")}},methods:{onAttrChange(t){this.$emit("input",{attr:t,desc:!!this.value?.desc})},onDescChange(t){this.$emit("input",{attr:this.value?.attr,desc:t})}},watch:{value(){this.setUrlArgs({sort:this.value?.attr,desc:this.value?.desc})}},mounted(){const t=this.getUrlArgs(),e=t.sort,i="true"===t.desc?.toString();(e||i)&&this.$emit("input",{attr:e,desc:i})},unmounted(){this.setUrlArgs({sort:null,desc:null})}};const b=(0,w.Z)(I,[["render",r]]);var D=b},5868:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});var l=i(6252);const o={class:"videos index"},s={key:2,class:"items-wrapper"};function n(t,e,i,n,a,r){const c=(0,l.up)("Loading"),d=(0,l.up)("NoItems"),u=(0,l.up)("Collections"),m=(0,l.up)("Results"),f=(0,l.up)("SortButton");return(0,l.wg)(),(0,l.iD)("div",o,[t.isLoading?((0,l.wg)(),(0,l.j4)(c,{key:0})):t.items?.length?((0,l.wg)(),(0,l.iD)("div",s,[r.collections.length>0?((0,l.wg)(),(0,l.j4)(u,{key:0,collection:t.collection,filter:t.filter,items:r.collections,loading:t.isLoading,"parent-id":t.collection?.id,onSelect:r.selectCollection},null,8,["collection","filter","items","loading","parent-id","onSelect"])):(0,l.kq)("",!0),r.mediaItems.length>0?((0,l.wg)(),(0,l.j4)(m,{key:1,results:r.mediaItems,sources:{jellyfin:!0},filter:t.filter,"selected-result":t.selectedResult,onAddToPlaylist:e[0]||(e[0]=e=>t.$emit("add-to-playlist",e)),onDownload:e[1]||(e[1]=e=>t.$emit("download",e)),onPlay:e[2]||(e[2]=e=>t.$emit("play",e)),onPlayWithOpts:e[3]||(e[3]=e=>t.$emit("play-with-opts",e)),onRemoveFromPlaylist:e[4]||(e[4]=e=>t.$emit("remove-from-playlist",e)),onSelect:e[5]||(e[5]=e=>t.selectedResult=e)},null,8,["results","filter","selected-result"])):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.j4)(d,{key:1,"with-shadow":!1},{default:(0,l.w5)((()=>[(0,l.Uk)(" No videos found. ")])),_:1})),t.items.length>0?((0,l.wg)(),(0,l.j4)(f,{key:3,value:t.sort,onInput:e[6]||(e[6]=e=>t.sort=e)},null,8,["value"])):(0,l.kq)("",!0)])}var a=i(3549),r=i(6791),c=i(8113),d=i(3222),u=i(1602),m=i(4279),f={mixins:[c["default"]],emits:["select","select-collection"],components:{Collections:a["default"],Loading:r.Z,NoItems:d.Z,Results:u.Z,SortButton:m["default"]},computed:{collections(){return this.sortedItems?.filter((t=>"collection"===t.item_type))??[]},mediaItems(){return this.sortedItems?.filter((t=>"collection"!==t.item_type))??[]}},methods:{selectCollection(t){this.$emit("select-collection",{type:"homevideos",...t})},async init(){const t=this.getUrlArgs();let e=t?.collection;if(e){this.loading_=!0;try{e=await this.request("media.jellyfin.info",{item_id:e}),e&&this.selectCollection(e)}finally{this.loading_=!1}}},async refresh(){this.loading_=!0;try{this.items=this.collection?.id?await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:5e3}):(await this.request("media.jellyfin.get_collections")).map((t=>({...t,item_type:"collection"})))}finally{this.loading_=!1}}},async mounted(){this.init(),await this.refresh()}},p=i(3744);const h=(0,p.Z)(f,[["render",n],["__scopeId","data-v-2b046c5c"]]);var g=h},6640:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});var l=i(8637),o={mixins:[l.Z],emits:["add-to-playlist","back","create-playlist","download","download-audio","path-change","play","remove-from-playlist","remove-playlist","rename-playlist"],props:{filter:{type:String,default:""},loading:{type:Boolean,default:!1},mediaPlugin:{type:String},selectedPlaylist:{default:null},selectedChannel:{default:null}},data(){return{loading_:!1}},computed:{isLoading(){return this.loading||this.loading_}}};const s=o;var n=s}}]);
//# sourceMappingURL=5868.a93fdbe2.js.map