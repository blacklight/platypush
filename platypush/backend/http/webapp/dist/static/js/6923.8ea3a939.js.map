{"version":3,"file":"static/js/6923.8ea3a939.js","mappings":"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","sources":["webpack://platypush/./src/components/Procedure/ProcedureEditorModal.vue","webpack://platypush/./src/components/Procedure/ProcedureEditor.vue","webpack://platypush/./src/components/elements/FloatingButtons.vue","webpack://platypush/./src/components/elements/FloatingButtons.vue?423f","webpack://platypush/./src/components/Procedure/ProcedureDump.vue","webpack://platypush/./src/components/Procedure/ProcedureDump.vue?2300","webpack://platypush/./src/components/Procedure/ProcedureEditor.vue?d6ef","webpack://platypush/./src/components/Procedure/ProcedureEditorModal.vue?bcc3","webpack://platypush/./src/components/panels/Entities/Procedure.vue","webpack://platypush/./src/components/panels/Entities/Procedure.vue?e8a2"],"sourcesContent":["<template>\n  <div class=\"procedure-editor-modal-container\">\n    <Modal :title=\"title || value.name\"\n           :visible=\"visible\"\n           :uppercase=\"!value.name\"\n           :before-close=\"(() => $refs.editor?.checkCanClose())\"\n           ref=\"editorModal\"\n           @close=\"$emit('close')\">\n      <ProcedureEditor :procedure=\"value\"\n                       :read-only=\"isReadOnly\"\n                       :with-name=\"!isReadOnly\"\n                       :with-save=\"!isReadOnly\"\n                       :value=\"value\"\n                       :modal=\"isReadOnly ? null : (() => $refs.editorModal)\"\n                       ref=\"editor\"\n                       @input=\"$emit('input', $event)\" />\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport Modal from \"@/components/Modal\";\nimport ProcedureEditor from \"@/components/Procedure/ProcedureEditor\"\n\nexport default {\n  mixins: [Modal, ProcedureEditor],\n  emits: ['close', 'input'],\n  components: {\n    Modal,\n    ProcedureEditor,\n  },\n\n  data: function() {\n    return {\n      args: {},\n      defaultIconClass: 'fas fa-cogs',\n      extraArgs: {},\n      collapsed_: true,\n      infoCollapsed: false,\n      lastError: null,\n      lastResponse: null,\n      newArgName: '',\n      newArgValue: '',\n      runCollapsed: false,\n      showConfirmDelete: false,\n      showFileEditor: false,\n      showProcedureEditor: false,\n    }\n  },\n\n  computed: {\n    isReadOnly() {\n      return this.value.procedure_type && this.value.procedure_type !== 'db'\n    },\n  },\n\n  methods: {\n    // Proxy and delegate the Modal's methods\n    open() {\n      this.$refs.editorModal.open()\n    },\n\n    close() {\n      this.$refs.editorModal.close()\n    },\n\n    show() {\n      this.$refs.editorModal.show()\n    },\n\n    hide() {\n      this.$refs.editorModal.hide()\n    },\n\n    toggle() {\n      this.$refs.editorModal.toggle()\n    },\n  },\n\n  watch: {\n    collapsed: {\n      immediate: true,\n      handler(value) {\n        this.collapsed_ = value\n      },\n    },\n\n    selected: {\n      immediate: true,\n      handler(value) {\n        this.collapsed_ = value\n      },\n    },\n\n    showProcedureEditor(value) {\n      if (!value) {\n        this.$refs.editor?.reset()\n      }\n    },\n  },\n\n  mounted() {\n    this.collapsed_ = !this.selected\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.procedure-editor-modal-container {\n  cursor: default;\n\n  :deep(.modal-container) {\n    .body {\n      padding: 0;\n\n      @include until($tablet) {\n        width: calc(100vw - 2em);\n      }\n\n      @include from($tablet) {\n        width: 50em;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"procedure-editor-container\">\n    <main>\n      <div class=\"procedure-editor\">\n        <form class=\"procedure-edit-form\" autocomplete=\"off\" @submit.prevent=\"executeAction\">\n          <input type=\"submit\" style=\"display: none\" />\n\n          <div class=\"name-editor-container\" v-if=\"withName\">\n            <div class=\"row item\">\n              <div class=\"name\">\n                <label>\n                  <i class=\"icon fas fa-pen-to-square\" />\n                  Name\n                </label>\n              </div>\n\n              <div class=\"value\">\n                <input type=\"text\"\n                       v-model=\"newValue.name\"\n                       ref=\"nameInput\"\n                       :disabled=\"readOnly\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"icon-editor-container\"\n               v-if=\"Object.keys(newValue?.meta?.icon || {}).length\">\n            <IconEditor :entity=\"newValue\"\n                        @input=\"onIconChange\"\n                        @change=\"onIconChange\" />\n          </div>\n\n          <div class=\"args-editor-container\" v-if=\"showArgs\">\n            <h3>\n              <i class=\"icon fas fa-code\" />&nbsp;\n              Arguments\n            </h3>\n\n            <div class=\"args\" ref=\"args\">\n              <div class=\"row item\" v-for=\"(arg, index) in newValue.args\" :key=\"index\">\n                <input type=\"text\"\n                       placeholder=\"Argument Name\"\n                       :value=\"arg\"\n                       :disabled=\"readOnly\"\n                       @input=\"onArgInput($event.target.value?.trim(), index)\"\n                       @blur=\"onArgEdit(arg, index)\" />\n              </div>\n\n              <div class=\"row item new-arg\" v-if=\"!readOnly\">\n                <input type=\"text\"\n                       placeholder=\"New Argument\"\n                       ref=\"newArgInput\" \n                       v-model=\"newArg\"\n                       @blur=\"onNewArg\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"actions-container\">\n            <h3 v-if=\"showArgs\">\n              <i class=\"icon fas fa-play\" />&nbsp;\n              Actions\n            </h3>\n\n            <ActionsList :value=\"newValue.actions\"\n                         :context=\"context\"\n                         :read-only=\"readOnly\"\n                         @input=\"onActionsEdit\" />\n          </div>\n\n          <!-- Structured response container -->\n          <div class=\"response-container\" v-if=\"response || error\">\n            <Response :response=\"response\" :error=\"error\" />\n          </div>\n        </form>\n      </div>\n\n      <div class=\"args-modal-container\" ref=\"argsModalContainer\" v-if=\"showArgsModal\">\n        <Modal title=\"Run Arguments\"\n               :visible=\"true\"\n               ref=\"argsModal\"\n               @close=\"onRunArgsModalClose\">\n          <form class=\"args\" @submit.prevent=\"executeWithArgs\">\n            <div class=\"row item\" v-for=\"value, arg in runArgs\" :key=\"arg\">\n              <span class=\"arg-name\">\n                <span v-if=\"newValue.args?.includes(arg)\">\n                  {{ arg }}\n                </span>\n\n                <span v-else>\n                  <input type=\"text\"\n                         placeholder=\"New Argument\"\n                         :value=\"arg\"\n                         @input=\"onEditRunArgName($event, arg)\">\n                </span>\n\n                <span class=\"mobile\">\n                  &nbsp;=&nbsp;\n                </span>\n              </span>\n\n              <span class=\"arg-value\">\n                <span class=\"from tablet\">\n                  &nbsp;=&nbsp;\n                </span>\n\n                <input type=\"text\"\n                       placeholder=\"Argument Value\"\n                       :ref=\"`run-arg-value-${arg}`\"\n                       v-model=\"runArgs[arg]\" />\n              </span>\n            </div>\n\n            <div class=\"row item new-arg\">\n              <span class=\"arg-name\">\n                <input type=\"text\"\n                       placeholder=\"New Argument\"\n                       ref=\"newRunArgName\"\n                       v-model=\"newRunArg[0]\"\n                       @blur=\"onNewRunArgName\" />\n\n                <span class=\"mobile\">\n                  &nbsp;=&nbsp;\n                </span>\n              </span>\n              <span class=\"arg-value\">\n                <span class=\"from tablet\">\n                  &nbsp;=&nbsp;\n                </span>\n\n                <input type=\"text\"\n                       placeholder=\"Argument Value\"\n                       v-model=\"newRunArg[1]\" />\n              </span>\n            </div>\n\n            <input type=\"submit\" style=\"display: none\" />\n            <FloatingButton icon-class=\"fa fa-play\"\n                            title=\"Run Procedure\"\n                            :disabled=\"newValue.actions?.length === 0 || running\"\n                            @click=\"executeWithArgs\" />\n          </form>\n        </Modal>\n      </div>\n\n      <div class=\"confirm-dialog-container\">\n        <ConfirmDialog ref=\"confirmClose\" @input=\"forceClose\">\n          This procedure has unsaved changes. Are you sure you want to close it?\n        </ConfirmDialog>\n      </div>\n\n      <div class=\"confirm-dialog-container\">\n        <ConfirmDialog ref=\"confirmOverwrite\" @input=\"forceSave\">\n          A procedure with the same name already exists. Do you want to overwrite it?\n        </ConfirmDialog>\n      </div>\n\n      <div class=\"spacer\" />\n\n      <div class=\"floating-buttons\">\n        <div class=\"buttons left\">\n          <FloatingButtons direction=\"row\">\n              <FloatingButton icon-class=\"fa fa-code\"\n                              left glow\n                              title=\"Export to YAML\"\n                              @click=\"showYAML = true\" />\n              <FloatingButton icon-class=\"fa fa-copy\"\n                              left glow\n                              title=\"Duplicate Procedure\"\n                              @click=\"duplicate\"\n                              v-if=\"newValue.name?.length && newValue.actions?.length\" />\n          </FloatingButtons>\n        </div>\n\n        <div class=\"buttons right\">\n          <FloatingButtons direction=\"row\">\n              <FloatingButton icon-class=\"fa fa-save\"\n                              right glow\n                              title=\"Save Procedure\"\n                              :disabled=\"!canSave\"\n                              @click=\"save\"\n                              v-if=\"showSave\" />\n              <FloatingButton icon-class=\"fa fa-play\"\n                              right glow\n                              title=\"Run Procedure\"\n                              :disabled=\"newValue.actions?.length === 0 || running\"\n                              @click=\"executeAction\" />\n          </FloatingButtons>\n        </div>\n      </div>\n    </main>\n\n    <div class=\"duplicate-editor-container\" v-if=\"duplicateValue != null\">\n      <Modal title=\"Duplicate Procedure\"\n             ref=\"duplicateModal\"\n             :visible=\"true\"\n             :before-close=\"(() => $refs.duplicateEditor?.checkCanClose())\"\n             @close=\"duplicateValue = null\">\n        <ProcedureEditor :value=\"duplicateValue\"\n                         :with-name=\"true\"\n                         :with-save=\"true\"\n                         :modal=\"() => $refs.duplicateModal\"\n                         ref=\"duplicateEditor\"\n                         @input=\"duplicateValue = null\" />\n      </Modal>\n    </div>\n\n    <div class=\"dump-modal-container\" v-if=\"showYAML\">\n      <Modal title=\"Procedure Dump\"\n             :visible=\"true\"\n             @close=\"showYAML = false\">\n        <ProcedureDump :procedure=\"newValue\" />\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ActionsList from \"@/components/Action/ActionsList\"\nimport ConfirmDialog from \"@/components/elements/ConfirmDialog\";\nimport FloatingButton from \"@/components/elements/FloatingButton\";\nimport FloatingButtons from \"@/components/elements/FloatingButtons\";\nimport IconEditor from \"@/components/panels/Entities/IconEditor\";\nimport Modal from \"@/components/Modal\";\nimport ProcedureDump from \"./ProcedureDump\";\nimport Response from \"@/components/Action/Response\"\nimport Utils from \"@/Utils\"\n\nexport default {\n  mixins: [Utils],\n  emits: ['input'],\n  components: {\n    ActionsList,\n    ConfirmDialog,\n    FloatingButton,\n    FloatingButtons,\n    IconEditor,\n    Modal,\n    ProcedureDump,\n    Response,\n  },\n\n  props: {\n    withName: {\n      type: Boolean,\n      default: false,\n    },\n\n    withSave: {\n      type: Boolean,\n      default: false,\n    },\n\n    value: {\n      type: Object,\n      default: () => ({\n        name: undefined,\n        actions: [],\n      }),\n    },\n\n    readOnly: {\n      type: Boolean,\n      default: false,\n    },\n\n    modal: {\n      type: [Object, Function],\n    },\n  },\n\n  data() {\n    return {\n      confirmOverwrite: false,\n      duplicateValue: null,\n      error: undefined,\n      loading: false,\n      newAction: {},\n      newArg: null,\n      newRunArg: [null, null],\n      newValue: {},\n      response: undefined,\n      running: false,\n      runArgs: {},\n      shouldForceClose: false,\n      showArgsModal: false,\n      showYAML: false,\n    }\n  },\n\n  computed: {\n    floatingButtons() {\n      return this.$el.querySelector('.floating-btns')\n    },\n\n    canSave() {\n      if (\n        !this.withSave ||\n        this.readOnly ||\n        !this.newValue?.name?.length ||\n        !this.newValue?.actions?.length\n      )\n        return false\n\n      return this.valueString !== this.newValueString\n    },\n\n    valueString() {\n      return JSON.stringify(this.value)\n    },\n\n    newValueString() {\n      return JSON.stringify(this.newValue)\n    },\n\n    context() {\n      return this.newValue?.args?.reduce((acc, arg) => {\n        acc[arg] = {\n          source: 'args',\n        }\n\n        return acc\n      }, {})\n    },\n\n    modal_() {\n      if (this.readOnly)\n        return null\n\n      return typeof this.modal === 'function' ? this.modal() : this.modal\n    },\n\n    shouldConfirmClose() {\n      return this.canSave && !this.shouldForceClose\n    },\n\n    showArgs() {\n      return !this.readOnly || this.newValue.args?.length\n    },\n\n    showSave() {\n      return this.withSave && !this.readOnly\n    },\n  },\n\n  methods: {\n    async save() {\n      if (!this.canSave)\n        return\n\n      this.loading = true\n      try {\n        const overwriteOk = await this.overwriteOk()\n        if (!overwriteOk)\n          return\n\n        const actions = this.newValue.actions.map((action) => {\n          const a = {...action}\n          if ('name' in a) {\n            a.action = a.name\n            delete a.name\n          }\n\n          return a\n        })\n\n        const args = {...this.newValue, actions}\n        if (this.value?.name?.length && this.value.name !== this.newValue.name) {\n          args.old_name = this.value.name\n        }\n\n        await this.request('procedures.save', args)\n        this.$emit('input', this.newValue)\n        this.notify({\n          text: 'Procedure saved successfully',\n          image: {\n            icon: 'check',\n          }\n        })\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async forceSave() {\n      this.confirmOverwrite = true\n      await this.save()\n    },\n\n    async overwriteOk() {\n      if (this.confirmOverwrite) {\n        this.confirmOverwrite = false\n        return true\n      }\n\n      const procedures = await this.request('procedures.status', {publish: false})\n      if (\n        this.value.name?.length &&\n        this.value.name !== this.newValue.name &&\n        procedures[this.newValue.name]\n      ) {\n        this.$refs.confirmOverwrite?.open()\n        return false\n      }\n\n      return true\n    },\n\n    onResponse(response) {\n      this.response = (\n        typeof response === 'string' ? response : JSON.stringify(response, null, 2)\n      ).trim()\n\n      this.error = undefined\n    },\n\n    onError(error) {\n      if (error.message)\n        error = error.message\n\n      this.response = undefined\n      this.error = error\n    },\n\n    onDone() {\n      this.running = false\n      this.runArgs = {}\n    },\n\n    async executeAction() {\n      if (!this.newValue.actions?.length) {\n        this.notify({\n          text: 'No actions to execute',\n          warning: true,\n          image: {\n            icon: 'exclamation-triangle',\n          }\n        })\n\n        return\n      }\n\n      if (this.newValue.args?.length && !Object.keys(this.runArgs).length) {\n        this.showArgsModal = true\n        return\n      }\n\n      this.running = true\n      try {\n        const procedure = {\n          actions: this.newValue.actions.map((action) => {\n            const a = {...action}\n            if ('name' in a) {\n              a.action = a.name\n              delete a.name\n            }\n\n            return a\n          }),\n\n          args: this.runArgs,\n        }\n\n        const response = await this.request('procedures.exec', {procedure})\n        this.onResponse(response)\n      } catch (e) {\n        console.error(e)\n        this.onError(e)\n      } finally {\n        this.onDone()\n      }\n    },\n\n    async executeWithArgs() {\n      this.$refs.argsModal?.close()\n      Object.entries(this.runArgs).forEach(([arg, value]) => {\n        if (!value?.length)\n          this.runArgs[arg] = null\n\n        try {\n          this.runArgs[arg] = JSON.parse(value)\n        } catch (e) {\n          // ignore\n        }\n      })\n\n      await this.executeAction()\n    },\n\n    duplicate() {\n      const name = `${this.newValue.name || ''}__copy`\n      const duplicate = JSON.parse(JSON.stringify(this.newValue))\n      this.duplicateValue = {\n        ...duplicate,\n        ...{\n          meta: {\n            ...(duplicate.meta || {}),\n            icon: {...(duplicate.meta?.icon || {})},\n          }\n        },\n        id: null,\n        external_id: name,\n        name: name,\n      }\n    },\n\n    onActionsEdit(actions) {\n      this.newValue.actions = actions\n    },\n\n    onArgInput(arg, index) {\n      this.newValue.args[index] = arg\n    },\n\n    onArgEdit(arg, index) {\n      arg = arg?.trim()\n      const isDuplicate = !!(\n        this.newValue.args?.filter(\n          (a, i) => a === arg && i !== index\n        ).length\n      )\n\n      if (!arg?.length || isDuplicate) {\n        this.newValue.args.splice(index, 1)\n\n        if (index === this.newValue.args.length) {\n          setTimeout(() => this.$refs.newArgInput?.focus(), 50)\n        } else {\n          const nextInput = this.$refs.args.children[index]?.querySelector('input[type=text]')\n          setTimeout(() => {\n            nextInput?.focus()\n            nextInput?.select()\n          }, 50)\n        }\n      }\n    },\n\n    onNewArg(event) {\n      const value = event.target.value?.trim()\n      if (!value?.length) {\n        return\n      }\n\n      if (!this.newValue.args) {\n        this.newValue.args = []\n      }\n\n      if (!this.newValue.args.includes(value)) {\n        this.newValue.args.push(value)\n      }\n\n      this.newArg = null\n      setTimeout(() => this.$refs.newArgInput?.focus(), 50)\n    },\n\n    onNewRunArgName() {\n      const arg = this.newRunArg[0]?.trim()\n      const value = this.newRunArg[1]?.trim()\n      if (!arg?.length) {\n        return\n      }\n\n      this.runArgs[arg] = value\n      this.newRunArg = [null, null]\n      this.$nextTick(() => this.$refs[`run-arg-value-${arg}`]?.[0]?.focus())\n    },\n\n    onEditRunArgName(event, arg) {\n      const newArg = event.target.value?.trim()\n      if (newArg === arg) {\n        return\n      }\n\n      if (newArg?.length) {\n        this.runArgs[newArg] = this.runArgs[arg]\n      }\n\n      delete this.runArgs[arg]\n      this.$nextTick(\n        () => this.$el.querySelector(`.args-modal-container .args input[type=text][value=\"${newArg}\"]`)?.focus()\n      )\n    },\n\n    onIconChange(icon) {\n      this.newValue.meta.icon = icon\n    },\n\n    onRunArgsModalClose() {\n      this.showArgsModal = false\n      this.$nextTick(() => {\n        this.runArgs = {}\n      })\n    },\n\n    checkCanClose() {\n      if (!this.shouldConfirmClose)\n        return true\n\n      this.$refs.confirmClose?.open()\n      return false\n    },\n\n    forceClose() {\n      this.shouldForceClose = true\n      this.$nextTick(() => {\n        if (!this.modal_)\n          return\n\n        let modal = this.modal_\n        if (typeof modal === 'function') {\n          modal = modal()\n        }\n\n        try {\n          modal?.close()\n        } catch (e) {\n          console.warn('Failed to close modal', e)\n        }\n\n        this.reset()\n      })\n    },\n\n    beforeUnload(e) {\n      if (this.shouldConfirmClose) {\n        e.preventDefault()\n        e.returnValue = ''\n      }\n    },\n\n    addBeforeUnload() {\n      window.addEventListener('beforeunload', this.beforeUnload)\n    },\n\n    removeBeforeUnload() {\n      window.removeEventListener('beforeunload', this.beforeUnload)\n    },\n\n    reset() {\n      this.removeBeforeUnload()\n    },\n\n    syncValue() {\n      if (!this.value)\n        return\n\n      const value = JSON.parse(JSON.stringify(this.value))\n      this.newValue = {\n        ...value,\n        actions: value.actions?.map(a => ({...a})),\n        args: [...(value?.args || [])],\n        meta: {...(value?.meta || {})},\n      }\n    },\n  },\n\n  watch: {\n    value: {\n      immediate: true,\n      deep: true,\n      handler() {\n        this.syncValue()\n      },\n    },\n\n    newValue: {\n      deep: true,\n      handler(value) {\n        if (this.withSave)\n          return\n\n        this.$emit('input', value)\n      },\n    },\n\n    showArgsModal(value) {\n      if (value) {\n        this.runArgs = this.newValue.args?.reduce((acc, arg) => {\n          acc[arg] = null\n          return acc\n        }, {})\n\n        this.$nextTick(() => {\n          this.$el.querySelector('.args-modal-container .args input[type=text]')?.focus()\n        })\n      }\n    },\n  },\n\n  mounted() {\n    this.addBeforeUnload()\n    this.syncValue()\n    this.$nextTick(() => {\n      if (this.withName)\n        this.$refs.nameInput?.focus()\n    })\n  },\n\n  unmouted() {\n    this.reset()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$floating-btns-height: 3em;\n\n.procedure-editor-container {\n  display: flex;\n  flex-direction: column;\n  padding-top: 0.75em;\n  position: relative;\n  max-height: 75vh;\n\n  main {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n  }\n\n  .procedure-editor {\n    width: 100%;\n    height: calc(100% - #{$floating-btns-height});\n    overflow: auto;\n    padding: 0 1em;\n\n    .procedure-edit-form {\n      padding-bottom: calc(#{$floating-btns-height} + 1em);\n    }\n  }\n\n  h3 {\n    font-size: 1.2em;\n  }\n\n  .name-editor-container {\n    .row {\n      display: flex;\n      border-bottom: 1px solid $default-shadow-color;\n      align-items: center;\n      justify-content: space-between;\n      padding-bottom: 0.5em;\n      margin-bottom: 0.5em;\n\n      @include until($tablet) {\n        flex-direction: column;\n        align-items: flex-start;\n      }\n\n      @include from($tablet) {\n        flex-direction: row;\n      }\n\n      .name {\n        margin-right: 0.5em;\n      }\n\n      .value {\n        flex: 1;\n\n        @include until($tablet) {\n          width: 100%;\n        }\n\n        input {\n          width: 100%;\n        }\n      }\n    }\n  }\n\n  .icon-editor-container {\n    border-bottom: 1px solid $default-shadow-color;\n    margin-bottom: 0.5em;\n  }\n\n  .spacer {\n    width: 100%;\n    height: calc(#{$floating-btns-height} + 1em);\n    flex-grow: 1;\n  }\n\n  .args-editor-container {\n    .args {\n      margin-bottom: 1em;\n\n      .item {\n        padding-bottom: 0.5em;\n      }\n    }\n  }\n\n  :deep(.args-modal-container) {\n    .modal-container .modal {\n      width: 50em;\n\n      .body {\n        padding: 1em;\n      }\n    }\n\n    .args {\n      position: relative;\n      padding-bottom: calc(#{$floating-btn-size} + 2em);\n\n      .row {\n        display: flex;\n        align-items: center;\n        margin-bottom: 0.5em;\n\n        @include until($tablet) {\n          flex-direction: column;\n          align-items: flex-start;\n          border-bottom: 1px solid $default-shadow-color;\n          padding-bottom: 0.5em;\n        }\n\n        .arg-name {\n          @extend .col-s-12;\n          @extend .col-m-5;\n          font-weight: bold;\n\n          input {\n            width: 100%;\n\n            @include until($tablet) {\n              width: calc(100% - 2em);\n            }\n          }\n        }\n\n        .arg-value {\n          @extend .col-s-12;\n          @extend .col-m-7;\n          flex: 1;\n\n          input[type=text] {\n            width: 95%;\n          }\n        }\n      }\n    }\n  }\n\n  :deep(.floating-buttons) {\n    width: 100%;\n    height: $floating-btns-height;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background: $default-bg-5;\n    box-shadow: $border-shadow-top;\n    display: flex;\n    justify-content: space-between;\n\n    .buttons {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      padding: 0 1em;\n      position: relative;\n    }\n  }\n\n  :deep(.dump-modal-container) {\n    .body {\n      max-width: 47em;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"floating-btns\" :class=\"{direction: direction}\">\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  emits: [\"click\"],\n  props: {\n    direction: {\n      type: String,\n      default: \"row\",\n    },\n\n    size: {\n      type: String,\n      default: \"4em\",\n    },\n  },\n\n  computed: {\n    buttons() {\n      return this.$el.querySelectorAll(\".floating-btn\")\n    },\n  },\n\n  mounted() {\n    const buttons = Array.from(this.buttons)\n    let offset = 0\n    buttons.forEach((button, index) => {\n      const size = button.offsetWidth\n      const styleOffset = `calc(${offset}px + (${index} * 1em))`\n      if (this.direction === \"row\") {\n        if (!parseFloat(getComputedStyle(button).left))\n          button.style.left = styleOffset\n        else\n          button.style.right = styleOffset\n      } else {\n        if (!parseFloat(getComputedStyle(button).top))\n          button.style.top = styleOffset\n        else\n          button.style.bottom = styleOffset\n      }\n\n      offset += size\n    })\n  },\n}\n</script>\n","import { render } from \"./FloatingButtons.vue?vue&type=template&id=4141603c\"\nimport script from \"./FloatingButtons.vue?vue&type=script&lang=js\"\nexport * from \"./FloatingButtons.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"procedure-dump\">\n    <Loading v-if=\"loading\" />\n\n    <div class=\"dump-container\" v-else>\n      <CopyButton :text=\"yaml?.trim()\" />\n      <pre><code v-html=\"highlightedYAML\" /></pre>\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'highlight.js/lib/common'\nimport 'highlight.js/styles/nord.min.css'\nimport hljs from \"highlight.js\"\n\nimport CopyButton from \"@/components/elements/CopyButton\"\nimport Loading from \"@/components/Loading\";\nimport Utils from \"@/Utils\"\n\nexport default {\n  mixins: [Utils],\n  components: {\n    CopyButton,\n    Loading\n  },\n\n  props: {\n    procedure: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data() {\n    return {\n      loading: false,\n      yaml: null,\n    }\n  },\n\n  computed: {\n    highlightedYAML() {\n      return hljs.highlight(\n        '# You can copy this code in a YAML configuration file\\n' +\n        '# if you prefer to store this procedure in a file.\\n' +\n        this.yaml || '',\n        {language: 'yaml'}\n      ).value\n    },\n  },\n\n  methods: {\n    async refresh() {\n      this.loading = true\n      try {\n        this.yaml = await this.request('procedures.to_yaml', {procedure: this.procedure})\n      } finally {\n        this.loading = false\n      }\n    }\n  },\n\n  mounted() {\n    this.refresh()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.procedure-dump {\n  width: 100%;\n  height: 100%;\n  background: #181818;\n\n  .dump-container {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    padding: 1em;\n    overflow: auto;\n  }\n\n  pre {\n    margin: 0;\n    padding: 0;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n  }\n}\n</style>\n","import { render } from \"./ProcedureDump.vue?vue&type=template&id=b22aac3c&scoped=true\"\nimport script from \"./ProcedureDump.vue?vue&type=script&lang=js\"\nexport * from \"./ProcedureDump.vue?vue&type=script&lang=js\"\n\nimport \"./ProcedureDump.vue?vue&type=style&index=0&id=b22aac3c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b22aac3c\"]])\n\nexport default __exports__","import { render } from \"./ProcedureEditor.vue?vue&type=template&id=e159c110&scoped=true\"\nimport script from \"./ProcedureEditor.vue?vue&type=script&lang=js\"\nexport * from \"./ProcedureEditor.vue?vue&type=script&lang=js\"\n\nimport \"./ProcedureEditor.vue?vue&type=style&index=0&id=e159c110&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e159c110\"]])\n\nexport default __exports__","import { render } from \"./ProcedureEditorModal.vue?vue&type=template&id=66039a54&scoped=true\"\nimport script from \"./ProcedureEditorModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProcedureEditorModal.vue?vue&type=script&lang=js\"\n\nimport \"./ProcedureEditorModal.vue?vue&type=style&index=0&id=66039a54&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-66039a54\"]])\n\nexport default __exports__","<template>\n  <div class=\"entity procedure-container\">\n    <div class=\"head\" :class=\"{collapsed: collapsed_}\" @click=\"onHeaderClick\">\n      <div class=\"icon\">\n        <EntityIcon :entity=\"value\" :icon=\"icon\" :loading=\"loading\" />\n      </div>\n\n      <div class=\"label\">\n        <div class=\"name\" v-text=\"value.name\" />\n      </div>\n\n      <div class=\"value-and-toggler\">\n        <div class=\"value\">\n          <button class=\"btn btn-primary head-run-btn\"\n                  title=\"Run Procedure\"\n                  :disabled=\"loading\"\n                  @click.stop=\"run\"\n                  v-if=\"collapsed_\">\n            <i class=\"fas fa-play\" />\n          </button>\n        </div>\n\n        <div class=\"collapse-toggler\" @click.stop=\"collapsed_ = !collapsed_\">\n          <i class=\"fas\" :class=\"{'fa-chevron-down': collapsed_, 'fa-chevron-up': !collapsed_}\" />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"body\" v-if=\"!collapsed_\" @click.stop>\n      <section class=\"run\">\n        <header :class=\"{collapsed: runCollapsed}\" @click=\"runCollapsed = !runCollapsed\">\n          <span class=\"col-10\">\n            <i class=\"fas fa-play\" />&nbsp; Run\n          </span>\n          <span class=\"col-2 buttons\">\n            <button type=\"button\"\n                    class=\"btn btn-primary\"\n                    :disabled=\"loading\"\n                    :title=\"runCollapsed ? 'Expand' : 'Collapse'\">\n              <i class=\"fas\" :class=\"{'fa-chevron-down': runCollapsed, 'fa-chevron-up': !runCollapsed}\" />\n            </button>\n          </span>\n        </header>\n\n        <div class=\"run-body\" v-if=\"!runCollapsed\">\n          <form @submit.prevent=\"run\">\n            <div class=\"args\" v-if=\"value.args?.length\">\n              Arguments\n              <div class=\"row arg\" v-for=\"(arg, index) in value.args || []\" :key=\"index\">\n                <input type=\"text\"\n                       class=\"argname\"\n                       :value=\"arg\"\n                       :disabled=\"true\" />&nbsp;=\n                <input type=\"text\"\n                       class=\"argvalue\"\n                       placeholder=\"Value\"\n                       :disabled=\"loading\"\n                       @input=\"updateArg(arg, $event)\" />\n              </div>\n            </div>\n\n            <div class=\"extra args\">\n              Extra Arguments\n              <div class=\"row arg\" v-for=\"(value, name) in extraArgs\" :key=\"name\">\n                <input type=\"text\"\n                       class=\"argname\"\n                       placeholder=\"Name\"\n                       :value=\"name\"\n                       :disabled=\"loading\"\n                       @blur=\"updateExtraArgName(name, $event)\" />&nbsp;=\n                <input type=\"text\"\n                       placeholder=\"Value\"\n                       class=\"argvalue\"\n                       :value=\"value\"\n                       :disabled=\"loading\"\n                       @input=\"updateExtraArgValue(arg, $event)\" />\n              </div>\n\n              <div class=\"row add-arg\">\n                <input type=\"text\"\n                       class=\"argname\"\n                       placeholder=\"Name\"\n                       v-model=\"newArgName\"\n                       :disabled=\"loading\"\n                       ref=\"newArgName\"\n                       @blur=\"addExtraArg\" />&nbsp;=\n                <input type=\"text\"\n                       class=\"argvalue\"\n                       placeholder=\"Value\"\n                       v-model=\"newArgValue\"\n                       :disabled=\"loading\"\n                       @blur=\"addExtraArg\" />\n              </div>\n            </div>\n\n            <div class=\"row run-container\">\n              <button type=\"submit\"\n                      class=\"btn btn-primary\"\n                      :disabled=\"loading\"\n                      title=\"Run Procedure\">\n                <i class=\"fas fa-play\" />\n              </button>\n            </div>\n          </form>\n\n          <div class=\"response-container\" v-if=\"lastResponse || lastError\">\n            <Response :response=\"lastResponse\" :error=\"lastError\" />\n          </div>\n        </div>\n      </section>\n\n      <section class=\"info\">\n        <header :class=\"{collapsed: infoCollapsed}\" @click=\"infoCollapsed = !infoCollapsed\">\n          <span class=\"col-10\">\n            <i class=\"fas fa-info-circle\" />&nbsp; Info\n          </span>\n          <span class=\"col-2 buttons\">\n            <button type=\"button\"\n                    class=\"btn btn-primary\"\n                    :disabled=\"loading\"\n                    :title=\"infoCollapsed ? 'Expand' : 'Collapse'\">\n              <i class=\"fas\" :class=\"{'fa-chevron-down': infoCollapsed, 'fa-chevron-up': !infoCollapsed}\" />\n            </button>\n          </span>\n        </header>\n\n        <div class=\"info-body\" v-if=\"!infoCollapsed\">\n          <div class=\"item\">\n            <div class=\"label\">Source</div>\n            <div class=\"value\">\n              <i :class=\"procedureTypeIconClass\" />&nbsp;\n              {{ value.procedure_type }}\n            </div>\n          </div>\n\n          <div class=\"item\">\n            <IconEditor :entity=\"value\" />\n          </div>\n\n          <div class=\"item actions\" v-if=\"value?.actions?.length\">\n            <div class=\"label\">Actions</div>\n            <div class=\"value\">\n              <div class=\"item\">\n                <button type=\"button\"\n                        class=\"btn btn-primary\"\n                        title=\"Edit Actions\"\n                        :disabled=\"loading\"\n                        @click=\"showProcedureEditor = !showProcedureEditor\">\n                  <span v-if=\"isReadOnly && !showProcedureEditor\">\n                    <i class=\"fas fa-eye\" />&nbsp; View\n                  </span>\n                  <span v-else-if=\"!isReadOnly && !showProcedureEditor\">\n                    <i class=\"fas fa-edit\" />&nbsp; Edit\n                  </span>\n                  <span v-else>\n                    <i class=\"fas fa-times\" />&nbsp; Close\n                  </span>\n                </button>\n              </div>\n\n              <div class=\"item delete\" v-if=\"!isReadOnly\">\n                <button type=\"button\"\n                        title=\"Delete Procedure\"\n                        :disabled=\"loading\"\n                        @click=\"showConfirmDelete = true\">\n                  <i class=\"fas fa-trash\" />&nbsp; Delete\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"item\" v-if=\"value.source\">\n            <div class=\"label\">Path</div>\n            <div class=\"value\">\n              <a :href=\"$route.path\" @click.prevent=\"showFileEditor = true\">\n                {{ displayPath }}\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n\n    <div class=\"file-editor-container\" v-if=\"showFileEditor && value.source\">\n      <FileEditor :file=\"value.source\"\n                  :line=\"value.line\"\n                  :visible=\"true\"\n                  :uppercase=\"false\"\n                  @close=\"showFileEditor = false\" />\n    </div>\n\n    <ProcedureEditor :procedure=\"value\"\n                     :read-only=\"isReadOnly\"\n                     :with-name=\"!isReadOnly\"\n                     :with-save=\"!isReadOnly\"\n                     :value=\"value\"\n                     :visible=\"showProcedureEditor\"\n                     @input=\"onUpdate\"\n                     @close=\"showProcedureEditor = false\"\n                     ref=\"editor\"\n                     v-if=\"value?.actions?.length && showProcedureEditor\" />\n\n    <div class=\"confirm-delete-container\">\n      <ConfirmDialog :visible=\"true\"\n                     @input=\"remove\"\n                     @close=\"showConfirmDelete = false\"\n                     v-if=\"showConfirmDelete\">\n        Are you sure you want to delete the procedure <b>{{ value.name }}</b>?\n      </ConfirmDialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ConfirmDialog from \"@/components/elements/ConfirmDialog\";\nimport EntityMixin from \"./EntityMixin\"\nimport EntityIcon from \"./EntityIcon\"\nimport FileEditor from \"@/components/File/EditorModal\";\nimport IconEditor from \"@/components/panels/Entities/IconEditor\";\nimport ProcedureEditor from \"@/components/Procedure/ProcedureEditorModal\"\nimport Response from \"@/components/Action/Response\"\n\nexport default {\n  components: {\n    ConfirmDialog,\n    EntityIcon,\n    FileEditor,\n    IconEditor,\n    ProcedureEditor,\n    Response,\n  },\n  mixins: [EntityMixin],\n  emits: ['delete', 'input', 'loading'],\n\n  props: {\n    collapseOnHeaderClick: {\n      type: Boolean,\n      default: false,\n    },\n\n    selected: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data: function() {\n    return {\n      args: {},\n      defaultIconClass: 'fas fa-cogs',\n      extraArgs: {},\n      collapsed_: true,\n      infoCollapsed: false,\n      lastError: null,\n      lastResponse: null,\n      newArgName: '',\n      newArgValue: '',\n      runCollapsed: false,\n      showConfirmDelete: false,\n      showFileEditor: false,\n      showProcedureEditor: false,\n    }\n  },\n\n  computed: {\n    icon() {\n      const defaultClass = this.defaultIconClass\n      const currentClass = this.value.meta?.icon?.['class']\n      let iconClass = currentClass\n      if (!currentClass || currentClass === defaultClass) {\n        iconClass = this.procedureTypeIconClass || defaultClass\n      }\n\n      return {\n        ...(this.value.meta?.icon || {}),\n        class: iconClass,\n      }\n    },\n\n    isReadOnly() {\n      return this.value.procedure_type !== 'db'\n    },\n\n    allArgs() {\n      return Object.entries({...this.args, ...this.extraArgs})\n        .map(([key, value]) => [key?.trim(), value])\n        .filter(\n          ([key, value]) => (\n            key?.length\n            && value != null\n            && (\n              typeof value !== 'string'\n              || value?.trim()?.length > 0\n            )\n          )\n        ).reduce((acc, [key, value]) => {\n          acc[key] = value\n          return acc\n        }, {})\n    },\n\n    displayPath() {\n      let src = this.value.source\n      if (!src?.length) {\n        return null\n      }\n\n      const configDir = this.$root.configDir\n      if (configDir) {\n        src = src.replace(new RegExp(`^${configDir}/`), '')\n      }\n\n      const line = parseInt(this.value.line)\n      if (!isNaN(line)) {\n        src += `:${line}`\n      }\n\n      return src\n    },\n\n    procedureTypeIconClass() {\n      if (this.value.procedure_type === 'python')\n        return 'fab fa-python'\n\n      if (this.value.procedure_type === 'config')\n        return 'fas fa-file'\n\n      if (this.value.procedure_type === 'db')\n        return 'fas fa-database'\n\n      return this.defaultIconClass\n    },\n  },\n\n  methods: {\n    async run() {\n      this.$emit('loading', true)\n      try {\n        this.lastResponse = await this.request(`procedure.${this.value.name}`, this.allArgs)\n        this.lastError = null\n        this.notify({\n          text: 'Procedure executed successfully',\n          image: {\n            icon: 'play',\n          }\n        })\n      } catch (e) {\n        this.lastResponse = null\n        this.lastError = e\n        this.notify({\n          text: 'Failed to execute procedure',\n          error: true,\n          image: {\n            icon: 'exclamation-triangle',\n          }\n        })\n      } finally {\n        this.$emit('loading', false)\n      }\n    },\n\n    async remove() {\n      this.$emit('loading', true)\n      try {\n        await this.request('procedures.delete', {name: this.value.name})\n        this.$emit('loading', false)\n        this.$emit('delete')\n        this.notify({\n          text: 'Procedure deleted successfully',\n          image: {\n            icon: 'trash',\n          }\n        })\n      } finally {\n        this.$emit('loading', false)\n      }\n    },\n\n    onHeaderClick(event) {\n      if (this.collapseOnHeaderClick) {\n        event.stopPropagation()\n        this.collapsed_ = !this.collapsed_\n      }\n    },\n\n    onUpdate(value) {\n      if (!this.isReadOnly) {\n        this.$emit('input', value)\n        this.$nextTick(() => this.$refs.editor?.close())\n      }\n    },\n\n    updateArg(arg, event) {\n      let value = event.target.value\n      if (!value?.length) {\n        delete this.args[arg]\n      }\n\n      try {\n        value = JSON.parse(value)\n      } catch (e) {\n        // Do nothing\n      }\n\n      this.args[arg] = value\n    },\n\n    updateExtraArgName(oldName, event) {\n      let newName = event.target.value?.trim()\n      if (newName === oldName) {\n        return\n      }\n\n      if (newName?.length) {\n        if (oldName) {\n          this.extraArgs[newName] = this.extraArgs[oldName]\n        } else {\n          this.extraArgs[newName] = ''\n        }\n      } else {\n        this.focusNewArgName()\n      }\n\n      if (oldName) {\n        delete this.extraArgs[oldName]\n      }\n    },\n\n    updateExtraArgValue(arg, event) {\n      let value = event.target.value\n      if (!value?.length) {\n        delete this.extraArgs[arg]\n        return\n      }\n\n      this.extraArgs[arg] = this.deserializeValue(value)\n    },\n\n    addExtraArg() {\n      let name = this.newArgName?.trim()\n      let value = this.newArgValue\n      if (!name?.length || !value?.length) {\n        return\n      }\n\n      this.extraArgs[name] = this.deserializeValue(value)\n      this.newArgName = ''\n      this.newArgValue = ''\n      this.focusNewArgName()\n    },\n\n    deserializeValue(value) {\n      try {\n        return JSON.parse(value)\n      } catch (e) {\n        return value\n      }\n    },\n\n    focusNewArgName() {\n      this.$nextTick(() => this.$refs.newArgName.focus())\n    },\n  },\n\n  watch: {\n    collapsed: {\n      immediate: true,\n      handler(value) {\n        this.collapsed_ = value\n      },\n    },\n\n    selected: {\n      immediate: true,\n      handler(value) {\n        this.collapsed_ = value\n      },\n    },\n\n    showProcedureEditor(value) {\n      if (!value) {\n        this.$refs.editor?.reset()\n      }\n    },\n  },\n\n  mounted() {\n    this.collapsed_ = !this.selected\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"common\";\n\n$icon-width: 2em;\n\n.procedure-container {\n  .body {\n    padding-bottom: 0;\n    cursor: default;\n  }\n\n  section {\n    header {\n      background: $tab-bg;\n      display: flex;\n      align-items: center;\n      font-size: 1.1em;\n      font-weight: bold;\n      margin: 1em -0.5em 0.5em -0.5em;\n      padding: 0.25em 1em 0.25em 0.5em;\n      border-top: 1px solid $default-shadow-color;\n      box-shadow: $border-shadow-bottom;\n      cursor: pointer;\n\n      &:hover {\n        background: $header-bg;\n      }\n\n      &.collapsed {\n        margin-bottom: -0.1em;\n      }\n\n      .buttons {\n        display: flex;\n        justify-content: flex-end;\n      }\n\n      button.btn {\n        background: none;\n        border: none;\n        color: initial;\n\n        &:hover {\n          color: $default-hover-fg;\n        }\n      }\n    }\n\n    &:first-of-type header {\n      margin-top: -0.5em;\n\n      &.collapsed {\n        margin-bottom: -1em;\n      }\n    }\n  }\n\n  .head {\n    &:not(.collapsed) {\n      background: $selected-bg;\n      border-bottom: 1px solid $default-shadow-color;\n    }\n\n    .icon, .collapse-toggler {\n      width: $icon-width;\n    }\n\n    .label, .value-and-toggler {\n      min-width: calc(((100% - (2 * $icon-width)) / 2) - 1em);\n      max-width: calc(((100% - (2 * $icon-width)) / 2) - 1em);\n    }\n\n    .label {\n      margin-left: 1em;\n    }\n\n    .value-and-toggler {\n      text-align: right;\n    }\n  }\n\n  form {\n    width: 100%;\n\n    .row {\n      width: 100%;\n      input[type=text] {\n        width: 100%;\n      }\n    }\n\n    .args {\n      .arg {\n        margin-bottom: 0.25em;\n        padding-bottom: 0.25em;\n        border-bottom: 1px solid $default-shadow-color;\n      }\n\n      .argname {\n        font-weight: bold;\n      }\n\n      @include until($tablet) {\n        .argname {\n          width: calc(100% - 2em) !important;\n        }\n\n        .argvalue {\n          width: 100% !important;\n        }\n      }\n\n      @include from($tablet) {\n        display: flex;\n        flex-wrap: wrap;\n\n        .argname {\n          width: calc(35% - 2em) !important;\n        }\n\n        .argvalue {\n          width: 65% !important;\n        }\n      }\n    }\n\n    .run-container {\n      display: flex;\n      justify-content: center;\n      font-size: 1.5em;\n      margin-top: 0.5em;\n\n      button {\n        padding: 0 1em;\n        text-align: center;\n        border-radius: 0.5em;\n      }\n    }\n  }\n\n  .info-body {\n    .item {\n      display: flex;\n      padding: 0.5em 0.25em;\n\n      @include until($tablet) {\n        border-bottom: 1px solid $default-shadow-color;\n      }\n\n      &.delete {\n        justify-content: center;\n\n        button {\n          width: 100%;\n          color: $error-fg;\n          padding: 0;\n\n          &:hover {\n            color: $default-hover-fg;\n          }\n        }\n      }\n    }\n\n    .label {\n      font-weight: bold;\n\n      @include until($tablet) {\n        width: 100%;\n      }\n\n      @include from($tablet) {\n        width: 33.3333%;\n      }\n    }\n\n    .value {\n      text-align: right;\n\n      @include until($tablet) {\n        width: 100%;\n      }\n\n      @include from($tablet) {\n        width: 66.6667%;\n      }\n\n      a {\n        width: 100%;\n      }\n    }\n\n    .actions {\n      @include until($tablet) {\n        flex-direction: column;\n      }\n\n      .item {\n        border-bottom: none;\n      }\n\n      button {\n        width: 100%;\n        height: 2.5em;\n        padding: 0;\n        border-radius: 1em;\n\n        &:hover {\n          color: $default-hover-fg;\n        }\n      }\n    }\n  }\n\n  .head-run-btn {\n    background: none;\n    border: none;\n    font-size: 1.25em;\n\n    &:hover {\n      background: none;\n      color: $default-hover-fg-2;\n    }\n  }\n}\n</style>\n","import { render } from \"./Procedure.vue?vue&type=template&id=9744c022&scoped=true\"\nimport script from \"./Procedure.vue?vue&type=script&lang=js\"\nexport * from \"./Procedure.vue?vue&type=script&lang=js\"\n\nimport \"./Procedure.vue?vue&type=style&index=0&id=9744c022&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9744c022\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_Modal","title","_ctx","value","name","visible","uppercase","before-close","$refs","editor","checkCanClose","ref","onClose","_cache","$event","$emit","_component_ProcedureEditor","procedure","$options","isReadOnly","modal","editorModal","onInput","_createElementVNode","type","style","_hoisted_2","autocomplete","onSubmit","_withModifiers","args","executeAction","_hoisted_3","$props","withName","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","$data","newValue","disabled","readOnly","Object","keys","meta","icon","length","_hoisted_9","_component_IconEditor","entity","onIconChange","onChange","showArgs","_hoisted_10","_hoisted_11","_hoisted_12","_Fragment","_renderList","arg","index","key","placeholder","onArgInput","target","trim","onBlur","onArgEdit","_hoisted_14","newArg","onNewArg","_hoisted_15","_hoisted_16","_hoisted_17","_component_ActionsList","actions","context","onActionsEdit","response","error","_hoisted_18","_component_Response","showArgsModal","_hoisted_19","onRunArgsModalClose","executeWithArgs","runArgs","_hoisted_20","includes","_hoisted_21","_toDisplayString","_hoisted_22","onEditRunArgName","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_28","_hoisted_29","newRunArg","onNewRunArgName","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_component_FloatingButton","running","onClick","_hoisted_34","_component_ConfirmDialog","forceClose","_hoisted_35","forceSave","_hoisted_36","_hoisted_37","_hoisted_38","_component_FloatingButtons","direction","left","glow","showYAML","_createBlock","duplicate","_hoisted_39","showSave","right","canSave","save","duplicateValue","_hoisted_40","duplicateEditor","duplicateModal","_hoisted_41","_component_ProcedureDump","_normalizeClass","_renderSlot","$slots","emits","props","String","default","size","computed","buttons","this","$el","querySelectorAll","mounted","Array","from","offset","forEach","button","offsetWidth","styleOffset","parseFloat","getComputedStyle","top","bottom","__exports__","loading","_component_Loading","_component_CopyButton","text","yaml","innerHTML","highlightedYAML","mixins","Utils","components","CopyButton","Loading","required","data","hljs","highlight","language","methods","refresh","request","ActionsList","ConfirmDialog","FloatingButton","FloatingButtons","IconEditor","Modal","ProcedureDump","Response","Boolean","withSave","undefined","Function","confirmOverwrite","newAction","shouldForceClose","floatingButtons","querySelector","valueString","newValueString","JSON","stringify","reduce","acc","source","modal_","shouldConfirmClose","overwriteOk","map","action","a","old_name","notify","image","procedures","publish","open","onResponse","onError","message","onDone","e","console","warning","argsModal","close","entries","parse","id","external_id","isDuplicate","filter","i","splice","setTimeout","newArgInput","focus","nextInput","children","select","event","push","$nextTick","confirmClose","warn","reset","beforeUnload","preventDefault","returnValue","addBeforeUnload","window","addEventListener","removeBeforeUnload","removeEventListener","syncValue","watch","immediate","deep","handler","nameInput","unmouted","ProcedureEditor","defaultIconClass","extraArgs","collapsed_","infoCollapsed","lastError","lastResponse","newArgName","newArgValue","runCollapsed","showConfirmDelete","showFileEditor","showProcedureEditor","procedure_type","show","hide","toggle","collapsed","selected","render","_hoisted_8","onHeaderClick","_component_EntityIcon","run","updateArg","updateExtraArgName","updateExtraArgValue","addExtraArg","procedureTypeIconClass","_hoisted_43","_hoisted_44","_hoisted_47","_hoisted_48","_hoisted_45","_hoisted_46","_hoisted_49","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","href","$route","path","displayPath","_hoisted_55","_hoisted_56","_component_FileEditor","file","line","onUpdate","_hoisted_57","remove","EntityIcon","FileEditor","EntityMixin","collapseOnHeaderClick","defaultClass","currentClass","iconClass","allArgs","src","configDir","$root","replace","RegExp","parseInt","isNaN","stopPropagation","oldName","newName","focusNewArgName","deserializeValue"],"sourceRoot":""}