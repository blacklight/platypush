"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[3950,978],{6561:function(t,e,l){l.d(e,{A:function(){return y}});var i=l(641),s=l(33);const a={class:"no-items-container"};function n(t,e,l,n,o,d){return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",{class:(0,s.C4)(["no-items fade-in",{shadow:l.withShadow}])},[(0,i.RG)(t.$slots,"default",{},void 0,!0)],2)])}var o={name:"NoItems",props:{withShadow:{type:Boolean,default:!0}}},d=l(6262);const r=(0,d.A)(o,[["render",n],["__scopeId","data-v-4856c4d7"]]);var y=r},978:function(t,e,l){l.r(e),l.d(e,{default:function(){return E}});var i=l(641),s=l(33);const a={class:"media-youtube-playlist"},n={key:1,class:"playlist-container"},o={class:"header"},d={class:"banner"},r=["src"],y={class:"row info-container"},u={class:"info"},c={class:"row"},h=["href"],p={key:1,class:"title"},m={class:"n-items"},g={key:0,class:"row"},P={class:"description"},f={key:1,class:"row"},k={class:"channel"},v=["href"];function w(t,e,l,w,b,L){const C=(0,i.g2)("Loading"),_=(0,i.g2)("NoItems"),$=(0,i.g2)("Results");return(0,i.uX)(),(0,i.CE)("div",a,[L.showLoading?((0,i.uX)(),(0,i.Wv)(C,{key:0})):((0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",o,[(0,i.Lk)("div",d,[l.metadata?.image?.length?((0,i.uX)(),(0,i.CE)("img",{key:0,src:l.metadata?.image},null,8,r)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",y,[(0,i.Lk)("div",u,[(0,i.Lk)("div",c,[l.metadata?.url?((0,i.uX)(),(0,i.CE)("a",{key:0,class:"title",href:l.metadata?.url,target:"_blank",rel:"noopener noreferrer"},(0,s.v_)(L.name),9,h)):((0,i.uX)(),(0,i.CE)("span",p,(0,s.v_)(L.name),1)),(0,i.Lk)("div",m,(0,s.v_)(L.nItems)+" videos",1)]),l.metadata?.description?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("div",P,(0,s.v_)(l.metadata?.description),1)])):(0,i.Q3)("",!0),l.metadata?.channel_url?((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("div",k,[e[9]||(e[9]=(0,i.eW)(" Uploaded by ")),(0,i.Lk)("a",{href:l.metadata.channel_url,target:"_blank",rel:"noopener noreferrer"},(0,s.v_)(l.metadata?.channel),9,v)])])):(0,i.Q3)("",!0)])])]),L.nItems?((0,i.uX)(),(0,i.Wv)($,{key:1,results:b.items,sources:{youtube:!0},filter:l.filter,playlist:l.id,"selected-result":b.selectedResult,onAddToPlaylist:e[0]||(e[0]=e=>t.$emit("add-to-playlist",e)),onDownload:e[1]||(e[1]=e=>t.$emit("download",e)),onDownloadAudio:e[2]||(e[2]=e=>t.$emit("download-audio",e)),onOpenChannel:e[3]||(e[3]=e=>t.$emit("open-channel",e)),onPlay:e[4]||(e[4]=e=>t.$emit("play",e)),onPlayWithOpts:e[5]||(e[5]=e=>t.$emit("play-with-opts",e)),onRemoveFromPlaylist:e[6]||(e[6]=e=>t.$emit("remove-from-playlist",e)),onScrollEnd:L.loadItems,onSelect:e[7]||(e[7]=t=>b.selectedResult=t),onView:e[8]||(e[8]=e=>t.$emit("view",e))},null,8,["results","filter","playlist","selected-result","onScrollEnd"])):((0,i.uX)(),(0,i.Wv)(_,{key:0,"with-shadow":!1},{default:(0,i.k6)((()=>e[10]||(e[10]=[(0,i.eW)(" No videos found. ")]))),_:1}))]))])}var b=l(6561),L=l(9828),C=l(3149),_=l(2002),$={mixins:[_.A],emits:["add-to-playlist","download","download-audio","open-channel","play","play-with-opts","remove-from-playlist","view"],components:{Loading:L.A,NoItems:b.A,Results:C.A},props:{id:{type:String,required:!0},filter:{type:String,default:null},metadata:{type:Object,default:null}},data(){return{initialLoading:!0,items:[],loading:!1,nextPageToken:null,renderedPageTokens:{},selectedResult:null}},computed:{name(){return this.metadata?.title||this.metadata?.name},nItems(){return this.metadata?.videos||this.items?.length||0},showLoading(){return this.loading&&this.initialLoading}},methods:{async loadItems(){if(!this.loading){this.loading=!0;try{if(this.renderedPageTokens[this.nextPageToken])return;this.items=[...this.items,...(await this.request("youtube.get_playlist",{id:this.id,page:this.nextPageToken})).map((t=>({...t,type:"youtube"})))],this.initialLoading=!1,this.renderedPageTokens[this.nextPageToken]=!0,this.items.length&&(this.nextPageToken=this.items[this.items.length-1].next_page_token)}finally{this.loading=!1}}}},mounted(){this.setUrlArgs({playlist:this.id}),this.loadItems()},unmounted(){this.setUrlArgs({playlist:null})}},T=l(6262);const A=(0,T.A)($,[["render",w],["__scopeId","data-v-32ebcce6"]]);var E=A},3950:function(t,e,l){l.r(e),l.d(e,{default:function(){return x}});var i=l(641),s=l(33),a=l(3751);const n={class:"media-youtube-playlists"},o={key:0,class:"playlists-index"},d=["onClick"],r={class:"title"},y={class:"actions"},u=["onClick"],c=["onClick"],h={key:1,class:"playlist-body"},p={class:"row"},m={class:"row"},g={class:"row buttons"},P={class:"btn-container col-6"};function f(t,e,l,f,k,v){const w=(0,i.g2)("Loading"),b=(0,i.g2)("NoItems"),L=(0,i.g2)("MediaImage"),C=(0,i.g2)("Playlist"),_=(0,i.g2)("TextPrompt"),$=(0,i.g2)("ConfirmDialog"),T=(0,i.g2)("Modal"),A=(0,i.g2)("FloatingButton");return(0,i.uX)(),(0,i.CE)("div",n,[l.selectedPlaylist?.id?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bF)(C,{id:l.selectedPlaylist.id,filter:l.filter,metadata:v.playlistsById[l.selectedPlaylist.id]||l.selectedPlaylist,onAddToPlaylist:e[1]||(e[1]=e=>t.$emit("add-to-playlist",e)),onDownload:e[2]||(e[2]=e=>t.$emit("download",e)),onDownloadAudio:e[3]||(e[3]=e=>t.$emit("download-audio",e)),onOpenChannel:e[4]||(e[4]=e=>t.$emit("open-channel",e)),onRemoveFromPlaylist:e[5]||(e[5]=e=>t.$emit("remove-from-playlist",{item:e,playlist_id:l.selectedPlaylist.id})),onPlay:e[6]||(e[6]=e=>t.$emit("play",e)),onPlayWithOpts:e[7]||(e[7]=e=>t.$emit("play-with-opts",e)),onView:e[8]||(e[8]=e=>t.$emit("view",e))},null,8,["id","filter","metadata"])])):((0,i.uX)(),(0,i.CE)("div",o,[v.showLoading?((0,i.uX)(),(0,i.Wv)(w,{key:0})):k.playlists?.length?((0,i.uX)(),(0,i.CE)("div",{key:2,class:"body grid",ref:"body",onScroll:e[0]||(e[0]=(...t)=>v.onScroll&&v.onScroll(...t))},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(v.playlistsById,((l,n)=>((0,i.uX)(),(0,i.CE)("div",{class:"playlist item",key:n,onClick:e=>t.$emit("select",l)},[(0,i.bF)(L,{item:l,"has-play":!1},null,8,["item"]),(0,i.Lk)("div",r,(0,s.v_)(l.name),1),(0,i.Lk)("div",y,[(0,i.Lk)("button",{title:"Remove",onClick:(0,a.D$)((t=>k.deletedPlaylist=l.id),["stop"])},e[17]||(e[17]=[(0,i.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,u),(0,i.Lk)("button",{title:"Edit",onClick:(0,a.D$)((t=>k.editedPlaylist=l.id),["stop"])},e[18]||(e[18]=[(0,i.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,c)])],8,d)))),128))],544)):((0,i.uX)(),(0,i.Wv)(b,{key:1,"with-shadow":!1},{default:(0,i.k6)((()=>e[16]||(e[16]=[(0,i.eW)(" No playlists found. ")]))),_:1}))])),(0,i.bF)(_,{visible:k.showCreatePlaylist,onInput:e[9]||(e[9]=t=>v.createPlaylist(t)),onClose:e[10]||(e[10]=t=>k.showCreatePlaylist=!1)},{default:(0,i.k6)((()=>e[19]||(e[19]=[(0,i.eW)(" Playlist name ")]))),_:1},8,["visible"]),(0,i.bF)($,{ref:"removePlaylist",title:"Remove Playlist",visible:null!=k.deletedPlaylist,onInput:v.removePlaylist},{default:(0,i.k6)((()=>e[20]||(e[20]=[(0,i.eW)(" Are you sure you want to remove this playlist? ")]))),_:1},8,["visible","onInput"]),(0,i.bF)(T,{ref:"editPlaylist",title:"Edit Playlist",visible:null!=k.editedPlaylist,onClose:v.clearEditPlaylist,onOpen:v.onEditPlaylistOpen},{default:(0,i.k6)((()=>[(0,i.Lk)("form",{class:"edit-playlist-form",onSubmit:e[14]||(e[14]=(0,a.D$)(((...t)=>v.editPlaylist&&v.editPlaylist(...t)),["prevent"]))},[(0,i.Lk)("div",p,[(0,i.bo)((0,i.Lk)("input",{ref:"editPlaylistName",placeholder:"Playlist name","onUpdate:modelValue":e[11]||(e[11]=t=>k.editedPlaylistName=t)},null,512),[[a.Jo,k.editedPlaylistName]])]),(0,i.Lk)("div",m,[(0,i.bo)((0,i.Lk)("input",{placeholder:"Playlist description","onUpdate:modelValue":e[12]||(e[12]=t=>k.editedPlaylistDescription=t)},null,512),[[a.Jo,k.editedPlaylistDescription]])]),(0,i.Lk)("div",g,[e[22]||(e[22]=(0,i.Lk)("div",{class:"btn-container col-6"},[(0,i.Lk)("button",{type:"submit"},[(0,i.Lk)("i",{class:"fa fa-check"}),(0,i.eW)(" Save ")])],-1)),(0,i.Lk)("div",P,[(0,i.Lk)("button",{onClick:e[13]||(e[13]=(...t)=>v.clearEditPlaylist&&v.clearEditPlaylist(...t))},e[21]||(e[21]=[(0,i.Lk)("i",{class:"fa fa-times"},null,-1),(0,i.eW)(" Cancel ")]))])])],32)])),_:1},8,["visible","onClose","onOpen"]),(0,i.bF)(A,{"icon-class":"fa fa-plus",title:"Create Playlist",onClick:e[15]||(e[15]=t=>k.showCreatePlaylist=!0)})])}var k=l(3538),v=l(656),w=l(12),b=l(9513),L=l(6561),C=l(9828),_=l(978),$=l(710),T=l(2002),A={mixins:[T.A],emits:["add-to-playlist","create-playlist","download","download-audio","open-channel","play","play-with-opts","remove-from-playlist","remove-playlist","rename-playlist","select"],components:{ConfirmDialog:k.A,FloatingButton:v.A,Loading:C.A,MediaImage:w.A,Modal:b.A,NoItems:L.A,Playlist:_["default"],TextPrompt:$.A},props:{selectedPlaylist:{type:Object,default:null},filter:{type:String,default:null},loading:{type:Boolean,default:!1}},data(){return{deletedPlaylist:null,editedPlaylist:null,editedPlaylistName:"",editedPlaylistDescription:"",nextPageToken:null,playlists:[],initialLoading:!0,loading_:!1,renderedPageTokens:{},showCreatePlaylist:!1}},computed:{playlistsById(){return this.playlists.filter((t=>!this.filter||t.name.toLowerCase().includes(this.filter.toLowerCase()))).reduce(((t,e)=>(t[e.id]=e,t)),{})},showLoading(){return this.initialLoading&&(this.loading_||this.loading)}},methods:{async onScroll(){const t=this.$refs.body.scrollTop,e=parseFloat(getComputedStyle(this.$refs.body).height),l=this.$refs.body.scrollHeight;if(t>=l-e-5){if(this.scrollTimeout||!this.playlists.length||this.renderedPageTokens[this.nextPageToken])return;this.scrollTimeout=setTimeout((()=>{this.scrollTimeout=null}),1e3),await this.loadPlaylists()}},async loadPlaylists(){this.loading_=!0;try{this.playlists=[...this.playlists,...await this.request("youtube.get_playlists",{page:this.nextPageToken})],this.initialLoading=!1,this.nextPageToken&&(this.renderedPageTokens[this.nextPageToken]=!0),this.playlists.length&&(this.nextPageToken=this.playlists[this.playlists.length-1].next_page_token)}finally{this.loading_=!1}},async createPlaylist(t){this.loading_=!0;try{const e=await this.request("youtube.create_playlist",{name:t});this.showCreatePlaylist=!1,this.playlists=[e,...this.playlists]}finally{this.loading_=!1}},async removePlaylist(){if(this.deletedPlaylist){this.loading_=!0;try{await this.request("youtube.delete_playlist",{id:this.deletedPlaylist}),this.playlists=this.playlists.filter((t=>t.id!==this.deletedPlaylist)),this.deletedPlaylist=null}finally{this.loading_=!1}}},async editPlaylist(){if(this.editedPlaylist){this.loading_=!0;try{await this.request("youtube.edit_playlist",{id:this.editedPlaylist,name:this.editedPlaylistName,description:this.editedPlaylistDescription}),this.clearEditPlaylist(),this.loadPlaylists()}finally{this.loading_=!1}}},clearEditPlaylist(){this.editedPlaylist=null,this.editedPlaylistName="",this.editedPlaylistDescription="",this.$refs.editPlaylist.hide()},onEditPlaylistOpen(){const t=this.playlistsById[this.editedPlaylist];this.editedPlaylistName=t.name,this.editedPlaylistDescription=t.description,this.$nextTick((()=>this.$refs.editPlaylistName.focus()))}},async mounted(){await this.loadPlaylists();const t=this.getUrlArgs();if(t.playlist){const e=this.playlistsById[t.playlist];e?this.$emit("select",e):this.$emit("select",{id:t.playlist})}},unmouted(){this.setUrlArgs({section:null})}},E=l(6262);const I=(0,E.A)(A,[["render",f],["__scopeId","data-v-ef422e50"]]);var x=I}}]);
//# sourceMappingURL=3950.265a45a9.js.map