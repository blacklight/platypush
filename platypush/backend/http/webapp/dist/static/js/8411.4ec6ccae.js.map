{"version":3,"file":"static/js/8411.4ec6ccae.js","mappings":"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","sources":["webpack://platypush/./src/components/panels/Media/Providers/Jellyfin/Collections.vue","webpack://platypush/./src/components/panels/Media/Providers/Jellyfin/Collections.vue?e185"],"sourcesContent":["<template>\n  <div class=\"collections index\" :class=\"{ 'is-root': !parentId }\">\n    <div class=\"collections items\">\n      <div class=\"collection item\"\n           v-for=\"collection in filteredItems\"\n           :key=\"collection.id\"\n           @click=\"$emit('select', collection)\">\n        <div class=\"image\">\n          <img :src=\"collection.image\"\n               :alt=\"collection.name\"\n               @error=\"onImageError(collection)\"\n               v-if=\"!fallbackImageCollections[collection.id]\">\n          <i :class=\"collectionsIcons[collection.type] ?? 'fas fa-folder'\" v-else />\n        </div>\n\n        <div class=\"name\" v-if=\"fallbackImageCollections[collection.id] || parentId\">\n          <h2>{{ collection.name }}</h2>\n        </div>\n\n        <div class=\"float bottom-right\" v-if=\"collection.year\">\n          <span>{{ collection.year }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"add-playlist floating-btn-container\" v-if=\"isPlaylistsCollection\">\n      <FloatingButton icon-class=\"fa fa-plus\"\n                      title=\"Create Playlist\"\n                      :disabled=\"loading\"\n                      @click=\"showNewPlaylist = true\" />\n    </div>\n\n    <div class=\"add-playlist-modal\" v-if=\"showNewPlaylist\">\n      <Modal title=\"Create Playlist\"\n             :visible=\"true\"\n             @close=\"showNewPlaylist = false\">\n        <form class=\"modal-body\" @submit.prevent=\"createPlaylist\">\n          <div class=\"row\">\n            <label for=\"newPlaylistName\">Playlist Name</label>\n            <input name=\"name\"\n                   type=\"text\"\n                   id=\"newPlaylistName\"\n                   placeholder=\"Playlist Name\"\n                   required>\n          </div>\n\n          <div class=\"row\">\n            <label for=\"newPlaylistPublic\">Public</label>\n            <input name=\"public\" type=\"checkbox\" checked id=\"newPlaylistPublic\">\n          </div>\n\n          <div class=\"row buttons\">\n            <button type=\"button\" @click=\"showNewPlaylist = false\">Cancel</button>\n            <button type=\"submit\">Create</button>\n          </div>\n        </form>\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FloatingButton from \"@/components/elements/FloatingButton\";\nimport Modal from \"@/components/Modal\";\nimport Utils from '@/Utils'\n\nexport default {\n  mixins: [Utils],\n  emits: ['refresh', 'select'],\n  components: {\n    FloatingButton,\n    Modal,\n  },\n\n  props: {\n    collection: {\n      type: Object,\n    },\n\n    filter: {\n      type: String,\n    },\n\n    items: {\n      type: Array,\n      default: () => [],\n    },\n\n    batchItems: {\n      type: Number,\n      default: 100,\n    },\n\n    parentId: {\n      type: String,\n    },\n  },\n\n  data() {\n    return {\n      fallbackImageCollections: {},\n      loading: false,\n      maxResultIndex: this.batchItems,\n      showNewPlaylist: false,\n    };\n  },\n\n  computed: {\n    collectionsIcons() {\n      return {\n        books: \"fas fa-book\",\n        homevideos: \"fas fa-video\",\n        movies: \"fas fa-film\",\n        music: \"fas fa-music\",\n        playlists: \"fas fa-list\",\n        photos: \"fas fa-image\",\n        series: \"fas fa-tv\",\n      };\n    },\n\n    filteredItems() {\n      return Object.values(this.items).filter(\n        (item) => !this.filter || item.name.toLowerCase().includes(this.filter.toLowerCase())\n      ).sort((a, b) => {\n        if (a.item_type === 'album' && b.item_type === 'album') {\n          if (a.year && b.year) {\n            if (a.year !== b.year) {\n              return b.year - a.year\n            }\n          }\n        }\n\n        return a.name.localeCompare(b.name)\n      }).slice(0, this.maxResultIndex)\n    },\n\n    isPlaylistsCollection() {\n      return this.collection?.collection_type === 'playlists'\n    },\n  },\n\n  methods: {\n    async createPlaylist(event) {\n      const form = new FormData(event.target)\n      await this.request('media.jellyfin.create_playlist', {\n        name: form.get('name'),\n        public: form.get('public') === 'on',\n      })\n\n      this.$emit('refresh')\n    },\n\n    onImageError(collection) {\n      this.fallbackImageCollections[collection.id] = true\n    },\n\n    onScroll(e) {\n      const el = e.target\n      if (!el)\n        return\n\n      const bottom = (el.scrollHeight - el.scrollTop) <= el.clientHeight + 150\n      if (!bottom)\n        return\n\n      this.maxResultIndex += this.batchItems\n    },\n  },\n\n  watch: {\n    showNewPlaylist(value) {\n      if (value)\n        this.$nextTick(() => this.$el.querySelector('input[name=\"name\"]').focus())\n    },\n  },\n\n  mounted() {\n    this.$el.parentElement?.addEventListener('scroll', this.onScroll)\n  },\n\n  unmounted() {\n    this.$el.parentElement?.removeEventListener('scroll', this.onScroll)\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./common.scss\";\n\n.index {\n  .item {\n    position: relative;\n\n    h2 {\n      font-size: 1.25em;\n      font-weight: bold;\n      overflow: auto;\n      text-overflow: ellipsis;\n    }\n\n    .float {\n      position: absolute;\n      background: rgba(0, 0, 0, 0.5);\n      color: white;\n      z-index: 1;\n      padding: 0.25em;\n      font-size: 0.9em;\n      border-radius: 0.5em;\n\n      &.bottom-right {\n        right: 0;\n        bottom: 0;\n      }\n    }\n  }\n\n  &.is-root {\n    .item {\n      h2 {\n        font-size: 2em;\n      }\n    }\n  }\n\n  :deep(.add-playlist-modal) {\n    .modal-body {\n      min-width: 30em;\n      max-width: calc(100% - 2em);\n    }\n\n    form {\n      display: flex;\n      flex-direction: column;\n\n      .row {\n        margin-bottom: 1em;\n\n        label {\n          @extend .col-m-4;\n          @extend .col-s-12;\n        }\n\n        input {\n          @extend .col-m-8;\n          @extend .col-s-12;\n        }\n\n        &.buttons {\n          display: flex;\n          justify-content: flex-end;\n\n          button {\n            margin-left: 1em;\n\n            &[type=\"submit\"] {\n              width: 10em;\n              cursor: pointer;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./Collections.vue?vue&type=template&id=2b3713e6&scoped=true\"\nimport script from \"./Collections.vue?vue&type=script&lang=js\"\nexport * from \"./Collections.vue?vue&type=script&lang=js\"\n\nimport \"./Collections.vue?vue&type=style&index=0&id=2b3713e6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b3713e6\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_normalizeClass","$props","parentId","_createElementVNode","_hoisted_1","_Fragment","_renderList","$options","filteredItems","collection","key","id","onClick","$event","_ctx","$emit","_hoisted_3","$data","fallbackImageCollections","collectionsIcons","type","src","image","alt","name","onError","onImageError","_hoisted_5","_toDisplayString","year","_hoisted_6","isPlaylistsCollection","_hoisted_7","_createVNode","_component_FloatingButton","title","disabled","loading","_cache","showNewPlaylist","_hoisted_8","_component_Modal","visible","onClose","onSubmit","_withModifiers","args","createPlaylist","for","placeholder","required","checked","_hoisted_9","mixins","Utils","emits","components","FloatingButton","Modal","props","Object","filter","String","items","Array","default","batchItems","Number","data","maxResultIndex","this","computed","books","homevideos","movies","music","playlists","photos","series","values","item","toLowerCase","includes","sort","a","b","item_type","localeCompare","slice","collection_type","methods","event","form","FormData","target","request","get","public","onScroll","e","el","bottom","scrollHeight","scrollTop","clientHeight","watch","value","$nextTick","$el","querySelector","focus","mounted","parentElement","addEventListener","unmounted","removeEventListener","__exports__","render"],"sourceRoot":""}