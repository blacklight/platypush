"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[8516],{710:function(t,e,s){s.d(e,{A:function(){return p}});var i=s(641),o=s(3751),n=s(33);const a={class:"dialog-content"},l={class:"buttons"};function c(t,e,s,c,d,r){const u=(0,i.g2)("Modal");return(0,i.uX)(),(0,i.Wv)(u,{ref:"modal",title:s.title},{default:(0,i.k6)((()=>[(0,i.Lk)("form",{onSubmit:e[5]||(e[5]=(0,o.D$)(((...t)=>r.onConfirm&&r.onConfirm(...t)),["prevent"]))},[(0,i.Lk)("div",a,[(0,i.RG)(t.$slots,"default",{},void 0,!0),(0,i.bo)((0,i.Lk)("input",{type:"text",ref:"input","onUpdate:modelValue":e[0]||(e[0]=t=>d.value_=t)},null,512),[[o.Jo,d.value_]])]),(0,i.Lk)("div",l,[(0,i.Lk)("button",{type:"submit",class:"ok-btn",onClick:e[1]||(e[1]=(...t)=>r.onConfirm&&r.onConfirm(...t)),onTouch:e[2]||(e[2]=(...t)=>r.onConfirm&&r.onConfirm(...t))},[e[6]||(e[6]=(0,i.Lk)("i",{class:"fas fa-check"},null,-1)),(0,i.eW)("   "+(0,n.v_)(s.confirmText),1)],32),(0,i.Lk)("button",{type:"button",class:"cancel-btn",onClick:e[3]||(e[3]=(...t)=>r.close&&r.close(...t)),onTouch:e[4]||(e[4]=(...t)=>r.close&&r.close(...t))},[e[7]||(e[7]=(0,i.Lk)("i",{class:"fas fa-xmark"},null,-1)),(0,i.eW)("   "+(0,n.v_)(s.cancelText),1)],32)])],32)])),_:3},8,["title"])}var d=s(9513),r={emits:["input"],components:{Modal:d.A},props:{title:{type:String},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},visible:{type:Boolean,default:!1},value:{type:String,default:""}},data(){return{value_:"",visible_:!1}},methods:{onConfirm(){this.value_?.trim()?.length&&this.$emit("input",this.value_),this.close()},open(){this.visible_||(this.value_=this.value,this.$refs.modal.show(),this.visible_=!0,this.focus())},close(){this.visible_&&(this.value_="",this.$refs.modal.hide(),this.visible_=!1)},show(){this.open()},hide(){this.close()},focus(){this.$nextTick((()=>{this.$refs.input.focus()}))}},watch:{visible(t){t?this.open():this.close()}},mounted(){this.visible_=this.visible,this.value_=this.value||""}},u=s(6262);const v=(0,u.A)(r,[["render",c],["__scopeId","data-v-77ea2884"]]);var p=v},11:function(t,e,s){s.d(e,{A:function(){return v}});var i=s(641),o=s(33),n=s(3751);const a=["checked","id"],l={class:"label"};function c(t,e,s,c,d,r){return(0,i.uX)(),(0,i.CE)("div",{class:(0,o.C4)(["power-switch",{disabled:s.disabled}]),onClick:e[0]||(e[0]=(0,n.D$)(((...t)=>r.onInput&&r.onInput(...t)),["stop"]))},[(0,i.Lk)("input",{type:"checkbox",checked:s.value,id:s.id},null,8,a),(0,i.Lk)("label",null,[e[1]||(e[1]=(0,i.Lk)("div",{class:"switch"},[(0,i.Lk)("div",{class:"dot"})],-1)),(0,i.Lk)("span",l,[(0,i.RG)(t.$slots,"default",{},void 0,!0)])])],2)}var d={name:"ToggleSwitch",emits:["input"],props:{id:{type:String},value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{onInput(t){if(this.disabled)return!1;this.$emit("input",t)}}},r=s(6262);const u=(0,r.A)(d,[["render",c],["__scopeId","data-v-eff375b6"]]);var v=u},8516:function(t,e,s){s.r(e),s.d(e,{default:function(){return _}});var i=s(641),o=s(33),n=s(3751);const a={class:"entity assistant-container"},l={class:"col-1 icon entity-icon",ref:"icon"},c={class:"label"},d=["textContent"],r={class:"value-container"},u={class:"value"},v={class:"value"},p={class:"value"},h={class:"value"};function k(t,e,s,k,m,f){const b=(0,i.g2)("TextPrompt"),C=(0,i.g2)("EntityIcon"),g=(0,i.g2)("ToggleSwitch");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(b,{ref:"prompt"},{default:(0,i.k6)((()=>e[7]||(e[7]=[(0,i.eW)(" Enter a text query to send to the assistant. ")]))),_:1},512),(0,i.Lk)("div",{class:"head",onClick:e[1]||(e[1]=(...t)=>f.onHeadClick&&f.onHeadClick(...t))},[(0,i.Lk)("div",l,[(0,i.bF)(C,{entity:t.value,class:(0,o.C4)({active:t.value.conversation_running}),loading:t.loading,error:t.error},null,8,["entity","class","loading","error"])],512),(0,i.Lk)("div",c,[(0,i.Lk)("div",{class:"name",ref:"name",textContent:(0,o.v_)(t.value.name)},null,8,d)]),(0,i.Lk)("div",r,[(0,i.Lk)("button",{onClick:e[0]||(e[0]=(0,n.D$)((t=>m.collapsed=!m.collapsed),["stop"]))},[(0,i.Lk)("i",{class:(0,o.C4)(["fas",{"fa-angle-up":!m.collapsed,"fa-angle-down":m.collapsed}])},null,2)])])]),m.collapsed?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",{key:0,class:"body",ref:"body",onClick:e[6]||(e[6]=(0,n.D$)(((...e)=>t.prevent&&t.prevent(...e)),["stop"]))},[t.value.conversation_running?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"row",onClick:e[2]||(e[2]=(0,n.D$)(((...t)=>f.stopConversation&&f.stopConversation(...t)),["stop"]))},[e[8]||(e[8]=(0,i.Lk)("div",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-comment-slash"})],-1)),e[9]||(e[9]=(0,i.Lk)("div",{class:"label"},[(0,i.Lk)("div",{class:"name"},"Stop Conversation")],-1)),(0,i.Lk)("div",u,[(0,i.bF)(g,{onClick:(0,n.D$)(f.stopConversation,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])):((0,i.uX)(),(0,i.CE)("div",{key:1,class:"row",onClick:e[3]||(e[3]=(0,n.D$)(((...t)=>f.startConversation&&f.startConversation(...t)),["stop"]))},[e[10]||(e[10]=(0,i.Lk)("div",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-comment"})],-1)),e[11]||(e[11]=(0,i.Lk)("div",{class:"label"},[(0,i.Lk)("div",{class:"name"},"Start Conversation")],-1)),(0,i.Lk)("div",v,[(0,i.bF)(g,{onClick:(0,n.D$)(f.startConversation,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])),(0,i.Lk)("div",{class:"row",onClick:e[4]||(e[4]=(0,n.D$)(((...t)=>f.toggleMute&&f.toggleMute(...t)),["stop"]))},[e[12]||(e[12]=(0,i.Lk)("div",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-microphone-lines-slash"})],-1)),e[13]||(e[13]=(0,i.Lk)("div",{class:"label"},[(0,i.Lk)("div",{class:"name"},"Muted")],-1)),(0,i.Lk)("div",p,[(0,i.bF)(g,{onClick:(0,n.D$)(f.toggleMute,["stop"]),value:t.value.is_muted,disabled:t.loading},null,8,["onClick","value","disabled"])])]),(0,i.Lk)("div",{class:"row",onClick:e[5]||(e[5]=(0,n.D$)(((...t)=>f.showPrompt&&f.showPrompt(...t)),["stop"]))},[e[14]||(e[14]=(0,i.Lk)("div",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-keyboard"})],-1)),e[15]||(e[15]=(0,i.Lk)("div",{class:"label"},[(0,i.Lk)("div",{class:"name"},"Send query from text prompt")],-1)),(0,i.Lk)("div",h,[(0,i.bF)(g,{onClick:(0,n.D$)(f.showPrompt,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])],512))])}var m=s(710),f=s(11),b=s(1029),C=s(4897),g={name:"Assistant",mixins:[C["default"]],components:{EntityIcon:b["default"],TextPrompt:m.A,ToggleSwitch:f.A},data(){return{collapsed:!0,showTextQueryPrompt:!1,modalId:"assistant-text-prompt-modal"}},methods:{hidePrompt(){document.body.querySelector(`#${this.modalId}`)?.remove()},showPrompt(){const t=this.$refs.prompt.$el;this.hidePrompt(),t.id=this.modalId,t.classList.remove("hidden");const e=t.querySelector('input[type="text"]'),s=t.querySelector("form");s&&s.addEventListener("submit",(t=>{t.stopPropagation(),this.onTextPrompt(e?.value)}));const i=t.querySelector(".cancel-btn");i&&(i.onclick=t=>{this.hidePrompt(),t.stopPropagation()}),t.onclick=e=>{const s=t.querySelector(".modal");if(s?.contains(e.target))return e.stopPropagation(),!1;this.hidePrompt()},document.body.appendChild(t),this.$nextTick((()=>{t.querySelector('input[type="text"]').focus()}))},onHeadClick(t){if(this.$refs.name.contains(t.target)||this.$refs.icon.contains(t.target))return!0;this.collapsed=!this.collapsed,t.stopPropagation()},async toggleMute(){await this.request("entities.execute",{id:this.value.id,action:"toggle_mute"})},async startConversation(){await this.request("entities.execute",{id:this.value.id,action:"start_conversation"})},async stopConversation(){await this.request("entities.execute",{id:this.value.id,action:"stop_conversation"})},async onTextPrompt(t){await this.request("entities.execute",{id:this.value.id,action:"send_text_query",query:t}),this.hidePrompt()}}},y=s(6262);const L=(0,y.A)(g,[["render",k],["__scopeId","data-v-d7bb5c5e"]]);var _=L}}]);
//# sourceMappingURL=8516.f41c961c.js.map