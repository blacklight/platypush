"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[3644],{3644:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var l=s(641),a=s(33);const o={class:"collections items"},i=["onClick"],r={class:"image"},n=["src","alt","onError"],c={key:0,class:"name"},m={key:1,class:"float bottom-right"};function u(e,t,s,u,f,d){return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["collections index",{"is-root":!s.parentId}])},[(0,l.Lk)("div",o,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(d.filteredItems,(t=>((0,l.uX)(),(0,l.CE)("div",{class:"collection item",key:t.id,onClick:s=>e.$emit("select",t)},[(0,l.Lk)("div",r,[f.fallbackImageCollections[t.id]?((0,l.uX)(),(0,l.CE)("i",{key:1,class:(0,a.C4)(d.collectionsIcons[t.type]??"fas fa-folder")},null,2)):((0,l.uX)(),(0,l.CE)("img",{key:0,src:t.image,alt:t.name,onError:e=>d.onImageError(t)},null,40,n))]),f.fallbackImageCollections[t.id]||s.parentId?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("h2",null,(0,a.v_)(t.name),1)])):(0,l.Q3)("",!0),t.year?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("span",null,(0,a.v_)(t.year),1)])):(0,l.Q3)("",!0)],8,i)))),128))])],2)}var f={props:{filter:{type:String},items:{type:Array,default:()=>[]},batchItems:{type:Number,default:100},parentId:{type:String}},data(){return{fallbackImageCollections:{},maxResultIndex:this.batchItems}},computed:{collectionsIcons(){return{books:"fas fa-book",homevideos:"fas fa-video",movies:"fas fa-film",music:"fas fa-music",playlists:"fas fa-list",photos:"fas fa-image",series:"fas fa-tv"}},filteredItems(){return Object.values(this.items).filter((e=>!this.filter||e.name.toLowerCase().includes(this.filter.toLowerCase()))).sort(((e,t)=>"album"===e.item_type&&"album"===t.item_type&&e.year&&t.year&&e.year!==t.year?t.year-e.year:e.name.localeCompare(t.name))).slice(0,this.maxResultIndex)}},methods:{onImageError(e){this.fallbackImageCollections[e.id]=!0},onScroll(e){const t=e.target;if(!t)return;const s=t.scrollHeight-t.scrollTop<=t.clientHeight+150;s&&(this.maxResultIndex+=this.batchItems)}},mounted(){this.$el.parentElement?.addEventListener("scroll",this.onScroll)},unmounted(){this.$el.parentElement?.removeEventListener("scroll",this.onScroll)}},d=s(6262);const p=(0,d.A)(f,[["render",u],["__scopeId","data-v-7f4d435e"]]);var h=p}}]);
//# sourceMappingURL=3644.921ecbfc.js.map