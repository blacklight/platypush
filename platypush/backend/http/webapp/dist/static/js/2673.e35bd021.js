(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[2673],{2673:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ys}});var l=s(641),a=s(33);const i={class:"media-plugin fade-in"},n={class:"view-container"},o={key:0,class:"media-loading-indicator"},r={class:"subtitles-container"},d={key:0,class:"subtitles-content"},u={class:"play-url-container"},c={key:0,class:"add-to-playlist-container"},h={key:1,class:"info-container"},m={key:2,class:"embed-player-container"};function p(e,t,s,p,y,f){const v=(0,l.g2)("Nav"),w=(0,l.g2)("Header"),g=(0,l.g2)("Results"),b=(0,l.g2)("TorrentTransfers"),k=(0,l.g2)("MediaDownloads"),C=(0,l.g2)("Browser"),P=(0,l.g2)("Loading"),L=(0,l.g2)("MediaView"),I=(0,l.g2)("Subtitles"),S=(0,l.g2)("Modal"),x=(0,l.g2)("UrlPlayer"),$=(0,l.g2)("PlaylistAdder"),N=(0,l.g2)("Info"),_=(0,l.g2)("EmbedPlayer");return(0,l.uX)(),(0,l.Wv)(l.PR,null,[(0,l.Lk)("div",i,[(0,l.bF)(L,{"plugin-name":s.pluginName,status:y.selectedPlayer?.status||{},track:y.selectedPlayer?.status||{},buttons:s.mediaButtons,onInfo:t[16]||(t[16]=e=>y.infoTrack=e),onPlay:f.pause,onPause:f.pause,onStop:f.stop,onSetVolume:f.setVolume,onSeek:f.seek,onSearch:f.search,onMute:f.toggleMute,onUnmute:f.toggleMute},{default:(0,l.k6)((()=>[(0,l.Lk)("main",null,[(0,l.Lk)("div",{class:"nav-container from tablet",style:(0,a.Tr)(f.navContainerStyle)},[(0,l.bF)(v,{"selected-view":y.selectedView,"torrent-plugin":y.torrentPlugin,"download-icon-class":f.downloadIconClass,onInput:f.setView,onToggle:t[0]||(t[0]=e=>y.forceShowNav=!y.forceShowNav)},null,8,["selected-view","torrent-plugin","download-icon-class","onInput"])],4),(0,l.Lk)("div",n,[(0,l.bF)(w,{"plugin-name":s.pluginName,"selected-view":y.selectedView,"has-subtitles-plugin":f.hasSubtitlesPlugin,sources:y.sources,"selected-item":f.selectedItem,"selected-subtitles":y.selectedSubtitles,"browser-filter":y.browserFilter,"downloads-filter":y.downloadsFilter,"show-nav-button":!y.forceShowNav,ref:"header",onSearch:f.search,onSelectPlayer:t[1]||(t[1]=e=>y.selectedPlayer=e),onPlayerStatus:f.onStatusUpdate,onTorrentAdd:t[2]||(t[2]=e=>f.downloadTorrent(e)),onShowSubtitles:t[3]||(t[3]=e=>y.showSubtitlesModal=!y.showSubtitlesModal),onPlayUrl:f.showPlayUrlModal,onFilter:t[4]||(t[4]=e=>y.browserFilter=e),onFilterDownloads:t[5]||(t[5]=e=>y.downloadsFilter=e),onToggleNav:t[6]||(t[6]=e=>y.forceShowNav=!y.forceShowNav),onSourceToggle:t[7]||(t[7]=e=>y.sources[e]=!y.sources[e])},null,8,["plugin-name","selected-view","has-subtitles-plugin","sources","selected-item","selected-subtitles","browser-filter","downloads-filter","show-nav-button","onSearch","onPlayerStatus","onPlayUrl"]),(0,l.Lk)("div",{class:(0,a.C4)(["body-container",{"expanded-header":e.$refs.header?.filterVisible}])},["search"===y.selectedView?((0,l.uX)(),(0,l.Wv)(g,{key:0,results:y.results,"selected-result":y.selectedResult,sources:y.sources,"plugin-name":s.pluginName,loading:y.loading,filter:y.browserFilter,onAddToPlaylist:t[8]||(t[8]=e=>y.addToPlaylistItem=e),onOpenChannel:f.selectChannelFromItem,onSelect:t[9]||(t[9]=e=>f.onResultSelect(e)),onPlay:f.play,onPlayWithOpts:t[10]||(t[10]=e=>f.play(e.item,e.opts)),onView:f.view,onDownload:f.download,onDownloadAudio:f.downloadAudio},null,8,["results","selected-result","sources","plugin-name","loading","filter","onOpenChannel","onPlay","onView","onDownload","onDownloadAudio"])):"torrents"===y.selectedView?((0,l.uX)(),(0,l.Wv)(b,{key:1,"plugin-name":y.torrentPlugin,"is-media":!0,onPlay:f.play},null,8,["plugin-name","onPlay"])):"downloads"===y.selectedView?((0,l.uX)(),(0,l.Wv)(k,{key:2,"plugin-name":s.pluginName,downloads:y.downloads,filter:y.downloadsFilter,onPlay:f.play},null,8,["plugin-name","downloads","filter","onPlay"])):"browser"===y.selectedView?((0,l.uX)(),(0,l.Wv)(C,{key:3,filter:y.browserFilter,loading:y.loading,"media-plugin":s.pluginName,"selected-playlist":f.selectedPlaylist,"selected-channel":f.selectedChannel,onAddToPlaylist:t[11]||(t[11]=e=>y.addToPlaylistItem=e),onBack:t[12]||(t[12]=e=>y.selectedResult=null),onDownload:f.download,onDownloadAudio:f.downloadAudio,onPathChange:t[13]||(t[13]=e=>y.browserFilter=""),onPlay:t[14]||(t[14]=e=>f.play(e)),onPlayWithOpts:t[15]||(t[15]=e=>f.play(e.item,e.opts)),onView:f.view},null,8,["filter","loading","media-plugin","selected-playlist","selected-channel","onDownload","onDownloadAudio","onView"])):(0,l.Q3)("",!0)],2)]),y.opening?((0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(P)])):(0,l.Q3)("",!0)])])),_:1},8,["plugin-name","status","track","buttons","onPlay","onPause","onStop","onSetVolume","onSeek","onSearch","onMute","onUnmute"]),(0,l.Lk)("div",r,[(0,l.bF)(S,{title:"Available subtitles",visible:y.showSubtitlesModal,ref:"subtitlesSelector",onClose:t[18]||(t[18]=e=>y.showSubtitlesModal=!1)},{default:(0,l.k6)((()=>[y.showSubtitlesModal&&null!=y.selectedResult?((0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(I,{item:y.selectedPlayer&&y.selectedPlayer.status&&("play"===y.selectedPlayer.status.state||"pause"===y.selectedPlayer.status.state)?y.selectedPlayer.status:y.results[y.selectedResult],onSelectSubs:t[17]||(t[17]=e=>f.selectSubtitles(e))},null,8,["item"])])):(0,l.Q3)("",!0)])),_:1},8,["visible"])]),(0,l.Lk)("div",u,[(0,l.bF)(S,{title:"Play URL",ref:"playUrlModal",onOpen:f.onPlayUrlModalOpen},{default:(0,l.k6)((()=>[(0,l.bF)(x,{value:y.urlPlay,onInput:t[19]||(t[19]=e=>y.urlPlay=e.target.value),onPlay:t[20]||(t[20]=e=>f.playUrl(e))},null,8,["value"])])),_:1},8,["onOpen"])]),y.addToPlaylistItem?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.bF)(S,{title:"Add to playlist",visible:null!=y.addToPlaylistItem,onClose:t[23]||(t[23]=e=>y.addToPlaylistItem=null)},{default:(0,l.k6)((()=>[(0,l.bF)($,{item:y.addToPlaylistItem,onDone:t[21]||(t[21]=e=>y.addToPlaylistItem=null),onClose:t[22]||(t[22]=e=>y.addToPlaylistItem=null)},null,8,["item"])])),_:1},8,["visible"])])):(0,l.Q3)("",!0),null!=y.infoTrack?((0,l.uX)(),(0,l.CE)("div",h,[(0,l.bF)(S,{ref:"infoModal",title:"Media info",visible:null!=y.infoTrack,onClose:t[26]||(t[26]=e=>y.infoTrack=null)},{default:(0,l.k6)((()=>[(0,l.bF)(N,{item:y.infoTrack,pluginName:s.pluginName,onAddToPlaylist:t[24]||(t[24]=e=>y.addToPlaylistItem=e),onDownload:f.download,onDownloadAudio:f.downloadAudio,onOpenChannel:f.selectChannelFromItem,onPlay:f.play,onPlayWithOpts:t[25]||(t[25]=e=>f.play(e.item,e.opts))},null,8,["item","pluginName","onDownload","onDownloadAudio","onOpenChannel","onPlay"])])),_:1},8,["visible"])])):(0,l.Q3)("",!0),null!=y.viewItem?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.bF)(S,{visible:!0,onClose:t[28]||(t[28]=e=>y.viewItem=null)},{default:(0,l.k6)((()=>[(0,l.bF)(_,{item:y.viewItem,"plugin-name":s.pluginName,onEnded:t[27]||(t[27]=e=>y.viewItem=null)},null,8,["item","plugin-name"])])),_:1})])):(0,l.Q3)("",!0)])],1024)}var y=s(9513),f=s(2002);const v={class:"media-browser"},w={key:0,class:"media-index grid"},g=["onClick"],b={class:"icon"},k=["src"],C={class:"name"},P={key:1,class:"media-browser-body"};function L(e,t,s,i,n,o){return(0,l.uX)(),(0,l.Wv)(l.PR,null,[(0,l.Lk)("div",v,[n.mediaProvider?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",w,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.visibleMediaProviders,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{class:"item",key:t,onClick:t=>n.mediaProvider=e},[(0,l.Lk)("div",b,[n.providersMetadata[t].icon?.class?((0,l.uX)(),(0,l.CE)("i",(0,l.v6)({key:0,ref_for:!0},n.providersMetadata[t].icon,{style:{color:n.providersMetadata[t].icon?.color||"inherit"}}),null,16)):n.providersMetadata[t].icon?.url?((0,l.uX)(),(0,l.CE)("img",{key:1,src:n.providersMetadata[t].icon.url},null,8,k)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",C,(0,a.v_)(n.providersMetadata[t].name),1)],8,g)))),128))])),n.mediaProvider?((0,l.uX)(),(0,l.CE)("div",P,[((0,l.uX)(),(0,l.Wv)((0,l.$y)(n.mediaProvider),{filter:s.filter,loading:s.loading,"media-plugin":s.mediaPlugin,"selected-playlist":s.selectedPlaylist,"selected-channel":s.selectedChannel,onAddToPlaylist:t[0]||(t[0]=t=>e.$emit("add-to-playlist",t)),onBack:o.back,onDownload:t[1]||(t[1]=t=>e.$emit("download",t)),onDownloadAudio:t[2]||(t[2]=t=>e.$emit("download-audio",t)),onPathChange:t[3]||(t[3]=t=>e.$emit("path-change",t)),onPlay:t[4]||(t[4]=t=>e.$emit("play",t)),onPlayWithOpts:t[5]||(t[5]=t=>e.$emit("play-with-opts",t)),onView:t[6]||(t[6]=t=>e.$emit("view",t))},null,40,["filter","loading","media-plugin","selected-playlist","selected-channel","onBack"]))])):(0,l.Q3)("",!0)])],1024)}var I=s(953),S=s(648),x=s(4341),$={mixins:[f.A],emits:["add-to-playlist","back","create-playlist","download","download-audio","path-change","play","play-with-opts","remove-from-playlist","remove-playlist","rename-playlist","view"],components:{Browser:S.A},props:{filter:{type:String,default:""},mediaPlugin:{type:String},selectedPlaylist:{type:Object},selectedChannel:{type:Object},loading:{type:Boolean,default:!1}},data(){return{mediaProvider:null,mediaProviders:{},providersMetadata:x}},computed:{mediaProvidersLookup(){return Object.keys(this.mediaProviders).reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{})},visibleMediaProviders(){return Object.entries(this.mediaProviders).filter((([e,t])=>t&&(!this.filter||e.toLowerCase().includes(this.filter.toLowerCase())))).reduce(((e,[t,s])=>(e[t]=s,e)),{})}},methods:{back(){this.mediaProvider=null,this.$emit("back")},registerMediaProvider(e){const t=(0,I.KR)((0,l.$V)((()=>s(4837)(`./${e}`))));this.$options.components[e]=t,this.mediaProviders[e]=t},async refreshMediaProviders(){const e=this.$root.config;this.mediaProviders={},this.registerMediaProvider("File"),e.youtube&&this.registerMediaProvider("YouTube"),e["media.jellyfin"]&&this.registerMediaProvider("Jellyfin")},onPlaylistChange(){if(!this.selectedPlaylist)return;const e=this.selectedPlaylist.type?.toLowerCase(),t=this.mediaProvidersLookup[e];t&&(this.mediaProvider=this.mediaProviders[t])},onChannelChange(){if(!this.selectedChannel)return;const e=this.selectedChannel.type?.toLowerCase(),t=this.mediaProvidersLookup[e];t&&(this.mediaProvider=this.mediaProviders[t])},updateView(){if(this.getUrlArgs().provider?.length){const e=this.getUrlArgs().provider,t=this.mediaProvidersLookup[e.toLowerCase()];if(!t?.length)return;this.mediaProvider=this.mediaProviders[t]}this.selectedPlaylist?this.onPlaylistChange():this.selectedChannel&&this.onChannelChange()}},watch:{mediaProvider(e){if(!e)return void this.setUrlArgs({provider:null});const t=Object.entries(this.mediaProviders).filter((t=>t[1]===e))?.[0]?.[0]?.toLowerCase();t?.length&&this.setUrlArgs({provider:t})},selectedPlaylist(){this.onPlaylistChange()},selectedChannel(){this.onChannelChange()}},async mounted(){await this.refreshMediaProviders(),this.updateView()},unmounted(){this.setUrlArgs({provider:null})}},N=s(6262);const _=(0,N.A)($,[["render",L],["__scopeId","data-v-2b03213a"]]);var E=_;const M={class:"embed-player"},X=["src"],T={key:2,class:"audio-container"},A={key:0,class:"poster-container"},D=["src"],F=["src","type"],V=["poster"],U=["src","type"];function q(e,t,s,i,n,o){const r=(0,l.g2)("Loading");return(0,l.uX)(),(0,l.CE)("div",M,[(0,l.Lk)("div",{class:(0,a.C4)(["player-container",{youtube:!!o.youtubeUrl}])},[n.loading?((0,l.uX)(),(0,l.Wv)(r,{key:0})):o.youtubeUrl?((0,l.uX)(),(0,l.CE)("iframe",{key:1,src:o.youtubeUrl,class:"player",allowfullscreen:"",frameborder:"0"},null,8,X)):o.isAudio?((0,l.uX)(),(0,l.CE)("div",T,[o.poster?((0,l.uX)(),(0,l.CE)("div",A,[(0,l.Lk)("img",{src:o.poster},null,8,D)])):(0,l.Q3)("",!0),(0,l.Lk)("audio",{ref:"audio",class:"player",controls:"",onCanplay:t[0]||(t[0]=t=>e.$refs.audio.play()),onEnded:t[1]||(t[1]=t=>e.$emit("ended"))},[(0,l.Lk)("source",{src:n.mediaItem.url,type:n.mediaItem.mime_type},null,8,F)],544)])):n.mediaItem?((0,l.uX)(),(0,l.CE)("video",{key:3,ref:"video",class:"player",controls:"",poster:o.poster,onCanplay:t[2]||(t[2]=t=>e.$refs.video.play()),onEnded:t[3]||(t[3]=t=>e.$emit("ended"))},[(0,l.Lk)("source",{src:n.mediaItem.url,type:n.mediaItem.mime_type},null,8,U)],40,V)):(0,l.Q3)("",!0)],2)])}var R=s(4335),Q=s(9828),O=s(226),W={components:{Loading:Q.A},emits:["ended"],mixins:[O.A],props:{item:{type:Object,required:!0},pluginName:{type:String,required:!0}},data(){return{loading:!1,mediaItem:null}},computed:{isAudio(){return(this.mediaItem?.mime_type||"").startsWith("audio")},poster(){return this.isAudio&&this.item?.image?this.item.image:null},youtubeUrl(){if("youtube"!==this.item.type)return null;const e=this.item.url.match(/(?:\?v=|\/embed\/|\/\d\/|\/vi\/|\/v\/|https?:\/\/(?:www\.)?youtu\.be\/)([^?&"'>]+)/)[1];return`https://www.youtube-nocookie.com/embed/${e}?autoplay=1`}},methods:{async refresh(){this.loading=!0;try{if("file"===this.item.type){let t=null,s=!1;this.loading=!0;try{t=await this.startStreaming(this.item.url,this.pluginName)}catch(e){s=!0}finally{this.opening=!1,t||this.notify({title:"Error starting streaming",text:s||"Unknown error",error:!0})}if(!t)return;this.mediaItem={...this.item,url:t.url,mime_type:t.mime_type}}else if("youtube"!==this.item.type){const e=await R.A.head(this.item.url);this.mediaItem={...this.item,mime_type:e.headers["content-type"]}}}finally{this.loading=!1}}},watch:{item:{handler(){this.refresh()},deep:!0}},mounted(){this.refresh()}};const j=(0,N.A)(W,[["render",q],["__scopeId","data-v-615e8fce"]]);var J=j,Y=s(3751);const B={class:"row"},K={key:0,class:"col-s-8 col-m-7 left side"},z={class:"search-box"},G={key:1,class:"col-s-8 col-m-7 left side"},H={class:"search-box"},Z={key:2,class:"col-s-8 col-m-7 left side"},ee={class:"search-box"},te={key:3,class:"col-s-8 col-m-7 left side"},se={class:"search-box"},le=["value"],ae={class:"col-s-4 col-m-5 right side"},ie=["checked","onChange"];function ne(e,t,s,i,n,o){const r=(0,l.g2)("Players");return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["header",{"with-filter":n.filterVisible}])},[(0,l.Lk)("div",B,["search"===s.selectedView?((0,l.uX)(),(0,l.CE)("div",K,[(0,l.Lk)("button",{title:"Filter",class:(0,a.C4)(["filter-btn",{selected:n.filterVisible}]),onClick:t[0]||(t[0]=e=>n.filterVisible=!n.filterVisible)},t[14]||(t[14]=[(0,l.Lk)("i",{class:"fa fa-filter"},null,-1)]),2),(0,l.Lk)("form",{onSubmit:t[2]||(t[2]=(0,Y.D$)(((...e)=>o.search&&o.search(...e)),["prevent"]))},[(0,l.Lk)("label",z,[(0,l.bo)((0,l.Lk)("input",{type:"search",placeholder:"Search","onUpdate:modelValue":t[1]||(t[1]=e=>n.query=e)},null,512),[[Y.Jo,n.query]])])],32)])):"torrents"===s.selectedView?((0,l.uX)(),(0,l.CE)("div",G,[(0,l.Lk)("form",{onSubmit:t[4]||(t[4]=(0,Y.D$)((t=>e.$emit("torrent-add",n.torrentURL)),["prevent"]))},[(0,l.Lk)("label",H,[(0,l.bo)((0,l.Lk)("input",{type:"search",placeholder:"Add torrent URL","onUpdate:modelValue":t[3]||(t[3]=e=>n.torrentURL=e)},null,512),[[Y.Jo,n.torrentURL]])])],32)])):"downloads"===s.selectedView?((0,l.uX)(),(0,l.CE)("div",Z,[(0,l.Lk)("form",{onSubmit:t[6]||(t[6]=(0,Y.D$)((t=>e.$emit("filter-downloads",n.downloadFilter)),["prevent"]))},[(0,l.Lk)("label",ee,[(0,l.bo)((0,l.Lk)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[5]||(t[5]=e=>n.downloadFilter=e)},null,512),[[Y.Jo,n.downloadFilter]])])],32)])):"browser"===s.selectedView?((0,l.uX)(),(0,l.CE)("div",te,[(0,l.Lk)("label",se,[(0,l.Lk)("input",{type:"search",placeholder:"Filter",value:s.browserFilter,onChange:t[7]||(t[7]=t=>e.$emit("filter",t.target.value)),onKeyup:t[8]||(t[8]=t=>e.$emit("filter",t.target.value))},null,40,le)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",ae,[s.showNavButton?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"mobile",title:"Menu",onClick:t[9]||(t[9]=t=>e.$emit("toggle-nav"))},t[15]||(t[15]=[(0,l.Lk)("i",{class:"fas fa-bars"},null,-1)]))):(0,l.Q3)("",!0),s.hasSubtitlesPlugin&&s.selectedItem&&("file"===s.selectedItem.type||(s.selectedItem.url||"").startsWith("file://"))?((0,l.uX)(),(0,l.CE)("button",{key:1,title:"Select subtitles",class:(0,a.C4)(["captions-btn",{selected:null!=s.selectedSubtitles}]),onClick:t[10]||(t[10]=t=>e.$emit("show-subtitles"))},t[16]||(t[16]=[(0,l.Lk)("i",{class:"fas fa-closed-captioning"},null,-1)]),2)):(0,l.Q3)("",!0),(0,l.bF)(r,{"plugin-name":s.pluginName,onSelect:t[11]||(t[11]=t=>e.$emit("select-player",t)),onStatus:t[12]||(t[12]=t=>e.$emit("player-status",t))},null,8,["plugin-name"]),(0,l.Lk)("button",{title:"Play URL",onClick:t[13]||(t[13]=t=>e.$emit("play-url"))},t[17]||(t[17]=[(0,l.Lk)("i",{class:"fas fa-play"},null,-1)]))])]),(0,l.Lk)("div",{class:(0,a.C4)(["row filter fade-in",{hidden:!n.filterVisible}])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Object.keys(s.sources),(t=>((0,l.uX)(),(0,l.CE)("label",{key:t},[(0,l.Lk)("input",{type:"checkbox",checked:s.sources[t],onChange:s=>e.$emit("source-toggle",t)},null,40,ie),(0,l.eW)(" "+(0,a.v_)(t),1)])))),128))],2)],2)}const oe={class:"media-players"},re={class:"plugins"},de={class:"players"},ue={class:"refresh"},ce={key:1,class:"no-results"};function he(e,t,s,i,n,o){const r=(0,l.g2)("Chromecast"),d=(0,l.g2)("Kodi"),u=(0,l.g2)("Mplayer"),c=(0,l.g2)("Mpv"),h=(0,l.g2)("GStreamer"),m=(0,l.g2)("Vlc"),p=(0,l.g2)("Loading"),y=(0,l.g2)("DropdownItem"),f=(0,l.g2)("Dropdown");return(0,l.uX)(),(0,l.CE)("div",oe,[(0,l.Lk)("div",re,[(0,l.bF)(r,{player:"media.chromecast"===n.selectedPlayer?.pluginName?n.selectedPlayer:null,ref:"chromecastPlugin",onStatus:t[0]||(t[0]=t=>e.$emit("status",t))},null,8,["player"]),(0,l.bF)(d,{player:"media.kodi"===n.selectedPlayer?.pluginName?n.selectedPlayer:null,ref:"kodiPlugin",onStatus:t[1]||(t[1]=t=>e.$emit("status",t))},null,8,["player"]),(0,l.bF)(u,{player:"media.mplayer"===n.selectedPlayer?.pluginName?n.selectedPlayer:null,ref:"mplayerPlugin",onStatus:t[2]||(t[2]=t=>e.$emit("status",t))},null,8,["player"]),(0,l.bF)(c,{player:"media.mpv"===n.selectedPlayer?.pluginName?n.selectedPlayer:null,ref:"mpvPlugin",onStatus:t[3]||(t[3]=t=>e.$emit("status",t))},null,8,["player"]),(0,l.bF)(h,{player:"media.gstreamer"===n.selectedPlayer?.pluginName?n.selectedPlayer:null,ref:"gstreamerPlugin",onStatus:t[4]||(t[4]=t=>e.$emit("status",t))},null,8,["player"]),(0,l.bF)(m,{player:"media.vlc"===n.selectedPlayer?.pluginName?n.selectedPlayer:null,ref:"vlcPlugin",onStatus:t[5]||(t[5]=t=>e.$emit("status",t))},null,8,["player"])]),(0,l.Lk)("div",de,[(0,l.bF)(f,{title:n.selectedPlayer?.name||"Players","icon-class":n.selectedPlayer?n.selectedPlayer.iconClass:"fab fa-chromecast"},{default:(0,l.k6)((()=>[n.loading?((0,l.uX)(),(0,l.Wv)(p,{key:0})):(0,l.Q3)("",!0),(0,l.Lk)("div",ue,[(0,l.bF)(y,{text:"Refresh","icon-class":"fa fa-sync-alt",onInput:o.refresh},null,8,["onInput"])]),n.players?.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",ce,"No players found")),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.players,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["player",{selected:null!=n.selectedPlayer&&n.selectedPlayer.pluginName===e.pluginName&&n.selectedPlayer.name===e.name}]),key:t},[(0,l.bF)(y,{text:e.name,"icon-class":e.iconClass,onInput:t=>o.select(e)},null,8,["text","icon-class","onInput"])],2)))),128))])),_:1},8,["title","icon-class"])])])}s(4114);var me=s(9265),pe=s(9612);function ye(e,t,s,a,i,n){return(0,l.uX)(),(0,l.CE)("div")}var fe={name:"Mixin",mixins:[f.A,O.A],emits:["status"],props:{player:{type:Object}},data(){return{iconClass:null,name:null,pluginName:null}},methods:{async getPlayers(){return[{iconClass:this.iconClass,name:this.name,pluginName:this.pluginName,component:this,status:await this.status()}]},async status(){return await this.request(`${this.pluginName}.status`)},async play(e,t,s,l){if(!e)return await this.pause();const a={resource:e.url,subtitles:t,metadata:e};return l?.cache&&(a.cache_streams=!0),await this.request(`${this.pluginName}.play`,a)},async pause(){return await this.request(`${this.pluginName}.pause`)},async stop(){return await this.request(`${this.pluginName}.stop`)},async setVolume(e){return await this.request(`${this.pluginName}.set_volume`,{volume:e})},async toggleMute(){return await this.request(`${this.pluginName}.mute`)},async seek(e){return await this.request(`${this.pluginName}.seek`,{position:e})},async onNewMedia(e){const t=await this.onMediaEvent(e);t&&e.title&&this.notify({title:e.player||e.device||this.player?.name||this.name||this.pluginName,text:e.title,image:{iconClass:this.iconClass||"fa fa-play"}})},async onMediaEvent(e){return e.plugin===this.pluginName&&(this.$emit("status",await this.status()),!0)},async addSubtitles(e){await this.request(`${this.pluginName}.add_subtitles`,{filename:e}),await this.request(`${this.pluginName}.toggle_subtitles`,{visible:!0})},async removeSubtitles(){await this.request(`${this.pluginName}.toggle_subtitles`,{visible:!1})},supports(e){return"file"===e?.type||"youtube"===e?.type||(e.url||e).startsWith("file://")||(e.url||e).startsWith("http://")||(e.url||e).startsWith("https://")}},mounted(){this.subscribe(this.onNewMedia,`on-new-media-${this.pluginName}`,"platypush.message.event.media.NewPlayingMediaEvent"),this.subscribe(this.onMediaEvent,`on-media-event-${this.pluginName}`,"platypush.message.event.media.MediaPlayEvent","platypush.message.event.media.MediaStopEvent","platypush.message.event.media.MediaPauseEvent","platypush.message.event.media.MediaSeekEvent","platypush.message.event.media.MediaVolumeChangedEvent","platypush.message.event.media.MediaMuteChangedEvent")},destroy(){this.unsubscribe(`on-media-event-${this.pluginName}`)}};const ve=fe;var we=ve,ge={name:"Chromecast",mixins:[we],emits:["status"],data(){return{name:"Chromecast",pluginName:"media.chromecast",iconClass:"fab fa-chromecast"}},methods:{async getPlayers(){const e=Object.values(await this.request(`${this.pluginName}.status`));return Promise.all(e.map((async e=>({...e,iconClass:"audio"===e.type?"fa fa-volume-up":"fab fa-chromecast",pluginName:this.pluginName,component:this}))))},getPlayerName(e){return"string"===typeof e?e:e?e?.name:this.player?.name},async status(e){return(await this.request(`${this.pluginName}.status`,{chromecast:this.getPlayerName(e)}))?.status},async play(e,t,s){return e?await this.request(`${this.pluginName}.play`,{resource:e.url,chromecast:this.getPlayerName(s),subtitles:t,metadata:e}):await this.pause(s)},async pause(e){return await this.request(`${this.pluginName}.pause`,{chromecast:this.getPlayerName(e)})},async stop(e){return await this.request(`${this.pluginName}.quit`,{chromecast:this.getPlayerName(e)})},async setVolume(e,t){return await this.request(`${this.pluginName}.set_volume`,{volume:e,chromecast:this.getPlayerName(t)})},async seek(e,t){return await this.request(`${this.pluginName}.seek`,{position:e,chromecast:this.getPlayerName(t)})},async onMediaEvent(e){return e.plugin===this.pluginName&&(this.$emit("status",await this.status(e.player)),!0)},supports(){return!0}}};const be=(0,N.A)(ge,[["render",ye]]);var ke=be;function Ce(e,t,s,a,i,n){return(0,l.uX)(),(0,l.CE)("div")}var Pe={name:"Kodi",mixins:[we],data(){return{iconClass:"fa fa-kodi",name:"Kodi",pluginName:"media.kodi"}},methods:{async getPlayers(){return[{iconClass:this.iconClass,pluginName:this.pluginName,name:this.$root.config["media.kodi"]?.host||this.name,component:this,status:await this.request(`${this.pluginName}.status`)}]},supports(e){return"youtube"===e?.type||(e.url||e).startsWith("http://")||(e.url||e).startsWith("https://")}}};const Le=(0,N.A)(Pe,[["render",Ce]]);var Ie=Le;function Se(e,t,s,a,i,n){return(0,l.uX)(),(0,l.CE)("div")}var xe={name:"Mplayer",mixins:[we],data(){return{iconClass:"fa fa-tv",name:"MPlayer",pluginName:"media.mplayer"}}};const $e=(0,N.A)(xe,[["render",Se]]);var Ne=$e;function _e(e,t,s,a,i,n){return(0,l.uX)(),(0,l.CE)("div")}var Ee={name:"Mpv",mixins:[we],data(){return{iconClass:"fa fa-tv",name:"mpv",pluginName:"media.mpv"}}};const Me=(0,N.A)(Ee,[["render",_e]]);var Xe=Me;function Te(e,t,s,a,i,n){return(0,l.uX)(),(0,l.CE)("div")}var Ae={mixins:[we],data(){return{iconClass:"fa fa-tv",name:"GStreamer",pluginName:"media.gstreamer"}}};const De=(0,N.A)(Ae,[["render",Te]]);var Fe=De;function Ve(e,t,s,a,i,n){return(0,l.uX)(),(0,l.CE)("div")}var Ue={name:"Vlc",mixins:[we],data(){return{iconClass:"fa fa-tv",name:"VLC",pluginName:"media.vlc"}}};const qe=(0,N.A)(Ue,[["render",Ve]]);var Re=qe,Qe={name:"Players",components:{Loading:Q.A,DropdownItem:pe.A,Dropdown:me.A,Chromecast:ke,Kodi:Ie,Mplayer:Ne,Mpv:Xe,GStreamer:Fe,Vlc:Re},emits:["select","status"],mixins:[f.A],props:{pluginName:{type:String,required:!0}},data(){return{loading:!1,players:[],selectedPlayer:null,config:{},plugins:[]}},methods:{loadPlugins(){this.plugins=Object.entries(this.$refs).filter((e=>e[0].endsWith("Plugin"))).map((e=>e[1]))},async refresh(){this.players=[],this.loading=!0;const e=this.$root.config;try{await Promise.all(this.plugins.map((async t=>{if(!(t.pluginName in e))return;const s=await t.getPlayers();if(this.players.push(...s),null==this.selectedPlayer&&t.pluginName===this.pluginName&&s.length>0){const e=this.getUrlArgs().player;let t=s[0];e?.length&&(t=s.find((t=>t.name===e)),t||(t=s[0])),this.select(t)}})))}finally{this.loading=!1}},select(e){this.selectedPlayer=e,this.$emit("select",e)}},async mounted(){await this.loadPlugins(),await this.refresh()}};const Oe=(0,N.A)(Qe,[["render",he]]);var We=Oe,je={name:"Header",components:{Players:We},mixins:[f.A],emits:["filter","filter-downloads","play-url","player-status","search","select-player","show-subtitles","source-toggle","toggle-nav","torrent-add"],props:{pluginName:{type:String,required:!0},selectedView:{type:String,required:!0},selectedSubtitles:{type:String},selectedItem:{type:Object},hasSubtitlesPlugin:{type:Boolean,default:!1},showNavButton:{type:Boolean},browserFilter:{type:String,default:""},sources:{type:Object,default:()=>{}}},data(){return{filterVisible:!1,query:"",torrentURL:"",downloadFilter:""}},computed:{enabledTypes(){return Object.keys(this.sources).filter((e=>this.sources[e]))}},methods:{search(){this.query?.length&&this.enabledTypes?.length&&this.$emit("search",{query:this.query,types:this.enabledTypes})}},mounted(){this.$nextTick((()=>{const e=this.getUrlArgs()?.q;e&&(this.query=e,this.$emit("search",{query:e,types:this.enabledTypes}))})),this.$watch((()=>this.selectedView),(()=>{this.$emit("filter",""),this.torrentURL="",this.query=""}))}};const Je=(0,N.A)(je,[["render",ne],["__scopeId","data-v-3e938a5b"]]);var Ye=Je,Be=s(7711);const Ke={key:1,class:"media-downloads fade-in"},ze={key:0,class:"no-content"},Ge={key:1,class:"no-content"},He={key:2,class:"items"},Ze=["onClick"],et={class:"col-8 left side"},tt=["textContent"],st={class:"col-2 right side"},lt=["textContent"],at={class:"col-2 right side"},it={key:0,class:"modal-body media-info"},nt={key:0,class:"row"},ot=["textContent"],rt={key:1,class:"row"},dt={class:"value"},ut=["href","textContent"],ct={key:2,class:"row"},ht={class:"value"},mt=["href","textContent"],pt={key:3,class:"row"},yt=["textContent"],ft={key:4,class:"row"},vt=["textContent"],wt={key:5,class:"row"},gt=["textContent"],bt={key:6,class:"row"},kt=["textContent"],Ct={key:7,class:"row"},Pt=["textContent"];function Lt(e,t,s,i,n,o){const r=(0,l.g2)("Loading"),d=(0,l.g2)("DropdownItem"),u=(0,l.g2)("Dropdown"),c=(0,l.g2)("Modal"),h=(0,l.g2)("ConfirmDialog");return n.loading?((0,l.uX)(),(0,l.Wv)(r,{key:0})):((0,l.uX)(),(0,l.CE)("div",Ke,[Object.keys(s.downloads).length?Object.keys(o.filteredDownloads).length?((0,l.uX)(),(0,l.CE)("div",He,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.filteredDownloads,((s,i)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["row item",{selected:n.selectedItem===i}]),key:i,onClick:e=>n.selectedItem=i},[(0,l.Lk)("div",et,[(0,l.Lk)("i",{class:(0,a.C4)(["icon fa",{"fa-check":"completed"===s.state.toLowerCase(),"fa-play":"downloading"===s.state.toLowerCase(),"fa-pause":"paused"===s.state.toLowerCase(),"fa-times":"cancelled"===s.state.toLowerCase(),"fa-stop":"idle"===s.state.toLowerCase(),"fa-hourglass-half":"started"===s.state.toLowerCase()}])},null,2),(0,l.Lk)("div",{class:"title",textContent:(0,a.v_)(s.path||s.url)},null,8,tt)]),(0,l.Lk)("div",st,[(0,l.Lk)("span",{textContent:(0,a.v_)(o.displayProgress[i])},null,8,lt)]),(0,l.Lk)("div",at,[(0,l.bF)(u,{title:"Actions","icon-class":"fa fa-ellipsis-h",onClick:e=>n.selectedItem=i},{default:(0,l.k6)((()=>["completed"===s.state.toLowerCase()?((0,l.uX)(),(0,l.Wv)(d,{key:0,"icon-class":"fa fa-play",text:"Play",onInput:t=>e.$emit("play",{url:`file:///${s.path}`})},null,8,["onInput"])):(0,l.Q3)("",!0),"downloading"===s.state.toLowerCase()||"started"===s.state.toLowerCase()?((0,l.uX)(),(0,l.Wv)(d,{key:1,"icon-class":"fa fa-pause",text:"Pause download",onInput:e=>o.pause(s)},null,8,["onInput"])):(0,l.Q3)("",!0),"paused"===s.state.toLowerCase()?((0,l.uX)(),(0,l.Wv)(d,{key:2,"icon-class":"fa fa-rotate-left",text:"Resume download",onInput:e=>o.resume(s)},null,8,["onInput"])):(0,l.Q3)("",!0),"completed"===s.state.toLowerCase()?((0,l.uX)(),(0,l.Wv)(d,{key:3,"icon-class":"fa fa-eraser",text:"Clear from queue",onInput:e=>o.clear(s)},null,8,["onInput"])):(0,l.Q3)("",!0),"completed"!==s.state.toLowerCase()&&"cancelled"!==s.state.toLowerCase()?((0,l.uX)(),(0,l.Wv)(d,{key:4,"icon-class":"fa fa-stop",text:"Cancel",onInput:e=>o.cancel(s)},null,8,["onInput"])):(0,l.Q3)("",!0),"completed"===s.state.toLowerCase()||"cancelled"===s.state.toLowerCase()?((0,l.uX)(),(0,l.Wv)(d,{key:5,"icon-class":"fa fa-trash",text:"Remove file",onInput:e=>o.onDeleteSelected(s)},null,8,["onInput"])):(0,l.Q3)("",!0),(0,l.bF)(d,{"icon-class":"fa fa-info",text:"Media info",onInput:t[0]||(t[0]=t=>e.$refs.mediaInfo.isVisible=!0)})])),_:2},1032,["onClick"])])],10,Ze)))),128))])):((0,l.uX)(),(0,l.CE)("div",Ge,"No media downloads match the filter")):((0,l.uX)(),(0,l.CE)("div",ze,"No media downloads in progress")),(0,l.bF)(c,{ref:"mediaInfo",title:"Media info",width:"80%"},{default:(0,l.k6)((()=>[null!=n.selectedItem&&s.downloads[n.selectedItem]?((0,l.uX)(),(0,l.CE)("div",it,[s.downloads[n.selectedItem].name?((0,l.uX)(),(0,l.CE)("div",nt,[t[2]||(t[2]=(0,l.Lk)("div",{class:"attr"},"Path",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(s.downloads[n.selectedItem].path)},null,8,ot)])):(0,l.Q3)("",!0),s.downloads[n.selectedItem].url?((0,l.uX)(),(0,l.CE)("div",rt,[t[3]||(t[3]=(0,l.Lk)("div",{class:"attr"},"Remote URL",-1)),(0,l.Lk)("div",dt,[(0,l.Lk)("a",{href:s.downloads[n.selectedItem].url,target:"_blank",textContent:(0,a.v_)(s.downloads[n.selectedItem].url)},null,8,ut)])])):(0,l.Q3)("",!0),s.downloads[n.selectedItem].path?((0,l.uX)(),(0,l.CE)("div",ct,[t[4]||(t[4]=(0,l.Lk)("div",{class:"attr"},"Local URL",-1)),(0,l.Lk)("div",ht,[(0,l.Lk)("a",{href:o.localURL(s.downloads[n.selectedItem]),target:"_blank",textContent:(0,a.v_)(s.downloads[n.selectedItem].path)},null,8,mt)])])):(0,l.Q3)("",!0),s.downloads[n.selectedItem].state?((0,l.uX)(),(0,l.CE)("div",pt,[t[5]||(t[5]=(0,l.Lk)("div",{class:"attr"},"State",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(s.downloads[n.selectedItem].state)},null,8,yt)])):(0,l.Q3)("",!0),null!=s.downloads[n.selectedItem].progress?((0,l.uX)(),(0,l.CE)("div",ft,[t[6]||(t[6]=(0,l.Lk)("div",{class:"attr"},"Progress",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(o.displayProgress[n.selectedItem])},null,8,vt)])):(0,l.Q3)("",!0),null!=s.downloads[n.selectedItem].size?((0,l.uX)(),(0,l.CE)("div",wt,[t[7]||(t[7]=(0,l.Lk)("div",{class:"attr"},"Size",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(e.convertSize(s.downloads[n.selectedItem].size))},null,8,gt)])):(0,l.Q3)("",!0),s.downloads[n.selectedItem].started_at?((0,l.uX)(),(0,l.CE)("div",bt,[t[8]||(t[8]=(0,l.Lk)("div",{class:"attr"},"Started",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(e.formatDateTime(s.downloads[n.selectedItem].started_at))},null,8,kt)])):(0,l.Q3)("",!0),s.downloads[n.selectedItem].ended_at?((0,l.uX)(),(0,l.CE)("div",Ct,[t[9]||(t[9]=(0,l.Lk)("div",{class:"attr"},"Ended",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(e.formatDateTime(s.downloads[n.selectedItem].ended_at))},null,8,Pt)])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])),_:1},512),(0,l.bF)(h,{ref:"deleteConfirmDialog",title:"Delete file",onInput:o.rm,onClose:t[1]||(t[1]=e=>n.mediaToDelete=null)},{default:(0,l.k6)((()=>t[10]||(t[10]=[(0,l.eW)(" Are you sure you want to delete the downloaded file? ")]))),_:1},8,["onInput"])]))}var It=s(3538),St={mixins:[f.A,O.A],emits:["play","refresh"],components:{ConfirmDialog:It.A,Dropdown:me.A,DropdownItem:pe.A,Loading:Q.A,Modal:y.A},props:{downloads:{type:Object,default:()=>({})},pluginName:{type:String,required:!0},filter:{type:String,default:""}},data(){return{loading:!1,selectedItem:null,mediaToDelete:null}},computed:{relativeFiles(){return null!=this.selectedItem&&this.downloads[this.selectedItem]?.files?.length?this.downloads[this.selectedItem].files.map((e=>e.split("/").pop())):[]},displayProgress(){return Object.values(this.downloads).reduce(((e,t)=>{let s=this.round(t.progress,2),l=null!=s?`${s}%`:"N/A";return"completed"===t.state.toLowerCase()&&(l="100%"),e[t.path]=l,e}),{})},filteredDownloads(){const e=(this.filter||"").trim().toLowerCase();let t=Object.values(this.downloads);return e?.length&&(t=t.filter((t=>t.path.toLowerCase().includes(e)||t.url.toLowerCase().includes(e)))),t.reduce(((e,t)=>(e[t.path]=t,e)),{})}},methods:{async run(e,t){this.loading=!0;try{await this.request(`${this.pluginName}.${e}`,{path:t.path})}finally{this.loading=!1}},async pause(e){await this.run("pause_download",e)},async resume(e){await this.run("resume_download",e)},async clear(e){await this.run("clear_downloads",e),this.downloads[e.path]&&delete this.downloads[e.path]},async cancel(e){await this.run("cancel_download",e)},async rm(){const e=this.mediaToDelete;if(e)try{await this.request("file.unlink",{file:e.path})}finally{await this.clear(e)}},localURL(e){return`${window.location.origin}/file?path=${encodeURIComponent(e.path)}`},onDeleteSelected(e){this.mediaToDelete=e,this.$refs.deleteConfirmDialog.show()}}};const xt=(0,N.A)(St,[["render",Lt],["__scopeId","data-v-e857a488"]]);var $t=xt,Nt=s(8654);const _t=["title","onClick"];function Et(e,t,s,i,n,o){return(0,l.uX)(),(0,l.CE)("nav",null,[(0,l.Lk)("button",{class:"menu-button mobile",onClick:t[0]||(t[0]=t=>e.$emit("toggle"))},t[1]||(t[1]=[(0,l.Lk)("i",{class:"fa fa-bars"},null,-1)])),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.displayedViews,((e,t)=>((0,l.uX)(),(0,l.CE)("li",{key:t,title:e.displayName,class:(0,a.C4)({selected:t===s.selectedView,...o.customClasses[t]}),onClick:e=>o.input(t)},[(0,l.Lk)("i",{class:(0,a.C4)(e.iconClass)},null,2)],10,_t)))),128))])}var Mt={mixins:[f.A],emits:["input","toggle"],props:{selectedView:{type:String},collapsed:{type:Boolean,default:!1},torrentPlugin:{type:String},downloadIconClass:{type:String},views:{type:Object,default:()=>({search:{iconClass:"fa fa-search",displayName:"Search"},browser:{iconClass:"fa fa-folder",displayName:"Browser"},downloads:{iconClass:"fa fa-download",displayName:"Downloads"},torrents:{iconClass:"fa fa-magnet",displayName:"Torrents"}})}},computed:{displayedViews(){const e={...this.views};return this.torrentPlugin?.length||delete e.torrents,e},customClasses(){return{downloads:this.downloadIconClass.split(" ").reduce(((e,t)=>(e[t]=!0,e)),{})}}},methods:{input(e){this.$emit("input",e),this.setUrlArgs({view:e})}}};const Xt=(0,N.A)(Mt,[["render",Et],["__scopeId","data-v-c67b72b8"]]);var Tt=Xt;const At={class:"playlist-adder-container"},Dt={class:"playlists-container"},Ft={class:"header"},Vt={class:"filter"},Ut={class:"playlist new-playlist"},qt={class:"playlists"},Rt=["onClick"];function Qt(e,t,s,i,n,o){const r=(0,l.g2)("Loading"),d=(0,l.g2)("TextPrompt");return(0,l.uX)(),(0,l.CE)("div",At,[n.loading?((0,l.uX)(),(0,l.Wv)(r,{key:0})):(0,l.Q3)("",!0),(0,l.bF)(d,{ref:"newPlaylistName",visible:n.showNewPlaylist,onInput:t[0]||(t[0]=e=>o.createPlaylist(e))},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)(" Playlist name ")]))),_:1},8,["visible"]),(0,l.Lk)("div",Dt,[(0,l.Lk)("div",Ft,[(0,l.Lk)("div",Vt,[(0,l.Lk)("input",{type:"text",placeholder:"Filter playlists",ref:"playlistFilter",onInput:t[1]||(t[1]=e=>n.filter=e.target.value)},null,544)]),(0,l.Lk)("div",Ut,[(0,l.Lk)("button",{onClick:t[2]||(t[2]=e=>n.showNewPlaylist=!0)},t[4]||(t[4]=[(0,l.Lk)("i",{class:"fa fa-plus"},null,-1),(0,l.eW)(" Create new playlist ")]))])]),(0,l.Lk)("div",qt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.sortedPlaylists,(e=>((0,l.uX)(),(0,l.CE)("div",{class:"playlist",key:e.id},[(0,l.Lk)("button",{onClick:t=>o.addToPlaylist(e.id)},[t[5]||(t[5]=(0,l.Lk)("i",{class:"fa fa-list"},null,-1)),(0,l.eW)(" "+(0,a.v_)(e.name),1)],8,Rt)])))),128))])])])}var Ot=s(710),Wt={emits:["done"],mixins:[f.A],components:{Loading:Q.A,TextPrompt:Ot.A},props:{item:{type:Object,required:!0}},data(){return{filter:"",loading:!1,playlists:[],showNewPlaylist:!1}},computed:{pluginName(){switch(this.item.type){case"youtube":return"youtube";case"jellyfin":return"media.jellyfin";default:return null}},sortedPlaylists(){return this.playlists.filter((e=>e.name.toLowerCase().includes(this.filter.toLowerCase()))).sort(((e,t)=>e.name.localeCompare(t.name)))}},methods:{checkPlugin(){return!!this.pluginName||(this.notify({title:"Unsupported item type",text:`Item type ${this.item.type} does not support playlists`,warning:!0,image:{icon:"exclamation-triangle"}}),console.warn(`Unsupported item type: ${this.item.type}`),!1)},async createPlaylist(e){if(e=e?.trim(),e?.length){this.loading=!0;try{const t=await this.request(`${this.pluginName}.create_playlist`,{name:e});await this.addToPlaylist(t.id)}finally{this.loading=!1,this.showNewPlaylist=!1}}},async refreshPlaylists(){if(this.checkPlugin()){this.loading=!0;try{this.playlists=await this.request(`${this.pluginName}.get_playlists`)}finally{this.loading=!1}}},async addToPlaylist(e){if(this.checkPlugin()){this.loading=!0;try{await this.request(`${this.pluginName}.add_to_playlist`,{playlist_id:e,item_ids:[this.item.id||this.item.url]}),this.notify({text:"Item added to playlist",image:{icon:"check"}}),this.$emit("done")}finally{this.loading=!1}}}},watch:{loading(){this.loading||this.$nextTick((()=>this.$refs.playlistFilter.focus()))}},mounted(){this.refreshPlaylists()}};const jt=(0,N.A)(Wt,[["render",Qt],["__scopeId","data-v-49fb53a1"]]);var Jt=jt,Yt=s(3149);const Bt={class:"subtitles-container"},Kt={class:"items"},zt=["onClick"],Gt={class:"col-1 icon"},Ht={key:0,class:"fa fa-file"},Zt={key:2,class:"fa fa-closed-captioning"},es={class:"footer"};function ts(e,t,s,i,n,o){const r=(0,l.g2)("Loading");return(0,l.uX)(),(0,l.CE)("div",Bt,[(0,l.Lk)("div",Kt,[n.loading?((0,l.uX)(),(0,l.Wv)(r,{key:0})):(0,l.Q3)("",!0),(0,l.Lk)("div",{class:(0,a.C4)(["row item",{selected:null==n.selectedItem}]),onClick:t[0]||(t[0]=e=>n.selectedItem=null)},t[2]||(t[2]=[(0,l.Lk)("div",{class:"col-1 icon"},[(0,l.Lk)("i",{class:"fa fa-ban"})],-1),(0,l.Lk)("div",{class:"col-11 title"},"None",-1)]),2),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.items,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["row item",{selected:n.selectedItem===t}]),key:t,onClick:e=>n.selectedItem=t},[(0,l.Lk)("div",Gt,[e.IsLocal?((0,l.uX)(),(0,l.CE)("i",Ht)):e.ISO639?((0,l.uX)(),(0,l.CE)("i",{key:1,class:(0,a.C4)(["flag-icon",`flag-icon-${e.ISO639}`])},null,2)):((0,l.uX)(),(0,l.CE)("i",Zt))]),(0,l.eW)(" "+(0,a.v_)(e.SubFileName),1)],10,zt)))),128))]),(0,l.Lk)("div",es,[(0,l.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("select-subs",null==n.selectedItem?null:n.items[n.selectedItem]))},"Select")])])}var ss={name:"Subtitles",mixins:[f.A],components:{Loading:Q.A},emits:["select-subs"],props:{item:{type:Object,default:()=>{}}},data(){return{loading:!1,items:[],selectedItem:null}},methods:{async refresh(){this.loading=!0;try{this.items=await this.request("media.subtitles.search",{resource:this.item.url,language:"all"})}finally{this.loading=!1}}},mounted(){this.refresh()}};const ls=(0,N.A)(ss,[["render",ts],["__scopeId","data-v-77ae3705"]]);var as=ls,is=s(7388);const ns={class:"row"},os={class:"row footer"},rs=["disabled"];function ds(e,t,s,a,i,n){return(0,l.uX)(),(0,l.CE)("form",{class:"url-player",onSubmit:t[1]||(t[1]=(0,Y.D$)((t=>e.$emit("play",i.value)),["prevent"]))},[(0,l.Lk)("div",ns,[(0,l.Lk)("label",null,[t[2]||(t[2]=(0,l.eW)(" Play URL (use the file:// prefix for local files) ")),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),ref:"playUrlInput",autofocus:""},null,512),[[Y.Jo,i.value]])])]),(0,l.Lk)("div",os,[(0,l.Lk)("button",{type:"submit",disabled:!i.value?.length},t[3]||(t[3]=[(0,l.Lk)("i",{class:"fa fa-play"},null,-1),(0,l.eW)(" Play ")]),8,rs)])],32)}var us={emits:["input","play"],props:{playUrl:{type:String,default:""}},data(){return{value:this.playUrl}}};const cs=(0,N.A)(us,[["render",ds],["__scopeId","data-v-6f90e487"]]);var hs=cs,ms={name:"Media",mixins:[f.A,O.A],components:{Browser:E,EmbedPlayer:J,Header:Ye,Info:Be.A,Loading:Q.A,MediaDownloads:$t,MediaView:Nt.A,Modal:y.A,Nav:Tt,PlaylistAdder:Jt,Results:Yt.A,Subtitles:as,TorrentTransfers:is.A,UrlPlayer:hs},props:{pluginName:{type:String,required:!0},mediaButtons:{type:Object,default:()=>({previous:!1,next:!1,stop:!0})}},data(){return{addToPlaylistItem:null,awaitingPlayTorrent:null,browserFilter:null,downloads:{},downloadsFilter:null,forceShowNav:!1,infoTrack:null,loading:!1,opening:!1,prevSelectedView:null,results:[],selectedPlayer:null,selectedResult:null,selectedSubtitles:null,selectedView:"search",showSubtitlesModal:!1,sources:{file:!0,youtube:!0,torrent:!0},urlPlay:null,viewItem:null,torrentPlugin:null,torrentPlugins:["torrent","rtorrent"]}},computed:{hasSubtitlesPlugin(){return"media.subtitles"in this.$root.config},navContainerStyle(){return this.forceShowNav?{display:"flex !important"}:{}},selectedItem(){return this.selectedPlayer&&this.selectedPlayer.status&&("play"===this.selectedPlayer.status.state||"pause"===this.selectedPlayer.status.state)?this.selectedPlayer.status:this.results[this.selectedResult]},selectedPlaylist(){if(null==this.selectedResult)return null;const e=this.results[this.selectedResult];return"playlist"!==e?.item_type?null:this.results[this.selectedResult]},selectedChannel(){if(null==this.selectedResult)return null;const e=this.results[this.selectedResult];return"channel"!==e?.item_type?null:this.results[this.selectedResult]},hasPendingDownloads(){return Object.values(this.downloads).some((e=>!["completed","cancelled"].includes(e.state.toLowerCase())))},allDownloadsCompleted(){return Object.values(this.downloads).length&&Object.values(this.downloads).every((e=>["completed","cancelled"].includes(e.state.toLowerCase())))},downloadIconClass(){return this.hasPendingDownloads?"glow loop":this.allDownloadsCompleted?"completed":""}},methods:{async search(e){this.loading=!0,this.setUrlArgs({q:e.query});try{this.results=await this.request(`${this.pluginName}.search`,e)}finally{this.loading=!1}},async play(e,t){if("torrent"===e?.type)return this.awaitingPlayTorrent=e.url,this.notify({text:"Torrent queued for download",image:{iconClass:"fa fa-magnet"}}),void await this.download(e);this.opening=!0;try{this.selectedPlayer.component.supports(e)||(e=await this.startStreaming(e,this.pluginName)),await this.selectedPlayer.component.play(e,this.selectedSubtitles,this.selectedPlayer,t),await this.refresh(e)}finally{this.opening=!1}},async pause(){await this.selectedPlayer.component.pause(this.selectedPlayer),await this.refresh()},async stop(){await this.selectedPlayer.component.stop(this.selectedPlayer),await this.refresh()},async setVolume(e){await this.selectedPlayer.component.setVolume(e,this.selectedPlayer),await this.refresh()},async toggleMute(){await this.selectedPlayer.component.toggleMute(this.selectedPlayer),await this.refresh()},async seek(e){await this.selectedPlayer.component.seek(e,this.selectedPlayer),await this.refresh()},async view(e){this.viewItem=e},async download(e,t){switch(e.type){case"torrent":return await this.downloadTorrent(e,t);case"youtube":return await this.downloadYoutube(e,t);case"jellyfin":return await this.downloadUrl(e.url)}},async downloadAudio(e){await this.download(e,{onlyAudio:!0})},async refresh(e){let t={...await this.selectedPlayer.component.status(this.selectedPlayer),...e||{}};this.setStatus(t)},setStatus(e){const t=this.selectedPlayer?.status||{};let s={};s=t.resource===e.resource?{...t,...e}:e,this.selectedPlayer.status=s},onStatusUpdate(e){this.selectedPlayer&&this.setStatus(e)},onPlayUrlModalOpen(){const e=this.$refs.playUrlModal;this.urlPlay="",e.$nextTick((()=>{const t=e.$el.querySelector("input[type=text]");t&&(t.focus(),t.select())}))},onTorrentQueued(e){this.notify({title:"Torrent queued for download",text:e.name,image:{iconClass:"fa fa-magnet"}})},onTorrentMetadata(e){this.notify({title:"Torrent metadata downloaded",text:e.name,image:{iconClass:"fa fa-info"}})},onTorrentDownloadStart(e){this.notify({title:"Torrent download started",text:e.name,image:{iconClass:"fa fa-download"}})},onTorrentDownloadCompleted(e){this.notify({title:"Torrent download completed",text:e.name,image:{iconClass:"fa fa-check"}})},getTorrentPlugin(){const e=this.$root.config[this.pluginName]||{};let t=e.torrent_plugin;if(!t)for(let s of this.torrentPlugins)if(s in this.$root.config){t=s;break}return t},async downloadTorrent(e){const t=this.getTorrentPlugin();if(t){if(e?.url)return await this.request(`${t}.download`,{torrent:e.url||e});this.notify({text:"No torrent URL available",error:!0})}else this.notify({text:"No torrent plugins configured",error:!0})},async downloadYoutube(e,t){if(!e?.url)return void this.notify({text:"No YouTube URL available",error:!0});const s={url:e.url},l=!!t?.onlyAudio;l&&(s.only_audio=!0),await this.request(`${this.pluginName}.download`,s)},async selectSubtitles(e){if(this.$refs.subtitlesSelector.close(),!e)return void(this.selectedSubtitles=null);this.notify({text:"Downloading subtitles track",image:{iconClass:"fa fa-download"}});const t=await this.request("media.subtitles.download",{link:e.SubDownloadLink});this.selectedSubtitles=t.filename,this.notify({text:"Subtitles track downloaded",image:{iconClass:"fa fa-check"}})},onResultSelect(e){null==this.selectedResult||this.selectedResult!==e?(this.selectedResult=e,this.selectedSubtitles=null):this.selectedResult=null;const t=this.results[this.selectedResult];null==this.selectedResult||"playlist"!==t?.item_type&&"channel"!==t?.item_type?this.selectedView=this.prevSelectedView||"search":this.onBrowserItemSelect()},onBrowserItemSelect(){this.prevSelectedView!=this.selectedView&&(this.prevSelectedView=this.selectedView),this.selectedView="browser"},showPlayUrlModal(){this.$refs.playUrlModal.show()},async playUrl(e){this.urlPlay=e,await this.play({url:e})},async refreshDownloads(){this.downloads=(await this.request(`${this.pluginName}.get_downloads`)).reduce(((e,t)=>(e[t.path]=t,e)),{})},setView(e){this.selectedView=e,"search"===e&&(this.selectedResult=null)},updateView(){const e=this.getUrlArgs();e.view&&(this.selectedView=e.view),e.player&&this.players?.length&&(this.selectedPlayer=this.players.find((t=>t.name===e.player))),e.subtitles&&(this.selectedSubtitles=e.subtitles)},onDownloadStarted(e){this.downloads[e.path]=e,this.notify({title:"Media download started",html:`Saving <b>${e.resource}</b> to <b>${e.path}</b>`,image:{iconClass:"fa fa-download"}})},onDownloadCompleted(e){this.downloads[e.path]=e,this.downloads[e.path].progress=100,this.notify({title:"Media download completed",html:`Saved <b>${e.resource}</b> to <b>${e.path}</b>`,image:{iconClass:"fa fa-check"}})},onDownloadError(e){this.downloads[e.path]=e,this.notify({title:"Media download error",html:`Error downloading ${e.resource}: <b>${e.error}</b>`,error:!0,image:{iconClass:"fa fa-exclamation-triangle"}})},onDownloadCancelled(e){this.downloads[e.path]=e,this.notify({title:"Media download cancelled",html:`Cancelled download of <b>${e.resource}</b>`,image:{iconClass:"fa fa-times"}})},onDownloadPaused(e){this.downloads[e.path]=e,this.notify({title:"Media download paused",html:`Paused download of <b>${e.resource}</b>`,image:{iconClass:"fa fa-pause"}})},onDownloadResumed(e){this.downloads[e.path]=e,this.notify({title:"Media download resumed",html:`Resumed download of <b>${e.resource}</b>`,image:{iconClass:"fa fa-play"}})},onDownloadProgress(e){this.downloads[e.path]=e},onDownloadClear(e){e.path in this.downloads&&delete this.downloads[e.path]},selectChannelFromItem(e){const t=e?.type,s=e?.channel_id||e?.channel?.id||e?.channel_url.split("/").pop();(t||null!=s)&&(this.setUrlArgs({provider:t,section:"subscriptions",channel:s}),this.selectedView="browser")}},watch:{selectedPlayer(e){this.setUrlArgs({player:e?.name}),e&&this.refresh()},selectedSubtitles(e){this.setUrlArgs({subtitles:this.selectedSubtitles}),new Set(["play","pause"]).has(this.selectedPlayer?.status?.state)&&(e?this.selectedPlayer.component.addSubtitles(e):this.selectedPlayer.component.removeSubtitles())},selectedView(){this.setUrlArgs({view:this.selectedView})}},async mounted(){this.torrentPlugin=this.getTorrentPlugin(),this.subscribe(this.onTorrentQueued,"on-torrent-queued","platypush.message.event.torrent.TorrentQueuedEvent"),this.subscribe(this.onTorrentMetadata,"on-torrent-metadata","platypush.message.event.torrent.TorrentDownloadedMetadataEvent"),this.subscribe(this.onTorrentDownloadStart,"on-torrent-download-start","platypush.message.event.torrent.TorrentDownloadStartEvent"),this.subscribe(this.onTorrentDownloadCompleted,"on-torrent-download-completed","platypush.message.event.torrent.TorrentDownloadCompletedEvent"),this.subscribe(this.onDownloadStarted,"on-download-started","platypush.message.event.media.MediaDownloadStartedEvent"),this.subscribe(this.onDownloadCompleted,"on-download-completed","platypush.message.event.media.MediaDownloadCompletedEvent"),this.subscribe(this.onDownloadError,"on-download-error","platypush.message.event.media.MediaDownloadErrorEvent"),this.subscribe(this.onDownloadCancelled,"on-download-cancelled","platypush.message.event.media.MediaDownloadCancelledEvent"),this.subscribe(this.onDownloadPaused,"on-download-paused","platypush.message.event.media.MediaDownloadPausedEvent"),this.subscribe(this.onDownloadResumed,"on-download-resumed","platypush.message.event.media.MediaDownloadResumedEvent"),this.subscribe(this.onDownloadProgress,"on-download-progress","platypush.message.event.media.MediaDownloadProgressEvent"),this.subscribe(this.onDownloadClear,"on-download-clear","platypush.message.event.media.MediaDownloadClearEvent"),"media.plex"in this.$root.config&&(this.sources.plex=!0),"media.jellyfin"in this.$root.config&&(this.sources.jellyfin=!0),await this.refreshDownloads(),this.updateView()},destroy(){this.unsubscribe("on-torrent-queued"),this.unsubscribe("on-torrent-metadata"),this.unsubscribe("on-torrent-download-start"),this.unsubscribe("on-torrent-download-completed"),this.unsubscribe("on-download-started"),this.unsubscribe("on-download-completed"),this.unsubscribe("on-download-error"),this.unsubscribe("on-download-cancelled"),this.unsubscribe("on-download-paused"),this.unsubscribe("on-download-resumed"),this.unsubscribe("on-download-progress"),this.unsubscribe("on-download-clear")}};const ps=(0,N.A)(ms,[["render",p],["__scopeId","data-v-2b0f5bde"]]);var ys=ps},7388:function(e,t,s){"use strict";s.d(t,{A:function(){return se}});var l=s(641),a=s(33);const i={key:1,class:"torrent-transfers fade-in"},n={key:0,class:"no-content"},o=["onClick"],r={class:"col-8 left side"},d=["textContent"],u={class:"col-2 right side"},c=["textContent"],h={class:"col-2 right side"},m={key:0,class:"modal-body torrent-info"},p={key:0,class:"row"},y=["textContent"],f={key:1,class:"row"},v=["textContent"],w={class:"row"},g=["textContent"],b={class:"row"},k=["textContent"],C={class:"row"},P=["textContent"],L={class:"row"},I=["textContent"],S={key:2,class:"row"},x=["textContent"],$={class:"row"},N={class:"value nowrap"},_=["href","textContent"],E={class:"row"},M=["textContent"],X={key:3,class:"row"},T=["textContent"],A={key:4,class:"row"},D=["textContent"],F={key:5,class:"row"},V=["textContent"],U={key:6,class:"row"},q={class:"value files-container"},R=["href","textContent"],Q={key:0,class:"modal-body torrent-files"},O={class:"col-1 icon"},W={key:1,class:"fa fa-file"},j=["textContent"];function J(e,t,s,J,Y,B){const K=(0,l.g2)("Loading"),z=(0,l.g2)("DropdownItem"),G=(0,l.g2)("Dropdown"),H=(0,l.g2)("Modal");return Y.loading?((0,l.uX)(),(0,l.Wv)(K,{key:0})):((0,l.uX)(),(0,l.CE)("div",i,[Object.keys(s.transfers).length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",n,"No torrent transfers in progress")),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.transfers,((s,i)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["row item",{selected:Y.selectedItem===i}]),key:i,onClick:e=>Y.selectedItem=i},[(0,l.Lk)("div",r,[(0,l.Lk)("i",{class:(0,a.C4)(["icon fa",{"fa-check":null!=s.finish_date,"fa-play":!s.finish_date&&"downloading"===s.state&&!s.paused,"fa-pause":!s.finish_date&&"downloading"===s.state&&s.paused,"fa-stop":!s.finish_date&&"stopped"===s.state}])},null,2),(0,l.Lk)("div",{class:"title",textContent:(0,a.v_)(s.name||s.hash||s.url)},null,8,d)]),(0,l.Lk)("div",u,[(0,l.Lk)("span",{textContent:(0,a.v_)(`${s.progress}%`)},null,8,c)]),(0,l.Lk)("div",h,[(0,l.bF)(G,{title:"Actions","icon-class":"fa fa-ellipsis-h",onClick:e=>Y.selectedItem=i},{default:(0,l.k6)((()=>["downloading"!==s.state||s.paused?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(z,{key:0,"icon-class":"fa fa-pause",text:"Pause transfer",onInput:t=>e.$emit("pause",s)},null,8,["onInput"])),"downloading"===s.state&&s.paused?((0,l.uX)(),(0,l.Wv)(z,{key:1,"icon-class":"fa fa-play",text:"Resume transfer",onInput:t=>e.$emit("resume",s)},null,8,["onInput"])):(0,l.Q3)("",!0),(0,l.bF)(z,{"icon-class":"fa fa-trash",text:"Remove transfer",onInput:t=>e.$emit("remove",s)},null,8,["onInput"]),(0,l.bF)(z,{"icon-class":"fa fa-folder",text:"View files",onInput:t[0]||(t[0]=t=>e.$refs.torrentFiles.isVisible=!0)}),(0,l.bF)(z,{"icon-class":"fa fa-info",text:"Torrent info",onInput:t[1]||(t[1]=t=>e.$refs.torrentInfo.isVisible=!0)})])),_:2},1032,["onClick"])])],10,o)))),128)),(0,l.bF)(H,{ref:"torrentInfo",title:"Torrent info",width:"80%"},{default:(0,l.k6)((()=>[null!=Y.selectedItem&&s.transfers[Y.selectedItem]?((0,l.uX)(),(0,l.CE)("div",m,[s.transfers[Y.selectedItem].name?((0,l.uX)(),(0,l.CE)("div",p,[t[2]||(t[2]=(0,l.Lk)("div",{class:"attr"},"Name",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(s.transfers[Y.selectedItem].name)},null,8,y)])):(0,l.Q3)("",!0),s.transfers[Y.selectedItem].state?((0,l.uX)(),(0,l.CE)("div",f,[t[3]||(t[3]=(0,l.Lk)("div",{class:"attr"},"State",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(s.transfers[Y.selectedItem].state)},null,8,v)])):(0,l.Q3)("",!0),(0,l.Lk)("div",w,[t[4]||(t[4]=(0,l.Lk)("div",{class:"attr"},"Progress",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(`${s.transfers[Y.selectedItem].progress||0}%`)},null,8,g)]),(0,l.Lk)("div",b,[t[5]||(t[5]=(0,l.Lk)("div",{class:"attr"},"DL rate",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(`${e.convertSize(s.transfers[Y.selectedItem].download_rate||0)}/s`)},null,8,k)]),(0,l.Lk)("div",C,[t[6]||(t[6]=(0,l.Lk)("div",{class:"attr"},"UL rate",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(`${e.convertSize(s.transfers[Y.selectedItem].upload_rate||0)}/s`)},null,8,P)]),(0,l.Lk)("div",L,[t[7]||(t[7]=(0,l.Lk)("div",{class:"attr"},"Size",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(e.convertSize(s.transfers[Y.selectedItem].size||0))},null,8,I)]),s.transfers[Y.selectedItem].remaining_bytes?((0,l.uX)(),(0,l.CE)("div",S,[t[8]||(t[8]=(0,l.Lk)("div",{class:"attr"},"Remaining",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(e.convertSize(s.transfers[Y.selectedItem].remaining_bytes))},null,8,x)])):(0,l.Q3)("",!0),(0,l.Lk)("div",$,[t[9]||(t[9]=(0,l.Lk)("div",{class:"attr"},"URL",-1)),(0,l.Lk)("div",N,[(0,l.Lk)("a",{href:s.transfers[Y.selectedItem].url,target:"_blank",textContent:(0,a.v_)(s.transfers[Y.selectedItem].url)},null,8,_)])]),(0,l.Lk)("div",E,[t[10]||(t[10]=(0,l.Lk)("div",{class:"attr"},"Peers",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(s.transfers[Y.selectedItem].peers||0)},null,8,M)]),s.transfers[Y.selectedItem].start_date?((0,l.uX)(),(0,l.CE)("div",X,[t[11]||(t[11]=(0,l.Lk)("div",{class:"attr"},"Started",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(e.formatDateTime(s.transfers[Y.selectedItem].start_date))},null,8,T)])):(0,l.Q3)("",!0),s.transfers[Y.selectedItem].finish_date?((0,l.uX)(),(0,l.CE)("div",A,[t[12]||(t[12]=(0,l.Lk)("div",{class:"attr"},"Finished",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(e.formatDateTime(s.transfers[Y.selectedItem].finish_date))},null,8,D)])):(0,l.Q3)("",!0),s.transfers[Y.selectedItem].save_path?((0,l.uX)(),(0,l.CE)("div",F,[t[13]||(t[13]=(0,l.Lk)("div",{class:"attr"},"Save path",-1)),(0,l.Lk)("div",{class:"value",textContent:(0,a.v_)(s.transfers[Y.selectedItem].save_path)},null,8,V)])):(0,l.Q3)("",!0),s.transfers[Y.selectedItem].files?((0,l.uX)(),(0,l.CE)("div",U,[t[14]||(t[14]=(0,l.Lk)("div",{class:"attr"},"Files",-1)),(0,l.Lk)("div",q,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.transfers[Y.selectedItem].files,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{class:"file",key:t},[(0,l.Lk)("a",{href:`/file?path=${encodeURIComponent(e)}`,target:"_blank",textContent:(0,a.v_)(e)},null,8,R)])))),128))])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])),_:1},512),(0,l.bF)(H,{ref:"torrentFiles",title:"Torrent files",width:"80%"},{default:(0,l.k6)((()=>[null!=Y.selectedItem&&s.transfers[Y.selectedItem]?((0,l.uX)(),(0,l.CE)("div",Q,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(B.relativeFiles,((t,i)=>((0,l.uX)(),(0,l.CE)("div",{class:"row",key:t},[(0,l.Lk)("div",O,[s.isMedia&&e.mediaExtensions.has(t.split(".").pop())?((0,l.uX)(),(0,l.Wv)(G,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)(z,{"icon-class":"fa fa-play",text:"Play",onInput:t=>e.$emit("play",{url:`file://${s.transfers[Y.selectedItem].files[i]}`,type:"file"})},null,8,["onInput"])])),_:2},1024)):((0,l.uX)(),(0,l.CE)("i",W))]),(0,l.Lk)("div",{class:"col-11 name",textContent:(0,a.v_)(t)},null,8,j)])))),128))])):(0,l.Q3)("",!0)])),_:1},512)]))}var Y=s(9828),B=s(2002),K=s(226),z=s(9513),G=s(9265),H=s(9612),Z={emits:["pause","play","play-with-captions","refresh","remove","resume"],components:{Dropdown:G.A,DropdownItem:H.A,Loading:Y.A,Modal:z.A},mixins:[B.A,K.A],props:{isMedia:{type:Boolean,default:!1},transfers:{type:Object,default:()=>({})}},data(){return{loading:!1,selectedItem:null}},computed:{relativeFiles(){return null!=this.selectedItem&&this.transfers[this.selectedItem]?.files?.length?this.transfers[this.selectedItem].files.map((e=>e.split("/").pop())):[]}}},ee=s(6262);const te=(0,ee.A)(Z,[["render",J],["__scopeId","data-v-65e233cd"]]);var se=te},4837:function(e,t,s){var l={"./File":[4647,9,9469,4647],"./File.vue":[4647,9,9469,4647],"./Jellyfin":[6792,9,3841,2353,1433,1008,9409,7619,6556,6792],"./Jellyfin.vue":[6792,9,3841,2353,1433,1008,9409,7619,6556,6792],"./Jellyfin/Collections":[8411,9,2353,8411],"./Jellyfin/Collections.vue":[8411,9,2353,8411],"./Jellyfin/Mixin":[2012,9,2012],"./Jellyfin/Mixin.vue":[2012,9,2012],"./Jellyfin/common.scss":[8223,9,8944,8223],"./Jellyfin/components/SortButton":[9064,9,1008,9064],"./Jellyfin/components/SortButton.vue":[9064,9,1008,9064],"./Jellyfin/views/Media/Index":[6975,9,3841,2353,1433,7619,6975],"./Jellyfin/views/Media/Index.vue":[6975,9,3841,2353,1433,7619,6975],"./Jellyfin/views/Movies/Index":[2436,9,3841,1008,6556,2436],"./Jellyfin/views/Movies/Index.vue":[2436,9,3841,1008,6556,2436],"./Jellyfin/views/Music/Index":[1433,9,3841,2353,1433],"./Jellyfin/views/Music/Index.vue":[1433,9,3841,2353,1433],"./Mixin":[47,9,47],"./Mixin.vue":[47,9,47],"./Nav":[5150,9,9409,5150],"./Nav.vue":[5150,9,9409,5150],"./YouTube":[1893,9,3841,2620,5256,9409,8060,6857,2013,8299,1893],"./YouTube.vue":[1893,9,3841,2620,5256,9409,8060,6857,2013,8299,1893],"./YouTube/Channel":[1014,9,2620,1014],"./YouTube/Channel.vue":[1014,9,2620,1014],"./YouTube/Feed":[8619,9,3841,8299,8619],"./YouTube/Feed.vue":[8619,9,3841,8299,8619],"./YouTube/Index":[9476,9,9476],"./YouTube/Index.vue":[9476,9,9476],"./YouTube/NoToken":[8161,9,2013,8161],"./YouTube/NoToken.vue":[8161,9,2013,8161],"./YouTube/Playlist":[1918,9,3841,5256,1918],"./YouTube/Playlist.vue":[1918,9,3841,5256,1918],"./YouTube/Playlists":[8060,9,3841,5256,8060],"./YouTube/Playlists.vue":[8060,9,3841,5256,8060],"./YouTube/Subscriptions":[662,9,3841,2620,6857,662],"./YouTube/Subscriptions.vue":[662,9,3841,2620,6857,662],"./YouTube/header.scss":[9631,9,8944,9631],"./meta":[4341,3],"./meta.json":[4341,3]};function a(e){if(!s.o(l,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=l[e],a=t[0];return Promise.all(t.slice(2).map(s.e)).then((function(){return s.t(a,16|t[1])}))}a.keys=function(){return Object.keys(l)},a.id=4837,e.exports=a},4341:function(e){"use strict";e.exports=JSON.parse('{"File":{"name":"Files","icon":{"class":"fas fa-folder","color":"#888888"}},"Jellyfin":{"name":"Jellyfin","icon":{"url":"https://static.platypush.tech/icons/media.jellyfin-64.png"}},"YouTube":{"name":"YouTube","icon":{"class":"fab fa-youtube","color":"#FF0000"}}}')}}]);
//# sourceMappingURL=2673.e35bd021.js.map