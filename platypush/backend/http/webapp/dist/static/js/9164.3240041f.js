"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[9164],{9164:function(s,e,a){a.r(e),a.d(e,{default:function(){return y}});var t=a(6252),i=a(9963);const r={class:"entities-selectors-container"},c={key:0,class:"selector search-container col-11"},l={class:"selector actions-container col-1 pull-right"};function o(s,e,a,o,n,f){const u=(0,t.up)("DropdownItem"),p=(0,t.up)("Dropdown");return(0,t.wg)(),(0,t.iD)("div",r,[Object.keys(a.entityGroups.id||{}).length?((0,t.wg)(),(0,t.iD)("div",c,[(0,t.wy)((0,t._)("input",{ref:"search",type:"text",class:"search-bar",title:"Filter by name, plugin or ID",placeholder:"ðŸ”Ž","onUpdate:modelValue":e[0]||(e[0]=s=>n.searchTerm=s)},null,512),[[i.nr,n.searchTerm]])])):(0,t.kq)("",!0),(0,t._)("div",l,[(0,t.Wm)(p,{title:"Actions","icon-class":"fas fa-ellipsis"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{"icon-class":"fas fa-sync-alt",text:"Refresh",onInput:e[1]||(e[1]=e=>s.$emit("refresh"))}),(0,t.Wm)(u,{"icon-class":"fas fa-square-root-variable",text:"Set Variable",onInput:e[2]||(e[2]=e=>s.$emit("show-variable-modal"))}),(0,t.Wm)(p,{title:"Group by",text:"Group by","icon-class":"fas fa-object-ungroup",ref:"groupingSelector"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(f.visibleGroupings,(s=>((0,t.wg)(),(0,t.j4)(u,{key:s,text:f.prettifyGroupingName(s),"item-class":{selected:a.value?.grouping===s},onInput:e=>f.onGroupingChanged(s)},null,8,["text","item-class","onInput"])))),128))])),_:1},512),(0,t.Wm)(p,{title:"Filter groups",text:"Filter groups","icon-class":{fas:!0,"fa-filter":!0,active:f.hasActiveFilter},ref:"groupSelector","keep-open-on-item-click":""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(f.sortedGroups,(s=>((0,t.wg)(),(0,t.j4)(u,(0,t.dG)({key:s,text:s,ref_for:!0},f.iconForGroup(s),{"item-class":{selected:!!n.selectedGroups[s]},onClick:(0,i.iM)((e=>f.toggleGroup(s)),["stop"])}),null,16,["text","item-class","onClick"])))),128))])),_:1},8,["icon-class"])])),_:1})])])}var n=a(8637),f=a(4904),u=a(7597),p=a(7369),h=a(1359),m=a(5250),g={name:"Selector",emits:["input","refresh","show-variable-modal"],mixins:[n.Z],components:{Dropdown:f.Z,DropdownItem:u.Z},props:{entityGroups:{type:Object,required:!0},value:{type:Object,required:!0}},data(){return{selectedGroups:{},searchTerm:""}},computed:{visibleGroupings(){return Object.keys(this.entityGroups).filter((s=>"id"!==s))},hasActiveFilter(){return Object.values(this.selectedGroups).filter((s=>!1===s)).length>0},sortedGroups(){return Object.keys(this.entityGroups[this.value?.grouping]||{}).sort()},typesMeta(){return p},isGroupFilterActive(){return Object.keys(this.selectedGroups).length!==this.sortedGroups.length},selectedEntities(){if(!this.searchTerm?.length)return this.entityGroups.id;const s=this.searchTerm.toLowerCase().trim();return Object.values(this.entityGroups.id).filter((e=>{if(!this.selectedGroups[e[this.value?.grouping]])return!1;if(!s?.length)return!0;for(const a of["id","external_id","name","plugin"]){if(!e[a])continue;const t=e[a].toString().toLowerCase();if(t.indexOf(s)>=0)return!0}return!1})).reduce(((s,e)=>(s[e.id]=e,s)),{})}},methods:{prettifyGroupingName(s){return s?(s=this.prettify(s),s.endsWith("y")&&(s=s.slice(0,s.length-1)+"ie"),s+="s",s):""},iconForGroup(s){if("plugin"===this.value.grouping&&h[s]){const e=h[s];return{"icon-class":e["class"]?.length||!e.imgUrl?.length?e["class"]:"fas fa-gears","icon-url":e.imgUrl}}return{}},sync(){const s={...this.value};s.searchTerm=this.searchTerm,s.selectedEntities=this.selectedEntities,s.selectedGroups=this.selectedGroups,this.$emit("input",s)},refreshGroupFilter(){this.selectedGroups=Object.keys(this.entityGroups[this.value?.grouping]||{}).reduce(((s,e)=>(s[e]=!0,s)),{}),this.sync()},toggleGroup(s){this.selectedGroups[s]=!this.selectedGroups[s],this.sync()},processEntityUpdate(s){const e=s[this.value?.grouping];e&&null==this.selectedGroups[e]&&(this.selectedGroups[e]=!0)},onGroupingChanged(s){if(!this.entityGroups[s]||s===this.value?.grouping)return!1;const e={...this.value};e.grouping=s,this.$emit("input",e)}},mounted(){this.refreshGroupFilter(),this.$watch((()=>this.value?.grouping),(()=>{this.refreshGroupFilter()})),this.$watch((()=>this.searchTerm),this.sync),m.$.onEntity(this.processEntityUpdate)}},d=a(3744);const v=(0,d.Z)(g,[["render",o],["__scopeId","data-v-d41c8404"]]);var y=v},1359:function(s){s.exports=JSON.parse('{"alarm":{"class":"fas fa-stopwatch"},"arduino":{"class":"fas fa-microchip"},"assistant.google":{"class":"fas fa-microphone-lines"},"assistant.openai":{"class":"fas fa-microphone-lines"},"assistant.picovoice":{"class":"fas fa-microphone-lines"},"bluetooth":{"class":"fab fa-bluetooth"},"camera.android.ipcam":{"class":"fab fa-android"},"camera.cv":{"class":"fas fa-camera"},"camera.ffmpeg":{"class":"fas fa-camera"},"camera.gstreamer":{"class":"fas fa-camera"},"camera.ir.mlx90640":{"class":"fas fa-sun"},"camera.pi":{"class":"fas fa-camera"},"camera.pi.legacy":{"class":"fas fa-camera"},"entities":{"class":"fa fa-home"},"execute":{"class":"fa fa-play"},"extensions":{"class":"fas fa-puzzle-piece"},"light.hue":{"class":"fas fa-lightbulb"},"linode":{"class":"fas fa-cloud"},"media.chromecast":{"class":"fab fa-chromecast"},"media.jellyfin":{"imgUrl":"/icons/jellyfin.svg"},"media.kodi":{"imgUrl":"/icons/kodi.svg"},"media.mplayer":{"class":"fa fa-film"},"media.mpv":{"class":"fa fa-film"},"media.plex":{"imgUrl":"/icons/plex.svg"},"media.vlc":{"class":"fa fa-film"},"music.mpd":{"class":"fas fa-music"},"music.snapcast":{"class":"fa fa-volume-up"},"music.spotify":{"class":"fab fa-spotify"},"ping":{"class":"fas fa-server"},"torrent":{"class":"fa fa-magnet"},"rtorrent":{"class":"fa fa-magnet"},"sensor.bme280":{"class":"fas fa-microchip"},"sensor.dht":{"class":"fas fa-microchip"},"sensor.envirophat":{"class":"fas fa-microchip"},"sensor.ltr559":{"class":"fas fa-microchip"},"sensor.mcp3008":{"class":"fas fa-microchip"},"sensor.pmw3901":{"class":"fas fa-microchip"},"sensor.vl53l1x":{"class":"fas fa-microchip"},"serial":{"class":"fab fa-usb"},"smartthings":{"imgUrl":"/icons/smartthings.png"},"switches":{"class":"fas fa-toggle-on"},"switch.switchbot":{"class":"fas fa-toggle-on"},"switch.tplink":{"class":"fas fa-toggle-on"},"switchbot":{"class":"fas fa-toggle-on"},"sound":{"class":"fa fa-microphone"},"system":{"class":"fas fa-microchip"},"tts":{"class":"far fa-comment"},"tts.google":{"class":"fas fa-comment"},"tv.samsung.ws":{"class":"fas fa-tv"},"variable":{"class":"fas fa-square-root-variable"},"weather.buienradar":{"class":"fas fa-cloud-sun-rain"},"weather.openweathermap":{"class":"fas fa-cloud-sun-rain"},"zigbee.mqtt":{"imgUrl":"/icons/zigbee.svg"},"zwave":{"imgUrl":"/icons/z-wave.png"},"zwave.mqtt":{"imgUrl":"/icons/z-wave.png"}}')}}]);
//# sourceMappingURL=9164.3240041f.js.map