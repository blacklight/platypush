"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[5795],{7514:function(t,e,s){s.d(e,{Z:function(){return m}});var o=s(6252),i=s(3577),n=s(9963);const a=t=>((0,o.dD)("data-v-eff375b6"),t=t(),(0,o.Cn)(),t),l=["checked","id"],c=a((()=>(0,o._)("div",{class:"switch"},[(0,o._)("div",{class:"dot"})],-1))),d={class:"label"};function r(t,e,s,a,r,u){return(0,o.wg)(),(0,o.iD)("div",{class:(0,i.C_)(["power-switch",{disabled:s.disabled}]),onClick:e[0]||(e[0]=(0,n.iM)(((...t)=>u.onInput&&u.onInput(...t)),["stop"]))},[(0,o._)("input",{type:"checkbox",checked:s.value,id:s.id},null,8,l),(0,o._)("label",null,[c,(0,o._)("span",d,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])])],2)}var u={name:"ToggleSwitch",emits:["input"],props:{id:{type:String},value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{onInput(t){if(this.disabled)return!1;this.$emit("input",t)}}},p=s(3744);const v=(0,p.Z)(u,[["render",r],["__scopeId","data-v-eff375b6"]]);var m=v},5795:function(t,e,s){s.r(e),s.d(e,{default:function(){return A}});var o=s(6252),i=s(3577),n=s(9963);const a=t=>((0,o.dD)("data-v-d7bb5c5e"),t=t(),(0,o.Cn)(),t),l={class:"entity assistant-container"},c={class:"col-1 icon entity-icon",ref:"icon"},d={class:"label"},r=["textContent"],u={class:"value-container"},p=a((()=>(0,o._)("div",{class:"icon"},[(0,o._)("i",{class:"fas fa-comment-slash"})],-1))),v=a((()=>(0,o._)("div",{class:"label"},[(0,o._)("div",{class:"name"},"Stop Conversation")],-1))),m={class:"value"},f=a((()=>(0,o._)("div",{class:"icon"},[(0,o._)("i",{class:"fas fa-comment"})],-1))),h=a((()=>(0,o._)("div",{class:"label"},[(0,o._)("div",{class:"name"},"Start Conversation")],-1))),_={class:"value"},C=a((()=>(0,o._)("div",{class:"icon"},[(0,o._)("i",{class:"fas fa-microphone-lines-slash"})],-1))),g=a((()=>(0,o._)("div",{class:"label"},[(0,o._)("div",{class:"name"},"Muted")],-1))),b={class:"value"},k=a((()=>(0,o._)("div",{class:"icon"},[(0,o._)("i",{class:"fas fa-keyboard"})],-1))),y=a((()=>(0,o._)("div",{class:"label"},[(0,o._)("div",{class:"name"},"Send query from text prompt")],-1))),w={class:"value"};function x(t,e,s,a,x,M){const P=(0,o.up)("TextPrompt"),S=(0,o.up)("EntityIcon"),T=(0,o.up)("ToggleSwitch");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(P,{ref:"prompt"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Enter a text query to send to the assistant. ")])),_:1},512),(0,o._)("div",{class:"head",onClick:e[1]||(e[1]=(...t)=>M.onHeadClick&&M.onHeadClick(...t))},[(0,o._)("div",c,[(0,o.Wm)(S,{entity:t.value,class:(0,i.C_)({active:t.value.conversation_running}),loading:t.loading,error:t.error},null,8,["entity","class","loading","error"])],512),(0,o._)("div",d,[(0,o._)("div",{class:"name",ref:"name",textContent:(0,i.zw)(t.value.name)},null,8,r)]),(0,o._)("div",u,[(0,o._)("button",{onClick:e[0]||(e[0]=(0,n.iM)((t=>x.collapsed=!x.collapsed),["stop"]))},[(0,o._)("i",{class:(0,i.C_)(["fas",{"fa-angle-up":!x.collapsed,"fa-angle-down":x.collapsed}])},null,2)])])]),x.collapsed?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:"body",ref:"body",onClick:e[6]||(e[6]=(0,n.iM)(((...e)=>t.prevent&&t.prevent(...e)),["stop"]))},[t.value.conversation_running?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"row",onClick:e[2]||(e[2]=(0,n.iM)(((...t)=>M.stopConversation&&M.stopConversation(...t)),["stop"]))},[p,v,(0,o._)("div",m,[(0,o.Wm)(T,{onClick:(0,n.iM)(M.stopConversation,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])):((0,o.wg)(),(0,o.iD)("div",{key:1,class:"row",onClick:e[3]||(e[3]=(0,n.iM)(((...t)=>M.startConversation&&M.startConversation(...t)),["stop"]))},[f,h,(0,o._)("div",_,[(0,o.Wm)(T,{onClick:(0,n.iM)(M.startConversation,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])),(0,o._)("div",{class:"row",onClick:e[4]||(e[4]=(0,n.iM)(((...t)=>M.toggleMute&&M.toggleMute(...t)),["stop"]))},[C,g,(0,o._)("div",b,[(0,o.Wm)(T,{onClick:(0,n.iM)(M.toggleMute,["stop"]),value:t.value.is_muted,disabled:t.loading},null,8,["onClick","value","disabled"])])]),(0,o._)("div",{class:"row",onClick:e[5]||(e[5]=(0,n.iM)(((...t)=>M.showPrompt&&M.showPrompt(...t)),["stop"]))},[k,y,(0,o._)("div",w,[(0,o.Wm)(T,{onClick:(0,n.iM)(M.showPrompt,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])],512))])}const M=t=>((0,o.dD)("data-v-23564003"),t=t(),(0,o.Cn)(),t),P={class:"dialog-content"},S={type:"text",ref:"input"},T={class:"buttons"},$=M((()=>(0,o._)("i",{class:"fas fa-check"},null,-1))),q=M((()=>(0,o._)("i",{class:"fas fa-xmark"},null,-1)));function I(t,e,s,a,l,c){const d=(0,o.up)("Modal");return(0,o.wg)(),(0,o.j4)(d,{ref:"modal",title:s.title},{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:e[4]||(e[4]=(0,n.iM)(((...t)=>c.onConfirm&&c.onConfirm(...t)),["prevent"]))},[(0,o._)("div",P,[(0,o.WI)(t.$slots,"default",{},void 0,!0),(0,o._)("input",S,null,512)]),(0,o._)("div",T,[(0,o._)("button",{type:"submit",class:"ok-btn",onClick:e[0]||(e[0]=(...t)=>c.onConfirm&&c.onConfirm(...t)),onTouch:e[1]||(e[1]=(...t)=>c.onConfirm&&c.onConfirm(...t))},[$,(0,o.Uk)("   "+(0,i.zw)(s.confirmText),1)],32),(0,o._)("button",{type:"button",class:"cancel-btn",onClick:e[2]||(e[2]=(...t)=>c.close&&c.close(...t)),onTouch:e[3]||(e[3]=(...t)=>c.close&&c.close(...t))},[q,(0,o.Uk)("   "+(0,i.zw)(s.cancelText),1)],32)])],32)])),_:3},8,["title"])}var D=s(3493),W={emits:["input"],components:{Modal:D.Z},props:{title:{type:String},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"}},methods:{onConfirm(){this.$emit("input",this.$refs.input.value),this.close()},show(){this.$refs.modal.show()},close(){this.$refs.modal.hide()}},mounted(){this.$nextTick((()=>{this.$refs.input.value="",this.$refs.input.focus()}))}},Z=s(3744);const E=(0,Z.Z)(W,[["render",I],["__scopeId","data-v-23564003"]]);var z=E,H=s(7514),U=s(4967),B=s(847),L={name:"Assistant",mixins:[B["default"]],components:{EntityIcon:U["default"],TextPrompt:z,ToggleSwitch:H.Z},data(){return{collapsed:!0,showTextQueryPrompt:!1,modalId:"assistant-text-prompt-modal"}},methods:{hidePrompt(){document.body.querySelector(`#${this.modalId}`)?.remove()},showPrompt(){const t=this.$refs.prompt.$el;this.hidePrompt(),t.id=this.modalId,t.classList.remove("hidden");const e=t.querySelector('input[type="text"]'),s=t.querySelector("form");s&&s.addEventListener("submit",(t=>{t.stopPropagation(),this.onTextPrompt(e?.value)}));const o=t.querySelector(".cancel-btn");o&&(o.onclick=t=>{this.hidePrompt(),t.stopPropagation()}),t.onclick=e=>{const s=t.querySelector(".modal");if(s?.contains(e.target))return e.stopPropagation(),!1;this.hidePrompt()},document.body.appendChild(t),this.$nextTick((()=>{t.querySelector('input[type="text"]').focus()}))},onHeadClick(t){if(this.$refs.name.contains(t.target)||this.$refs.icon.contains(t.target))return!0;this.collapsed=!this.collapsed,t.stopPropagation()},async toggleMute(){await this.request("entities.execute",{id:this.value.id,action:"toggle_mute"})},async startConversation(){await this.request("entities.execute",{id:this.value.id,action:"start_conversation"})},async stopConversation(){await this.request("entities.execute",{id:this.value.id,action:"stop_conversation"})},async onTextPrompt(t){await this.request("entities.execute",{id:this.value.id,action:"send_text_query",query:t}),this.hidePrompt()}}};const j=(0,Z.Z)(L,[["render",x],["__scopeId","data-v-d7bb5c5e"]]);var A=j}}]);
//# sourceMappingURL=5795.8f7061d6.js.map