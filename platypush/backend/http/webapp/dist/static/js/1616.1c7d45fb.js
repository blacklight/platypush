"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[1616,28,6975],{226:function(t,e,i){i.d(e,{A:function(){return s}});i(4114);var o=i(2002),l={name:"Utils",mixins:[o.A],computed:{audioExtensions(){return new Set(["3gp","aa","aac","aax","act","aiff","amr","ape","au","awb","dct","dss","dvf","flac","gsm","iklax","ivs","m4a","m4b","m4p","mmf","mp3","mpc","msv","nmf","nsf","ogg,","opus","ra,","raw","sln","tta","vox","wav","wma","wv","webm","8svx"])},videoExtensions(){return new Set(["webm","mkv","flv","flv","vob","ogv","ogg","drc","gif","gifv","mng","avi","mts","m2ts","mov","qt","wmv","yuv","rm","rmvb","asf","amv","mp4","m4p","m4v","mpg","mp2","mpeg","mpe","mpv","mpg","mpeg","m2v","m4v","svi","3gp","3g2","mxf","roq","nsv","flv","f4v","f4p","f4a","f4b"])},mediaExtensions(){return new Set([...this.videoExtensions,...this.audioExtensions])}},methods:{convertTime(t){t=parseFloat(t);const e={};e.h=""+parseInt(t/3600),e.m=""+parseInt(t/60-60*e.h),e.s=""+parseInt(t-(3600*e.h+60*e.m));for(const o of["m","s"])parseInt(e[o])<10&&(e[o]="0"+e[o]);const i=[];return parseInt(e.h)&&i.push(e.h),i.push(e.m,e.s),i.join(":")},async startStreaming(t,e,i=!1){let o=t,l=null;t instanceof Object?(o=t.url,l=t.subtitles):t={url:o};const n=await this.request(`${e}.start_streaming`,{media:o,subtitles:l,download:i});return{...t,...n}},async stopStreaming(t,e){await this.request(`${e}.stop_streaming`,{media_id:t})}}};const n=l;var s=n},9265:function(t,e,i){i.d(e,{A:function(){return f}});var o=i(641),l=i(3751),n=i(33);const s={class:"dropdown-container"},a=["title"],c=["textContent"];function r(t,e,i,r,d,p){const u=(0,o.g2)("DropdownBody");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("button",{title:i.title,ref:"button",onClick:e[0]||(e[0]=(0,l.D$)((t=>p.toggle(t)),["stop"]))},[i.iconClass?((0,o.uX)(),(0,o.CE)("i",{key:0,class:(0,n.C4)(["icon",i.iconClass])},null,2)):(0,o.Q3)("",!0),i.text?((0,o.uX)(),(0,o.CE)("span",{key:1,class:"text",textContent:(0,n.v_)(i.text)},null,8,c)):(0,o.Q3)("",!0)],8,a),(0,o.Lk)("div",{class:(0,n.C4)(["body-container",{hidden:!d.visible}]),ref:"dropdownContainer"},[(0,o.bF)(u,{id:i.id,keepOpenOnItemClick:i.keepOpenOnItemClick,style:(0,n.Tr)(i.style),ref:"dropdown",onClick:p.onClick},{default:(0,o.k6)((()=>[(0,o.RG)(t.$slots,"default",{},void 0,!0)])),_:3},8,["id","keepOpenOnItemClick","style","onClick"])],2)])}var d=i(4200),p=i(2537),u={components:{DropdownBody:d.A},emits:["click"],props:{id:{type:String},iconClass:{default:"fa fa-ellipsis-h"},text:{type:String},title:{type:String},keepOpenOnItemClick:{type:Boolean,default:!1},style:{type:Object,default:()=>({})}},data(){return{visible:!1}},computed:{button(){const t=this.$refs.button?.$el;return t?t.querySelector("button"):this.$refs.button},buttonStyle(){return this.button?getComputedStyle(this.button):{}},buttonWidth(){return parseFloat(this.buttonStyle.width||0)},buttonHeight(){return parseFloat(this.buttonStyle.height||0)}},methods:{documentClickHndl(t){if(!this.visible)return;let e=t.target;while(e){if(e.classList.contains("dropdown"))return;e=e.parentElement}this.close()},getDropdownWidth(){const t=this.$refs.dropdown?.$el;return t?parseFloat(getComputedStyle(t).width):0},getDropdownHeight(){const t=this.$refs.dropdown?.$el;return t?parseFloat(getComputedStyle(t).height):0},onClick(t){return this.keepOpenOnItemClick||this.close(),"A"===t.target.tagName?(t.preventDefault(),!1):t.defaultPrevented?(t.stopPropagation(),!1):void 0},close(){this.visible=!1,document.removeEventListener("click",this.documentClickHndl),p.j.emit("dropdown-close")},open(){document.addEventListener("click",this.documentClickHndl);const t=this.$refs.dropdown?.$el;t.parentElement||this.$el.appendChild(t),this.visible=!0,this.$nextTick(this.adjustDropdownPos)},adjustDropdownPos(){const t=this.button.getBoundingClientRect(),e={left:t.left+window.scrollX,top:t.top+window.scrollY},i={left:e.left,top:e.top+this.buttonHeight},o=this.getDropdownWidth(),l=this.getDropdownHeight();if(i.left+o>(window.innerWidth+window.scrollX)/2&&(i.left-=o-this.buttonWidth),i.top+l>(window.innerHeight+window.scrollY)/2){let t=i.top-(l+this.buttonHeight-10);t<0&&(t=0),i.top=t}const n=this.$refs.dropdown.$el;n.classList.add("fade-in"),n.style.top=`${i.top}px`,n.style.left=`${i.left}px`,p.j.emit("dropdown-open",this.$refs.dropdown)},toggle(t){t?.stopPropagation(),this.$emit("click",t),this.visible?this.close():this.open()},onKeyUp(t){t.stopPropagation(),"Escape"===t.key&&this.close()}},mounted(){document.body.addEventListener("keyup",this.onKeyUp)},unmounted(){document.body.removeEventListener("keyup",this.onKeyUp)}},m=i(6262);const h=(0,m.A)(u,[["render",r],["__scopeId","data-v-3f1ad726"]]);var f=h},4200:function(t,e,i){i.d(e,{A:function(){return d}});var o=i(641),l=i(33);const n=["id"];function s(t,e,i,s,a,c){return(0,o.uX)(),(0,o.CE)("div",{class:"dropdown",id:i.id,style:(0,l.Tr)(i.style),onClick:e[0]||(e[0]=e=>t.$emit("click",e))},[(0,o.RG)(t.$slots,"default",{},void 0,!0)],12,n)}var a={emits:["click"],props:{id:{type:String},keepOpenOnItemClick:{type:Boolean,default:!1},style:{type:Object,default:()=>({})}}},c=i(6262);const r=(0,c.A)(a,[["render",s],["__scopeId","data-v-24c5aa28"]]);var d=r},9612:function(t,e,i){i.d(e,{A:function(){return h}});var o=i(641),l=i(33);const n=["title"],s={key:0,class:"col-2 icon"},a=["textContent"];function c(t,e,i,c,r,d){const p=(0,o.g2)("Icon");return(0,o.uX)(),(0,o.CE)("div",{class:(0,l.C4)(["row item",{...d.itemClass_,disabled:i.disabled}]),title:i.hoverText,onClick:e[0]||(e[0]=(...t)=>d.clicked&&d.clicked(...t))},[i.iconClass?.length||i.iconUrl?.length?((0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(p,{class:(0,l.C4)(i.iconClass),url:i.iconUrl},null,8,["class","url"])])):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:(0,l.C4)(["text",{"col-10":null!=i.iconClass}]),textContent:(0,l.v_)(i.text)},null,10,a)],10,n)}var r=i(3778),d=i(2537),p={components:{Icon:r.A},emits:["click","input"],props:{iconClass:{type:String},iconUrl:{type:String},text:{type:String},hoverText:{type:String,default:null},disabled:{type:Boolean,default:!1},itemClass:{}},computed:{itemClass_(){return"string"===typeof this.itemClass?{[this.itemClass]:!0}:this.itemClass}},methods:{clicked(t){if(this.$parent.keepOpenOnItemClick||d.j.emit("dropdown-close"),this.disabled)return t.stopPropagation(),t.preventDefault(),!1;this.$emit("input",t)}}},u=i(6262);const m=(0,u.A)(p,[["render",c],["__scopeId","data-v-2babe09c"]]);var h=m},7998:function(t,e,i){i.d(e,{A:function(){return p}});var o=i(641),l=i(33);const n=["disabled","title"];function s(t,e,i,s,a,c){const r=(0,o.g2)("Icon");return(0,o.uX)(),(0,o.CE)("div",{class:(0,l.C4)(["floating-btn",c.classes])},[(0,o.Lk)("button",{type:"button",class:(0,l.C4)(["btn btn-primary",i.glow?"with-glow":""]),disabled:i.disabled,title:i.title,onClick:e[0]||(e[0]=e=>t.$emit("click",e))},[(0,o.bF)(r,{class:(0,l.C4)(i.iconClass),url:i.iconUrl},null,8,["class","url"])],10,n)],2)}var a=i(3778),c={components:{Icon:a.A},emits:["click"],props:{disabled:{type:Boolean,default:!1},iconClass:{type:String},iconUrl:{type:String},class:{type:String},title:{type:String},left:{type:Boolean,default:!1},right:{type:Boolean,default:!0},top:{type:Boolean,default:!1},bottom:{type:Boolean,default:!0},glow:{type:Boolean,default:!1}},computed:{classes(){const t={};return this.left?t.left=!0:t.right=!0,this.top?t.top=!0:t.bottom=!0,this.class?.length&&(t[this.class]=!0),t}}},r=i(6262);const d=(0,r.A)(c,[["render",s],["__scopeId","data-v-544409fc"]]);var p=d},3778:function(t,e,i){i.d(e,{A:function(){return p}});var o=i(641),l=i(33);const n={class:"icon-container"},s=["src","alt"];function a(t,e,i,a,c,r){return(0,o.uX)(),(0,o.CE)("div",n,[i.url?.length?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"icon",src:i.url,alt:i.alt},null,8,s)):r.className?.length?((0,o.uX)(),(0,o.CE)("i",{key:1,class:(0,l.C4)(["icon",r.className]),style:(0,l.Tr)({color:i.color})},null,6)):(0,o.Q3)("",!0)])}var c={props:{class:{type:String},url:{type:String},color:{type:String,default:""},alt:{type:String,default:""}},computed:{className(){return this.class}}},r=i(6262);const d=(0,r.A)(c,[["render",a],["__scopeId","data-v-706a3bd1"]]);var p=d},6975:function(t,e,i){i.r(e),i.d(e,{default:function(){return v}});var o=i(641);const l={class:"videos index"},n={key:1,class:"wrapper music-wrapper"},s={key:3,class:"wrapper items-wrapper"};function a(t,e,i,a,c,r){const d=(0,o.g2)("Loading"),p=(0,o.g2)("Music"),u=(0,o.g2)("NoItems"),m=(0,o.g2)("Collections"),h=(0,o.g2)("Results");return(0,o.uX)(),(0,o.CE)("div",l,[t.isLoading?((0,o.uX)(),(0,o.Wv)(d,{key:0})):"music"===t.collection?.collection_type?((0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(p,{collection:t.collection,filter:t.filter,loading:t.isLoading,path:t.path,onAddToPlaylist:e[0]||(e[0]=e=>t.$emit("add-to-playlist",e)),onDelete:e[1]||(e[1]=e=>t.$emit("delete",e)),onPlay:e[2]||(e[2]=e=>t.$emit("play",e)),onPlayWithOpts:e[3]||(e[3]=e=>t.$emit("play-with-opts",e)),onPlaylistMove:r.playlistMove,onRemoveFromPlaylist:e[4]||(e[4]=e=>t.$emit("remove-from-playlist",e)),onSelect:e[5]||(e[5]=e=>{t.selectedResult=e,t.$emit("select",e)}),onSelectCollection:r.selectCollection,onView:e[6]||(e[6]=e=>t.$emit("view",e))},null,8,["collection","filter","loading","path","onPlaylistMove","onSelectCollection"])])):t.items?.length?((0,o.uX)(),(0,o.CE)("div",s,[r.collections.length>0?((0,o.uX)(),(0,o.Wv)(m,{key:0,collection:t.collection,filter:t.filter,items:r.collections,loading:t.isLoading,"parent-id":t.collection?.id,onRefresh:r.refresh,onSelect:r.selectCollection},null,8,["collection","filter","items","loading","parent-id","onRefresh","onSelect"])):(0,o.Q3)("",!0),r.mediaItems.length>0?((0,o.uX)(),(0,o.Wv)(h,{key:1,results:r.mediaItems,sources:{jellyfin:!0},filter:t.filter,"selected-result":t.selectedResult,onAddToPlaylist:e[7]||(e[7]=e=>t.$emit("add-to-playlist",e)),onDownload:e[8]||(e[8]=e=>t.$emit("download",e)),onPlay:e[9]||(e[9]=e=>t.$emit("play",e)),onPlayWithOpts:e[10]||(e[10]=e=>t.$emit("play-with-opts",e)),onRemoveFromPlaylist:e[11]||(e[11]=e=>t.$emit("remove-from-playlist",e)),onSelect:r.selectItem,onView:e[12]||(e[12]=e=>t.$emit("view",e))},null,8,["results","filter","selected-result","onSelect"])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.Wv)(u,{key:2,"with-shadow":!1},{default:(0,o.k6)((()=>[(0,o.eW)(" No media found. ")])),_:1}))])}var c=i(8411),r=i(9828),d=i(2012),p=i(1433),u=i(6561),m=i(3149),h={mixins:[d["default"]],emits:["add-to-playlist","delete","download","play","play-with-opts","remove-from-playlist","select","select-collection","view"],components:{Collections:c["default"],Loading:r.A,Music:p["default"],NoItems:u.A,Results:m.A},computed:{collections(){return this.sortedItems?.filter((t=>["collection","playlist"].includes(t.item_type)))??[]},mediaItems(){const t=this.sortedItems?.filter((t=>!["collection","playlist"].includes(t.item_type)))??[];return!this.collection||this.collection.collection_type&&"books"!==this.collection.collection_type?t:t.sort(((t,e)=>{if(t.created_at&&e.created_at)return new Date(t.created_at)<new Date(e.created_at);if(t.created_at)return-1;if(e.created_at)return 1;let i=[t.name||t.title||"",e.name||e.title||""];return i[0].localeCompare(i[1])}))}},methods:{selectCollection(t){this.$emit("select-collection",{type:"homevideos",...t})},selectItem(t){const e=this.items[t];"book"===e.item_type&&e.embed_url?window.open(e.embed_url,"_blank"):this.selectedResult=t},async playlistMove(t){const{item:e,to:i}=t;this.loading_=!0;try{await this.request("media.jellyfin.playlist_move",{playlist_id:this.collection.id,item_id:e.playlist_item_id,to_pos:i}),await this.refresh()}finally{this.loading_=!1}},async init(){const t=this.getUrlArgs();let e=t?.collection;if(e){this.loading_=!0;try{e=await this.request("media.jellyfin.info",{item_id:e}),e&&this.selectCollection(e)}finally{this.loading_=!1}}},async refresh(){if("music"!==this.collection?.collection_type){this.loading_=!0;try{"tvshows"===this.collection?.collection_type?this.items=(await this.request("media.jellyfin.get_collections",{parent_id:this.collection.id})).map((t=>({...t,item_type:"collection"}))):this.items=this.collection?.id?await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:25e3}):(await this.request("media.jellyfin.get_collections")).map((t=>({...t,item_type:"collection"})))}finally{this.loading_=!1}}}},async mounted(){this.init(),await this.refresh()}},f=i(6262);const y=(0,f.A)(h,[["render",a],["__scopeId","data-v-19c9d0dd"]]);var v=y}}]);
//# sourceMappingURL=1616.1c7d45fb.js.map