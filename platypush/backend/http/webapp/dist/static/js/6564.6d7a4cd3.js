"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[6564],{1808:function(e,t,s){s.d(t,{A:function(){return g}});var l=s(641),o=s(33),n=s(3751);const i={class:"slider-wrapper"},a=["textContent"],c=["textContent"],r={class:"slider-container"},u=["min","max","step","disabled","value"],d=["textContent"];function h(e,t,s,h,p,v){return(0,l.uX)(),(0,l.CE)("label",i,[s.withRange?((0,l.uX)(),(0,l.CE)("span",{key:0,class:(0,o.C4)(["range-labels",{"with-label":s.withLabel}])},[s.withRange?((0,l.uX)(),(0,l.CE)("span",{key:0,class:"label left",textContent:(0,o.v_)(s.range[0])},null,8,a)):(0,l.Q3)("",!0),s.withRange?((0,l.uX)(),(0,l.CE)("span",{key:1,class:"label right",textContent:(0,o.v_)(s.range[1])},null,8,c)):(0,l.Q3)("",!0)],2)):(0,l.Q3)("",!0),(0,l.Lk)("span",r,[(0,l.Lk)("input",{class:(0,o.C4)(["slider",{"with-label":s.withLabel}]),type:"range",min:s.range[0],max:s.range[1],step:s.step,disabled:s.disabled,value:s.value,ref:"range",onInput:t[0]||(t[0]=(0,n.D$)((t=>e.$emit("input",t)),["stop"])),onChange:t[1]||(t[1]=(0,n.D$)((t=>e.$emit("change",t)),["stop"]))},null,42,u),s.withLabel?((0,l.uX)(),(0,l.CE)("span",{key:0,class:"label",textContent:(0,o.v_)(s.value),ref:"label"},null,8,d)):(0,l.Q3)("",!0)])])}var p={emits:["input","change"],props:{value:{type:Number},disabled:{type:Boolean,default:!1},range:{type:Array,default:()=>[0,100]},step:{type:Number,default:1},withLabel:{type:Boolean,default:!1},withRange:{type:Boolean,default:!1}}},v=s(6262);const m=(0,v.A)(p,[["render",h],["__scopeId","data-v-d90e850c"]]);var g=m},11:function(e,t,s){s.d(t,{A:function(){return v}});var l=s(641),o=s(33),n=s(3751);const i=e=>((0,l.Qi)("data-v-eff375b6"),e=e(),(0,l.jt)(),e),a=["checked","id"],c=i((()=>(0,l.Lk)("div",{class:"switch"},[(0,l.Lk)("div",{class:"dot"})],-1))),r={class:"label"};function u(e,t,s,i,u,d){return(0,l.uX)(),(0,l.CE)("div",{class:(0,o.C4)(["power-switch",{disabled:s.disabled}]),onClick:t[0]||(t[0]=(0,n.D$)(((...e)=>d.onInput&&d.onInput(...e)),["stop"]))},[(0,l.Lk)("input",{type:"checkbox",checked:s.value,id:s.id},null,8,a),(0,l.Lk)("label",null,[c,(0,l.Lk)("span",r,[(0,l.RG)(e.$slots,"default",{},void 0,!0)])])],2)}var d={name:"ToggleSwitch",emits:["input"],props:{id:{type:String},value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{onInput(e){if(this.disabled)return!1;this.$emit("input",e)}}},h=s(6262);const p=(0,h.A)(d,[["render",u],["__scopeId","data-v-eff375b6"]]);var v=p},6564:function(e,t,s){s.r(t),s.d(t,{default:function(){return as}});var l=s(641);const o={class:"music-snapcast-container"},n={class:"info"},i={class:"info"},a={class:"info"};function c(e,t,s,c,r,u){const d=(0,l.g2)("Loading"),h=(0,l.g2)("ModalHost"),p=(0,l.g2)("Modal"),v=(0,l.g2)("ModalGroup"),m=(0,l.g2)("ModalClient"),g=(0,l.g2)("Host");return(0,l.uX)(),(0,l.CE)("div",o,[e.loading?((0,l.uX)(),(0,l.Wv)(d,{key:0})):(0,l.Q3)("",!0),(0,l.Lk)("div",n,[(0,l.bF)(p,{title:"Server info",ref:"modalHost"},{default:(0,l.k6)((()=>[e.selectedHost?((0,l.uX)(),(0,l.Wv)(h,{key:0,info:e.hosts[e.selectedHost]},null,8,["info"])):(0,l.Q3)("",!0)])),_:1},512)]),(0,l.Lk)("div",i,[(0,l.bF)(p,{title:"Group info",ref:"modalGroup"},{default:(0,l.k6)((()=>[e.selectedGroup?((0,l.uX)(),(0,l.Wv)(v,{key:0,group:e.hosts[e.selectedHost].groups[e.selectedGroup],streams:e.hosts[e.selectedHost].streams,clients:u.clientsByHost[e.selectedHost],loading:e.loading,onAddClient:u.addClientToGroup,onRemoveClient:u.removeClientFromGroup,onStreamChange:u.streamChange,onRenameGroup:t[0]||(t[0]=e=>u.renameGroup(e))},null,8,["group","streams","clients","loading","onAddClient","onRemoveClient","onStreamChange"])):(0,l.Q3)("",!0)])),_:1},512)]),(0,l.Lk)("div",a,[(0,l.bF)(p,{title:"Client info",ref:"modalClient"},{default:(0,l.k6)((()=>[e.selectedClient?((0,l.uX)(),(0,l.Wv)(m,{key:0,client:e.hosts[e.selectedHost].groups[e.selectedGroup].clients[e.selectedClient],loading:e.loading,onRemoveClient:u.removeClient,onRenameClient:t[1]||(t[1]=e=>u.renameClient(e))},null,8,["client","loading","onRemoveClient"])):(0,l.Q3)("",!0)])),_:1},512)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.hosts,((e,s)=>((0,l.uX)(),(0,l.Wv)(g,{key:s,server:e.server,streams:e.streams,groups:e.groups,onGroupMuteToggle:t[2]||(t[2]=e=>u.groupMute(e)),onClientMuteToggle:t[3]||(t[3]=e=>u.clientMute(e)),onClientVolumeChange:t[4]||(t[4]=e=>u.clientSetVolume(e)),onModalShow:t[5]||(t[5]=e=>u.onModalShow(e))},null,8,["server","streams","groups"])))),128))])}var r=s(9513),u=s(2002),d=s(33);const h=e=>((0,l.Qi)("data-v-7bce419a"),e=e(),(0,l.jt)(),e),p={class:"host"},v={class:"header"},m=h((()=>(0,l.Lk)("i",{class:"icon fa fa-server"},null,-1))),g={class:"col-2 buttons pull-right"},C={key:0,class:"group-container"};function k(e,t,s,o,n,i){const a=(0,l.g2)("Group");return(0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("div",v,[(0,l.Lk)("div",{class:"col-10 name",onClick:t[0]||(t[0]=t=>e.$emit("modal-show",{type:"host",host:s.server.host.name}))},[m,(0,l.eW)(" "+(0,d.v_)(s.server.host.name),1)]),(0,l.Lk)("div",g,[(0,l.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>n.collapsed=!n.collapsed)},[(0,l.Lk)("i",{class:(0,d.C4)(["icon fa",{"fa-chevron-up":!n.collapsed,"fa-chevron-down":n.collapsed}])},null,2)])])]),n.collapsed?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",C,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.groups,((o,n)=>((0,l.uX)(),(0,l.Wv)(a,{key:n,id:o.id,name:o.name,server:s.server.host,muted:o.muted,clients:o.clients,stream:s.streams[o.stream_id],onModalShow:t[2]||(t[2]=t=>e.$emit("modal-show",t)),onGroupMuteToggle:t[3]||(t[3]=t=>e.$emit("group-mute-toggle",t)),onClientMuteToggle:t[4]||(t[4]=t=>e.$emit("client-mute-toggle",t)),onClientVolumeChange:t[5]||(t[5]=t=>e.$emit("client-volume-change",t))},null,8,["id","name","server","muted","clients","stream"])))),128))]))])}const f={class:"group"},y={class:"head"},b={class:"col-2 switch pull-right"},L={class:"body"};function w(e,t,s,o,n,i){const a=(0,l.g2)("ToggleSwitch"),c=(0,l.g2)("Client");return(0,l.uX)(),(0,l.CE)("div",f,[(0,l.Lk)("div",y,[(0,l.Lk)("div",{class:"col-10 name",onClick:t[0]||(t[0]=t=>e.$emit("modal-show",{type:"group",group:s.id,host:s.server.name}))},[(0,l.Lk)("i",{class:(0,d.C4)(["icon fa",{"fa-play":"playing"===s.stream.status,"fa-stop":"playing"!==s.stream.status}])},null,2),(0,l.eW)(" "+(0,d.v_)(s.name||s.stream.id||s.id),1)]),(0,l.Lk)("div",b,[(0,l.bF)(a,{value:!s.muted,onInput:t[1]||(t[1]=t=>e.$emit("group-mute-toggle",{host:s.server.name,group:s.id,muted:!s.muted}))},null,8,["value"])])]),(0,l.Lk)("div",L,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.clients,(o=>((0,l.uX)(),(0,l.Wv)(c,{key:o.id,config:o.config,connected:o.connected,server:s.server,host:o.host,groupId:s.id,id:o.id,lastSeen:o.lastSeen,snapclient:o.snapclient,onModalShow:t[2]||(t[2]=t=>e.$emit("modal-show",t)),onVolumeChange:t[3]||(t[3]=t=>e.$emit("client-volume-change",t)),onMuteToggle:t[4]||(t[4]=t=>e.$emit("client-mute-toggle",t))},null,8,["config","connected","server","host","groupId","id","lastSeen","snapclient"])))),128))])])}var _=s(11);const x=["textContent"],H={class:"col-s-12 col-m-9 controls"},E={class:"col-10 slider-container"},S={class:"col-2 switch pull-right"};function X(e,t,s,o,n,i){const a=(0,l.g2)("Slider"),c=(0,l.g2)("ToggleSwitch");return(0,l.uX)(),(0,l.CE)("div",{class:(0,d.C4)(["row client",{offline:!s.connected}])},[(0,l.Lk)("div",{class:"col-s-12 col-m-3 name",textContent:(0,d.v_)(s.config.name?.length?s.config.name:s.host.name),onClick:t[0]||(t[0]=t=>e.$emit("modal-show",{type:"client",client:s.id,group:s.groupId,host:s.server.name}))},null,8,x),(0,l.Lk)("div",H,[(0,l.Lk)("div",E,[(0,l.bF)(a,{range:[0,100],value:s.config.volume.percent,onChange:t[1]||(t[1]=t=>e.$emit("volume-change",{host:s.server.name,client:s.id,volume:t.target.value}))},null,8,["value"])]),(0,l.Lk)("div",S,[(0,l.bF)(c,{value:!s.config.volume.muted,onInput:t[2]||(t[2]=t=>e.$emit("mute-toggle",{host:s.server.name,client:s.id,muted:!s.config.volume.muted}))},null,8,["value"])])])],2)}var G=s(1808),Q={name:"Client",components:{Slider:G.A,ToggleSwitch:_.A},emits:["volume-change","mute-toggle","modal-show"],props:{config:{type:Object,required:!0},connected:{type:Boolean,default:!1},host:{type:Object,required:!0},id:{type:String,required:!0},groupId:{type:String,required:!0},lastSeen:{type:Object,default:()=>{}},snapclient:{type:Object,required:!0},server:{type:Object,required:!0}}},M=s(6262);const j=(0,M.A)(Q,[["render",X],["__scopeId","data-v-f5d567e4"]]);var I=j,$={name:"Group",components:{Client:I,ToggleSwitch:_.A},emits:["group-mute-toggle","modal-show","client-volume-change","client-mute-toggle"],props:{id:{type:String},clients:{type:Object,default:()=>{}},muted:{type:Boolean},name:{type:String},stream:{type:Object},server:{type:Object}}};const A=(0,M.A)($,[["render",w],["__scopeId","data-v-748fccb4"]]);var O=A,q={name:"Host",emits:["modal-show","group-mute-toggle","client-mute-toggle","client-volume-change"],components:{Group:O},props:{groups:{type:Object,default:()=>{}},server:{type:Object,default:()=>{}},streams:{type:Object,default:()=>{}}},data(){return{collapsed:!1}}};const R=(0,M.A)(q,[["render",k],["__scopeId","data-v-7bce419a"]]);var V=R;const B={class:"info"},F={key:0,class:"row"},T=(0,l.Lk)("div",{class:"label col-3"},"IP Address",-1),W=["textContent"],U={key:1,class:"row"},N=(0,l.Lk)("div",{class:"label col-3"},"MAC Address",-1),P=["textContent"],D={key:2,class:"row"},K=(0,l.Lk)("div",{class:"label col-3"},"Name",-1),z=["textContent"],J={key:3,class:"row"},Y=(0,l.Lk)("div",{class:"label col-3"},"Port",-1),Z=["textContent"],ee={key:4,class:"row"},te=(0,l.Lk)("div",{class:"label col-3"},"OS",-1),se=["textContent"],le={key:5,class:"row"},oe=(0,l.Lk)("div",{class:"label col-3"},"Architecture",-1),ne=["textContent"],ie={key:6,class:"row"},ae=(0,l.Lk)("div",{class:"label col-3"},"Server name",-1),ce=["textContent"],re={key:7,class:"row"},ue=(0,l.Lk)("div",{class:"label col-3"},"Server version",-1),de=["textContent"],he={key:8,class:"row"},pe=(0,l.Lk)("div",{class:"label col-3"},"Protocol version",-1),ve=["textContent"],me={key:9,class:"row"},ge=(0,l.Lk)("div",{class:"label col-3"},"Control protocol version",-1),Ce=["textContent"];function ke(e,t,s,o,n,i){return(0,l.uX)(),(0,l.CE)("div",B,[s.info?.server?.host?.ip?.length?((0,l.uX)(),(0,l.CE)("div",F,[T,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.ip)},null,8,W)])):(0,l.Q3)("",!0),s.info?.server?.host?.mac?.length?((0,l.uX)(),(0,l.CE)("div",U,[N,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.mac)},null,8,P)])):(0,l.Q3)("",!0),s.info?.server?.host?.name?.length?((0,l.uX)(),(0,l.CE)("div",D,[K,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.name)},null,8,z)])):(0,l.Q3)("",!0),s.info?.server?.host?.port?((0,l.uX)(),(0,l.CE)("div",J,[Y,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.port)},null,8,Z)])):(0,l.Q3)("",!0),s.info?.server?.host?.os?.length?((0,l.uX)(),(0,l.CE)("div",ee,[te,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.os)},null,8,se)])):(0,l.Q3)("",!0),s.info?.server?.host?.arch?.length?((0,l.uX)(),(0,l.CE)("div",le,[oe,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.arch)},null,8,ne)])):(0,l.Q3)("",!0),s.info?.server?.snapserver?.name?.length?((0,l.uX)(),(0,l.CE)("div",ie,[ae,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.snapserver.name)},null,8,ce)])):(0,l.Q3)("",!0),s.info?.server?.snapserver?.version?.length?((0,l.uX)(),(0,l.CE)("div",re,[ue,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.snapserver.version)},null,8,de)])):(0,l.Q3)("",!0),s.info?.server?.snapserver?.protocolVersion?((0,l.uX)(),(0,l.CE)("div",he,[pe,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.snapserver.protocolVersion)},null,8,ve)])):(0,l.Q3)("",!0),s.info?.server?.snapserver?.controlProtocolVersion?((0,l.uX)(),(0,l.CE)("div",me,[ge,(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.snapserver.controlProtocolVersion)},null,8,Ce)])):(0,l.Q3)("",!0)])}var fe={name:"HostModal",props:{info:{type:Object,default:()=>{}}}};const ye=(0,M.A)(fe,[["render",ke]]);var be=ye;const Le=e=>((0,l.Qi)("data-v-353ffa58"),e=e(),(0,l.jt)(),e),we={class:"info"},_e={class:"section name"},xe=Le((()=>(0,l.Lk)("div",{class:"title"},"Name",-1))),He={class:"row"},Ee={class:"name-value"},Se=["textContent"],Xe=Le((()=>(0,l.Lk)("i",{class:"fa fa-edit"},null,-1))),Ge=[Xe],Qe={key:0,class:"section clients"},Me=Le((()=>(0,l.Lk)("div",{class:"title"},"Clients",-1))),je=["for"],Ie=["id","value","checked","disabled","onInput"],$e={key:1,class:"section streams"},Ae=Le((()=>(0,l.Lk)("div",{class:"title"},"Stream",-1))),Oe={class:"row"},qe=Le((()=>(0,l.Lk)("div",{class:"label col-3"},"ID",-1))),Re={class:"value col-9"},Ve=["textContent","name","value","disabled","selected"],Be={key:0,class:"row"},Fe=Le((()=>(0,l.Lk)("div",{class:"label col-m-3"},"Status",-1))),Te=["textContent"],We={key:1,class:"row"},Ue=Le((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Host",-1))),Ne=["textContent"],Pe={key:2,class:"row"},De=Le((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Path",-1))),Ke=["textContent"],ze={key:3,class:"row"},Je=Le((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"URI",-1))),Ye=["textContent"];function Ze(e,t,s,o,n,i){return(0,l.uX)(),(0,l.CE)("div",we,[(0,l.Lk)("div",_e,[xe,(0,l.Lk)("div",He,[(0,l.Lk)("div",Ee,[(0,l.Lk)("span",{class:"name",textContent:(0,d.v_)(s.group.name?.length?s.group.name:"default")},null,8,Se),(0,l.Lk)("button",{class:"pull-right",title:"Rename",onClick:t[0]||(t[0]=(...e)=>i.renameGroup&&i.renameGroup(...e))},Ge)])])]),Object.keys(s.group?.clients||{}).length>0?((0,l.uX)(),(0,l.CE)("div",Qe,[Me,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.clients||{},((t,o)=>((0,l.uX)(),(0,l.CE)("div",{class:"row",ref_for:!0,ref:"groupClients",key:o},[(0,l.Lk)("label",{class:"client",for:"snapcast-client-"+t.id},[(0,l.Lk)("input",{type:"checkbox",class:"client",id:`snapcast-client-${t.id}`,value:t.id,checked:t.id in s.group.clients,disabled:s.loading,onInput:s=>e.$emit(s.target.checked?"add-client":"remove-client",t.id)},null,40,Ie),(0,l.eW)(" "+(0,d.v_)(t.host.name),1)],8,je)])))),128))])):(0,l.Q3)("",!0),s.group?.stream_id?((0,l.uX)(),(0,l.CE)("div",$e,[Ae,(0,l.Lk)("div",Oe,[qe,(0,l.Lk)("div",Re,[(0,l.Lk)("label",null,[(0,l.Lk)("select",{ref:"streamSelect",onChange:t[1]||(t[1]=t=>e.$emit("stream-change",t.target.value))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.streams,((e,t)=>((0,l.uX)(),(0,l.CE)("option",{key:t,textContent:(0,d.v_)(s.streams[s.group.stream_id].id),name:e.id,value:e.id,disabled:s.loading,selected:e.id===s.group.stream_id},null,8,Ve)))),128))],544)])])]),s.streams?.[s.group.stream_id]?.status?((0,l.uX)(),(0,l.CE)("div",Be,[Fe,(0,l.Lk)("div",{class:"value col-m-9",textContent:(0,d.v_)(s.streams[s.group.stream_id].status)},null,8,Te)])):(0,l.Q3)("",!0),s.streams?.[s.group?.stream_id]?.uri?.host?((0,l.uX)(),(0,l.CE)("div",We,[Ue,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.streams[s.group.stream_id].uri.host)},null,8,Ne)])):(0,l.Q3)("",!0),s.streams?.[s.group?.stream_id]?.uri?.path?((0,l.uX)(),(0,l.CE)("div",Pe,[De,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.streams[s.group.stream_id].uri.path)},null,8,Ke)])):(0,l.Q3)("",!0),s.streams?.[s.group?.stream_id]?.uri?.raw?((0,l.uX)(),(0,l.CE)("div",ze,[Je,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.streams[s.group.stream_id].uri.raw)},null,8,Ye)])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])}var et={name:"GroupModal",emits:["add-client","remove-client","stream-change","rename-group"],props:{loading:{type:Boolean,default:!1},group:{type:Object},clients:{type:Object},streams:{type:Object}},methods:{renameGroup(){const e=(prompt("New group name",this.group.name)||"").trim();e?.length&&this.$emit("rename-group",e)}}};const tt=(0,M.A)(et,[["render",Ze],["__scopeId","data-v-353ffa58"]]);var st=tt;const lt=e=>((0,l.Qi)("data-v-0e55ac54"),e=e(),(0,l.jt)(),e),ot={class:"client-modal"},nt={key:0,class:"info"},it={class:"row"},at=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"ID",-1))),ct=["textContent"],rt={key:0,class:"row"},ut=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Name",-1))),dt={class:"value col-s-12 col-m-9"},ht=["textContent"],pt=lt((()=>(0,l.Lk)("i",{class:"fa fa-edit"},null,-1))),vt=[pt],mt={class:"row"},gt=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Connected",-1))),Ct=["textContent"],kt={class:"row"},ft=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Volume",-1))),yt={class:"value col-s-12 col-m-9"},bt={class:"row"},Lt=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Muted",-1))),wt=["textContent"],_t={class:"row"},xt=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Latency",-1))),Ht=["textContent"],Et={key:1,class:"row"},St=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"IP Address",-1))),Xt=["textContent"],Gt={key:2,class:"row"},Qt=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"MAC Address",-1))),Mt=["textContent"],jt={key:3,class:"row"},It=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"OS",-1))),$t=["textContent"],At={key:4,class:"row"},Ot=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Architecture",-1))),qt=["textContent"],Rt={class:"row"},Vt=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Client name",-1))),Bt=["textContent"],Ft={class:"row"},Tt=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Client version",-1))),Wt=["textContent"],Ut={class:"row"},Nt=lt((()=>(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Protocol version",-1))),Pt=["textContent"],Dt={class:"buttons"},Kt={class:"row"},zt=["disabled"],Jt=lt((()=>(0,l.Lk)("i",{class:"fas fa-trash"},null,-1))),Yt=lt((()=>(0,l.Lk)("span",{class:"name"},"Remove client",-1))),Zt=[Jt,Yt];function es(e,t,s,o,n,i){return(0,l.uX)(),(0,l.CE)("div",ot,[s.client?((0,l.uX)(),(0,l.CE)("div",nt,[(0,l.Lk)("div",it,[at,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.id)},null,8,ct)]),s.client.config?.name?.length||s.client.host?.name?((0,l.uX)(),(0,l.CE)("div",rt,[ut,(0,l.Lk)("div",dt,[(0,l.Lk)("span",{class:"name",textContent:(0,d.v_)(s.client.config?.name||s.client.host?.name)},null,8,ht),(0,l.Lk)("button",{title:"Rename",onClick:t[0]||(t[0]=(...e)=>i.renameClient&&i.renameClient(...e))},vt)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",mt,[gt,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.connected)},null,8,Ct)]),(0,l.Lk)("div",kt,[ft,(0,l.Lk)("div",yt,(0,d.v_)(s.client.config.volume.percent)+"%",1)]),(0,l.Lk)("div",bt,[Lt,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.config.volume.muted)},null,8,wt)]),(0,l.Lk)("div",_t,[xt,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.config.latency)},null,8,Ht)]),s.client.host.ip&&s.client.host.ip.length?((0,l.uX)(),(0,l.CE)("div",Et,[St,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.host.ip)},null,8,Xt)])):(0,l.Q3)("",!0),s.client.host.mac&&s.client.host.mac.length?((0,l.uX)(),(0,l.CE)("div",Gt,[Qt,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.host.mac)},null,8,Mt)])):(0,l.Q3)("",!0),s.client.host.os&&s.client.host.os.length?((0,l.uX)(),(0,l.CE)("div",jt,[It,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.host.os)},null,8,$t)])):(0,l.Q3)("",!0),s.client.host.arch&&s.client.host.arch.length?((0,l.uX)(),(0,l.CE)("div",At,[Ot,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.host.arch)},null,8,qt)])):(0,l.Q3)("",!0),(0,l.Lk)("div",Rt,[Vt,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.snapclient.name)},null,8,Bt)]),(0,l.Lk)("div",Ft,[Tt,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.snapclient.version)},null,8,Wt)]),(0,l.Lk)("div",Ut,[Nt,(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.snapclient.protocolVersion)},null,8,Pt)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Dt,[(0,l.Lk)("div",Kt,[(0,l.Lk)("button",{type:"button",disabled:s.loading,onClick:t[1]||(t[1]=(...e)=>i.removeClient&&i.removeClient(...e))},Zt,8,zt)])])])}var ts={name:"ClientModal",emits:["remove-client","rename-client"],props:{loading:{type:Boolean,default:!1},client:{type:Object}},methods:{removeClient(){window.confirm("Are you sure that you want to remove this client?")&&this.$emit("remove-client")},renameClient(){const e=(window.prompt("New client name",this.client.config.name?.length?this.client.config.name:this.client.host.name)||"").trim();e.length&&this.$emit("rename-client",e)}}};const ss=(0,M.A)(ts,[["render",es],["__scopeId","data-v-0e55ac54"]]);var ls=ss,os=s(9828),ns={name:"MusicSnapcast",mixins:[u.A],components:{Loading:os.A,Modal:r.A,Host:V,ModalHost:be,ModalGroup:st,ModalClient:ls},data:function(){return{loading:!1,hosts:{},ports:{},selectedHost:null,selectedGroup:null,selectedClient:null}},computed:{clientsByHost(){return Object.entries(this.hosts).reduce(((e,[t,s])=>(e[t]={},Object.values(s.groups).forEach((s=>{Object.entries(s.clients).forEach((([s,l])=>{e[t][s]=l}))})),e)),{})}},methods:{parseServerStatus(e){e.server=e.server||{host:e.server.host||{name:e.host}},e.server.host.port=this.ports[e.host],this.hosts[e.server.host.name]={...e,groups:e.groups.map((e=>({...e,clients:e.clients.reduce(((e,t)=>(e[t.id]=t,e)),{})}))).reduce(((e,t)=>(e[t.id]=t,e)),{}),streams:e.streams.reduce(((e,t)=>(e[t.id]=t,e)),{})}},async refresh(){this.loading=!0;try{const e=await this.request("music.snapcast.status");this.hosts={},e.forEach((e=>{this.ports[e.host]=e.port,this.parseServerStatus(e)}))}finally{this.loading=!1}},async refreshHost(e){e in this.hosts&&this.parseServerStatus(await this.request("music.snapcast.status",{host:e,port:this.ports[e]}))},async addClientToGroup(e){this.loading=!0;try{if(!this.selectedHost||!this.selectedGroup||!(e in this.clientsByHost[this.selectedHost]))return;const t=[...new Set([e,...Object.keys(this.hosts[this.selectedHost].groups[this.selectedGroup].clients)])];await this.request("music.snapcast.group_set_clients",{host:this.selectedHost,port:this.ports[this.selectedHost],group:this.selectedGroup,clients:t}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async removeClientFromGroup(e){this.loading=!0;try{if(!this.selectedHost||!this.selectedGroup||!(e in this.clientsByHost[this.selectedHost]))return;const t=new Set([...Object.keys(this.hosts[this.selectedHost].groups[this.selectedGroup].clients)]);if(!t.has(e))return;t.delete(e),await this.request("music.snapcast.group_set_clients",{host:this.selectedHost,port:this.ports[this.selectedHost],group:this.selectedGroup,clients:[...t]}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async renameGroup(e){this.loading=!0;try{if(!this.selectedHost||!this.selectedGroup)return;await this.request("music.snapcast.set_group_name",{host:this.selectedHost,port:this.ports[this.selectedHost],group:this.selectedGroup,name:e}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async renameClient(e){this.loading=!0;try{if(!this.selectedHost||!this.selectedClient)return;await this.request("music.snapcast.set_client_name",{host:this.selectedHost,port:this.ports[this.selectedHost],client:this.selectedClient,name:e}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async removeClient(){this.loading=!0;try{if(!this.selectedHost||!this.selectedClient)return;await this.request("music.snapcast.delete_client",{host:this.selectedHost,port:this.ports[this.selectedHost],client:this.selectedClient}),this.$refs.modalClient.close(),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async streamChange(e){this.loading=!0;try{await this.request("music.snapcast.group_set_stream",{host:this.selectedHost,port:this.ports[this.selectedHost],group:this.selectedGroup,stream_id:e}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},onClientUpdate(e){Object.keys(this.hosts[e.host].groups).forEach((t=>{e.client.id in this.hosts[e.host].groups[t].clients&&(this.hosts[e.host].groups[t].clients[e.client.id]=e.client)}))},onGroupStreamChange(e){this.hosts[e.host].groups[e.group].stream_id=e.stream},onServerUpdate(e){this.parseServerStatus(e.server)},onStreamUpdate(e){this.hosts[e.host].streams[e.stream.id]=e.stream},onClientVolumeChange(e){Object.keys(this.hosts[e.host].groups).forEach((t=>{e.client in this.hosts[e.host].groups[t].clients&&(null!=e.volume&&(this.hosts[e.host].groups[t].clients[e.client].config.volume.percent=e.volume),null!=e.muted&&(this.hosts[e.host].groups[t].clients[e.client].config.volume.muted=e.muted))}))},onGroupMuteChange(e){this.hosts[e.host].groups[e.group].muted=e.muted},modalShow(e){switch(e.type){case"host":this.modal[e.type].info=this.hosts[e.host];break;case"group":this.modal[e.type].info.server=this.hosts[e.host].server,this.modal[e.type].info.group=this.hosts[e.host].groups[e.group],this.modal[e.type].info.streams=this.hosts[e.host].streams,this.modal[e.type].info.clients={};for(const t of Object.values(this.hosts[e.host].groups))for(const s of Object.values(t.clients))this.modal[e.type].info.clients[s.id]=s;break;case"client":this.modal[e.type].info=this.hosts[e.host].groups[e.group].clients[e.client],this.modal[e.type].info.server=this.hosts[e.host].server;break}this.modal[e.type].visible=!0},async groupMute(e){await this.request("music.snapcast.mute",{group:e.group,host:e.host,port:this.ports[e.host],mute:e.muted}),await this.refreshHost(e.host)},async clientMute(e){await this.request("music.snapcast.mute",{client:e.client,host:e.host,port:this.ports[e.host],mute:e.muted}),await this.refreshHost(e.host)},async clientSetVolume(e){await this.request("music.snapcast.volume",{client:e.client,host:e.host,port:this.ports[e.host],volume:e.volume}),await this.refreshHost(e.host)},onModalShow(e){switch(e.type){case"host":this.selectedHost=e.host,this.$refs.modalHost.show();break;case"group":this.selectedHost=e.host,this.selectedGroup=e.group,this.$refs.modalGroup.show();break;case"client":this.selectedHost=e.host,this.selectedGroup=e.group,this.selectedClient=e.client,this.$refs.modalClient.show();break}}},mounted(){this.refresh(),this.subscribe(this.onClientUpdate,null,"platypush.message.event.music.snapcast.ClientConnectedEvent","platypush.message.event.music.snapcast.ClientDisconnectedEvent","platypush.message.event.music.snapcast.ClientNameChangeEvent"),this.subscribe(this.onGroupStreamChange,null,"platypush.message.event.music.snapcast.GroupStreamChangeEvent"),this.subscribe(this.onServerUpdate,null,"platypush.message.event.music.snapcast.ServerUpdateEvent"),this.subscribe(this.onStreamUpdate,null,"platypush.message.event.music.snapcast.StreamUpdateEvent"),this.subscribe(this.onClientVolumeChange,null,"platypush.message.event.music.snapcast.ClientVolumeChangeEvent"),this.subscribe(this.onGroupMuteChange,null,"platypush.message.event.music.snapcast.GroupMuteChangeEvent")}};const is=(0,M.A)(ns,[["render",c],["__scopeId","data-v-27dfcbf6"]]);var as=is}}]);
//# sourceMappingURL=6564.6d7a4cd3.js.map