"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[1433,8411,2012,47],{6561:function(t,e,l){l.d(e,{A:function(){return d}});var i=l(641),s=l(33);const a={class:"no-items-container"};function o(t,e,l,o,n,c){return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",{class:(0,s.C4)(["no-items fade-in",{shadow:l.withShadow}])},[(0,i.RG)(t.$slots,"default",{},void 0,!0)],2)])}var n={name:"NoItems",props:{withShadow:{type:Boolean,default:!0}}},c=l(6262);const r=(0,c.A)(n,[["render",o],["__scopeId","data-v-4856c4d7"]]);var d=r},8411:function(t,e,l){l.r(e),l.d(e,{default:function(){return b}});var i=l(641),s=l(33),a=l(3751);const o={class:"collections items"},n=["onClick"],c={class:"image"},r=["src","alt","onError"],d={key:0,class:"name"},m={key:1,class:"float bottom-right"},u={key:0,class:"add-playlist floating-btn-container"},y={key:1,class:"add-playlist-modal"},h={class:"row buttons"};function p(t,e,l,p,f,g){const v=(0,i.g2)("FloatingButton"),k=(0,i.g2)("Modal");return(0,i.uX)(),(0,i.CE)("div",{class:(0,s.C4)(["collections index",{"is-root":!l.parentId}])},[(0,i.Lk)("div",o,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(g.filteredItems,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"collection item",key:e.id,onClick:l=>t.$emit("select",e)},[(0,i.Lk)("div",c,[f.fallbackImageCollections[e.id]?((0,i.uX)(),(0,i.CE)("i",{key:1,class:(0,s.C4)(g.collectionsIcons[e.type]??"fas fa-folder")},null,2)):((0,i.uX)(),(0,i.CE)("img",{key:0,src:e.image,alt:e.name,onError:t=>g.onImageError(e)},null,40,r))]),f.fallbackImageCollections[e.id]||l.parentId?((0,i.uX)(),(0,i.CE)("div",d,[(0,i.Lk)("h2",null,(0,s.v_)(e.name),1)])):(0,i.Q3)("",!0),e.year?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.Lk)("span",null,(0,s.v_)(e.year),1)])):(0,i.Q3)("",!0)],8,n)))),128))]),g.isPlaylistsCollection?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(v,{"icon-class":"fa fa-plus",title:"Create Playlist",disabled:f.loading,onClick:e[0]||(e[0]=t=>f.showNewPlaylist=!0)},null,8,["disabled"])])):(0,i.Q3)("",!0),f.showNewPlaylist?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.bF)(k,{title:"Create Playlist",visible:!0,onClose:e[3]||(e[3]=t=>f.showNewPlaylist=!1)},{default:(0,i.k6)((()=>[(0,i.Lk)("form",{class:"modal-body",onSubmit:e[2]||(e[2]=(0,a.D$)(((...t)=>g.createPlaylist&&g.createPlaylist(...t)),["prevent"]))},[e[5]||(e[5]=(0,i.Lk)("div",{class:"row"},[(0,i.Lk)("label",{for:"newPlaylistName"},"Playlist Name"),(0,i.Lk)("input",{name:"name",type:"text",id:"newPlaylistName",placeholder:"Playlist Name",required:""})],-1)),e[6]||(e[6]=(0,i.Lk)("div",{class:"row"},[(0,i.Lk)("label",{for:"newPlaylistPublic"},"Public"),(0,i.Lk)("input",{name:"public",type:"checkbox",checked:"",id:"newPlaylistPublic"})],-1)),(0,i.Lk)("div",h,[(0,i.Lk)("button",{type:"button",onClick:e[1]||(e[1]=t=>f.showNewPlaylist=!1)},"Cancel"),e[4]||(e[4]=(0,i.Lk)("button",{type:"submit"},"Create",-1))])],32)])),_:1})])):(0,i.Q3)("",!0)],2)}var f=l(656),g=l(9513),v=l(2002),k={mixins:[v.A],emits:["refresh","select"],components:{FloatingButton:f.A,Modal:g.A},props:{collection:{type:Object},filter:{type:String},items:{type:Array,default:()=>[]},batchItems:{type:Number,default:100},parentId:{type:String}},data(){return{fallbackImageCollections:{},loading:!1,maxResultIndex:this.batchItems,showNewPlaylist:!1}},computed:{collectionsIcons(){return{books:"fas fa-book",homevideos:"fas fa-video",movies:"fas fa-film",music:"fas fa-music",playlists:"fas fa-list",photos:"fas fa-image",series:"fas fa-tv"}},filteredItems(){return Object.values(this.items).filter((t=>!this.filter||t.name.toLowerCase().includes(this.filter.toLowerCase()))).sort(((t,e)=>"album"===t.item_type&&"album"===e.item_type&&t.year&&e.year&&t.year!==e.year?e.year-t.year:t.name.localeCompare(e.name))).slice(0,this.maxResultIndex)},isPlaylistsCollection(){return"playlists"===this.collection?.collection_type}},methods:{async createPlaylist(t){const e=new FormData(t.target);await this.request("media.jellyfin.create_playlist",{name:e.get("name"),public:"on"===e.get("public")}),this.$emit("refresh")},onImageError(t){this.fallbackImageCollections[t.id]=!0},onScroll(t){const e=t.target;if(!e)return;const l=e.scrollHeight-e.scrollTop<=e.clientHeight+150;l&&(this.maxResultIndex+=this.batchItems)}},watch:{showNewPlaylist(t){t&&this.$nextTick((()=>this.$el.querySelector('input[name="name"]').focus()))}},mounted(){this.$el.parentElement?.addEventListener("scroll",this.onScroll)},unmounted(){this.$el.parentElement?.removeEventListener("scroll",this.onScroll)}},w=l(6262);const C=(0,w.A)(k,[["render",p],["__scopeId","data-v-2b3713e6"]]);var b=C},2012:function(t,e,l){l.r(e),l.d(e,{default:function(){return o}});var i=l(47),s={mixins:[i["default"]],emits:["add-to-playlist","back","download","play","play-with-opts","select","view"],props:{collection:{type:Object},path:{type:Array,default:()=>[]}},data(){return{items:[],loading_:!1,selectedResult:null,sort:{attr:"title",desc:!1}}},computed:{isLoading(){return this.loading_||this.loading},sortedItems(){return this.items?"playlist"===this.collection?.item_type?this.items:[...this.items].sort(((t,e)=>{const l=this.sort.attr,i=this.sort.desc;let s=t[l],a=e[l];return"number"===typeof s||"number"===typeof a?(s=s||0,a=a||0,i?a-s:s-a):(s=(s||"").toString().toLowerCase(),a=(a||"").toString().toLowerCase(),i?a.localeCompare(s):s.localeCompare(a))})).map((t=>({item_type:t.type,...t,type:"jellyfin"}))):[]}},methods:{async refresh(){const t=this.collection?.name;if(t?.length){this.loading_=!0;try{this.items=await this.request("media.jellyfin.search",{collection:t,limit:1e3})}finally{this.loading_=!1}}}},watch:{collection(){this.refresh()}}};const a=s;var o=a},1433:function(t,e,l){l.r(e),l.d(e,{default:function(){return V}});var i=l(641),s=l(33),a=l(3751);const o={class:"music index"},n={key:0,class:"artist header"},c={key:0,class:"image"},r=["src"],d={class:"info"},m=["textContent"],u={key:1,class:"album header"},y={key:0,class:"image"},h=["src"],p={class:"info"},f=["textContent"],g={key:0,class:"artist"},v=["textContent"],k=["textContent"],w={class:"details"},C={key:0,class:"row"},b=["textContent"],_={key:1,class:"row"},L=["textContent"],I={key:2,class:"playlist header"},A={key:0,class:"image"},x=["src"],P={class:"info"},E=["textContent"],X={class:"details"},$={key:0,class:"row"},N=["textContent"],Q={class:"actions"},j={key:6,class:"collection-modal"};function D(t,e,l,D,F,S){const q=(0,i.g2)("Loading"),R=(0,i.g2)("DropdownItem"),M=(0,i.g2)("Dropdown"),U=(0,i.g2)("NoItems"),W=(0,i.g2)("Collections"),B=(0,i.g2)("Results"),O=(0,i.g2)("Info"),T=(0,i.g2)("Modal"),H=(0,i.g2)("ConfirmDialog");return(0,i.uX)(),(0,i.CE)("div",o,[t.isLoading?((0,i.uX)(),(0,i.Wv)(q,{key:0})):(0,i.Q3)("",!0),(0,i.Lk)("main",{class:(0,s.C4)(S.containerClass)},["artist"===S.view?((0,i.uX)(),(0,i.CE)("div",n,[t.collection.image?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("img",{src:t.collection.image},null,8,r)])):(0,i.Q3)("",!0),(0,i.Lk)("div",d,[(0,i.Lk)("h1",{textContent:(0,s.v_)(t.collection.name)},null,8,m)])])):"album"===S.view?((0,i.uX)(),(0,i.CE)("div",u,[t.collection.image?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("img",{src:t.collection.image},null,8,h)])):(0,i.Q3)("",!0),(0,i.Lk)("div",p,[(0,i.Lk)("h1",{textContent:(0,s.v_)(t.collection.name)},null,8,f),S.displayedArtist?.id?((0,i.uX)(),(0,i.CE)("div",g,[S.displayedArtist?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"#",textContent:(0,s.v_)(S.displayedArtist.name),onClick:e[0]||(e[0]=(0,a.D$)(((...t)=>S.selectArtist&&S.selectArtist(...t)),["prevent","stop"]))},null,8,v)):((0,i.uX)(),(0,i.CE)("span",{key:1,textContent:(0,s.v_)(S.displayedArtist.name)},null,8,k))])):(0,i.Q3)("",!0),(0,i.Lk)("div",w,[t.collection.year?((0,i.uX)(),(0,i.CE)("div",C,[e[12]||(e[12]=(0,i.Lk)("span",{class:"label"},"Year:",-1)),(0,i.Lk)("span",{class:"value",textContent:(0,s.v_)(t.collection.year)},null,8,b)])):(0,i.Q3)("",!0),t.collection.duration?((0,i.uX)(),(0,i.CE)("div",_,[e[13]||(e[13]=(0,i.Lk)("span",{class:"label"},"Duration:",-1)),(0,i.Lk)("span",{class:"value",textContent:(0,s.v_)(t.formatDuration(t.collection.duration,!0))},null,8,L)])):(0,i.Q3)("",!0)])])])):"playlist"===S.view?((0,i.uX)(),(0,i.CE)("div",I,[t.collection.image?((0,i.uX)(),(0,i.CE)("div",A,[(0,i.Lk)("img",{src:t.collection.image},null,8,x)])):(0,i.Q3)("",!0),(0,i.Lk)("div",P,[(0,i.Lk)("h1",{textContent:(0,s.v_)(t.collection.name)},null,8,E),(0,i.Lk)("div",X,[t.collection.duration?((0,i.uX)(),(0,i.CE)("div",$,[e[14]||(e[14]=(0,i.Lk)("span",{class:"label"},"Duration:",-1)),(0,i.Lk)("span",{class:"value",textContent:(0,s.v_)(t.formatDuration(t.collection.duration,!0))},null,8,N)])):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Q,[(0,i.bF)(M,{title:"Playlist Actions"},{default:(0,i.k6)((()=>[(0,i.bF)(R,{text:"Remove Playlist","icon-class":"fas fa-trash",onInput:e[1]||(e[1]=e=>t.$refs.deleteConfirmDialog.show())}),(0,i.bF)(R,{text:"Info","icon-class":"fas fa-info",onInput:e[2]||(e[2]=t=>F.showInfoModal=!0)})])),_:1})])])):(0,i.Q3)("",!0),t.items?.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(U,{key:3,"with-shadow":!1},{default:(0,i.k6)((()=>e[15]||(e[15]=[(0,i.eW)(" No media found. ")]))),_:1})),S.collections?.length>0?((0,i.uX)(),(0,i.Wv)(W,{key:4,collection:t.collection,filter:t.filter,items:S.collections,loading:t.isLoading,"parent-id":t.collection?.id,onSelect:S.selectCollection},null,8,["collection","filter","items","loading","parent-id","onSelect"])):(0,i.Q3)("",!0),S.mediaItems?.length>0?((0,i.uX)(),(0,i.Wv)(B,{key:5,results:S.mediaItems,sources:{jellyfin:!0},filter:t.filter,"list-view":!0,playlist:"playlist"===t.collection?.item_type?t.collection:null,"selected-result":t.selectedResult,"show-date":!1,onAddToPlaylist:e[3]||(e[3]=e=>t.$emit("add-to-playlist",e)),onDownload:e[4]||(e[4]=e=>t.$emit("download",e)),onMove:e[5]||(e[5]=e=>t.$emit("playlist-move",e)),onPlay:e[6]||(e[6]=e=>t.$emit("play",e)),onPlayWithOpts:e[7]||(e[7]=e=>t.$emit("play-with-opts",e)),onRemoveFromPlaylist:S.removeFromPlaylist,onSelect:e[8]||(e[8]=e=>t.selectedResult=e),onView:e[9]||(e[9]=e=>t.$emit("view",e))},null,8,["results","filter","playlist","selected-result","onRemoveFromPlaylist"])):(0,i.Q3)("",!0),F.showInfoModal?((0,i.uX)(),(0,i.CE)("div",j,[(0,i.bF)(T,{title:"Collection Info",visible:"",onClose:e[10]||(e[10]=t=>F.showInfoModal=!1)},{default:(0,i.k6)((()=>[(0,i.bF)(O,{item:t.collection,pluginName:t.pluginName},null,8,["item","pluginName"])])),_:1})])):(0,i.Q3)("",!0),(0,i.bF)(H,{ref:"deleteConfirmDialog",onInput:e[11]||(e[11]=e=>t.$emit("delete",t.collection.id))},{default:(0,i.k6)((()=>e[16]||(e[16]=[(0,i.eW)(" Are you sure you want to delete this playlist? ")]))),_:1},512)],2)])}var F=l(8411),S=l(3538),q=l(9265),R=l(9612),M=l(7711),U=l(9828),W=l(2012),B=l(9513),O=l(6561),T=l(3149),H={mixins:[W["default"]],emits:["add-to-playlist","delete","download","play","play-with-opts","playlist-move","select","select-collection","view"],components:{Collections:F["default"],ConfirmDialog:S.A,Dropdown:q.A,DropdownItem:R.A,Info:M.A,Loading:U.A,Modal:B.A,NoItems:O.A,Results:T.A},data(){return{artist:null,showInfoModal:!1}},computed:{collections(){return(this.sortedItems?.filter((t=>["collection","artist","album"].includes(t.item_type)))??[]).sort(((t,e)=>t.name.localeCompare(e.name)))},containerClass(){return{artist:"artist"===this.view,album:"album"===this.view,playlist:"playlist"===this.view}},displayedArtist(){return this.artist||this.collection?.artist},mediaItems(){return(this.sortedItems?.filter((t=>!["collection","artist","album"].includes(t.item_type)))??[]).map((t=>(t.media_type=t.type,t.type="jellyfin",t))).sort(((t,e)=>"playlist"===this.view?0:"album"===this.view&&t.track_number&&e.track_number&&t.track_number!==e.track_number?t.track_number-e.track_number:t.name.localeCompare(e.name))).map((t=>("album"===this.view&&(t.artist=this.artist||this.collection.artist,t.album=this.collection,t.image=this.collection.image),t)))},view(){switch(this.collection?.item_type){case"artist":return"artist";case"album":return"album";case"playlist":return"playlist";default:return"index"}}},methods:{async removeFromPlaylist(t){this.loading_=!0;try{await this.request("media.jellyfin.remove_from_playlist",{playlist_id:this.collection.id,item_ids:[t.playlist_item_id]}),await this.refresh()}finally{this.loading_=!1}},async selectArtist(){const t=this.displayedArtist?.id||this.getUrlArgs().artist;if(t?.length){this.loading_=!0;try{const e=this.displayedArtist||await this.request("media.jellyfin.info",{item_id:t});e&&(this.selectCollection(e),this.$nextTick((()=>{this.setUrlArgs({artist:e.id,collection:e.id})})))}finally{this.loading_=!1}}},selectCollection(t){t&&t?.id!==this.collection?.id&&("artist"===t.item_type?this.setUrlArgs({artist:t.id}):"album"===t.item_type?this.setUrlArgs({collection:t.id}):this.setUrlArgs({collection:null}),this.$emit("select-collection",{collection_type:"music",...t}))},async init(){const t=this.getUrlArgs();let e=t?.collection;if(e){this.loading_=!0;try{e=await this.request("media.jellyfin.info",{item_id:e}),e&&this.selectCollection(e)}finally{this.loading_=!1}}},async refresh(){this.loading_=!0;try{switch(this.view){case"artist":this.artist={...this.collection},this.setUrlArgs({artist:this.collection.id,collection:this.collection.id}),this.items=(await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:25e3})).map((t=>("album"===this.collection?.item_type&&(t.image=this.collection.image),t)));break;case"album":this.setUrlArgs({collection:this.collection.id,artist:this.collection.artist?.id}),this.items=await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:25e3});break;case"playlist":this.items="playlist"===this.collection?.item_type?await this.request("media.jellyfin.get_playlist_items",{playlist_id:this.collection.id,limit:25e3}):await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:25e3});break;default:this.artist=null,this.items=await this.request("media.jellyfin.get_artists",{limit:5e3});break}}finally{this.loading_=!1}}},async mounted(){await this.init(),await this.refresh()},unmounted(){this.setUrlArgs({collection:null,artist:null,album:null})}},G=l(6262);const K=(0,G.A)(H,[["render",D],["__scopeId","data-v-0cf35154"]]);var V=K},47:function(t,e,l){l.r(e),l.d(e,{default:function(){return o}});var i=l(2002),s={mixins:[i.A],emits:["add-to-playlist","back","create-playlist","download","download-audio","path-change","play","remove-from-playlist","remove-playlist","rename-playlist"],props:{filter:{type:String,default:""},loading:{type:Boolean,default:!1},mediaPlugin:{type:String},selectedPlaylist:{default:null},selectedChannel:{default:null}},data(){return{loading_:!1}},computed:{isLoading(){return this.loading||this.loading_}}};const a=s;var o=a}}]);
//# sourceMappingURL=1433.eb9576fc.js.map