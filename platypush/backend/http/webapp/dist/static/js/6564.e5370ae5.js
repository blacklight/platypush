"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[6564],{1808:function(e,t,s){s.d(t,{A:function(){return g}});var l=s(641),o=s(33),n=s(3751);const i={class:"slider-wrapper"},a=["textContent"],c=["textContent"],r={class:"slider-container"},u=["min","max","step","disabled","value"],d=["textContent"];function h(e,t,s,h,p,v){return(0,l.uX)(),(0,l.CE)("label",i,[s.withRange?((0,l.uX)(),(0,l.CE)("span",{key:0,class:(0,o.C4)(["range-labels",{"with-label":s.withLabel}])},[s.withRange?((0,l.uX)(),(0,l.CE)("span",{key:0,class:"label left",textContent:(0,o.v_)(s.range[0])},null,8,a)):(0,l.Q3)("",!0),s.withRange?((0,l.uX)(),(0,l.CE)("span",{key:1,class:"label right",textContent:(0,o.v_)(s.range[1])},null,8,c)):(0,l.Q3)("",!0)],2)):(0,l.Q3)("",!0),(0,l.Lk)("span",r,[(0,l.Lk)("input",{class:(0,o.C4)(["slider",{"with-label":s.withLabel}]),type:"range",min:s.range[0],max:s.range[1],step:s.step,disabled:s.disabled,value:s.value,ref:"range",onInput:t[0]||(t[0]=(0,n.D$)((t=>e.$emit("input",t)),["stop"])),onChange:t[1]||(t[1]=(0,n.D$)((t=>e.$emit("change",t)),["stop"]))},null,42,u),s.withLabel?((0,l.uX)(),(0,l.CE)("span",{key:0,class:"label",textContent:(0,o.v_)(s.value),ref:"label"},null,8,d)):(0,l.Q3)("",!0)])])}var p={emits:["input","change"],props:{value:{type:Number},disabled:{type:Boolean,default:!1},range:{type:Array,default:()=>[0,100]},step:{type:Number,default:1},withLabel:{type:Boolean,default:!1},withRange:{type:Boolean,default:!1}}},v=s(6262);const m=(0,v.A)(p,[["render",h],["__scopeId","data-v-d90e850c"]]);var g=m},11:function(e,t,s){s.d(t,{A:function(){return h}});var l=s(641),o=s(33),n=s(3751);const i=["checked","id"],a={class:"label"};function c(e,t,s,c,r,u){return(0,l.uX)(),(0,l.CE)("div",{class:(0,o.C4)(["power-switch",{disabled:s.disabled}]),onClick:t[0]||(t[0]=(0,n.D$)(((...e)=>u.onInput&&u.onInput(...e)),["stop"]))},[(0,l.Lk)("input",{type:"checkbox",checked:s.value,id:s.id},null,8,i),(0,l.Lk)("label",null,[t[1]||(t[1]=(0,l.Lk)("div",{class:"switch"},[(0,l.Lk)("div",{class:"dot"})],-1)),(0,l.Lk)("span",a,[(0,l.RG)(e.$slots,"default",{},void 0,!0)])])],2)}var r={name:"ToggleSwitch",emits:["input"],props:{id:{type:String},value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{onInput(e){if(this.disabled)return!1;this.$emit("input",e)}}},u=s(6262);const d=(0,u.A)(r,[["render",c],["__scopeId","data-v-eff375b6"]]);var h=d},6564:function(e,t,s){s.r(t),s.d(t,{default:function(){return ft}});var l=s(641);const o={class:"music-snapcast-container"},n={class:"info"},i={class:"info"},a={class:"info"};function c(e,t,s,c,r,u){const d=(0,l.g2)("Loading"),h=(0,l.g2)("ModalHost"),p=(0,l.g2)("Modal"),v=(0,l.g2)("ModalGroup"),m=(0,l.g2)("ModalClient"),g=(0,l.g2)("Host");return(0,l.uX)(),(0,l.CE)("div",o,[e.loading?((0,l.uX)(),(0,l.Wv)(d,{key:0})):(0,l.Q3)("",!0),(0,l.Lk)("div",n,[(0,l.bF)(p,{title:"Server info",ref:"modalHost"},{default:(0,l.k6)((()=>[e.selectedHost?((0,l.uX)(),(0,l.Wv)(h,{key:0,info:e.hosts[e.selectedHost]},null,8,["info"])):(0,l.Q3)("",!0)])),_:1},512)]),(0,l.Lk)("div",i,[(0,l.bF)(p,{title:"Group info",ref:"modalGroup"},{default:(0,l.k6)((()=>[e.selectedGroup?((0,l.uX)(),(0,l.Wv)(v,{key:0,group:e.hosts[e.selectedHost].groups[e.selectedGroup],streams:e.hosts[e.selectedHost].streams,clients:u.clientsByHost[e.selectedHost],loading:e.loading,onAddClient:u.addClientToGroup,onRemoveClient:u.removeClientFromGroup,onStreamChange:u.streamChange,onRenameGroup:t[0]||(t[0]=e=>u.renameGroup(e))},null,8,["group","streams","clients","loading","onAddClient","onRemoveClient","onStreamChange"])):(0,l.Q3)("",!0)])),_:1},512)]),(0,l.Lk)("div",a,[(0,l.bF)(p,{title:"Client info",ref:"modalClient"},{default:(0,l.k6)((()=>[e.selectedClient?((0,l.uX)(),(0,l.Wv)(m,{key:0,client:e.hosts[e.selectedHost].groups[e.selectedGroup].clients[e.selectedClient],loading:e.loading,onRemoveClient:u.removeClient,onRenameClient:t[1]||(t[1]=e=>u.renameClient(e))},null,8,["client","loading","onRemoveClient"])):(0,l.Q3)("",!0)])),_:1},512)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.hosts,((e,s)=>((0,l.uX)(),(0,l.Wv)(g,{key:s,server:e.server,streams:e.streams,groups:e.groups,onGroupMuteToggle:t[2]||(t[2]=e=>u.groupMute(e)),onClientMuteToggle:t[3]||(t[3]=e=>u.clientMute(e)),onClientVolumeChange:t[4]||(t[4]=e=>u.clientSetVolume(e)),onModalShow:t[5]||(t[5]=e=>u.onModalShow(e))},null,8,["server","streams","groups"])))),128))])}var r=s(9513),u=s(2002),d=s(33);const h={class:"host"},p={class:"header"},v={class:"col-2 buttons pull-right"},m={key:0,class:"group-container"};function g(e,t,s,o,n,i){const a=(0,l.g2)("Group");return(0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("div",p,[(0,l.Lk)("div",{class:"col-10 name",onClick:t[0]||(t[0]=t=>e.$emit("modal-show",{type:"host",host:s.server.host.name}))},[t[6]||(t[6]=(0,l.Lk)("i",{class:"icon fa fa-server"},null,-1)),(0,l.eW)(" "+(0,d.v_)(s.server.host.name),1)]),(0,l.Lk)("div",v,[(0,l.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>n.collapsed=!n.collapsed)},[(0,l.Lk)("i",{class:(0,d.C4)(["icon fa",{"fa-chevron-up":!n.collapsed,"fa-chevron-down":n.collapsed}])},null,2)])])]),n.collapsed?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",m,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.groups,((o,n)=>((0,l.uX)(),(0,l.Wv)(a,{key:n,id:o.id,name:o.name,server:s.server.host,muted:o.muted,clients:o.clients,stream:s.streams[o.stream_id],onModalShow:t[2]||(t[2]=t=>e.$emit("modal-show",t)),onGroupMuteToggle:t[3]||(t[3]=t=>e.$emit("group-mute-toggle",t)),onClientMuteToggle:t[4]||(t[4]=t=>e.$emit("client-mute-toggle",t)),onClientVolumeChange:t[5]||(t[5]=t=>e.$emit("client-volume-change",t))},null,8,["id","name","server","muted","clients","stream"])))),128))]))])}const C={class:"group"},k={class:"head"},f={class:"col-2 switch pull-right"},y={class:"body"};function b(e,t,s,o,n,i){const a=(0,l.g2)("ToggleSwitch"),c=(0,l.g2)("Client");return(0,l.uX)(),(0,l.CE)("div",C,[(0,l.Lk)("div",k,[(0,l.Lk)("div",{class:"col-10 name",onClick:t[0]||(t[0]=t=>e.$emit("modal-show",{type:"group",group:s.id,host:s.server.name}))},[(0,l.Lk)("i",{class:(0,d.C4)(["icon fa",{"fa-play":"playing"===s.stream.status,"fa-stop":"playing"!==s.stream.status}])},null,2),(0,l.eW)(" "+(0,d.v_)(s.name||s.stream.id||s.id),1)]),(0,l.Lk)("div",f,[(0,l.bF)(a,{value:!s.muted,onInput:t[1]||(t[1]=t=>e.$emit("group-mute-toggle",{host:s.server.name,group:s.id,muted:!s.muted}))},null,8,["value"])])]),(0,l.Lk)("div",y,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.clients,(o=>((0,l.uX)(),(0,l.Wv)(c,{key:o.id,config:o.config,connected:o.connected,server:s.server,host:o.host,groupId:s.id,id:o.id,lastSeen:o.lastSeen,snapclient:o.snapclient,onModalShow:t[2]||(t[2]=t=>e.$emit("modal-show",t)),onVolumeChange:t[3]||(t[3]=t=>e.$emit("client-volume-change",t)),onMuteToggle:t[4]||(t[4]=t=>e.$emit("client-mute-toggle",t))},null,8,["config","connected","server","host","groupId","id","lastSeen","snapclient"])))),128))])])}var L=s(11);const w=["textContent"],_={class:"col-s-12 col-m-9 controls"},x={class:"col-10 slider-container"},H={class:"col-2 switch pull-right"};function E(e,t,s,o,n,i){const a=(0,l.g2)("Slider"),c=(0,l.g2)("ToggleSwitch");return(0,l.uX)(),(0,l.CE)("div",{class:(0,d.C4)(["row client",{offline:!s.connected}])},[(0,l.Lk)("div",{class:"col-s-12 col-m-3 name",textContent:(0,d.v_)(s.config.name?.length?s.config.name:s.host.name),onClick:t[0]||(t[0]=t=>e.$emit("modal-show",{type:"client",client:s.id,group:s.groupId,host:s.server.name}))},null,8,w),(0,l.Lk)("div",_,[(0,l.Lk)("div",x,[(0,l.bF)(a,{range:[0,100],value:s.config.volume.percent,onChange:t[1]||(t[1]=t=>e.$emit("volume-change",{host:s.server.name,client:s.id,volume:t.target.value}))},null,8,["value"])]),(0,l.Lk)("div",H,[(0,l.bF)(c,{value:!s.config.volume.muted,onInput:t[2]||(t[2]=t=>e.$emit("mute-toggle",{host:s.server.name,client:s.id,muted:!s.config.volume.muted}))},null,8,["value"])])])],2)}var S=s(1808),X={name:"Client",components:{Slider:S.A,ToggleSwitch:L.A},emits:["volume-change","mute-toggle","modal-show"],props:{config:{type:Object,required:!0},connected:{type:Boolean,default:!1},host:{type:Object,required:!0},id:{type:String,required:!0},groupId:{type:String,required:!0},lastSeen:{type:Object,default:()=>{}},snapclient:{type:Object,required:!0},server:{type:Object,required:!0}}},G=s(6262);const M=(0,G.A)(X,[["render",E],["__scopeId","data-v-f5d567e4"]]);var Q=M,I={name:"Group",components:{Client:Q,ToggleSwitch:L.A},emits:["group-mute-toggle","modal-show","client-volume-change","client-mute-toggle"],props:{id:{type:String},clients:{type:Object,default:()=>{}},muted:{type:Boolean},name:{type:String},stream:{type:Object},server:{type:Object}}};const $=(0,G.A)(I,[["render",b],["__scopeId","data-v-748fccb4"]]);var A=$,O={name:"Host",emits:["modal-show","group-mute-toggle","client-mute-toggle","client-volume-change"],components:{Group:A},props:{groups:{type:Object,default:()=>{}},server:{type:Object,default:()=>{}},streams:{type:Object,default:()=>{}}},data(){return{collapsed:!1}}};const j=(0,G.A)(O,[["render",g],["__scopeId","data-v-7bce419a"]]);var q=j;const R={class:"info"},V={key:0,class:"row"},B=["textContent"],F={key:1,class:"row"},T=["textContent"],W={key:2,class:"row"},U=["textContent"],N={key:3,class:"row"},P=["textContent"],D={key:4,class:"row"},K=["textContent"],z={key:5,class:"row"},J=["textContent"],Y={key:6,class:"row"},Z=["textContent"],ee={key:7,class:"row"},te=["textContent"],se={key:8,class:"row"},le=["textContent"],oe={key:9,class:"row"},ne=["textContent"];function ie(e,t,s,o,n,i){return(0,l.uX)(),(0,l.CE)("div",R,[s.info?.server?.host?.ip?.length?((0,l.uX)(),(0,l.CE)("div",V,[t[0]||(t[0]=(0,l.Lk)("div",{class:"label col-3"},"IP Address",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.ip)},null,8,B)])):(0,l.Q3)("",!0),s.info?.server?.host?.mac?.length?((0,l.uX)(),(0,l.CE)("div",F,[t[1]||(t[1]=(0,l.Lk)("div",{class:"label col-3"},"MAC Address",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.mac)},null,8,T)])):(0,l.Q3)("",!0),s.info?.server?.host?.name?.length?((0,l.uX)(),(0,l.CE)("div",W,[t[2]||(t[2]=(0,l.Lk)("div",{class:"label col-3"},"Name",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.name)},null,8,U)])):(0,l.Q3)("",!0),s.info?.server?.host?.port?((0,l.uX)(),(0,l.CE)("div",N,[t[3]||(t[3]=(0,l.Lk)("div",{class:"label col-3"},"Port",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.port)},null,8,P)])):(0,l.Q3)("",!0),s.info?.server?.host?.os?.length?((0,l.uX)(),(0,l.CE)("div",D,[t[4]||(t[4]=(0,l.Lk)("div",{class:"label col-3"},"OS",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.os)},null,8,K)])):(0,l.Q3)("",!0),s.info?.server?.host?.arch?.length?((0,l.uX)(),(0,l.CE)("div",z,[t[5]||(t[5]=(0,l.Lk)("div",{class:"label col-3"},"Architecture",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.host.arch)},null,8,J)])):(0,l.Q3)("",!0),s.info?.server?.snapserver?.name?.length?((0,l.uX)(),(0,l.CE)("div",Y,[t[6]||(t[6]=(0,l.Lk)("div",{class:"label col-3"},"Server name",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.snapserver.name)},null,8,Z)])):(0,l.Q3)("",!0),s.info?.server?.snapserver?.version?.length?((0,l.uX)(),(0,l.CE)("div",ee,[t[7]||(t[7]=(0,l.Lk)("div",{class:"label col-3"},"Server version",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.snapserver.version)},null,8,te)])):(0,l.Q3)("",!0),s.info?.server?.snapserver?.protocolVersion?((0,l.uX)(),(0,l.CE)("div",se,[t[8]||(t[8]=(0,l.Lk)("div",{class:"label col-3"},"Protocol version",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.snapserver.protocolVersion)},null,8,le)])):(0,l.Q3)("",!0),s.info?.server?.snapserver?.controlProtocolVersion?((0,l.uX)(),(0,l.CE)("div",oe,[t[9]||(t[9]=(0,l.Lk)("div",{class:"label col-3"},"Control protocol version",-1)),(0,l.Lk)("div",{class:"value col-9",textContent:(0,d.v_)(s.info.server.snapserver.controlProtocolVersion)},null,8,ne)])):(0,l.Q3)("",!0)])}var ae={name:"HostModal",props:{info:{type:Object,default:()=>{}}}};const ce=(0,G.A)(ae,[["render",ie]]);var re=ce;const ue={class:"info"},de={class:"section name"},he={class:"row"},pe={class:"name-value"},ve=["textContent"],me={key:0,class:"section clients"},ge=["for"],Ce=["id","value","checked","disabled","onInput"],ke={key:1,class:"section streams"},fe={class:"row"},ye={class:"value col-9"},be=["textContent","name","value","disabled","selected"],Le={key:0,class:"row"},we=["textContent"],_e={key:1,class:"row"},xe=["textContent"],He={key:2,class:"row"},Ee=["textContent"],Se={key:3,class:"row"},Xe=["textContent"];function Ge(e,t,s,o,n,i){return(0,l.uX)(),(0,l.CE)("div",ue,[(0,l.Lk)("div",de,[t[3]||(t[3]=(0,l.Lk)("div",{class:"title"},"Name",-1)),(0,l.Lk)("div",he,[(0,l.Lk)("div",pe,[(0,l.Lk)("span",{class:"name",textContent:(0,d.v_)(s.group.name?.length?s.group.name:"default")},null,8,ve),(0,l.Lk)("button",{class:"pull-right",title:"Rename",onClick:t[0]||(t[0]=(...e)=>i.renameGroup&&i.renameGroup(...e))},t[2]||(t[2]=[(0,l.Lk)("i",{class:"fa fa-edit"},null,-1)]))])])]),Object.keys(s.group?.clients||{}).length>0?((0,l.uX)(),(0,l.CE)("div",me,[t[4]||(t[4]=(0,l.Lk)("div",{class:"title"},"Clients",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.clients||{},((t,o)=>((0,l.uX)(),(0,l.CE)("div",{class:"row",ref_for:!0,ref:"groupClients",key:o},[(0,l.Lk)("label",{class:"client",for:"snapcast-client-"+t.id},[(0,l.Lk)("input",{type:"checkbox",class:"client",id:`snapcast-client-${t.id}`,value:t.id,checked:t.id in s.group.clients,disabled:s.loading,onInput:s=>e.$emit(s.target.checked?"add-client":"remove-client",t.id)},null,40,Ce),(0,l.eW)(" "+(0,d.v_)(t.host.name),1)],8,ge)])))),128))])):(0,l.Q3)("",!0),s.group?.stream_id?((0,l.uX)(),(0,l.CE)("div",ke,[t[10]||(t[10]=(0,l.Lk)("div",{class:"title"},"Stream",-1)),(0,l.Lk)("div",fe,[t[5]||(t[5]=(0,l.Lk)("div",{class:"label col-3"},"ID",-1)),(0,l.Lk)("div",ye,[(0,l.Lk)("label",null,[(0,l.Lk)("select",{ref:"streamSelect",onChange:t[1]||(t[1]=t=>e.$emit("stream-change",t.target.value))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.streams,((e,t)=>((0,l.uX)(),(0,l.CE)("option",{key:t,textContent:(0,d.v_)(s.streams[s.group.stream_id].id),name:e.id,value:e.id,disabled:s.loading,selected:e.id===s.group.stream_id},null,8,be)))),128))],544)])])]),s.streams?.[s.group.stream_id]?.status?((0,l.uX)(),(0,l.CE)("div",Le,[t[6]||(t[6]=(0,l.Lk)("div",{class:"label col-m-3"},"Status",-1)),(0,l.Lk)("div",{class:"value col-m-9",textContent:(0,d.v_)(s.streams[s.group.stream_id].status)},null,8,we)])):(0,l.Q3)("",!0),s.streams?.[s.group?.stream_id]?.uri?.host?((0,l.uX)(),(0,l.CE)("div",_e,[t[7]||(t[7]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Host",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.streams[s.group.stream_id].uri.host)},null,8,xe)])):(0,l.Q3)("",!0),s.streams?.[s.group?.stream_id]?.uri?.path?((0,l.uX)(),(0,l.CE)("div",He,[t[8]||(t[8]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Path",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.streams[s.group.stream_id].uri.path)},null,8,Ee)])):(0,l.Q3)("",!0),s.streams?.[s.group?.stream_id]?.uri?.raw?((0,l.uX)(),(0,l.CE)("div",Se,[t[9]||(t[9]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"URI",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.streams[s.group.stream_id].uri.raw)},null,8,Xe)])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])}var Me={name:"GroupModal",emits:["add-client","remove-client","stream-change","rename-group"],props:{loading:{type:Boolean,default:!1},group:{type:Object},clients:{type:Object},streams:{type:Object}},methods:{renameGroup(){const e=(prompt("New group name",this.group.name)||"").trim();e?.length&&this.$emit("rename-group",e)}}};const Qe=(0,G.A)(Me,[["render",Ge],["__scopeId","data-v-353ffa58"]]);var Ie=Qe;const $e={class:"client-modal"},Ae={key:0,class:"info"},Oe={class:"row"},je=["textContent"],qe={key:0,class:"row"},Re={class:"value col-s-12 col-m-9"},Ve=["textContent"],Be={class:"row"},Fe=["textContent"],Te={class:"row"},We={class:"value col-s-12 col-m-9"},Ue={class:"row"},Ne=["textContent"],Pe={class:"row"},De=["textContent"],Ke={key:1,class:"row"},ze=["textContent"],Je={key:2,class:"row"},Ye=["textContent"],Ze={key:3,class:"row"},et=["textContent"],tt={key:4,class:"row"},st=["textContent"],lt={class:"row"},ot=["textContent"],nt={class:"row"},it=["textContent"],at={class:"row"},ct=["textContent"],rt={class:"buttons"},ut={class:"row"},dt=["disabled"];function ht(e,t,s,o,n,i){return(0,l.uX)(),(0,l.CE)("div",$e,[s.client?((0,l.uX)(),(0,l.CE)("div",Ae,[(0,l.Lk)("div",Oe,[t[2]||(t[2]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"ID",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.id)},null,8,je)]),s.client.config?.name?.length||s.client.host?.name?((0,l.uX)(),(0,l.CE)("div",qe,[t[4]||(t[4]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Name",-1)),(0,l.Lk)("div",Re,[(0,l.Lk)("span",{class:"name",textContent:(0,d.v_)(s.client.config?.name||s.client.host?.name)},null,8,Ve),(0,l.Lk)("button",{title:"Rename",onClick:t[0]||(t[0]=(...e)=>i.renameClient&&i.renameClient(...e))},t[3]||(t[3]=[(0,l.Lk)("i",{class:"fa fa-edit"},null,-1)]))])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Be,[t[5]||(t[5]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Connected",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.connected)},null,8,Fe)]),(0,l.Lk)("div",Te,[t[6]||(t[6]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Volume",-1)),(0,l.Lk)("div",We,(0,d.v_)(s.client.config.volume.percent)+"%",1)]),(0,l.Lk)("div",Ue,[t[7]||(t[7]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Muted",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.config.volume.muted)},null,8,Ne)]),(0,l.Lk)("div",Pe,[t[8]||(t[8]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Latency",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.config.latency)},null,8,De)]),s.client.host.ip&&s.client.host.ip.length?((0,l.uX)(),(0,l.CE)("div",Ke,[t[9]||(t[9]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"IP Address",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.host.ip)},null,8,ze)])):(0,l.Q3)("",!0),s.client.host.mac&&s.client.host.mac.length?((0,l.uX)(),(0,l.CE)("div",Je,[t[10]||(t[10]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"MAC Address",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.host.mac)},null,8,Ye)])):(0,l.Q3)("",!0),s.client.host.os&&s.client.host.os.length?((0,l.uX)(),(0,l.CE)("div",Ze,[t[11]||(t[11]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"OS",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.host.os)},null,8,et)])):(0,l.Q3)("",!0),s.client.host.arch&&s.client.host.arch.length?((0,l.uX)(),(0,l.CE)("div",tt,[t[12]||(t[12]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Architecture",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.host.arch)},null,8,st)])):(0,l.Q3)("",!0),(0,l.Lk)("div",lt,[t[13]||(t[13]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Client name",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.snapclient.name)},null,8,ot)]),(0,l.Lk)("div",nt,[t[14]||(t[14]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Client version",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.snapclient.version)},null,8,it)]),(0,l.Lk)("div",at,[t[15]||(t[15]=(0,l.Lk)("div",{class:"label col-s-12 col-m-3"},"Protocol version",-1)),(0,l.Lk)("div",{class:"value col-s-12 col-m-9",textContent:(0,d.v_)(s.client.snapclient.protocolVersion)},null,8,ct)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",rt,[(0,l.Lk)("div",ut,[(0,l.Lk)("button",{type:"button",disabled:s.loading,onClick:t[1]||(t[1]=(...e)=>i.removeClient&&i.removeClient(...e))},t[16]||(t[16]=[(0,l.Lk)("i",{class:"fas fa-trash"},null,-1),(0,l.Lk)("span",{class:"name"},"Remove client",-1)]),8,dt)])])])}var pt={name:"ClientModal",emits:["remove-client","rename-client"],props:{loading:{type:Boolean,default:!1},client:{type:Object}},methods:{removeClient(){window.confirm("Are you sure that you want to remove this client?")&&this.$emit("remove-client")},renameClient(){const e=(window.prompt("New client name",this.client.config.name?.length?this.client.config.name:this.client.host.name)||"").trim();e.length&&this.$emit("rename-client",e)}}};const vt=(0,G.A)(pt,[["render",ht],["__scopeId","data-v-0e55ac54"]]);var mt=vt,gt=s(9828),Ct={name:"MusicSnapcast",mixins:[u.A],components:{Loading:gt.A,Modal:r.A,Host:q,ModalHost:re,ModalGroup:Ie,ModalClient:mt},data:function(){return{loading:!1,hosts:{},ports:{},selectedHost:null,selectedGroup:null,selectedClient:null}},computed:{clientsByHost(){return Object.entries(this.hosts).reduce(((e,[t,s])=>(e[t]={},Object.values(s.groups).forEach((s=>{Object.entries(s.clients).forEach((([s,l])=>{e[t][s]=l}))})),e)),{})}},methods:{parseServerStatus(e){e.server=e.server||{host:e.server.host||{name:e.host}},e.server.host.port=this.ports[e.host],this.hosts[e.server.host.name]={...e,groups:e.groups.map((e=>({...e,clients:e.clients.reduce(((e,t)=>(e[t.id]=t,e)),{})}))).reduce(((e,t)=>(e[t.id]=t,e)),{}),streams:e.streams.reduce(((e,t)=>(e[t.id]=t,e)),{})}},async refresh(){this.loading=!0;try{const e=await this.request("music.snapcast.status");this.hosts={},e.forEach((e=>{this.ports[e.host]=e.port,this.parseServerStatus(e)}))}finally{this.loading=!1}},async refreshHost(e){e in this.hosts&&this.parseServerStatus(await this.request("music.snapcast.status",{host:e,port:this.ports[e]}))},async addClientToGroup(e){this.loading=!0;try{if(!this.selectedHost||!this.selectedGroup||!(e in this.clientsByHost[this.selectedHost]))return;const t=[...new Set([e,...Object.keys(this.hosts[this.selectedHost].groups[this.selectedGroup].clients)])];await this.request("music.snapcast.group_set_clients",{host:this.selectedHost,port:this.ports[this.selectedHost],group:this.selectedGroup,clients:t}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async removeClientFromGroup(e){this.loading=!0;try{if(!this.selectedHost||!this.selectedGroup||!(e in this.clientsByHost[this.selectedHost]))return;const t=new Set([...Object.keys(this.hosts[this.selectedHost].groups[this.selectedGroup].clients)]);if(!t.has(e))return;t.delete(e),await this.request("music.snapcast.group_set_clients",{host:this.selectedHost,port:this.ports[this.selectedHost],group:this.selectedGroup,clients:[...t]}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async renameGroup(e){this.loading=!0;try{if(!this.selectedHost||!this.selectedGroup)return;await this.request("music.snapcast.set_group_name",{host:this.selectedHost,port:this.ports[this.selectedHost],group:this.selectedGroup,name:e}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async renameClient(e){this.loading=!0;try{if(!this.selectedHost||!this.selectedClient)return;await this.request("music.snapcast.set_client_name",{host:this.selectedHost,port:this.ports[this.selectedHost],client:this.selectedClient,name:e}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async removeClient(){this.loading=!0;try{if(!this.selectedHost||!this.selectedClient)return;await this.request("music.snapcast.delete_client",{host:this.selectedHost,port:this.ports[this.selectedHost],client:this.selectedClient}),this.$refs.modalClient.close(),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},async streamChange(e){this.loading=!0;try{await this.request("music.snapcast.group_set_stream",{host:this.selectedHost,port:this.ports[this.selectedHost],group:this.selectedGroup,stream_id:e}),await this.refreshHost(this.selectedHost)}finally{this.loading=!1}},onClientUpdate(e){Object.keys(this.hosts[e.host].groups).forEach((t=>{e.client.id in this.hosts[e.host].groups[t].clients&&(this.hosts[e.host].groups[t].clients[e.client.id]=e.client)}))},onGroupStreamChange(e){this.hosts[e.host].groups[e.group].stream_id=e.stream},onServerUpdate(e){this.parseServerStatus(e.server)},onStreamUpdate(e){this.hosts[e.host].streams[e.stream.id]=e.stream},onClientVolumeChange(e){Object.keys(this.hosts[e.host].groups).forEach((t=>{e.client in this.hosts[e.host].groups[t].clients&&(null!=e.volume&&(this.hosts[e.host].groups[t].clients[e.client].config.volume.percent=e.volume),null!=e.muted&&(this.hosts[e.host].groups[t].clients[e.client].config.volume.muted=e.muted))}))},onGroupMuteChange(e){this.hosts[e.host].groups[e.group].muted=e.muted},modalShow(e){switch(e.type){case"host":this.modal[e.type].info=this.hosts[e.host];break;case"group":this.modal[e.type].info.server=this.hosts[e.host].server,this.modal[e.type].info.group=this.hosts[e.host].groups[e.group],this.modal[e.type].info.streams=this.hosts[e.host].streams,this.modal[e.type].info.clients={};for(const t of Object.values(this.hosts[e.host].groups))for(const s of Object.values(t.clients))this.modal[e.type].info.clients[s.id]=s;break;case"client":this.modal[e.type].info=this.hosts[e.host].groups[e.group].clients[e.client],this.modal[e.type].info.server=this.hosts[e.host].server;break}this.modal[e.type].visible=!0},async groupMute(e){await this.request("music.snapcast.mute",{group:e.group,host:e.host,port:this.ports[e.host],mute:e.muted}),await this.refreshHost(e.host)},async clientMute(e){await this.request("music.snapcast.mute",{client:e.client,host:e.host,port:this.ports[e.host],mute:e.muted}),await this.refreshHost(e.host)},async clientSetVolume(e){await this.request("music.snapcast.volume",{client:e.client,host:e.host,port:this.ports[e.host],volume:e.volume}),await this.refreshHost(e.host)},onModalShow(e){switch(e.type){case"host":this.selectedHost=e.host,this.$refs.modalHost.show();break;case"group":this.selectedHost=e.host,this.selectedGroup=e.group,this.$refs.modalGroup.show();break;case"client":this.selectedHost=e.host,this.selectedGroup=e.group,this.selectedClient=e.client,this.$refs.modalClient.show();break}}},mounted(){this.refresh(),this.subscribe(this.onClientUpdate,null,"platypush.message.event.music.snapcast.ClientConnectedEvent","platypush.message.event.music.snapcast.ClientDisconnectedEvent","platypush.message.event.music.snapcast.ClientNameChangeEvent"),this.subscribe(this.onGroupStreamChange,null,"platypush.message.event.music.snapcast.GroupStreamChangeEvent"),this.subscribe(this.onServerUpdate,null,"platypush.message.event.music.snapcast.ServerUpdateEvent"),this.subscribe(this.onStreamUpdate,null,"platypush.message.event.music.snapcast.StreamUpdateEvent"),this.subscribe(this.onClientVolumeChange,null,"platypush.message.event.music.snapcast.ClientVolumeChangeEvent"),this.subscribe(this.onGroupMuteChange,null,"platypush.message.event.music.snapcast.GroupMuteChangeEvent")}};const kt=(0,G.A)(Ct,[["render",c],["__scopeId","data-v-27dfcbf6"]]);var ft=kt}}]);
//# sourceMappingURL=6564.e5370ae5.js.map