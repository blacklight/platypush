{"version":3,"file":"static/js/6923.12f5a8a3.js","mappings":"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","sources":["webpack://platypush/./src/components/Procedure/ProcedureEditorModal.vue","webpack://platypush/./src/components/Procedure/ProcedureEditor.vue","webpack://platypush/./src/components/elements/FloatingButtons.vue","webpack://platypush/./src/components/elements/FloatingButtons.vue?423f","webpack://platypush/./src/components/Procedure/ProcedureDump.vue","webpack://platypush/./src/components/Procedure/ProcedureDump.vue?2300","webpack://platypush/./src/components/Procedure/ProcedureEditor.vue?d6ef","webpack://platypush/./src/components/Procedure/ProcedureEditorModal.vue?bcc3","webpack://platypush/./src/components/panels/Entities/Procedure.vue","webpack://platypush/./src/components/panels/Entities/Procedure.vue?e8a2"],"sourcesContent":["<template>\n  <div class=\"procedure-editor-modal-container\">\n    <Modal :title=\"title || value.name\"\n           :visible=\"visible\"\n           :uppercase=\"!value.name\"\n           :before-close=\"(() => $refs.editor?.checkCanClose())\"\n           ref=\"editorModal\"\n           @close=\"$emit('close')\">\n      <ProcedureEditor :procedure=\"value\"\n                       :read-only=\"isReadOnly\"\n                       :with-name=\"!isReadOnly\"\n                       :with-save=\"!isReadOnly\"\n                       :value=\"value\"\n                       :modal=\"isReadOnly ? null : (() => $refs.editorModal)\"\n                       ref=\"editor\"\n                       @input=\"$emit('input', $event)\" />\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport Modal from \"@/components/Modal\";\nimport ProcedureEditor from \"@/components/Procedure/ProcedureEditor\"\n\nexport default {\n  mixins: [Modal, ProcedureEditor],\n  emits: ['close', 'input'],\n  components: {\n    Modal,\n    ProcedureEditor,\n  },\n\n  data: function() {\n    return {\n      args: {},\n      defaultIconClass: 'fas fa-cogs',\n      extraArgs: {},\n      collapsed_: true,\n      infoCollapsed: false,\n      lastError: null,\n      lastResponse: null,\n      newArgName: '',\n      newArgValue: '',\n      runCollapsed: false,\n      showConfirmDelete: false,\n      showFileEditor: false,\n      showProcedureEditor: false,\n    }\n  },\n\n  computed: {\n    isReadOnly() {\n      return this.value.procedure_type && this.value.procedure_type !== 'db'\n    },\n  },\n\n  methods: {\n    // Proxy and delegate the Modal's methods\n    open() {\n      this.$refs.editorModal.open()\n    },\n\n    close() {\n      this.$refs.editorModal.close()\n    },\n\n    show() {\n      this.$refs.editorModal.show()\n    },\n\n    hide() {\n      this.$refs.editorModal.hide()\n    },\n\n    toggle() {\n      this.$refs.editorModal.toggle()\n    },\n  },\n\n  watch: {\n    collapsed: {\n      immediate: true,\n      handler(value) {\n        this.collapsed_ = value\n      },\n    },\n\n    selected: {\n      immediate: true,\n      handler(value) {\n        this.collapsed_ = value\n      },\n    },\n\n    showProcedureEditor(value) {\n      if (!value) {\n        this.$refs.editor?.reset()\n      }\n    },\n  },\n\n  mounted() {\n    this.collapsed_ = !this.selected\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.procedure-editor-modal-container {\n  cursor: default;\n\n  :deep(.modal-container) {\n    .body {\n      padding: 0;\n\n      @include until($tablet) {\n        width: calc(100vw - 2em);\n      }\n\n      @include from($tablet) {\n        width: 50em;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"procedure-editor-container\">\n    <main>\n      <div class=\"procedure-editor\">\n        <form class=\"procedure-edit-form\" autocomplete=\"off\" @submit.prevent=\"executeAction\">\n          <input type=\"submit\" style=\"display: none\" />\n\n          <div class=\"name-editor-container\" v-if=\"withName\">\n            <div class=\"row item\">\n              <div class=\"name\">\n                <label>\n                  <i class=\"icon fas fa-pen-to-square\" />\n                  Name\n                </label>\n              </div>\n\n              <div class=\"value\">\n                <input type=\"text\"\n                       v-model=\"newValue.name\"\n                       ref=\"nameInput\"\n                       :disabled=\"readOnly\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"icon-editor-container\"\n               v-if=\"Object.keys(newValue?.meta?.icon || {}).length\">\n            <IconEditor :entity=\"newValue\"\n                        @input=\"onIconChange\"\n                        @change=\"onIconChange\" />\n          </div>\n\n          <div class=\"args-editor-container\" v-if=\"showArgs\">\n            <h3>\n              <i class=\"icon fas fa-code\" />&nbsp;\n              Arguments\n            </h3>\n\n            <div class=\"args\" ref=\"args\">\n              <div class=\"row item\" v-for=\"(arg, index) in newValue.args\" :key=\"index\">\n                <input type=\"text\"\n                       placeholder=\"Argument Name\"\n                       :value=\"arg\"\n                       :disabled=\"readOnly\"\n                       @input=\"onArgInput($event.target.value?.trim(), index)\"\n                       @blur=\"onArgEdit(arg, index)\" />\n              </div>\n\n              <div class=\"row item new-arg\" v-if=\"!readOnly\">\n                <input type=\"text\"\n                       placeholder=\"New Argument\"\n                       ref=\"newArgInput\" \n                       v-model=\"newArg\"\n                       @blur=\"onNewArg\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"actions-container\">\n            <h3 v-if=\"showArgs\">\n              <i class=\"icon fas fa-play\" />&nbsp;\n              Actions\n            </h3>\n\n            <ActionsList :value=\"newValue.actions\"\n                         :context=\"context\"\n                         :read-only=\"readOnly\"\n                         @input=\"onActionsEdit\" />\n          </div>\n\n          <!-- Structured response container -->\n          <div class=\"response-container\" v-if=\"response || error\">\n            <Response :response=\"response\" :error=\"error\" />\n          </div>\n        </form>\n      </div>\n\n      <div class=\"args-modal-container\" ref=\"argsModalContainer\" v-if=\"showArgsModal\">\n        <Modal title=\"Run Arguments\"\n               :visible=\"true\"\n               ref=\"argsModal\"\n               @close=\"onRunArgsModalClose\">\n          <form class=\"args\" @submit.prevent=\"executeWithArgs\">\n            <div class=\"row item\" v-for=\"value, arg in runArgs\" :key=\"arg\">\n              <span class=\"arg-name\">\n                <span v-if=\"newValue.args?.includes(arg)\">\n                  {{ arg }}\n                </span>\n\n                <span v-else>\n                  <input type=\"text\"\n                         placeholder=\"New Argument\"\n                         :value=\"arg\"\n                         @input=\"onEditRunArgName($event, arg)\">\n                </span>\n\n                <span class=\"mobile\">\n                  &nbsp;=&nbsp;\n                </span>\n              </span>\n\n              <span class=\"arg-value\">\n                <span class=\"from tablet\">\n                  &nbsp;=&nbsp;\n                </span>\n\n                <input type=\"text\"\n                       placeholder=\"Argument Value\"\n                       :ref=\"`run-arg-value-${arg}`\"\n                       v-model=\"runArgs[arg]\" />\n              </span>\n            </div>\n\n            <div class=\"row item new-arg\">\n              <span class=\"arg-name\">\n                <input type=\"text\"\n                       placeholder=\"New Argument\"\n                       ref=\"newRunArgName\"\n                       v-model=\"newRunArg[0]\"\n                       @blur=\"onNewRunArgName\" />\n\n                <span class=\"mobile\">\n                  &nbsp;=&nbsp;\n                </span>\n              </span>\n              <span class=\"arg-value\">\n                <span class=\"from tablet\">\n                  &nbsp;=&nbsp;\n                </span>\n\n                <input type=\"text\"\n                       placeholder=\"Argument Value\"\n                       v-model=\"newRunArg[1]\" />\n              </span>\n            </div>\n\n            <input type=\"submit\" style=\"display: none\" />\n            <FloatingButton icon-class=\"fa fa-play\"\n                            title=\"Run Procedure\"\n                            :disabled=\"newValue.actions?.length === 0 || running\"\n                            @click=\"executeWithArgs\" />\n          </form>\n        </Modal>\n      </div>\n\n      <div class=\"confirm-dialog-container\">\n        <ConfirmDialog ref=\"confirmClose\" @input=\"forceClose\">\n          This procedure has unsaved changes. Are you sure you want to close it?\n        </ConfirmDialog>\n      </div>\n\n      <div class=\"confirm-dialog-container\">\n        <ConfirmDialog ref=\"confirmOverwrite\" @input=\"forceSave\">\n          A procedure with the same name already exists. Do you want to overwrite it?\n        </ConfirmDialog>\n      </div>\n\n      <div class=\"spacer\" />\n\n      <div class=\"floating-buttons\">\n        <div class=\"buttons left\">\n          <FloatingButtons direction=\"row\">\n              <FloatingButton icon-class=\"fa fa-code\"\n                              left glow\n                              title=\"Export to YAML\"\n                              @click=\"showYAML = true\" />\n              <FloatingButton icon-class=\"fa fa-copy\"\n                              left glow\n                              title=\"Duplicate Procedure\"\n                              @click=\"duplicate\"\n                              v-if=\"newValue.name?.length && newValue.actions?.length\" />\n          </FloatingButtons>\n        </div>\n\n        <div class=\"buttons right\">\n          <FloatingButtons direction=\"row\">\n              <FloatingButton icon-class=\"fa fa-save\"\n                              right glow\n                              title=\"Save Procedure\"\n                              :disabled=\"!canSave\"\n                              @click=\"save\"\n                              v-if=\"showSave\" />\n              <FloatingButton icon-class=\"fa fa-play\"\n                              right glow\n                              title=\"Run Procedure\"\n                              :disabled=\"newValue.actions?.length === 0 || running\"\n                              @click=\"executeAction\" />\n          </FloatingButtons>\n        </div>\n      </div>\n    </main>\n\n    <div class=\"duplicate-editor-container\" v-if=\"duplicateValue != null\">\n      <Modal title=\"Duplicate Procedure\"\n             ref=\"duplicateModal\"\n             :visible=\"true\"\n             :before-close=\"(() => $refs.duplicateEditor?.checkCanClose())\"\n             @close=\"duplicateValue = null\">\n        <ProcedureEditor :value=\"duplicateValue\"\n                         :with-name=\"true\"\n                         :with-save=\"true\"\n                         :modal=\"() => $refs.duplicateModal\"\n                         ref=\"duplicateEditor\"\n                         @input=\"duplicateValue = null\" />\n      </Modal>\n    </div>\n\n    <div class=\"dump-modal-container\" v-if=\"showYAML\">\n      <Modal title=\"Procedure Dump\"\n             :visible=\"true\"\n             @close=\"showYAML = false\">\n        <ProcedureDump :procedure=\"newValue\" />\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ActionsList from \"@/components/Action/ActionsList\"\nimport ConfirmDialog from \"@/components/elements/ConfirmDialog\";\nimport FloatingButton from \"@/components/elements/FloatingButton\";\nimport FloatingButtons from \"@/components/elements/FloatingButtons\";\nimport IconEditor from \"@/components/panels/Entities/IconEditor\";\nimport Modal from \"@/components/Modal\";\nimport ProcedureDump from \"./ProcedureDump\";\nimport Response from \"@/components/Action/Response\"\nimport Utils from \"@/Utils\"\n\nexport default {\n  mixins: [Utils],\n  emits: ['input'],\n  components: {\n    ActionsList,\n    ConfirmDialog,\n    FloatingButton,\n    FloatingButtons,\n    IconEditor,\n    Modal,\n    ProcedureDump,\n    Response,\n  },\n\n  props: {\n    withName: {\n      type: Boolean,\n      default: false,\n    },\n\n    withSave: {\n      type: Boolean,\n      default: false,\n    },\n\n    value: {\n      type: Object,\n      default: () => ({\n        name: undefined,\n        actions: [],\n      }),\n    },\n\n    readOnly: {\n      type: Boolean,\n      default: false,\n    },\n\n    modal: {\n      type: [Object, Function],\n    },\n  },\n\n  data() {\n    return {\n      confirmOverwrite: false,\n      duplicateValue: null,\n      error: undefined,\n      loading: false,\n      newAction: {},\n      newArg: null,\n      newRunArg: [null, null],\n      newValue: {},\n      response: undefined,\n      running: false,\n      runArgs: {},\n      shouldForceClose: false,\n      showArgsModal: false,\n      showYAML: false,\n    }\n  },\n\n  computed: {\n    floatingButtons() {\n      return this.$el.querySelector('.floating-btns')\n    },\n\n    canSave() {\n      if (\n        !this.withSave ||\n        this.readOnly ||\n        !this.newValue?.name?.length ||\n        !this.newValue?.actions?.length\n      )\n        return false\n\n      return this.valueString !== this.newValueString\n    },\n\n    valueString() {\n      return JSON.stringify(this.value)\n    },\n\n    newValueString() {\n      return JSON.stringify(this.newValue)\n    },\n\n    context() {\n      return this.newValue?.args?.reduce((acc, arg) => {\n        acc[arg] = {\n          source: 'args',\n        }\n\n        return acc\n      }, {})\n    },\n\n    modal_() {\n      if (this.readOnly)\n        return null\n\n      return typeof this.modal === 'function' ? this.modal() : this.modal\n    },\n\n    shouldConfirmClose() {\n      return this.canSave && !this.shouldForceClose\n    },\n\n    showArgs() {\n      return !this.readOnly || this.newValue.args?.length\n    },\n\n    showSave() {\n      return this.withSave && !this.readOnly\n    },\n  },\n\n  methods: {\n    async save() {\n      if (!this.canSave)\n        return\n\n      this.loading = true\n      try {\n        const overwriteOk = await this.overwriteOk()\n        if (!overwriteOk)\n          return\n\n        const actions = this.newValue.actions.map((action) => {\n          const a = {...action}\n          if ('name' in a) {\n            a.action = a.name\n            delete a.name\n          }\n\n          return a\n        })\n\n        const args = {...this.newValue, actions}\n        if (this.value?.name?.length && this.value.name !== this.newValue.name) {\n          args.old_name = this.value.name\n        }\n\n        await this.request('procedures.save', args)\n        this.$emit('input', this.newValue)\n        this.notify({\n          text: 'Procedure saved successfully',\n          image: {\n            icon: 'check',\n          }\n        })\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async forceSave() {\n      this.confirmOverwrite = true\n      await this.save()\n    },\n\n    async overwriteOk() {\n      if (this.confirmOverwrite) {\n        this.confirmOverwrite = false\n        return true\n      }\n\n      const procedures = await this.request('procedures.status', {publish: false})\n      if (\n        this.value.name?.length &&\n        this.value.name !== this.newValue.name &&\n        procedures[this.newValue.name]\n      ) {\n        this.$refs.confirmOverwrite?.open()\n        return false\n      }\n\n      return true\n    },\n\n    onResponse(response) {\n      this.response = (\n        typeof response === 'string' ? response : JSON.stringify(response, null, 2)\n      ).trim()\n\n      this.error = undefined\n    },\n\n    onError(error) {\n      if (error.message)\n        error = error.message\n\n      this.response = undefined\n      this.error = error\n    },\n\n    onDone() {\n      this.running = false\n      this.runArgs = {}\n    },\n\n    async executeAction() {\n      if (!this.newValue.actions?.length) {\n        this.notify({\n          text: 'No actions to execute',\n          warning: true,\n          image: {\n            icon: 'exclamation-triangle',\n          }\n        })\n\n        return\n      }\n\n      if (this.newValue.args?.length && !Object.keys(this.runArgs).length) {\n        this.showArgsModal = true\n        return\n      }\n\n      this.running = true\n      try {\n        const procedure = {\n          actions: this.newValue.actions.map((action) => {\n            const a = {...action}\n            if ('name' in a) {\n              a.action = a.name\n              delete a.name\n            }\n\n            return a\n          }),\n\n          args: this.runArgs,\n        }\n\n        const response = await this.request('procedures.exec', {procedure})\n        this.onResponse(response)\n      } catch (e) {\n        console.error(e)\n        this.onError(e)\n      } finally {\n        this.onDone()\n      }\n    },\n\n    async executeWithArgs() {\n      this.$refs.argsModal?.close()\n      Object.entries(this.runArgs).forEach(([arg, value]) => {\n        if (!value?.length)\n          this.runArgs[arg] = null\n\n        try {\n          this.runArgs[arg] = JSON.parse(value)\n        } catch (e) {\n          // ignore\n        }\n      })\n\n      await this.executeAction()\n    },\n\n    duplicate() {\n      const name = `${this.newValue.name || ''}__copy`\n      const duplicate = JSON.parse(JSON.stringify(this.newValue))\n      this.duplicateValue = {\n        ...duplicate,\n        ...{\n          meta: {\n            ...(duplicate.meta || {}),\n            icon: {...(duplicate.meta?.icon || {})},\n          }\n        },\n        id: null,\n        external_id: name,\n        name: name,\n      }\n    },\n\n    onActionsEdit(actions) {\n      this.newValue.actions = actions\n    },\n\n    onArgInput(arg, index) {\n      this.newValue.args[index] = arg\n    },\n\n    onArgEdit(arg, index) {\n      arg = arg?.trim()\n      const isDuplicate = !!(\n        this.newValue.args?.filter(\n          (a, i) => a === arg && i !== index\n        ).length\n      )\n\n      if (!arg?.length || isDuplicate) {\n        this.newValue.args.splice(index, 1)\n\n        if (index === this.newValue.args.length) {\n          setTimeout(() => this.$refs.newArgInput?.focus(), 50)\n        } else {\n          const nextInput = this.$refs.args.children[index]?.querySelector('input[type=text]')\n          setTimeout(() => {\n            nextInput?.focus()\n            nextInput?.select()\n          }, 50)\n        }\n      }\n    },\n\n    onNewArg(event) {\n      const value = event.target.value?.trim()\n      if (!value?.length) {\n        return\n      }\n\n      if (!this.newValue.args) {\n        this.newValue.args = []\n      }\n\n      if (!this.newValue.args.includes(value)) {\n        this.newValue.args.push(value)\n      }\n\n      this.newArg = null\n      setTimeout(() => this.$refs.newArgInput?.focus(), 50)\n    },\n\n    onNewRunArgName() {\n      const arg = this.newRunArg[0]?.trim()\n      const value = this.newRunArg[1]?.trim()\n      if (!arg?.length) {\n        return\n      }\n\n      this.runArgs[arg] = value\n      this.newRunArg = [null, null]\n      this.$nextTick(() => this.$refs[`run-arg-value-${arg}`]?.[0]?.focus())\n    },\n\n    onEditRunArgName(event, arg) {\n      const newArg = event.target.value?.trim()\n      if (newArg === arg) {\n        return\n      }\n\n      if (newArg?.length) {\n        this.runArgs[newArg] = this.runArgs[arg]\n      }\n\n      delete this.runArgs[arg]\n      this.$nextTick(\n        () => this.$el.querySelector(`.args-modal-container .args input[type=text][value=\"${newArg}\"]`)?.focus()\n      )\n    },\n\n    onIconChange(icon) {\n      this.newValue.meta.icon = icon\n    },\n\n    onRunArgsModalClose() {\n      this.showArgsModal = false\n      this.$nextTick(() => {\n        this.runArgs = {}\n      })\n    },\n\n    checkCanClose() {\n      if (!this.shouldConfirmClose)\n        return true\n\n      this.$refs.confirmClose?.open()\n      return false\n    },\n\n    forceClose() {\n      this.shouldForceClose = true\n      this.$nextTick(() => {\n        if (!this.modal_)\n          return\n\n        let modal = this.modal_\n        if (typeof modal === 'function') {\n          modal = modal()\n        }\n\n        try {\n          modal?.close()\n        } catch (e) {\n          console.warn('Failed to close modal', e)\n        }\n\n        this.reset()\n      })\n    },\n\n    beforeUnload(e) {\n      if (this.shouldConfirmClose) {\n        e.preventDefault()\n        e.returnValue = ''\n      }\n    },\n\n    addBeforeUnload() {\n      window.addEventListener('beforeunload', this.beforeUnload)\n    },\n\n    removeBeforeUnload() {\n      window.removeEventListener('beforeunload', this.beforeUnload)\n    },\n\n    reset() {\n      this.removeBeforeUnload()\n    },\n\n    syncValue() {\n      if (!this.value)\n        return\n\n      const value = JSON.parse(JSON.stringify(this.value))\n      this.newValue = {\n        ...value,\n        actions: value.actions?.map(a => ({...a})),\n        args: [...(value?.args || [])],\n        meta: {...(value?.meta || {})},\n      }\n    },\n  },\n\n  watch: {\n    value: {\n      immediate: true,\n      deep: true,\n      handler() {\n        this.syncValue()\n      },\n    },\n\n    newValue: {\n      deep: true,\n      handler(value) {\n        if (this.withSave)\n          return\n\n        this.$emit('input', value)\n      },\n    },\n\n    showArgsModal(value) {\n      if (value) {\n        this.runArgs = this.newValue.args?.reduce((acc, arg) => {\n          acc[arg] = null\n          return acc\n        }, {})\n\n        this.$nextTick(() => {\n          this.$el.querySelector('.args-modal-container .args input[type=text]')?.focus()\n        })\n      }\n    },\n  },\n\n  mounted() {\n    this.addBeforeUnload()\n    this.syncValue()\n    this.$nextTick(() => {\n      if (this.withName)\n        this.$refs.nameInput?.focus()\n    })\n  },\n\n  unmouted() {\n    this.reset()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$floating-btns-height: 3em;\n\n.procedure-editor-container {\n  display: flex;\n  flex-direction: column;\n  padding-top: 0.75em;\n  position: relative;\n  max-height: 75vh;\n\n  main {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n  }\n\n  .procedure-editor {\n    width: 100%;\n    height: calc(100% - #{$floating-btns-height});\n    overflow: auto;\n    padding: 0 1em;\n\n    .procedure-edit-form {\n      padding-bottom: calc(#{$floating-btns-height} + 1em);\n    }\n  }\n\n  h3 {\n    font-size: 1.2em;\n  }\n\n  .name-editor-container {\n    .row {\n      display: flex;\n      border-bottom: 1px solid $default-shadow-color;\n      align-items: center;\n      justify-content: space-between;\n      padding-bottom: 0.5em;\n      margin-bottom: 0.5em;\n\n      @include until($tablet) {\n        flex-direction: column;\n        align-items: flex-start;\n      }\n\n      @include from($tablet) {\n        flex-direction: row;\n      }\n\n      .name {\n        margin-right: 0.5em;\n      }\n\n      .value {\n        flex: 1;\n\n        @include until($tablet) {\n          width: 100%;\n        }\n\n        input {\n          width: 100%;\n        }\n      }\n    }\n  }\n\n  .icon-editor-container {\n    border-bottom: 1px solid $default-shadow-color;\n    margin-bottom: 0.5em;\n  }\n\n  .spacer {\n    width: 100%;\n    height: calc(#{$floating-btns-height} + 1em);\n    flex-grow: 1;\n  }\n\n  .args-editor-container {\n    .args {\n      margin-bottom: 1em;\n\n      .item {\n        padding-bottom: 0.5em;\n      }\n    }\n  }\n\n  :deep(.args-modal-container) {\n    .modal-container .modal {\n      width: 50em;\n\n      .body {\n        padding: 1em;\n      }\n    }\n\n    .args {\n      position: relative;\n      padding-bottom: calc(#{$floating-btn-size} + 2em);\n\n      .row {\n        display: flex;\n        align-items: center;\n        margin-bottom: 0.5em;\n\n        @include until($tablet) {\n          flex-direction: column;\n          align-items: flex-start;\n          border-bottom: 1px solid $default-shadow-color;\n          padding-bottom: 0.5em;\n        }\n\n        .arg-name {\n          @extend .col-s-12;\n          @extend .col-m-5;\n          font-weight: bold;\n\n          input {\n            width: 100%;\n\n            @include until($tablet) {\n              width: calc(100% - 2em);\n            }\n          }\n        }\n\n        .arg-value {\n          @extend .col-s-12;\n          @extend .col-m-7;\n          flex: 1;\n\n          input[type=text] {\n            width: 95%;\n          }\n        }\n      }\n    }\n  }\n\n  :deep(.floating-buttons) {\n    width: 100%;\n    height: $floating-btns-height;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background: $default-bg-5;\n    box-shadow: $border-shadow-top;\n    display: flex;\n    justify-content: space-between;\n\n    .buttons {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      padding: 0 1em;\n      position: relative;\n    }\n  }\n\n  :deep(.dump-modal-container) {\n    .body {\n      max-width: 47em;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"floating-btns\" :class=\"{direction: direction}\">\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  emits: [\"click\"],\n  props: {\n    direction: {\n      type: String,\n      default: \"row\",\n    },\n\n    size: {\n      type: String,\n      default: \"4em\",\n    },\n  },\n\n  computed: {\n    buttons() {\n      return this.$el.querySelectorAll(\".floating-btn\")\n    },\n  },\n\n  mounted() {\n    const buttons = Array.from(this.buttons)\n    let offset = 0\n    buttons.forEach((button, index) => {\n      const size = button.offsetWidth\n      const styleOffset = `calc(${offset}px + (${index} * 1em))`\n      if (this.direction === \"row\") {\n        if (!parseFloat(getComputedStyle(button).left))\n          button.style.left = styleOffset\n        else\n          button.style.right = styleOffset\n      } else {\n        if (!parseFloat(getComputedStyle(button).top))\n          button.style.top = styleOffset\n        else\n          button.style.bottom = styleOffset\n      }\n\n      offset += size\n    })\n  },\n}\n</script>\n","import { render } from \"./FloatingButtons.vue?vue&type=template&id=4141603c\"\nimport script from \"./FloatingButtons.vue?vue&type=script&lang=js\"\nexport * from \"./FloatingButtons.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"procedure-dump\">\n    <Loading v-if=\"loading\" />\n\n    <div class=\"dump-container\" v-else>\n      <CopyButton :text=\"yaml?.trim()\" />\n      <pre><code v-html=\"highlightedYAML\" /></pre>\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'highlight.js/lib/common'\nimport 'highlight.js/styles/nord.min.css'\nimport hljs from \"highlight.js\"\n\nimport CopyButton from \"@/components/elements/CopyButton\"\nimport Loading from \"@/components/Loading\";\nimport Utils from \"@/Utils\"\n\nexport default {\n  mixins: [Utils],\n  components: {\n    CopyButton,\n    Loading\n  },\n\n  props: {\n    procedure: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data() {\n    return {\n      loading: false,\n      yaml: null,\n    }\n  },\n\n  computed: {\n    highlightedYAML() {\n      return hljs.highlight(\n        '# You can copy this code in a YAML configuration file\\n' +\n        '# if you prefer to store this procedure in a file.\\n' +\n        this.yaml || '',\n        {language: 'yaml'}\n      ).value\n    },\n  },\n\n  methods: {\n    async refresh() {\n      this.loading = true\n      try {\n        this.yaml = await this.request('procedures.to_yaml', {procedure: this.procedure})\n      } finally {\n        this.loading = false\n      }\n    }\n  },\n\n  mounted() {\n    this.refresh()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.procedure-dump {\n  width: 100%;\n  height: 100%;\n  background: #181818;\n\n  .dump-container {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    padding: 1em;\n    overflow: auto;\n  }\n\n  pre {\n    margin: 0;\n    padding: 0;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n  }\n}\n</style>\n","import { render } from \"./ProcedureDump.vue?vue&type=template&id=b22aac3c&scoped=true\"\nimport script from \"./ProcedureDump.vue?vue&type=script&lang=js\"\nexport * from \"./ProcedureDump.vue?vue&type=script&lang=js\"\n\nimport \"./ProcedureDump.vue?vue&type=style&index=0&id=b22aac3c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b22aac3c\"]])\n\nexport default __exports__","import { render } from \"./ProcedureEditor.vue?vue&type=template&id=e159c110&scoped=true\"\nimport script from \"./ProcedureEditor.vue?vue&type=script&lang=js\"\nexport * from \"./ProcedureEditor.vue?vue&type=script&lang=js\"\n\nimport \"./ProcedureEditor.vue?vue&type=style&index=0&id=e159c110&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e159c110\"]])\n\nexport default __exports__","import { render } from \"./ProcedureEditorModal.vue?vue&type=template&id=66039a54&scoped=true\"\nimport script from \"./ProcedureEditorModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProcedureEditorModal.vue?vue&type=script&lang=js\"\n\nimport \"./ProcedureEditorModal.vue?vue&type=style&index=0&id=66039a54&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-66039a54\"]])\n\nexport default __exports__","<template>\n  <div class=\"entity procedure-container\">\n    <div class=\"head\" :class=\"{collapsed: collapsed_}\" @click=\"onHeaderClick\">\n      <div class=\"icon\">\n        <EntityIcon :entity=\"value\" :icon=\"icon\" :loading=\"loading\" />\n      </div>\n\n      <div class=\"label\">\n        <div class=\"name\" v-text=\"value.name\" />\n      </div>\n\n      <div class=\"value-and-toggler\">\n        <div class=\"value\">\n          <button class=\"btn btn-primary head-run-btn\"\n                  title=\"Run Procedure\"\n                  :disabled=\"loading\"\n                  @click.stop=\"run\"\n                  v-if=\"collapsed_\">\n            <i class=\"fas fa-play\" />\n          </button>\n        </div>\n\n        <div class=\"collapse-toggler\" @click.stop=\"collapsed_ = !collapsed_\">\n          <i class=\"fas\" :class=\"{'fa-chevron-down': collapsed_, 'fa-chevron-up': !collapsed_}\" />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"body\" v-if=\"!collapsed_\" @click.stop>\n      <section class=\"run\">\n        <header :class=\"{collapsed: runCollapsed}\" @click=\"runCollapsed = !runCollapsed\">\n          <span class=\"col-10\">\n            <i class=\"fas fa-play\" />&nbsp; Run\n          </span>\n          <span class=\"col-2 buttons\">\n            <button type=\"button\"\n                    class=\"btn btn-primary\"\n                    :disabled=\"loading\"\n                    :title=\"runCollapsed ? 'Expand' : 'Collapse'\">\n              <i class=\"fas\" :class=\"{'fa-chevron-down': runCollapsed, 'fa-chevron-up': !runCollapsed}\" />\n            </button>\n          </span>\n        </header>\n\n        <div class=\"run-body\" v-if=\"!runCollapsed\">\n          <form @submit.prevent=\"run\">\n            <div class=\"args\" v-if=\"value.args?.length\">\n              Arguments\n              <div class=\"row arg\" v-for=\"(arg, index) in value.args || []\" :key=\"index\">\n                <input type=\"text\"\n                       class=\"argname\"\n                       :value=\"arg\"\n                       :disabled=\"true\" />&nbsp;=\n                <input type=\"text\"\n                       class=\"argvalue\"\n                       placeholder=\"Value\"\n                       :disabled=\"loading\"\n                       @input=\"updateArg(arg, $event)\" />\n              </div>\n            </div>\n\n            <div class=\"extra args\">\n              Extra Arguments\n              <div class=\"row arg\" v-for=\"(value, name) in extraArgs\" :key=\"name\">\n                <input type=\"text\"\n                       class=\"argname\"\n                       placeholder=\"Name\"\n                       :value=\"name\"\n                       :disabled=\"loading\"\n                       @blur=\"updateExtraArgName(name, $event)\" />&nbsp;=\n                <input type=\"text\"\n                       placeholder=\"Value\"\n                       class=\"argvalue\"\n                       :value=\"value\"\n                       :disabled=\"loading\"\n                       @input=\"updateExtraArgValue(arg, $event)\" />\n              </div>\n\n              <div class=\"row add-arg\">\n                <input type=\"text\"\n                       class=\"argname\"\n                       placeholder=\"Name\"\n                       v-model=\"newArgName\"\n                       :disabled=\"loading\"\n                       ref=\"newArgName\"\n                       @blur=\"addExtraArg\" />&nbsp;=\n                <input type=\"text\"\n                       class=\"argvalue\"\n                       placeholder=\"Value\"\n                       v-model=\"newArgValue\"\n                       :disabled=\"loading\"\n                       @blur=\"addExtraArg\" />\n              </div>\n            </div>\n\n            <div class=\"row run-container\">\n              <button type=\"submit\"\n                      class=\"btn btn-primary\"\n                      :disabled=\"loading\"\n                      title=\"Run Procedure\">\n                <i class=\"fas fa-play\" />\n              </button>\n            </div>\n          </form>\n\n          <div class=\"response-container\" v-if=\"lastResponse || lastError\">\n            <Response :response=\"lastResponse\" :error=\"lastError\" />\n          </div>\n        </div>\n      </section>\n\n      <section class=\"info\">\n        <header :class=\"{collapsed: infoCollapsed}\" @click=\"infoCollapsed = !infoCollapsed\">\n          <span class=\"col-10\">\n            <i class=\"fas fa-info-circle\" />&nbsp; Info\n          </span>\n          <span class=\"col-2 buttons\">\n            <button type=\"button\"\n                    class=\"btn btn-primary\"\n                    :disabled=\"loading\"\n                    :title=\"infoCollapsed ? 'Expand' : 'Collapse'\">\n              <i class=\"fas\" :class=\"{'fa-chevron-down': infoCollapsed, 'fa-chevron-up': !infoCollapsed}\" />\n            </button>\n          </span>\n        </header>\n\n        <div class=\"info-body\" v-if=\"!infoCollapsed\">\n          <div class=\"item\">\n            <div class=\"label\">Source</div>\n            <div class=\"value\">\n              <i :class=\"procedureTypeIconClass\" />&nbsp;\n              {{ value.procedure_type }}\n            </div>\n          </div>\n\n          <div class=\"item\">\n            <IconEditor :entity=\"value\" />\n          </div>\n\n          <div class=\"item actions\" v-if=\"value?.actions?.length\">\n            <div class=\"label\">Actions</div>\n            <div class=\"value\">\n              <div class=\"item\">\n                <button type=\"button\"\n                        class=\"btn btn-primary\"\n                        title=\"Edit Actions\"\n                        :disabled=\"loading\"\n                        @click=\"showProcedureEditor = !showProcedureEditor\">\n                  <span v-if=\"isReadOnly && !showProcedureEditor\">\n                    <i class=\"fas fa-eye\" />&nbsp; View\n                  </span>\n                  <span v-else-if=\"!isReadOnly && !showProcedureEditor\">\n                    <i class=\"fas fa-edit\" />&nbsp; Edit\n                  </span>\n                  <span v-else>\n                    <i class=\"fas fa-times\" />&nbsp; Close\n                  </span>\n                </button>\n              </div>\n\n              <div class=\"item delete\" v-if=\"!isReadOnly\">\n                <button type=\"button\"\n                        title=\"Delete Procedure\"\n                        :disabled=\"loading\"\n                        @click=\"showConfirmDelete = true\">\n                  <i class=\"fas fa-trash\" />&nbsp; Delete\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"item\" v-if=\"value.source\">\n            <div class=\"label\">Path</div>\n            <div class=\"value\">\n              <a :href=\"$route.path\" @click.prevent=\"showFileEditor = true\">\n                {{ displayPath }}\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n\n    <div class=\"file-editor-container\" v-if=\"showFileEditor && value.source\">\n      <FileEditor :file=\"value.source\"\n                  :line=\"value.line\"\n                  :visible=\"true\"\n                  :uppercase=\"false\"\n                  @close=\"showFileEditor = false\" />\n    </div>\n\n    <ProcedureEditor :procedure=\"value\"\n                     :read-only=\"isReadOnly\"\n                     :with-name=\"!isReadOnly\"\n                     :with-save=\"!isReadOnly\"\n                     :value=\"value\"\n                     :visible=\"showProcedureEditor\"\n                     @input=\"onUpdate\"\n                     @close=\"showProcedureEditor = false\"\n                     ref=\"editor\"\n                     v-if=\"value?.actions?.length && showProcedureEditor\" />\n\n    <div class=\"confirm-delete-container\">\n      <ConfirmDialog :visible=\"true\"\n                     @input=\"remove\"\n                     @close=\"showConfirmDelete = false\"\n                     v-if=\"showConfirmDelete\">\n        Are you sure you want to delete the procedure <b>{{ value.name }}</b>?\n      </ConfirmDialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ConfirmDialog from \"@/components/elements/ConfirmDialog\";\nimport EntityMixin from \"./EntityMixin\"\nimport EntityIcon from \"./EntityIcon\"\nimport FileEditor from \"@/components/File/EditorModal\";\nimport IconEditor from \"@/components/panels/Entities/IconEditor\";\nimport ProcedureEditor from \"@/components/Procedure/ProcedureEditorModal\"\nimport Response from \"@/components/Action/Response\"\n\nexport default {\n  components: {\n    ConfirmDialog,\n    EntityIcon,\n    FileEditor,\n    IconEditor,\n    ProcedureEditor,\n    Response,\n  },\n  mixins: [EntityMixin],\n  emits: ['delete', 'input', 'loading'],\n\n  props: {\n    collapseOnHeaderClick: {\n      type: Boolean,\n      default: false,\n    },\n\n    selected: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data: function() {\n    return {\n      args: {},\n      defaultIconClass: 'fas fa-cogs',\n      extraArgs: {},\n      collapsed_: true,\n      infoCollapsed: false,\n      lastError: null,\n      lastResponse: null,\n      newArgName: '',\n      newArgValue: '',\n      runCollapsed: false,\n      showConfirmDelete: false,\n      showFileEditor: false,\n      showProcedureEditor: false,\n    }\n  },\n\n  computed: {\n    icon() {\n      const defaultClass = this.defaultIconClass\n      const currentClass = this.value.meta?.icon?.['class']\n      let iconClass = currentClass\n      if (!currentClass || currentClass === defaultClass) {\n        iconClass = this.procedureTypeIconClass || defaultClass\n      }\n\n      return {\n        ...(this.value.meta?.icon || {}),\n        class: iconClass,\n      }\n    },\n\n    isReadOnly() {\n      return this.value.procedure_type !== 'db'\n    },\n\n    allArgs() {\n      return Object.entries({...this.args, ...this.extraArgs})\n        .map(([key, value]) => [key?.trim(), value])\n        .filter(\n          ([key, value]) => (\n            key?.length\n            && value != null\n            && (\n              typeof value !== 'string'\n              || value?.trim()?.length > 0\n            )\n          )\n        ).reduce((acc, [key, value]) => {\n          acc[key] = value\n          return acc\n        }, {})\n    },\n\n    displayPath() {\n      let src = this.value.source\n      if (!src?.length) {\n        return null\n      }\n\n      const configDir = this.$root.configDir\n      if (configDir) {\n        src = src.replace(new RegExp(`^${configDir}/`), '')\n      }\n\n      const line = parseInt(this.value.line)\n      if (!isNaN(line)) {\n        src += `:${line}`\n      }\n\n      return src\n    },\n\n    procedureTypeIconClass() {\n      if (this.value.procedure_type === 'python')\n        return 'fab fa-python'\n\n      if (this.value.procedure_type === 'config')\n        return 'fas fa-file'\n\n      if (this.value.procedure_type === 'db')\n        return 'fas fa-database'\n\n      return this.defaultIconClass\n    },\n  },\n\n  methods: {\n    async run() {\n      this.$emit('loading', true)\n      try {\n        this.lastResponse = await this.request(`procedure.${this.value.name}`, this.allArgs)\n        this.lastError = null\n        this.notify({\n          text: 'Procedure executed successfully',\n          image: {\n            icon: 'play',\n          }\n        })\n      } catch (e) {\n        this.lastResponse = null\n        this.lastError = e\n        this.notify({\n          text: 'Failed to execute procedure',\n          error: true,\n          image: {\n            icon: 'exclamation-triangle',\n          }\n        })\n      } finally {\n        this.$emit('loading', false)\n      }\n    },\n\n    async remove() {\n      this.$emit('loading', true)\n      try {\n        await this.request('procedures.delete', {name: this.value.name})\n        this.$emit('loading', false)\n        this.$emit('delete')\n        this.notify({\n          text: 'Procedure deleted successfully',\n          image: {\n            icon: 'trash',\n          }\n        })\n      } finally {\n        this.$emit('loading', false)\n      }\n    },\n\n    onHeaderClick(event) {\n      if (this.collapseOnHeaderClick) {\n        event.stopPropagation()\n        this.collapsed_ = !this.collapsed_\n      }\n    },\n\n    onUpdate(value) {\n      if (!this.isReadOnly) {\n        this.$emit('input', value)\n        this.$nextTick(() => this.$refs.editor?.close())\n      }\n    },\n\n    updateArg(arg, event) {\n      let value = event.target.value\n      if (!value?.length) {\n        delete this.args[arg]\n      }\n\n      try {\n        value = JSON.parse(value)\n      } catch (e) {\n        // Do nothing\n      }\n\n      this.args[arg] = value\n    },\n\n    updateExtraArgName(oldName, event) {\n      let newName = event.target.value?.trim()\n      if (newName === oldName) {\n        return\n      }\n\n      if (newName?.length) {\n        if (oldName) {\n          this.extraArgs[newName] = this.extraArgs[oldName]\n        } else {\n          this.extraArgs[newName] = ''\n        }\n      } else {\n        this.focusNewArgName()\n      }\n\n      if (oldName) {\n        delete this.extraArgs[oldName]\n      }\n    },\n\n    updateExtraArgValue(arg, event) {\n      let value = event.target.value\n      if (!value?.length) {\n        delete this.extraArgs[arg]\n        return\n      }\n\n      this.extraArgs[arg] = this.deserializeValue(value)\n    },\n\n    addExtraArg() {\n      let name = this.newArgName?.trim()\n      let value = this.newArgValue\n      if (!name?.length || !value?.length) {\n        return\n      }\n\n      this.extraArgs[name] = this.deserializeValue(value)\n      this.newArgName = ''\n      this.newArgValue = ''\n      this.focusNewArgName()\n    },\n\n    deserializeValue(value) {\n      try {\n        return JSON.parse(value)\n      } catch (e) {\n        return value\n      }\n    },\n\n    focusNewArgName() {\n      this.$nextTick(() => this.$refs.newArgName.focus())\n    },\n  },\n\n  watch: {\n    collapsed: {\n      immediate: true,\n      handler(value) {\n        this.collapsed_ = value\n      },\n    },\n\n    selected: {\n      immediate: true,\n      handler(value) {\n        this.collapsed_ = value\n      },\n    },\n\n    showProcedureEditor(value) {\n      if (!value) {\n        this.$refs.editor?.reset()\n      }\n    },\n  },\n\n  mounted() {\n    this.collapsed_ = !this.selected\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"common\";\n\n$icon-width: 2em;\n\n.procedure-container {\n  .body {\n    padding-bottom: 0;\n    cursor: default;\n  }\n\n  section {\n    header {\n      background: $tab-bg;\n      display: flex;\n      align-items: center;\n      font-size: 1.1em;\n      font-weight: bold;\n      margin: 1em -0.5em 0.5em -0.5em;\n      padding: 0.25em 1em 0.25em 0.5em;\n      border-top: 1px solid $default-shadow-color;\n      box-shadow: $border-shadow-bottom;\n      cursor: pointer;\n\n      &:hover {\n        background: $header-bg;\n      }\n\n      &.collapsed {\n        margin-bottom: -0.1em;\n      }\n\n      .buttons {\n        display: flex;\n        justify-content: flex-end;\n      }\n\n      button.btn {\n        background: none;\n        border: none;\n        color: initial;\n\n        &:hover {\n          color: $default-hover-fg;\n        }\n      }\n    }\n\n    &:first-of-type header {\n      margin-top: -0.5em;\n\n      &.collapsed {\n        margin-bottom: -1em;\n      }\n    }\n  }\n\n  .head {\n    &:not(.collapsed) {\n      background: $selected-bg;\n      border-bottom: 1px solid $default-shadow-color;\n    }\n\n    .icon, .collapse-toggler {\n      width: $icon-width;\n    }\n\n    .label, .value-and-toggler {\n      min-width: calc(((100% - (2 * $icon-width)) / 2) - 1em);\n      max-width: calc(((100% - (2 * $icon-width)) / 2) - 1em);\n    }\n\n    .label {\n      margin-left: 1em;\n    }\n\n    .value-and-toggler {\n      text-align: right;\n    }\n  }\n\n  form {\n    width: 100%;\n\n    .row {\n      width: 100%;\n      input[type=text] {\n        width: 100%;\n      }\n    }\n\n    .args {\n      .arg {\n        margin-bottom: 0.25em;\n        padding-bottom: 0.25em;\n        border-bottom: 1px solid $default-shadow-color;\n      }\n\n      .argname {\n        font-weight: bold;\n      }\n\n      @include until($tablet) {\n        .argname {\n          width: calc(100% - 2em) !important;\n        }\n\n        .argvalue {\n          width: 100% !important;\n        }\n      }\n\n      @include from($tablet) {\n        display: flex;\n        flex-wrap: wrap;\n\n        .argname {\n          width: calc(35% - 2em) !important;\n        }\n\n        .argvalue {\n          width: 65% !important;\n        }\n      }\n    }\n\n    .run-container {\n      display: flex;\n      justify-content: center;\n      font-size: 1.5em;\n      margin-top: 0.5em;\n\n      button {\n        padding: 0 1em;\n        text-align: center;\n        border-radius: 0.5em;\n      }\n    }\n  }\n\n  .info-body {\n    .item {\n      display: flex;\n      padding: 0.5em 0.25em;\n\n      @include until($tablet) {\n        border-bottom: 1px solid $default-shadow-color;\n      }\n\n      &.delete {\n        justify-content: center;\n\n        button {\n          width: 100%;\n          color: $error-fg;\n          padding: 0;\n\n          &:hover {\n            color: $default-hover-fg;\n          }\n        }\n      }\n    }\n\n    .label {\n      font-weight: bold;\n\n      @include until($tablet) {\n        width: 100%;\n      }\n\n      @include from($tablet) {\n        width: 33.3333%;\n      }\n    }\n\n    .value {\n      text-align: right;\n\n      @include until($tablet) {\n        width: 100%;\n      }\n\n      @include from($tablet) {\n        width: 66.6667%;\n      }\n\n      a {\n        width: 100%;\n      }\n    }\n\n    .actions {\n      @include until($tablet) {\n        flex-direction: column;\n      }\n\n      .item {\n        border-bottom: none;\n      }\n\n      button {\n        width: 100%;\n        height: 2.5em;\n        padding: 0;\n        border-radius: 1em;\n\n        &:hover {\n          color: $default-hover-fg;\n        }\n      }\n    }\n  }\n\n  .head-run-btn {\n    background: none;\n    border: none;\n    font-size: 1.25em;\n\n    &:hover {\n      background: none;\n      color: $default-hover-fg-2;\n    }\n  }\n}\n</style>\n","import { render } from \"./Procedure.vue?vue&type=template&id=9744c022&scoped=true\"\nimport script from \"./Procedure.vue?vue&type=script&lang=js\"\nexport * from \"./Procedure.vue?vue&type=script&lang=js\"\n\nimport \"./Procedure.vue?vue&type=style&index=0&id=9744c022&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9744c022\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_Modal","title","_ctx","value","name","visible","uppercase","before-close","$refs","editor","checkCanClose","ref","onClose","_cache","$event","$emit","_component_ProcedureEditor","procedure","$options","isReadOnly","modal","editorModal","onInput","_createElementVNode","_hoisted_2","autocomplete","onSubmit","_withModifiers","args","executeAction","type","style","$props","withName","_hoisted_3","_hoisted_4","_hoisted_5","$data","newValue","disabled","readOnly","Object","keys","meta","icon","length","_hoisted_7","_component_IconEditor","entity","onIconChange","onChange","showArgs","_hoisted_8","_hoisted_9","_Fragment","_renderList","arg","index","key","placeholder","onArgInput","target","trim","onBlur","onArgEdit","_hoisted_11","newArg","onNewArg","_hoisted_12","_hoisted_13","_component_ActionsList","actions","context","onActionsEdit","response","error","_hoisted_14","_component_Response","showArgsModal","_hoisted_15","onRunArgsModalClose","executeWithArgs","runArgs","_hoisted_16","includes","_hoisted_17","_toDisplayString","_hoisted_18","onEditRunArgName","_hoisted_20","_hoisted_22","_hoisted_23","newRunArg","onNewRunArgName","_hoisted_24","_component_FloatingButton","running","onClick","_hoisted_25","_component_ConfirmDialog","forceClose","_hoisted_26","forceSave","_hoisted_27","_hoisted_28","_component_FloatingButtons","direction","left","glow","showYAML","_createBlock","duplicate","_hoisted_29","showSave","right","canSave","save","duplicateValue","_hoisted_30","duplicateEditor","duplicateModal","_hoisted_31","_component_ProcedureDump","_normalizeClass","_renderSlot","$slots","emits","props","String","default","size","computed","buttons","this","$el","querySelectorAll","mounted","Array","from","offset","forEach","button","offsetWidth","styleOffset","parseFloat","getComputedStyle","top","bottom","__exports__","loading","_component_Loading","_component_CopyButton","text","yaml","innerHTML","highlightedYAML","mixins","Utils","components","CopyButton","Loading","required","data","hljs","highlight","language","methods","refresh","request","ActionsList","ConfirmDialog","FloatingButton","FloatingButtons","IconEditor","Modal","ProcedureDump","Response","Boolean","withSave","undefined","Function","confirmOverwrite","newAction","shouldForceClose","floatingButtons","querySelector","valueString","newValueString","JSON","stringify","reduce","acc","source","modal_","shouldConfirmClose","overwriteOk","map","action","a","old_name","notify","image","procedures","publish","open","onResponse","onError","message","onDone","e","console","warning","argsModal","close","entries","parse","id","external_id","isDuplicate","filter","i","splice","setTimeout","newArgInput","focus","nextInput","children","select","event","push","$nextTick","confirmClose","warn","reset","beforeUnload","preventDefault","returnValue","addBeforeUnload","window","addEventListener","removeBeforeUnload","removeEventListener","syncValue","watch","immediate","deep","handler","nameInput","unmouted","ProcedureEditor","defaultIconClass","extraArgs","collapsed_","infoCollapsed","lastError","lastResponse","newArgName","newArgValue","runCollapsed","showConfirmDelete","showFileEditor","showProcedureEditor","procedure_type","show","hide","toggle","collapsed","selected","render","onHeaderClick","_component_EntityIcon","_hoisted_6","run","updateArg","updateExtraArgName","updateExtraArgValue","addExtraArg","_hoisted_21","procedureTypeIconClass","_hoisted_32","_hoisted_33","_hoisted_35","_hoisted_37","_hoisted_36","_hoisted_38","_hoisted_40","_hoisted_41","href","$route","path","displayPath","_hoisted_42","_hoisted_43","_component_FileEditor","file","line","onUpdate","_hoisted_44","remove","EntityIcon","FileEditor","EntityMixin","collapseOnHeaderClick","defaultClass","currentClass","iconClass","allArgs","src","configDir","$root","replace","RegExp","parseInt","isNaN","stopPropagation","oldName","newName","focusNewArgName","deserializeValue"],"sourceRoot":""}