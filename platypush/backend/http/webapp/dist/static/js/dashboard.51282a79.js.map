{"version":3,"file":"static/js/dashboard.51282a79.js","mappings":"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","sources":["webpack://platypush/./src/components/Loading.vue","webpack://platypush/./src/components/Loading.vue?1ccf","webpack://platypush/./src/views/Dashboard.vue","webpack://platypush/./src/components/widgets/Row.vue","webpack://platypush/./src/components/widgets/Row.vue?bc29","webpack://platypush/./src/components/widgets/Widget.vue","webpack://platypush/./src/components/widgets/Widget.vue?043c","webpack://platypush/./src/views/Dashboard.vue?040e","webpack://platypush/./src/components/widgets/ lazy ^\\.\\/.*\\/Index$ namespace object"],"sourcesContent":["<template>\n  <div class=\"loading\">\n    <div class=\"icon\">\n      <div v-for=\"n in 4\" :key=\"n\" />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 3em;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: $loading-bg;\n  opacity: 0.5;\n}\n\n.icon {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n\n  div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #fff;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n\n    &:nth-child(1) {\n      left: 8px;\n      animation: lds-ellipsis1 0.6s infinite;\n    }\n\n    &:nth-child(2) {\n      left: 8px;\n      animation: lds-ellipsis2 0.6s infinite;\n    }\n\n    &:nth-child(3) {\n      left: 32px;\n      animation: lds-ellipsis2 0.6s infinite;\n    }\n\n    &:nth-child(4) {\n      left: 56px;\n      animation: lds-ellipsis3 0.6s infinite;\n    }\n  }\n}\n\n@keyframes lds-ellipsis1 {\n  0% {\n    transform: scale(0);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n@keyframes lds-ellipsis3 {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n\n@keyframes lds-ellipsis2 {\n  0% {\n    transform: translate(0, 0);\n  }\n  100% {\n    transform: translate(24px, 0);\n  }\n}\n</style>","import { render } from \"./Loading.vue?vue&type=template&id=4d9c871b&scoped=true\"\nconst script = {}\n\nimport \"./Loading.vue?vue&type=style&index=0&id=4d9c871b&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d9c871b\"]])\n\nexport default __exports__","<template>\n  <Loading v-if=\"loading\" />\n\n  <div id=\"dashboard\" class=\"col-12\" :class=\"classes\" :style=\"style\">\n    <Row v-for=\"(row, i) in rows\" :key=\"i\" :class=\"row.class\" :style=\"row.style\">\n      <keep-alive v-for=\"(widget, j) in row.widgets\" :key=\"j\">\n        <Widget :style=\"widget.style\" :class=\"widget.class\">\n          <component :is=\"widget.component\" v-bind=\"getWidgetProps(widget)\" />\n        </Widget>\n      </keep-alive>\n    </Row>\n  </div>\n</template>\n\n<script>\nimport { defineAsyncComponent, shallowRef } from 'vue'\nimport Utils from '@/Utils'\nimport Loading from \"@/components/Loading\";\nimport Row from \"@/components/widgets/Row\";\nimport Widget from \"@/components/widgets/Widget\";\n\nexport default {\n  name: 'Dashboard',\n  mixins: [Utils],\n  components: {Widget, Loading, Row},\n  props: {\n    // Refresh interval in seconds.\n    refreshSeconds: {\n      type: Number,\n      required: false,\n      default: 0,\n    },\n  },\n\n  data() {\n    return {\n      rows: [],\n      loading: false,\n      style: undefined,\n      class: undefined,\n    }\n  },\n\n  computed: {\n    classes() {\n      return this.class\n    },\n\n    _refreshSeconds() {\n      return parseFloat(this.refreshSeconds) || 0\n    },\n  },\n\n  methods: {\n    getWidgetProps(widget) {\n      const props = {...widget.props}\n      if (props.class)\n        delete props.class\n\n      return props\n    },\n\n    parseTemplate(tmpl) {\n      const node = new DOMParser().parseFromString(tmpl, 'text/xml').childNodes[0]\n      const self = this\n      this.style = node.attributes.style?.nodeValue\n      this.class = node.attributes.class?.nodeValue\n\n      this.rows = [...node.getElementsByTagName('Row')].map((row) => {\n        return {\n          style: row.attributes.style?.nodeValue,\n          class: row.attributes.class?.nodeValue,\n          widgets: [...row.children].map((el) => {\n            const component = shallowRef(\n              defineAsyncComponent(\n                () => import(`@/components/widgets/${el.nodeName}/Index`)\n              )\n            )\n\n            const style = el.attributes.style?.nodeValue\n            const classes = el.attributes.class?.nodeValue\n            const attrs = [...el.attributes].reduce((obj, node) => {\n              if (node.nodeName !== 'style') {\n                obj[node.nodeName] = node.nodeValue\n              }\n\n              return obj\n            }, {\n              content: el.innerHTML,\n            })\n\n            const widget = {\n              component: component,\n              style: style,\n              class: classes,\n              props: attrs || {},\n            }\n\n            self.$options.components[el.nodeName] = component\n            return widget\n          })\n        }\n      })\n\n      this.loading = false\n    },\n\n    async refreshDashboard() {\n      this.loading = true\n      this.widgets = []\n      const name = this.$route.params.name\n      const template = (await this.request('config.get_dashboard', { name: name }))\n\n      if (!template) {\n        this.notifyError(`Dashboard ${name} not found`)\n      }\n\n      this.parseTemplate(template)\n    },\n  },\n\n  mounted() {\n    this.refreshDashboard()\n    if (this._refreshSeconds) {\n      const self = this\n      setInterval(() => {\n        self.refreshDashboard()\n      }, parseInt((this._refreshSeconds*1000).toFixed(0)))\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"~lato-font/scss/public-api\";\n$lato-font-path: \"~lato-font/fonts\";\n\n@include lato-include-font('medium');\n\n#dashboard {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n  padding: 1em 1em 0 1em;\n  background: $dashboard-bg;\n  background-size: cover;\n  font-family: Lato, proxima-nova, Helvetica Neue, Arial, sans-serif;\n\n  .blurred {\n    filter: blur(0.075em);\n  }\n}\n</style>\n\n<style>\nhtml {\n  overflow: auto !important;\n}\n</style>\n","<template>\n  <div class=\"row\" :class=\"classes\" :style=\"style\">\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Row\",\n  props: {\n    // Class override\n    class: {\n      type: String,\n      required: false,\n      default: '',\n    },\n\n    // Style override\n    style: {\n      type: String,\n      required: false,\n      default: '',\n    },\n  },\n\n  computed: {\n    classes() {\n      return this.class\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.row {\n  width: 100%;\n  height: 49%;\n\n  &:not(:last-child) {\n    margin-bottom: 1%;\n  }\n}\n</style>\n","import { render } from \"./Row.vue?vue&type=template&id=1b4663f2&scoped=true\"\nimport script from \"./Row.vue?vue&type=script&lang=js\"\nexport * from \"./Row.vue?vue&type=script&lang=js\"\n\nimport \"./Row.vue?vue&type=style&index=0&id=1b4663f2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1b4663f2\"]])\n\nexport default __exports__","<template>\n  <div :style=\"style\" :class=\"classes\">\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Widget\",\n  props: {\n    // Widget style override\n    style: {\n      type: String,\n      required: false,\n      default: '',\n    },\n\n    // Widget class override\n    class: {\n      type: String,\n      required: false,\n      default: '',\n    },\n  },\n\n  computed: {\n    classes() {\n      return (this.class?.length ? this.class.split(' ') : ['col-3']).concat(['widget', 'column'])\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.widget {\n  height: calc(100% - 1em);\n  background: $background-color;\n  border-radius: 5px;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 3px 3px 0 rgba(0,0,0,0.16), 0 0 0 1px rgba(0,0,0,0.08);\n}\n</style>\n","import { render } from \"./Widget.vue?vue&type=template&id=5df52982&scoped=true\"\nimport script from \"./Widget.vue?vue&type=script&lang=js\"\nexport * from \"./Widget.vue?vue&type=script&lang=js\"\n\nimport \"./Widget.vue?vue&type=style&index=0&id=5df52982&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5df52982\"]])\n\nexport default __exports__","import { render } from \"./Dashboard.vue?vue&type=template&id=462fad8c&scoped=true\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=462fad8c&lang=scss&scoped=true\"\nimport \"./Dashboard.vue?vue&type=style&index=1&id=462fad8c&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-462fad8c\"]])\n\nexport default __exports__","var map = {\n\t\"./Calendar/Index\": [\n\t\t5638,\n\t\t5638\n\t],\n\t\"./Camera/Index\": [\n\t\t446,\n\t\t446\n\t],\n\t\"./Component/Index\": [\n\t\t1449,\n\t\t7651,\n\t\t2844,\n\t\t1449\n\t],\n\t\"./DateTime/Index\": [\n\t\t4619,\n\t\t1391,\n\t\t4619\n\t],\n\t\"./DateTimeWeather/Index\": [\n\t\t9962,\n\t\t5193,\n\t\t1391,\n\t\t9962\n\t],\n\t\"./ImageCarousel/Index\": [\n\t\t1055,\n\t\t5193,\n\t\t1391,\n\t\t2140\n\t],\n\t\"./Music/Index\": [\n\t\t7841,\n\t\t7651,\n\t\t906,\n\t\t7841\n\t],\n\t\"./Plugin/Index\": [\n\t\t8179,\n\t\t8179\n\t],\n\t\"./RssNews/Index\": [\n\t\t6523,\n\t\t6523\n\t],\n\t\"./Weather/Index\": [\n\t\t5193,\n\t\t5193\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 6725;\nmodule.exports = webpackAsyncContext;"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","n","key","script","__exports__","render","$data","loading","_createBlock","_component_Loading","id","_normalizeClass","$options","classes","style","_normalizeStyle","rows","row","i","_component_Row","widgets","widget","j","_KeepAlive","_createVNode","_component_Widget","_resolveDynamicComponent","component","_normalizeProps","_guardReactiveProps","getWidgetProps","$props","_renderSlot","_ctx","$slots","undefined","name","props","type","String","required","default","computed","this","length","split","concat","mixins","Utils","components","Widget","Loading","Row","refreshSeconds","Number","data","_refreshSeconds","parseFloat","methods","parseTemplate","tmpl","node","DOMParser","parseFromString","childNodes","self","attributes","nodeValue","getElementsByTagName","map","children","el","shallowRef","defineAsyncComponent","nodeName","attrs","reduce","obj","content","innerHTML","refreshDashboard","$route","params","template","request","notifyError","mounted","setInterval","parseInt","toFixed","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","all","slice","keys","Object","module","exports"],"sourceRoot":""}