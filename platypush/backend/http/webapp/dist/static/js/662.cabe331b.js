"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[662,1014],{6561:function(e,n,t){t.d(n,{A:function(){return r}});var i=t(641),s=t(33);const a={class:"no-items-container"};function l(e,n,t,l,o,d){return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",{class:(0,s.C4)(["no-items fade-in",{shadow:t.withShadow}])},[(0,i.RG)(e.$slots,"default",{},void 0,!0)],2)])}var o={name:"NoItems",props:{withShadow:{type:Boolean,default:!0}}},d=t(6262);const c=(0,d.A)(o,[["render",l],["__scopeId","data-v-4856c4d7"]]);var r=c},1014:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var i=t(641),s=t(33);const a={class:"media-youtube-channel"},l={key:1,class:"channel"},o={class:"header"},d={class:"banner"},c=["src"],r={class:"row info-container"},u={class:"info"},h={class:"row"},p={class:"title-container"},b=["href"],y={class:"image"},g=["src"],m=["href"],f={class:"actions"},v=["title"],w={key:0,class:"subscribers"},k={key:0,class:"description"};function C(e,n,t,C,_,L){const A=(0,i.g2)("Loading"),$=(0,i.g2)("Results");return(0,i.uX)(),(0,i.CE)("div",a,[L.isLoading?((0,i.uX)(),(0,i.Wv)(A,{key:0})):_.channel?((0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",o,[(0,i.Lk)("div",d,[_.channel?.banner?.length?((0,i.uX)(),(0,i.CE)("img",{key:0,src:_.channel.banner},null,8,c)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",r,[(0,i.Lk)("div",u,[(0,i.Lk)("div",h,[(0,i.Lk)("div",p,[_.channel?.image?.length?((0,i.uX)(),(0,i.CE)("a",{key:0,href:_.channel.url,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",y,[(0,i.Lk)("img",{src:_.channel.image},null,8,g)])],8,b)):(0,i.Q3)("",!0),(0,i.Lk)("a",{class:"title",href:_.channel.url,target:"_blank",rel:"noopener noreferrer"},(0,s.v_)(_.channel?.name),9,m)]),(0,i.Lk)("div",f,[(0,i.Lk)("button",{title:_.subscribed?"Unsubscribe":"Subscribe",onClick:n[0]||(n[0]=(...e)=>L.toggleSubscription&&L.toggleSubscription(...e))},(0,s.v_)(_.subscribed?"Unsubscribe":"Subscribe"),9,v),null!=_.channel.subscribers&&(_.channel.subscribers||0)>=0?((0,i.uX)(),(0,i.CE)("div",w,(0,s.v_)(e.formatNumber(_.channel.subscribers))+" subscribers ",1)):(0,i.Q3)("",!0)])]),_.channel?.description?((0,i.uX)(),(0,i.CE)("div",k,(0,s.v_)(_.channel.description),1)):(0,i.Q3)("",!0)])])]),(0,i.bF)($,{results:_.channel.items,filter:t.filter,"result-index-step":null,"selected-result":_.selectedResult,ref:"results",onAddToPlaylist:n[1]||(n[1]=n=>e.$emit("add-to-playlist",n)),onDownload:n[2]||(n[2]=n=>e.$emit("download",n)),onDownloadAudio:n[3]||(n[3]=n=>e.$emit("download-audio",n)),onOpenChannel:n[4]||(n[4]=n=>e.$emit("open-channel",n)),onPlay:n[5]||(n[5]=n=>e.$emit("play",n)),onPlayWithOpts:n[6]||(n[6]=n=>e.$emit("play-with-opts",n)),onScrollEnd:L.loadNextPage,onSelect:n[7]||(n[7]=e=>_.selectedResult=e),onView:n[8]||(n[8]=n=>e.$emit("view",n))},null,8,["results","filter","selected-result","onScrollEnd"])])):(0,i.Q3)("",!0)])}var _=t(9828),L=t(3149),A=t(2002),$={mixins:[A.A],emits:["add-to-playlist","download","download-audio","open-channel","play","play-with-opts","view"],components:{Loading:_.A,Results:L.A},props:{id:{type:String,required:!0},filter:{type:String,default:null},loading:{type:Boolean,default:!1}},data(){return{channel:null,loading_:!1,loadingNextPage:!1,selectedResult:null,subscribed:!1}},computed:{isLoading(){return this.loading||this.loading_},itemsByUrl(){return this.channel?.items.reduce(((e,n)=>(e[n.url]=n,e)),{})}},methods:{async loadChannel(){this.loading_=!0;try{await this.updateChannel(!0),this.subscribed=await this.request("youtube.is_subscribed",{channel_id:this.id})}finally{this.loading_=!1}},async updateChannel(e){const n=await this.request("youtube.get_channel",{id:this.id,next_page_token:this.channel?.next_page_token}),t=this.itemsByUrl||{};let i=n.items.filter((e=>!t[e.url])).map((e=>({type:"youtube",...e})));e||(i=this.channel.items.concat(i)),this.channel=n,this.channel.items=i},async loadNextPage(){if(this.channel?.next_page_token&&!this.loadingNextPage){this.loadingNextPage=!0;try{await this.timeout(500),await this.updateChannel()}finally{this.loadingNextPage=!1}}},async toggleSubscription(){const e=this.subscribed?"unsubscribe":"subscribe";await this.request(`youtube.${e}`,{channel_id:this.id}),this.subscribed=!this.subscribed}},async mounted(){this.setUrlArgs({channel:this.id}),await this.loadChannel()},unmounted(){this.setUrlArgs({channel:null})}},X=t(6262);const E=(0,X.A)($,[["render",C],["__scopeId","data-v-448cf852"]]);var S=E},662:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var i=t(641),s=t(33);const a={class:"media-youtube-subscriptions"},l={key:0,class:"subscriptions-index"},o={key:2,class:"body grid"},d=["onClick"],c={class:"image"},r=["src","alt"],u={class:"title"},h={key:1,class:"subscription-body"};function p(e,n,t,p,b,y){const g=(0,i.g2)("Loading"),m=(0,i.g2)("NoItems"),f=(0,i.g2)("Channel");return(0,i.uX)(),(0,i.CE)("div",a,[t.selectedChannel?.id?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bF)(f,{id:t.selectedChannel.id,filter:t.filter,onAddToPlaylist:n[0]||(n[0]=n=>e.$emit("add-to-playlist",n)),onDownload:n[1]||(n[1]=n=>e.$emit("download",n)),onDownloadAudio:n[2]||(n[2]=n=>e.$emit("download-audio",n)),onPlay:n[3]||(n[3]=n=>e.$emit("play",n)),onPlayWithOpts:n[4]||(n[4]=n=>e.$emit("play-with-opts",n)),onView:n[5]||(n[5]=n=>e.$emit("view",n))},null,8,["id","filter"])])):((0,i.uX)(),(0,i.CE)("div",l,[b.loading?((0,i.uX)(),(0,i.Wv)(g,{key:0})):b.channels?.length?((0,i.uX)(),(0,i.CE)("div",o,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(y.channelsById,((n,t)=>((0,i.uX)(),(0,i.CE)("div",{class:"channel item",key:t,onClick:t=>e.$emit("select",n)},[(0,i.Lk)("div",c,[(0,i.Lk)("img",{src:n.image,alt:n.name},null,8,r)]),(0,i.Lk)("div",u,(0,s.v_)(n.name),1)],8,d)))),128))])):((0,i.uX)(),(0,i.Wv)(m,{key:1,"with-shadow":!1},{default:(0,i.k6)((()=>[(0,i.eW)(" No channels found. ")])),_:1}))]))])}var b=t(1014),y=t(6561),g=t(9828),m=t(2002),f={mixins:[m.A],emits:["add-to-playlist","download","download-audio","play","play-with-opts","select","view"],components:{Channel:b["default"],Loading:g.A,NoItems:y.A},props:{selectedChannel:{type:Object,default:null},filter:{type:String,default:null}},data(){return{channels:[],loading:!1}},computed:{channelsById(){return this.channels.filter((e=>!this.filter||e.name.toLowerCase().includes(this.filter.toLowerCase()))).reduce(((e,n)=>(e[n.id]=n,e)),{})}},methods:{async loadSubscriptions(){this.loading=!0;try{this.channels=await this.request("youtube.get_subscriptions")}finally{this.loading=!1}},initView(){const e=this.getUrlArgs();e.channel&&this.$emit("select",{id:e.channel})}},async mounted(){await this.loadSubscriptions(),this.initView()}},v=t(6262);const w=(0,v.A)(f,[["render",p],["__scopeId","data-v-e883c5cc"]]);var k=w}}]);
//# sourceMappingURL=662.cabe331b.js.map