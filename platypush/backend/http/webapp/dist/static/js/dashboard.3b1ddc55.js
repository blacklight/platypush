(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[9966],{6791:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var n=t(6252);const r={class:"loading"},a={class:"icon"};function o(e,s){return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",a,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(4,(e=>(0,n._)("div",{key:e}))),64))])])}var d=t(3744);const l={},i=(0,d.Z)(l,[["render",o],["__scopeId","data-v-4d9c871b"]]);var c=i},8332:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return _}});var n=t(6252),r=t(3577);function a(e,s,t,a,o,d){const l=(0,n.up)("Loading"),i=(0,n.up)("Widget"),c=(0,n.up)("Row");return(0,n.wg)(),(0,n.iD)(n.HY,null,[o.loading?((0,n.wg)(),(0,n.j4)(l,{key:0})):(0,n.kq)("",!0),(0,n._)("div",{id:"dashboard",class:(0,r.C_)(["col-12",d.classes]),style:(0,r.j5)(o.style)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.rows,((e,s)=>((0,n.wg)(),(0,n.j4)(c,{key:s,class:(0,r.C_)(e.class),style:(0,r.j5)(e.style)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.widgets,((e,s)=>((0,n.wg)(),(0,n.j4)(n.Ob,{key:s},[(0,n.Wm)(i,{style:(0,r.j5)(e.style),class:(0,r.C_)(e.class)},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(e.component),(0,n.dG)({ref_for:!0},d.getWidgetProps(e)),null,16))])),_:2},1032,["style","class"])],1024)))),128))])),_:2},1032,["class","style"])))),128))],6)],64)}var o=t(2262),d=t(8637),l=t(6791);function i(e,s,t,a,o,d){return(0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["row",d.classes]),style:(0,r.j5)(t.style)},[(0,n.WI)(e.$slots,"default",{},void 0,!0)],6)}var c={name:"Row",props:{class:{type:String,required:!1,default:""},style:{type:String,required:!1,default:""}},computed:{classes(){return this.class}}},u=t(3744);const p=(0,u.Z)(c,[["render",i],["__scopeId","data-v-1b4663f2"]]);var h=p;function f(e,s,t,a,o,d){return(0,n.wg)(),(0,n.iD)("div",{style:(0,r.j5)(t.style),class:(0,r.C_)(d.classes)},[(0,n.WI)(e.$slots,"default",{},void 0,!0)],6)}var g={name:"Widget",props:{style:{type:String,required:!1,default:""},class:{type:String,required:!1,default:""}},computed:{classes(){return(this.class?.length?this.class.split(" "):["col-3"]).concat(["widget","column"])}}};const m=(0,u.Z)(g,[["render",f],["__scopeId","data-v-5df52982"]]);var y=m,w={name:"Dashboard",mixins:[d.Z],components:{Widget:y,Loading:l.Z,Row:h},props:{refreshSeconds:{type:Number,required:!1,default:0}},data(){return{rows:[],loading:!1,style:void 0,class:void 0}},computed:{classes(){return this.class},_refreshSeconds(){return parseFloat(this.refreshSeconds)||0}},methods:{getWidgetProps(e){const s={...e.props};return s.class&&delete s.class,s},parseTemplate(e){const s=(new DOMParser).parseFromString(e,"text/xml").childNodes[0],r=this;this.style=s.attributes.style?.nodeValue,this.class=s.attributes.class?.nodeValue,this.rows=[...s.getElementsByTagName("Row")].map((e=>({style:e.attributes.style?.nodeValue,class:e.attributes.class?.nodeValue,widgets:[...e.children].map((e=>{const s=(0,o.XI)((0,n.RC)((()=>t(6725)(`./${e.nodeName}/Index`)))),a=e.attributes.style?.nodeValue,d=e.attributes.class?.nodeValue,l=[...e.attributes].reduce(((e,s)=>("style"!==s.nodeName&&(e[s.nodeName]=s.nodeValue),e)),{content:e.innerHTML}),i={component:s,style:a,class:d,props:l||{}};return r.$options.components[e.nodeName]=s,i}))}))),this.loading=!1},async refreshDashboard(){this.loading=!0,this.widgets=[];const e=this.$route.params.name,s=await this.request("config.get_dashboard",{name:e});s||this.notifyError(`Dashboard ${e} not found`),this.parseTemplate(s)}},mounted(){if(this.refreshDashboard(),this._refreshSeconds){const e=this;setInterval((()=>{e.refreshDashboard()}),parseInt((1e3*this._refreshSeconds).toFixed(0)))}}};const v=(0,u.Z)(w,[["render",a],["__scopeId","data-v-462fad8c"]]);var _=v},6725:function(e,s,t){var n={"./Calendar/Index":[5638,5638],"./Camera/Index":[446,446],"./Component/Index":[1449,7651,2844,1449],"./DateTime/Index":[4619,1391,4619],"./DateTimeWeather/Index":[9962,9211,1391,9962],"./ImageCarousel/Index":[2140,9211,1391,2140],"./Music/Index":[7841,7651,906,7841],"./Plugin/Index":[8179,8179],"./RssNews/Index":[6523,6523],"./Weather/Index":[9211,9211]};function r(e){if(!t.o(n,e))return Promise.resolve().then((function(){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}));var s=n[e],r=s[0];return Promise.all(s.slice(1).map(t.e)).then((function(){return t(r)}))}r.keys=function(){return Object.keys(n)},r.id=6725,e.exports=r}}]);
//# sourceMappingURL=dashboard.3b1ddc55.js.map