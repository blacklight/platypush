{"version":3,"file":"static/js/168.89125ddf.js","mappings":"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","sources":["webpack://platypush/./src/components/panels/Media/Providers/YouTube/Channel.vue","webpack://platypush/./src/components/panels/Media/Providers/YouTube/Channel.vue?e8bb"],"sourcesContent":["<template>\n  <div class=\"media-youtube-channel\">\n    <Loading v-if=\"isLoading\" />\n\n    <div class=\"channel\" v-else-if=\"channel\">\n      <div class=\"header\">\n        <div class=\"banner\">\n          <img :src=\"channel.banner\" v-if=\"channel?.banner?.length\" />\n        </div>\n\n        <div class=\"row info-container\">\n          <div class=\"info\">\n            <div class=\"row\">\n              <div class=\"title-container\">\n                <a :href=\"channel.url\" target=\"_blank\" rel=\"noopener noreferrer\" v-if=\"channel?.image?.length\">\n                  <div class=\"image\">\n                    <img :src=\"channel.image\" />\n                  </div>\n                </a>\n\n                <a class=\"title\" :href=\"channel.url\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {{ channel?.name }}\n                </a>\n              </div>\n\n              <div class=\"actions\">\n                <button :title=\"subscribed ? 'Unsubscribe' : 'Subscribe'\" @click=\"toggleSubscription\">\n                  {{ subscribed ? 'Unsubscribe' : 'Subscribe' }}\n                </button>\n\n                <div class=\"subscribers\" v-if=\"channel.subscribers != null && (channel.subscribers || 0) >= 0\">\n                  {{ formatNumber(channel.subscribers) }} subscribers\n                </div>\n              </div>\n            </div>\n\n            <div class=\"description\" v-if=\"channel?.description\">\n              {{ channel.description }}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Results :results=\"channel.items\"\n               :filter=\"filter\"\n               :result-index-step=\"null\"\n               :selected-result=\"selectedResult\"\n               ref=\"results\"\n               @add-to-playlist=\"$emit('add-to-playlist', $event)\"\n               @download=\"$emit('download', $event)\"\n               @download-audio=\"$emit('download-audio', $event)\"\n               @open-channel=\"$emit('open-channel', $event)\"\n               @play=\"$emit('play', $event)\"\n               @play-cache=\"$emit('play-cache', $event)\"\n               @scroll-end=\"loadNextPage\"\n               @select=\"selectedResult = $event\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Loading from \"@/components/Loading\";\nimport Results from \"@/components/panels/Media/Results\";\nimport Utils from \"@/Utils\";\n\nexport default {\n  mixins: [Utils],\n  emits: [\n    'add-to-playlist',\n    'download',\n    'download-audio',\n    'open-channel',\n    'play',\n    'play-cache',\n  ],\n\n  components: {\n    Loading,\n    Results,\n  },\n\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n\n    filter: {\n      type: String,\n      default: null,\n    },\n\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return {\n      channel: null,\n      loading_: false,\n      loadingNextPage: false,\n      selectedResult: null,\n      subscribed: false,\n    }\n  },\n\n  computed: {\n    isLoading() {\n      return this.loading || this.loading_\n    },\n\n    itemsByUrl() {\n      return this.channel?.items.reduce((acc, item) => {\n        acc[item.url] = item\n        return acc\n      }, {})\n    },\n  },\n\n  methods: {\n    async loadChannel() {\n      this.loading_ = true\n      try {\n        await this.updateChannel(true)\n        this.subscribed = await this.request('youtube.is_subscribed', {channel_id: this.id})\n      } finally {\n        this.loading_ = false\n      }\n    },\n\n    async updateChannel(init) {\n      const channel = await this.request(\n        'youtube.get_channel',\n        {id: this.id, next_page_token: this.channel?.next_page_token}\n      )\n\n      const itemsByUrl = this.itemsByUrl || {}\n      let items = channel.items\n        .filter(item => !itemsByUrl[item.url])\n        .map(item => {\n          return {\n            type: 'youtube',\n            ...item,\n          }\n        })\n\n      if (!init) {\n        items = this.channel.items.concat(items)\n      }\n\n      this.channel = channel\n      this.channel.items = items\n    },\n\n    async loadNextPage() {\n      if (!this.channel?.next_page_token || this.loadingNextPage) {\n        return\n      }\n\n      this.loadingNextPage = true\n\n      try {\n        await this.timeout(500)\n        await this.updateChannel()\n      } finally {\n        this.loadingNextPage = false\n      }\n    },\n\n    async toggleSubscription() {\n      const action = this.subscribed ? 'unsubscribe' : 'subscribe'\n      await this.request(`youtube.${action}`, {channel_id: this.id})\n      this.subscribed = !this.subscribed\n    },\n  },\n\n  async mounted() {\n    this.setUrlArgs({channel: this.id})\n    await this.loadChannel()\n  },\n\n  unmounted() {\n    this.setUrlArgs({channel: null})\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"header.scss\";\n\n.media-youtube-channel {\n  height: 100%;\n  overflow-y: auto;\n\n  .channel {\n    height: 100%;\n  }\n\n  .header {\n    .title-container {\n      flex: 1;\n    }\n\n    .actions {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n\n      button {\n        background: $default-bg-7;\n        padding: 0.5em 1em;\n        border-radius: 0.5em;\n        cursor: pointer;\n\n        &:hover {\n          background: $hover-bg;\n        }\n      }\n    }\n\n    .subscribers {\n      font-size: 0.8em;\n    }\n  }\n}\n</style>\n","import { render } from \"./Channel.vue?vue&type=template&id=0f1311f3&scoped=true\"\nimport script from \"./Channel.vue?vue&type=script&lang=js\"\nexport * from \"./Channel.vue?vue&type=script&lang=js\"\n\nimport \"./Channel.vue?vue&type=style&index=0&id=0f1311f3&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0f1311f3\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","$options","isLoading","_createBlock","_component_Loading","key","$data","channel","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","banner","length","src","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","image","href","url","target","rel","_hoisted_11","name","_hoisted_13","_hoisted_14","title","subscribed","onClick","_cache","args","toggleSubscription","_hoisted_15","subscribers","_hoisted_16","_toDisplayString","_ctx","formatNumber","description","_hoisted_17","_createVNode","_component_Results","results","items","filter","$props","selectedResult","ref","onAddToPlaylist","$event","$emit","onDownload","onDownloadAudio","onOpenChannel","onPlay","onPlayCache","onScrollEnd","loadNextPage","onSelect","mixins","Utils","emits","components","Loading","Results","props","id","type","String","required","default","loading","Boolean","data","loading_","loadingNextPage","computed","this","itemsByUrl","reduce","acc","item","methods","loadChannel","updateChannel","request","channel_id","init","next_page_token","map","concat","timeout","action","mounted","setUrlArgs","unmounted","__exports__","render"],"sourceRoot":""}