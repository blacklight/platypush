"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[1587],{7191:function(t,e,s){s.d(e,{Z:function(){return b}});var a=s(6252),n=s(3577);const i={class:"progress-bar-container"},l={class:"col-s-2 col-m-1 time"},o=["textContent"],u={class:"col-s-8 col-m-10 time-bar"},r={class:"col-s-2 col-m-1 time"},c=["textContent"];function m(t,e,s,m,p,d){const v=(0,a.up)("Slider");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",l,[(0,a._)("span",{class:"elapsed-time",textContent:(0,n.zw)(null==s.elapsed||"play"!==s.status.state&&"pause"!==s.status.state?"-:--":t.convertTime(s.elapsed))},null,8,o)]),(0,a._)("div",u,[(0,a.Wm)(v,{value:s.elapsed,range:[0,s.duration],disabled:!s.duration||"stop"===s.status.state,onChange:e[0]||(e[0]=e=>t.$emit("seek",e.target.value))},null,8,["value","range","disabled"])]),(0,a._)("div",r,[(0,a._)("span",{class:"total-time",textContent:(0,n.zw)(s.duration&&"stop"!==s.status.state?t.convertTime(s.duration):"-:--")},null,8,c)])])}var p=s(1065),d=s(8140),v={components:{Slider:d.Z},emits:["seek"],mixins:[p.Z],props:{elapsed:{type:Number},duration:{type:Number},status:{type:Object,default:()=>({})}}},g=s(3744);const k=(0,g.Z)(v,[["render",m],["__scopeId","data-v-3894ad4d"]]);var b=k},1065:function(t,e,s){s.d(e,{Z:function(){return l}});s(560);var a=s(8637),n={name:"Utils",mixins:[a.Z],computed:{audioExtensions(){return new Set(["3gp","aa","aac","aax","act","aiff","amr","ape","au","awb","dct","dss","dvf","flac","gsm","iklax","ivs","m4a","m4b","m4p","mmf","mp3","mpc","msv","nmf","nsf","ogg,","opus","ra,","raw","sln","tta","vox","wav","wma","wv","webm","8svx"])},videoExtensions(){return new Set(["webm","mkv","flv","flv","vob","ogv","ogg","drc","gif","gifv","mng","avi","mts","m2ts","mov","qt","wmv","yuv","rm","rmvb","asf","amv","mp4","m4p","m4v","mpg","mp2","mpeg","mpe","mpv","mpg","mpeg","m2v","m4v","svi","3gp","3g2","mxf","roq","nsv","flv","f4v","f4p","f4a","f4b"])},mediaExtensions(){return new Set([...this.videoExtensions,...this.audioExtensions])}},methods:{convertTime(t){t=parseFloat(t);const e={};e.h=""+parseInt(t/3600),e.m=""+parseInt(t/60-60*e.h),e.s=""+parseInt(t-(3600*e.h+60*e.m));for(const a of["m","s"])parseInt(e[a])<10&&(e[a]="0"+e[a]);const s=[];return parseInt(e.h)&&s.push(e.h),s.push(e.m,e.s),s.join(":")},async startStreaming(t,e,s=!1){let a=t,n=null;t instanceof Object?(a=t.url,n=t.subtitles):t={url:a};const i=await this.request(`${e}.start_streaming`,{media:a,subtitles:n,download:s});return{...t,...i}},async stopStreaming(t,e){await this.request(`${e}.stop_streaming`,{media_id:t})}}};const i=n;var l=i},1587:function(t,e,s){s.d(e,{Z:function(){return Wt}});var a=s(6252);const n={class:"media-container"},i={class:"view-container"},l={class:"controls-container"};function o(t,e,s,o,u,r){const c=(0,a.up)("Controls");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",i,[(0,a.WI)(t.$slots,"default",{},void 0,!0)]),(0,a._)("div",l,[(0,a.Wm)(c,{buttons:s.buttons,image:s.image,status:s.status,track:s.track,onConsume:e[0]||(e[0]=e=>t.$emit("consume",e)),onMute:e[1]||(e[1]=e=>t.$emit("mute")),onNext:e[2]||(e[2]=e=>t.$emit("next")),onPause:e[3]||(e[3]=e=>t.$emit("pause",e)),onPlay:e[4]||(e[4]=e=>t.$emit("play",e)),onPrevious:e[5]||(e[5]=e=>t.$emit("previous")),onRandom:e[6]||(e[6]=e=>t.$emit("random",e)),onRepeat:e[7]||(e[7]=e=>t.$emit("repeat",e)),onSearch:e[8]||(e[8]=e=>t.$emit("search",e)),onSeek:e[9]||(e[9]=e=>t.$emit("seek",e)),onSetVolume:e[10]||(e[10]=e=>t.$emit("set-volume",e)),onStop:e[11]||(e[11]=e=>t.$emit("stop")),onUnmute:e[12]||(e[12]=e=>t.$emit("unmute"))},null,8,["buttons","image","status","track"])])])}var u=s(3577),r=s(9963);const c=t=>((0,a.dD)("data-v-1648255d"),t=t(),(0,a.Cn)(),t),m={key:0,class:"remote-image-container"},p=["src","alt"],d={key:1,class:"icon-container"},v={class:"row buttons-container"},g={class:"buttons"},k={class:"buttons"},b=c((()=>(0,a._)("i",{class:"icon fa fa-step-backward"},null,-1))),f=[b],y=c((()=>(0,a._)("i",{class:"icon fa fa-stop"},null,-1))),h=[y],w=c((()=>(0,a._)("i",{class:"icon fa fa-step-forward"},null,-1))),_=[w],x={class:"row"},C={class:"row"},$={class:"controls"},D={class:"playback-controls until tablet col-2"},S={class:"track-container col-s-9 col-m-9 col-l-3"},q={key:0,class:"track-info"},I={key:0,class:"img-container"},P=["src","alt"],Z={class:"title-container"},R={key:0,class:"title"},T=["href","textContent"],j=["textContent"],O=["textContent"],W={key:1,class:"artist"},A=["textContent"],M={class:"playback-controls from desktop col-6"},z={class:"row buttons"},N=c((()=>(0,a._)("i",{class:"icon fa fa-step-backward"},null,-1))),B=[N],E=c((()=>(0,a._)("i",{class:"icon fa fa-stop"},null,-1))),V=[E],U=c((()=>(0,a._)("i",{class:"icon fa fa-step-forward"},null,-1))),L=[U],H={class:"row"},F={class:"col-1 until tablet right-controls"},Y=["title"],G={class:"col-3 from desktop right-controls"};function J(t,e,s,n,i,l){const o=(0,a.up)("VolumeSlider"),c=(0,a.up)("ExtraControls"),b=(0,a.up)("ProgressBar"),y=(0,a.up)("PlayPauseButton");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,u.C_)(["extension fade-in",{hidden:!i.expanded}])},["stop"!==s.status?.state?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"image-container",onClick:e[0]||(e[0]=(0,r.iM)(((...t)=>l.searchAlbum&&l.searchAlbum(...t)),["prevent"]))},[l.trackImage?((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("img",{class:"image",src:l.trackImage,alt:s.track.title},null,8,p)])):((0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("i",{class:(0,u.C_)(["icon fas fa-compact-disc",{playing:"play"===s.status?.state}])},null,2)]))])):(0,a.kq)("",!0),(0,a._)("div",v,[(0,a._)("div",g,[(0,a._)("div",k,[i.buttons_.previous?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[1]||(e[1]=e=>t.$emit("previous")),title:"Play previous track"},f)):(0,a.kq)("",!0),i.buttons_.stop&&"stop"!==s.status.state?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[2]||(e[2]=e=>t.$emit("stop")),title:"Stop playback"},h)):(0,a.kq)("",!0),i.buttons_.next?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:e[3]||(e[3]=e=>t.$emit("next")),title:"Play next track"},_)):(0,a.kq)("",!0)])])]),(0,a._)("div",x,[(0,a.Wm)(o,{range:s.volumeRange,status:s.status,value:s.status.volume,onMute:e[4]||(e[4]=e=>t.$emit("mute")),onSetVolume:e[5]||(e[5]=e=>t.$emit("set-volume",e)),onUnmute:e[6]||(e[6]=e=>t.$emit("unmute"))},null,8,["range","status","value"]),(0,a.Wm)(c,{buttons:i.buttons_,status:s.status,onConsume:e[7]||(e[7]=e=>t.$emit("consume",!s.status.consume)),onRandom:e[8]||(e[8]=e=>t.$emit("random",!s.status.random)),onRepeat:e[9]||(e[9]=e=>t.$emit("repeat",!s.status.repeat))},null,8,["buttons","status"])]),(0,a._)("div",C,[(0,a.Wm)(b,{elapsed:i.elapsed,duration:l.duration,status:s.status,onSeek:e[10]||(e[10]=e=>t.$emit("seek",e))},null,8,["elapsed","duration","status"])])],2),(0,a._)("div",$,[(0,a._)("div",D,[(0,a.Wm)(y,{status:s.status,onPlay:e[11]||(e[11]=e=>t.$emit("play")),onPause:e[12]||(e[12]=e=>t.$emit("pause"))},null,8,["status"])]),(0,a._)("div",S,[s.track&&"stop"!==s.status?.state?((0,a.wg)(),(0,a.iD)("div",q,[l.trackImage?((0,a.wg)(),(0,a.iD)("div",I,[(0,a._)("img",{class:"image from desktop",src:l.trackImage,alt:s.track.title},null,8,P)])):(0,a.kq)("",!0),(0,a._)("div",Z,["play"===s.status.state||"pause"===s.status.state?((0,a.wg)(),(0,a.iD)("div",R,[s.track.album?((0,a.wg)(),(0,a.iD)("a",{key:0,href:t.$route.fullPath,textContent:(0,u.zw)(s.track.title?.length?s.track.title:"[No Title]"),onClick:e[13]||(e[13]=(0,r.iM)(((...t)=>l.searchAlbum&&l.searchAlbum(...t)),["prevent"]))},null,8,T)):s.track.url?((0,a.wg)(),(0,a.iD)("a",{key:1,textContent:(0,u.zw)(s.track.title?.length?s.track.title:"[No Title]")},null,8,j)):((0,a.wg)(),(0,a.iD)("span",{key:2,textContent:(0,u.zw)(s.track.title?.length?s.track.title:"[No Title]")},null,8,O))])):(0,a.kq)("",!0),!s.track.artist?.length||"play"!==s.status.state&&"pause"!==s.status.state?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("a",{textContent:(0,u.zw)(s.track.artist),onClick:e[14]||(e[14]=(0,r.iM)(((...t)=>l.searchArtist&&l.searchArtist(...t)),["prevent"]))},null,8,A)]))])])):(0,a.kq)("",!0)]),(0,a._)("div",M,[(0,a._)("div",z,[i.buttons_.previous?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[15]||(e[15]=e=>t.$emit("previous")),title:"Play previous track"},B)):(0,a.kq)("",!0),(0,a.Wm)(y,{status:s.status,onPlay:e[16]||(e[16]=e=>t.$emit("play")),onPause:e[17]||(e[17]=e=>t.$emit("pause"))},null,8,["status"]),i.buttons_.stop&&"stop"!==s.status.state?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[18]||(e[18]=e=>t.$emit("stop")),title:"Stop playback"},V)):(0,a.kq)("",!0),i.buttons_.next?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:e[19]||(e[19]=e=>t.$emit("next")),title:"Play next track"},L)):(0,a.kq)("",!0)]),(0,a._)("div",H,[(0,a.Wm)(b,{elapsed:i.elapsed,duration:l.duration,status:s.status,onSeek:e[20]||(e[20]=e=>t.$emit("seek",e))},null,8,["elapsed","duration","status"])])]),(0,a._)("div",F,[(0,a._)("button",{onClick:e[21]||(e[21]=t=>i.expanded=!i.expanded),title:i.expanded?"Show more controls":"Hide extra controls"},[(0,a._)("i",{class:(0,u.C_)(["fas",["fa-chevron-"+(i.expanded?"down":"up")]])},null,2)],8,Y)]),(0,a._)("div",G,[(0,a.Wm)(o,{value:s.status.volume,range:s.volumeRange,status:s.status,onMute:e[22]||(e[22]=e=>t.$emit("mute")),onUnmute:e[23]||(e[23]=e=>t.$emit("unmute")),onSetVolume:e[24]||(e[24]=e=>t.$emit("set-volume",e))},null,8,["value","range","status"]),(0,a.Wm)(c,{status:s.status,buttons:i.buttons_,onConsume:e[25]||(e[25]=e=>t.$emit("consume",!s.status.consume)),onRandom:e[26]||(e[26]=e=>t.$emit("random",!s.status.random)),onRepeat:e[27]||(e[27]=e=>t.$emit("repeat",!s.status.repeat))},null,8,["status","buttons"])])])],64)}var K=s(8637),Q=s(1065);const X=t=>((0,a.dD)("data-v-772c7a5b"),t=t(),(0,a.Cn)(),t),tt={class:"extra-controls-container"},et=X((()=>(0,a._)("i",{class:"icon fa fa-utensils"},null,-1))),st=[et],at=X((()=>(0,a._)("i",{class:"icon fa fa-random"},null,-1))),nt=[at],it=X((()=>(0,a._)("i",{class:"icon fa fa-redo"},null,-1))),lt=[it];function ot(t,e,s,n,i,l){return(0,a.wg)(),(0,a.iD)("div",tt,[s.buttons.consume?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[0]||(e[0]=e=>t.$emit("consume")),class:(0,u.C_)({enabled:s.status.consume}),title:"Toggle consume mode"},st,2)):(0,a.kq)("",!0),s.buttons.random?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[1]||(e[1]=e=>t.$emit("random")),class:(0,u.C_)({enabled:s.status.random}),title:"Toggle shuffle"},nt,2)):(0,a.kq)("",!0),s.buttons.repeat?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:e[2]||(e[2]=e=>t.$emit("repeat")),class:(0,u.C_)({enabled:s.status.repeat}),title:"Toggle repeat"},lt,2)):(0,a.kq)("",!0)])}var ut={emits:["consume","random","repeat"],props:{status:{type:Object,default:()=>({})},buttons:{type:Object,default:()=>({})}}},rt=s(3744);const ct=(0,rt.Z)(ut,[["render",ot],["__scopeId","data-v-772c7a5b"]]);var mt=ct;const pt=["title"],dt={key:0,class:"icon play-pause fa fa-pause"},vt={key:1,class:"icon play-pause fa fa-play"};function gt(t,e,s,n,i,l){return(0,a.wg)(),(0,a.iD)("button",{onClick:e[0]||(e[0]=e=>t.$emit("play"===s.status.state?"pause":"play")),title:"play"===s.status.state?"Pause":"Play"},["play"===s.status.state?((0,a.wg)(),(0,a.iD)("i",dt)):((0,a.wg)(),(0,a.iD)("i",vt))],8,pt)}var kt={emits:["play","pause"],props:{status:{type:Object,default:()=>({})}}};const bt=(0,rt.Z)(kt,[["render",gt],["__scopeId","data-v-a742ddb0"]]);var ft=bt,yt=s(7191);const ht={class:"volume-slider-container"},wt={class:"col-1"},_t=["disabled","title"],xt={key:0,class:"icon fa fa-volume-xmark"},Ct={key:1,class:"icon fa fa-volume-up"},$t={class:"col-11 volume-slider"};function Dt(t,e,s,n,i,l){const o=(0,a.up)("Slider");return(0,a.wg)(),(0,a.iD)("div",ht,[(0,a._)("div",wt,[(0,a._)("button",{disabled:null==s.status.mute,title:s.status.mute?"Muted":"Unmuted",onClick:e[0]||(e[0]=e=>t.$emit(s.status.mute?"unmute":"mute"))},[s.status.mute?((0,a.wg)(),(0,a.iD)("i",xt)):((0,a.wg)(),(0,a.iD)("i",Ct))],8,_t)]),(0,a._)("div",$t,[(0,a.Wm)(o,{value:s.status.volume,range:s.volumeRange,disabled:null==s.status.volume,onChange:e[1]||(e[1]=e=>t.$emit("set-volume",e.target.value))},null,8,["value","range","disabled"])])])}var St=s(8140),qt={components:{Slider:St.Z},emits:["set-volume","mute","unmute"],props:{volumeRange:{type:Array,default:()=>[0,100]},status:{type:Object,default:()=>({})}}};const It=(0,rt.Z)(qt,[["render",Dt],["__scopeId","data-v-662f988f"]]);var Pt=It,Zt={components:{ExtraControls:mt,PlayPauseButton:ft,ProgressBar:yt.Z,VolumeSlider:Pt},mixins:[K.Z,Q.Z],emits:["consume","mute","next","pause","play","previous","random","repeat","search","seek","set-volume","stop","unmute"],props:{track:{type:Object},status:{type:Object,default:()=>{}},image:{type:String,default:null},buttons:{type:Object,default:()=>({previous:!0,next:!0,stop:!0,consume:!0,random:!0,repeat:!0})},volumeRange:{type:Array,default:()=>[0,100]}},data(){const t=Object.keys(this.buttons)?.length?this.buttons:{previous:!0,next:!0,stop:!0,consume:!0,random:!0,repeat:!0};return{expanded:!1,lastSync:0,elapsed:this.status?.elapsed||this.status?.position,buttons_:t}},computed:{duration(){return null!=this.status?.duration?this.status.duration:this.track?.duration},trackImage(){return this.track?.image||this.image}},methods:{getTime(){return(new Date).getTime()/1e3},searchAlbum(){if(!this.track?.artist||!this.track?.album)return;const t={artist:this.track.artist,album:this.track.album};this.track.album_uri&&(t.uris=[this.track.album_uri]),this.$emit("search",t)},searchArtist(){if(!this.track?.artist)return;const t={artist:this.track.artist};this.track.artist_uri&&(t.uris=[this.track.album_uri]),this.$emit("search",t)}},mounted(){const t=this;this.lastSync=this.getTime(),this.$watch((()=>this.track),(e=>{e&&"play"===t.status?.state||(t.lastSync=this.getTime())})),this.$watch((()=>this.status),(()=>{t.lastSync=this.getTime()})),setInterval((()=>{"stop"!==t.status?.state&&(t.elapsed=t.status?.elapsed||t.status?.position||0,"play"===t.status?.state&&(t.elapsed+=Math.round(this.getTime()-t.lastSync)))}),1e3)}};const Rt=(0,rt.Z)(Zt,[["render",J],["__scopeId","data-v-1648255d"]]);var Tt=Rt,jt={name:"View",components:{Controls:Tt},emits:["consume","mute","next","pause","play","previous","random","repeat","search","seek","set-volume","stop","unmute"],props:{pluginName:{type:String,required:!0},status:{type:Object,default:()=>{}},track:{type:Object},image:{type:String,default:null},buttons:{type:Object}}};const Ot=(0,rt.Z)(jt,[["render",o],["__scopeId","data-v-e32f5b62"]]);var Wt=Ot},8140:function(t,e,s){s.d(e,{Z:function(){return k}});var a=s(6252),n=s(3577),i=s(9963);const l={class:"slider-wrapper"},o=["textContent"],u=["textContent"],r={class:"slider-container"},c=["min","max","step","disabled","value"],m=["textContent"];function p(t,e,s,p,d,v){return(0,a.wg)(),(0,a.iD)("label",l,[s.withRange?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,n.C_)(["range-labels",{"with-label":s.withLabel}])},[s.withRange?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"label left",textContent:(0,n.zw)(s.range[0])},null,8,o)):(0,a.kq)("",!0),s.withRange?((0,a.wg)(),(0,a.iD)("span",{key:1,class:"label right",textContent:(0,n.zw)(s.range[1])},null,8,u)):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0),(0,a._)("span",r,[(0,a._)("input",{class:(0,n.C_)(["slider",{"with-label":s.withLabel}]),type:"range",min:s.range[0],max:s.range[1],step:s.step,disabled:s.disabled,value:s.value,ref:"range",onInput:e[0]||(e[0]=(0,i.iM)((e=>t.$emit("input",e)),["stop"])),onChange:e[1]||(e[1]=(0,i.iM)((e=>t.$emit("change",e)),["stop"]))},null,42,c),s.withLabel?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"label",textContent:(0,n.zw)(s.value),ref:"label"},null,8,m)):(0,a.kq)("",!0)])])}var d={emits:["input","change"],props:{value:{type:Number},disabled:{type:Boolean,default:!1},range:{type:Array,default:()=>[0,100]},step:{type:Number,default:1},withLabel:{type:Boolean,default:!1},withRange:{type:Boolean,default:!1}}},v=s(3744);const g=(0,v.Z)(d,[["render",p],["__scopeId","data-v-d90e850c"]]);var k=g}}]);
//# sourceMappingURL=1587.e2ebe369.js.map