"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[3211],{5757:function(t,e,s){s.d(e,{Z:function(){return f}});var i=s(6252),o=s(9963),n=s(3577);const a=t=>((0,i.dD)("data-v-d5048f18"),t=t(),(0,i.Cn)(),t),l={class:"dialog-content"},c={class:"buttons"},d=a((()=>(0,i._)("i",{class:"fas fa-check"},null,-1))),r=a((()=>(0,i._)("i",{class:"fas fa-xmark"},null,-1)));function u(t,e,s,a,u,p){const v=(0,i.up)("Modal");return(0,i.wg)(),(0,i.j4)(v,{ref:"modal",title:s.title},{default:(0,i.w5)((()=>[(0,i._)("form",{onSubmit:e[5]||(e[5]=(0,o.iM)(((...t)=>p.onConfirm&&p.onConfirm(...t)),["prevent"]))},[(0,i._)("div",l,[(0,i.WI)(t.$slots,"default",{},void 0,!0),(0,i.wy)((0,i._)("input",{type:"text",ref:"input","onUpdate:modelValue":e[0]||(e[0]=t=>u.value_=t)},null,512),[[o.nr,u.value_]])]),(0,i._)("div",c,[(0,i._)("button",{type:"submit",class:"ok-btn",onClick:e[1]||(e[1]=(...t)=>p.onConfirm&&p.onConfirm(...t)),onTouch:e[2]||(e[2]=(...t)=>p.onConfirm&&p.onConfirm(...t))},[d,(0,i.Uk)("   "+(0,n.zw)(s.confirmText),1)],32),(0,i._)("button",{type:"button",class:"cancel-btn",onClick:e[3]||(e[3]=(...t)=>p.close&&p.close(...t)),onTouch:e[4]||(e[4]=(...t)=>p.close&&p.close(...t))},[r,(0,i.Uk)("   "+(0,n.zw)(s.cancelText),1)],32)])],32)])),_:3},8,["title"])}var p=s(5166),v={emits:["input"],components:{Modal:p.Z},props:{title:{type:String},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},visible:{type:Boolean,default:!1},value:{type:String,default:""}},data(){return{value_:"",visible_:!1}},methods:{onConfirm(){this.value_?.trim()?.length&&this.$emit("input",this.value_),this.close()},open(){this.visible_||(this.value_=this.value,this.$refs.modal.show(),this.visible_=!0,this.focus())},close(){this.visible_&&(this.value_="",this.$refs.modal.hide(),this.visible_=!1)},show(){this.open()},hide(){this.close()},focus(){this.$nextTick((()=>{this.$refs.input.focus()}))}},watch:{visible(t){t?this.open():this.close()}},mounted(){this.visible_=this.visible,this.value_=this.value||"",this.$nextTick((()=>{this.$refs.input.focus()}))}},h=s(3744);const m=(0,h.Z)(v,[["render",u],["__scopeId","data-v-d5048f18"]]);var f=m},7514:function(t,e,s){s.d(e,{Z:function(){return h}});var i=s(6252),o=s(3577),n=s(9963);const a=t=>((0,i.dD)("data-v-eff375b6"),t=t(),(0,i.Cn)(),t),l=["checked","id"],c=a((()=>(0,i._)("div",{class:"switch"},[(0,i._)("div",{class:"dot"})],-1))),d={class:"label"};function r(t,e,s,a,r,u){return(0,i.wg)(),(0,i.iD)("div",{class:(0,o.C_)(["power-switch",{disabled:s.disabled}]),onClick:e[0]||(e[0]=(0,n.iM)(((...t)=>u.onInput&&u.onInput(...t)),["stop"]))},[(0,i._)("input",{type:"checkbox",checked:s.value,id:s.id},null,8,l),(0,i._)("label",null,[c,(0,i._)("span",d,[(0,i.WI)(t.$slots,"default",{},void 0,!0)])])],2)}var u={name:"ToggleSwitch",emits:["input"],props:{id:{type:String},value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{onInput(t){if(this.disabled)return!1;this.$emit("input",t)}}},p=s(3744);const v=(0,p.Z)(u,[["render",r],["__scopeId","data-v-eff375b6"]]);var h=v},3211:function(t,e,s){s.r(e),s.d(e,{default:function(){return D}});var i=s(6252),o=s(3577),n=s(9963);const a=t=>((0,i.dD)("data-v-d7bb5c5e"),t=t(),(0,i.Cn)(),t),l={class:"entity assistant-container"},c={class:"col-1 icon entity-icon",ref:"icon"},d={class:"label"},r=["textContent"],u={class:"value-container"},p=a((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fas fa-comment-slash"})],-1))),v=a((()=>(0,i._)("div",{class:"label"},[(0,i._)("div",{class:"name"},"Stop Conversation")],-1))),h={class:"value"},m=a((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fas fa-comment"})],-1))),f=a((()=>(0,i._)("div",{class:"label"},[(0,i._)("div",{class:"name"},"Start Conversation")],-1))),_={class:"value"},b=a((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fas fa-microphone-lines-slash"})],-1))),C=a((()=>(0,i._)("div",{class:"label"},[(0,i._)("div",{class:"name"},"Muted")],-1))),g={class:"value"},y=a((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fas fa-keyboard"})],-1))),k=a((()=>(0,i._)("div",{class:"label"},[(0,i._)("div",{class:"name"},"Send query from text prompt")],-1))),w={class:"value"};function x(t,e,s,a,x,M){const P=(0,i.up)("TextPrompt"),S=(0,i.up)("EntityIcon"),T=(0,i.up)("ToggleSwitch");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(P,{ref:"prompt"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Enter a text query to send to the assistant. ")])),_:1},512),(0,i._)("div",{class:"head",onClick:e[1]||(e[1]=(...t)=>M.onHeadClick&&M.onHeadClick(...t))},[(0,i._)("div",c,[(0,i.Wm)(S,{entity:t.value,class:(0,o.C_)({active:t.value.conversation_running}),loading:t.loading,error:t.error},null,8,["entity","class","loading","error"])],512),(0,i._)("div",d,[(0,i._)("div",{class:"name",ref:"name",textContent:(0,o.zw)(t.value.name)},null,8,r)]),(0,i._)("div",u,[(0,i._)("button",{onClick:e[0]||(e[0]=(0,n.iM)((t=>x.collapsed=!x.collapsed),["stop"]))},[(0,i._)("i",{class:(0,o.C_)(["fas",{"fa-angle-up":!x.collapsed,"fa-angle-down":x.collapsed}])},null,2)])])]),x.collapsed?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:"body",ref:"body",onClick:e[6]||(e[6]=(0,n.iM)(((...e)=>t.prevent&&t.prevent(...e)),["stop"]))},[t.value.conversation_running?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"row",onClick:e[2]||(e[2]=(0,n.iM)(((...t)=>M.stopConversation&&M.stopConversation(...t)),["stop"]))},[p,v,(0,i._)("div",h,[(0,i.Wm)(T,{onClick:(0,n.iM)(M.stopConversation,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])):((0,i.wg)(),(0,i.iD)("div",{key:1,class:"row",onClick:e[3]||(e[3]=(0,n.iM)(((...t)=>M.startConversation&&M.startConversation(...t)),["stop"]))},[m,f,(0,i._)("div",_,[(0,i.Wm)(T,{onClick:(0,n.iM)(M.startConversation,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])),(0,i._)("div",{class:"row",onClick:e[4]||(e[4]=(0,n.iM)(((...t)=>M.toggleMute&&M.toggleMute(...t)),["stop"]))},[b,C,(0,i._)("div",g,[(0,i.Wm)(T,{onClick:(0,n.iM)(M.toggleMute,["stop"]),value:t.value.is_muted,disabled:t.loading},null,8,["onClick","value","disabled"])])]),(0,i._)("div",{class:"row",onClick:e[5]||(e[5]=(0,n.iM)(((...t)=>M.showPrompt&&M.showPrompt(...t)),["stop"]))},[y,k,(0,i._)("div",w,[(0,i.Wm)(T,{onClick:(0,n.iM)(M.showPrompt,["stop"]),value:!1,disabled:t.loading},null,8,["onClick","disabled"])])])],512))])}var M=s(5757),P=s(7514),S=s(4967),T=s(847),$={name:"Assistant",mixins:[T["default"]],components:{EntityIcon:S["default"],TextPrompt:M.Z,ToggleSwitch:P.Z},data(){return{collapsed:!0,showTextQueryPrompt:!1,modalId:"assistant-text-prompt-modal"}},methods:{hidePrompt(){document.body.querySelector(`#${this.modalId}`)?.remove()},showPrompt(){const t=this.$refs.prompt.$el;this.hidePrompt(),t.id=this.modalId,t.classList.remove("hidden");const e=t.querySelector('input[type="text"]'),s=t.querySelector("form");s&&s.addEventListener("submit",(t=>{t.stopPropagation(),this.onTextPrompt(e?.value)}));const i=t.querySelector(".cancel-btn");i&&(i.onclick=t=>{this.hidePrompt(),t.stopPropagation()}),t.onclick=e=>{const s=t.querySelector(".modal");if(s?.contains(e.target))return e.stopPropagation(),!1;this.hidePrompt()},document.body.appendChild(t),this.$nextTick((()=>{t.querySelector('input[type="text"]').focus()}))},onHeadClick(t){if(this.$refs.name.contains(t.target)||this.$refs.icon.contains(t.target))return!0;this.collapsed=!this.collapsed,t.stopPropagation()},async toggleMute(){await this.request("entities.execute",{id:this.value.id,action:"toggle_mute"})},async startConversation(){await this.request("entities.execute",{id:this.value.id,action:"start_conversation"})},async stopConversation(){await this.request("entities.execute",{id:this.value.id,action:"stop_conversation"})},async onTextPrompt(t){await this.request("entities.execute",{id:this.value.id,action:"send_text_query",query:t}),this.hidePrompt()}}},q=s(3744);const I=(0,q.Z)($,[["render",x],["__scopeId","data-v-d7bb5c5e"]]);var D=I}}]);
//# sourceMappingURL=3211.da74a6a1.js.map