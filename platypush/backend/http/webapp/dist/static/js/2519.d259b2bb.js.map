{"version":3,"file":"static/js/2519.d259b2bb.js","mappings":"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","sources":["webpack://platypush/./src/components/panels/Media/Providers/YouTube/Channel.vue","webpack://platypush/./src/components/panels/Media/Providers/YouTube/Channel.vue?e8bb"],"sourcesContent":["<template>\n  <div class=\"media-youtube-channel\">\n    <Loading v-if=\"isLoading\" />\n\n    <div class=\"channel\" v-else-if=\"channel\">\n      <div class=\"header\">\n        <div class=\"banner\">\n          <img :src=\"channel.banner\" @error=\"onBannerError\" v-if=\"banner?.length\" />\n        </div>\n\n        <div class=\"row info-container\">\n          <div class=\"info\">\n            <div class=\"row\">\n              <div class=\"title-container\">\n                <a :href=\"channel.url\" target=\"_blank\" rel=\"noopener noreferrer\" v-if=\"image?.length\">\n                  <div class=\"image\">\n                    <img :src=\"image\" @error=\"onImageError\" />\n                  </div>\n                </a>\n\n                <a class=\"title\" :href=\"channel.url\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {{ channel?.name }}\n                </a>\n              </div>\n\n              <div class=\"actions\">\n                <button :title=\"subscribed ? 'Unsubscribe' : 'Subscribe'\" @click=\"toggleSubscription\">\n                  {{ subscribed ? 'Unsubscribe' : 'Subscribe' }}\n                </button>\n\n                <div class=\"subscribers\" v-if=\"channel.subscribers != null && (channel.subscribers || 0) >= 0\">\n                  {{ formatNumber(channel.subscribers) }} subscribers\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row description-container\" v-if=\"channel?.description\">\n        <div class=\"description-toggle\">\n          <button :title=\"showDescription ? 'Hide description' : 'Show description'\"\n                  @click=\"showDescription = !showDescription\">\n            <i class=\"fas\" :class=\"{'fa-chevron-down': !showDescription, 'fa-chevron-up': showDescription}\"></i>\n          </button>\n        </div>\n\n        <div class=\"description\" :class=\"{hidden: !showDescription}\" v-if=\"channel?.description\">\n          {{ channel.description }}\n        </div>\n      </div>\n\n      <Results :results=\"channel.items\"\n               :filter=\"filter\"\n               :result-index-step=\"null\"\n               :selected-result=\"selectedResult\"\n               ref=\"results\"\n               @add-to-playlist=\"$emit('add-to-playlist', $event)\"\n               @download=\"$emit('download', $event)\"\n               @download-audio=\"$emit('download-audio', $event)\"\n               @open-channel=\"$emit('open-channel', $event)\"\n               @play=\"$emit('play', $event)\"\n               @play-with-opts=\"$emit('play-with-opts', $event)\"\n               @scroll-end=\"loadNextPage\"\n               @select=\"selectedResult = $event\"\n               @view=\"$emit('view', $event)\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Loading from \"@/components/Loading\";\nimport Results from \"@/components/panels/Media/Results\";\nimport Utils from \"@/Utils\";\n\nexport default {\n  mixins: [Utils],\n  emits: [\n    'add-to-playlist',\n    'download',\n    'download-audio',\n    'open-channel',\n    'play',\n    'play-with-opts',\n    'view',\n  ],\n\n  components: {\n    Loading,\n    Results,\n  },\n\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n\n    filter: {\n      type: String,\n      default: null,\n    },\n\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return {\n      banner: null,\n      channel: null,\n      image: null,\n      loading_: false,\n      loadingNextPage: false,\n      nextPageToken: null,\n      renderedPageTokens: {},\n      selectedResult: null,\n      showDescription: false,\n      subscribed: false,\n    }\n  },\n\n  computed: {\n    isLoading() {\n      return this.loading || this.loading_\n    },\n\n    itemsByUrl() {\n      return this.channel?.items.reduce((acc, item) => {\n        acc[item.url] = item\n        return acc\n      }, {})\n    },\n  },\n\n  methods: {\n    async loadChannel() {\n      this.loading_ = true\n      try {\n        await this.updateChannel(true)\n        this.subscribed = await this.request('youtube.is_subscribed', {channel_id: this.id})\n      } finally {\n        this.loading_ = false\n      }\n    },\n\n    async updateChannel(init) {\n      const nextPageToken = this.channel?.next_page_token\n      const channel = await this.request(\n        'youtube.get_channel',\n        {id: this.id, page: nextPageToken}\n      )\n\n      if (nextPageToken) {\n        this.renderedPageTokens[nextPageToken] = true\n      }\n\n      this.nextPageToken = channel.next_page_token\n      this.image = channel.image\n      this.banner = channel.banner\n\n      const itemsByUrl = this.itemsByUrl || {}\n      let items = channel.items\n        .filter(item => !itemsByUrl[item.url])\n        .map(item => {\n          return {\n            type: 'youtube',\n            ...item,\n          }\n        })\n\n      if (!init) {\n        items = this.channel.items.concat(items)\n      }\n\n      this.channel = channel\n      this.channel.items = items\n    },\n\n    async loadNextPage() {\n      if (!this.nextPageToken || this.renderedPageTokens[this.nextPageToken] || this.loadingNextPage) {\n        return\n      }\n\n      this.loadingNextPage = true\n\n      try {\n        await this.timeout(500)\n        await this.updateChannel()\n      } finally {\n        this.loadingNextPage = false\n      }\n    },\n\n    async toggleSubscription() {\n      const action = this.subscribed ? 'unsubscribe' : 'subscribe'\n      await this.request(`youtube.${action}`, {channel_id: this.id})\n      this.subscribed = !this.subscribed\n    },\n\n    onBannerError() {\n      this.banner = null\n    },\n\n    onImageError() {\n      this.image = null\n    },\n  },\n\n  async mounted() {\n    this.setUrlArgs({channel: this.id})\n    await this.loadChannel()\n  },\n\n  unmounted() {\n    this.setUrlArgs({channel: null})\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"header.scss\";\n\n.media-youtube-channel {\n  height: 100%;\n  overflow-y: auto;\n\n  .channel {\n    height: 100%;\n    position: relative;\n  }\n\n  .header {\n    .title-container {\n      flex: 1;\n    }\n\n    .actions {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n\n      button {\n        background: $default-bg-7;\n        padding: 0.5em 1em;\n        border-radius: 0.5em;\n        cursor: pointer;\n\n        &:hover {\n          background: $hover-bg;\n        }\n      }\n    }\n\n    .subscribers {\n      font-size: 0.8em;\n    }\n  }\n}\n</style>\n","import { render } from \"./Channel.vue?vue&type=template&id=1dc82e96&scoped=true\"\nimport script from \"./Channel.vue?vue&type=script&lang=js\"\nexport * from \"./Channel.vue?vue&type=script&lang=js\"\n\nimport \"./Channel.vue?vue&type=style&index=0&id=1dc82e96&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1dc82e96\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","$options","isLoading","_createBlock","_component_Loading","key","$data","channel","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","banner","length","src","onError","_cache","args","onBannerError","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","image","href","url","target","rel","_hoisted_11","onImageError","name","_hoisted_13","_hoisted_14","title","subscribed","onClick","toggleSubscription","_hoisted_15","subscribers","_hoisted_16","_toDisplayString","_ctx","formatNumber","description","_hoisted_17","_hoisted_18","showDescription","$event","_normalizeClass","hidden","_createVNode","_component_Results","results","items","filter","$props","selectedResult","ref","onAddToPlaylist","$emit","onDownload","onDownloadAudio","onOpenChannel","onPlay","onPlayWithOpts","onScrollEnd","loadNextPage","onSelect","onView","mixins","Utils","emits","components","Loading","Results","props","id","type","String","required","default","loading","Boolean","data","loading_","loadingNextPage","nextPageToken","renderedPageTokens","computed","this","itemsByUrl","reduce","acc","item","methods","loadChannel","updateChannel","request","channel_id","init","next_page_token","page","map","concat","timeout","action","mounted","setUrlArgs","unmounted","__exports__","render"],"sourceRoot":""}