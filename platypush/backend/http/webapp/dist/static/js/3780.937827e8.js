"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[3780],{3780:function(e,a,l){l.r(a),l.d(a,{default:function(){return J}});var s=l(641),t=l(33),n=l(3751);const i=e=>((0,s.Qi)("data-v-03ac0f14"),e=e(),(0,s.jt)(),e),o={class:"entity alarm-container"},d={class:"icon col-1"},u={class:"label col-5"},c=["textContent"],r={key:0,class:"value"},v={key:1,class:"value"},k={key:2,class:"value"},m={key:3,class:"value next-run"},h=["textContent"],b=["textContent"],f={class:"child enable"},p=["for"],g=i((()=>(0,s.Lk)("div",{class:"name col-6"},"Enabled",-1))),L={class:"value col-6"},C={key:0,class:"child buttons"},y={key:0,class:"label col-6"},E={class:"value"},w=i((()=>(0,s.Lk)("i",{class:"fas fa-pause"},null,-1))),$={class:"value"},x=i((()=>(0,s.Lk)("i",{class:"fas fa-times"},null,-1))),D=i((()=>(0,s.Lk)("label",{class:"label"},[(0,s.Lk)("div",{class:"value"},[(0,s.Lk)("i",{class:"fas fa-trash"}),(0,s.eW)("   Remove ")])],-1))),I=[D],R={key:2,class:"child edit"},S=i((()=>(0,s.Lk)("div",{class:"label name col-11"},[(0,s.Lk)("i",{class:"fas fa-pen-to-square"}),(0,s.eW)("  Edit ")],-1))),z={class:"value col-1 collapse-toggler"},_={class:"alarm-running-modal"},A=i((()=>(0,s.Lk)("div",{class:"icon blink"},[(0,s.Lk)("i",{class:"fas fa-stopwatch"})],-1))),X={class:"title"},W={class:"buttons"},N={class:"label"},Q=i((()=>(0,s.Lk)("i",{class:"fas fa-pause"},null,-1))),q={class:"label"},F=i((()=>(0,s.Lk)("i",{class:"fas fa-times"},null,-1)));function M(e,a,l,i,D,M){const O=(0,s.g2)("EntityIcon"),T=(0,s.g2)("ToggleSwitch"),G=(0,s.g2)("AlarmEditor"),U=(0,s.g2)("Modal"),Z=(0,s.g2)("ConfirmDialog");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",{class:(0,t.C4)(["head",{collapsed:e.collapsed}])},[(0,s.Lk)("div",d,[(0,s.bF)(O,{entity:e.value,loading:e.loading,error:e.error},null,8,["entity","loading","error"])]),(0,s.Lk)("div",u,[(0,s.Lk)("div",{class:"name",textContent:(0,t.v_)(e.value.name)},null,8,c)]),(0,s.Lk)("div",{class:"value-and-toggler col-8",onClick:a[1]||(a[1]=(0,n.D$)((a=>e.collapsed=!e.collapsed),["stop"]))},[e.value.enabled?M.isRunning?((0,s.uX)(),(0,s.CE)("div",v,"Running")):M.isSnoozed?((0,s.uX)(),(0,s.CE)("div",k,"Snoozed")):M.nextRun?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("div",{class:"date",textContent:(0,t.v_)(M.nextRun.toDateString())},null,8,h),(0,s.Lk)("div",{class:"time",textContent:(0,t.v_)(M.nextRun.toLocaleTimeString())},null,8,b)])):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",r,"Disabled")),(0,s.Lk)("div",{class:"collapse-toggler",onClick:a[0]||(a[0]=(0,n.D$)((a=>e.collapsed=!e.collapsed),["stop"]))},[(0,s.Lk)("i",{class:(0,t.C4)(["fas",{"fa-chevron-down":e.collapsed,"fa-chevron-up":!e.collapsed}])},null,2)])])],2),e.collapsed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:"body children",onClick:a[6]||(a[6]=(0,n.D$)(((...e)=>M.prevent&&M.prevent(...e)),["stop"]))},[(0,s.Lk)("div",f,[(0,s.Lk)("label",{for:M.enableInputId,class:"label"},[g,(0,s.Lk)("div",L,[(0,s.bF)(T,{id:M.enableInputId,value:e.value.enabled,onInput:M.setEnabled},null,8,["id","value","onInput"])])],8,p)]),M.isRunning||M.isSnoozed?((0,s.uX)(),(0,s.CE)("div",C,[M.isRunning?((0,s.uX)(),(0,s.CE)("label",y,[(0,s.Lk)("div",E,[(0,s.Lk)("button",{class:"btn btn-default",onClick:a[2]||(a[2]=(...e)=>M.snooze&&M.snooze(...e))},[w,(0,s.eW)("   Snooze ")])])])):(0,s.Q3)("",!0),(0,s.Lk)("label",{class:(0,t.C4)(["label",{"col-6":M.isRunning,"col-12":!M.isRunning}])},[(0,s.Lk)("div",$,[(0,s.Lk)("button",{class:"btn btn-default",onClick:a[3]||(a[3]=(...e)=>M.dismiss&&M.dismiss(...e))},[x,(0,s.eW)("   Dismiss ")])])],2)])):(0,s.Q3)("",!0),M.hasEdit?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"child remove",onClick:a[4]||(a[4]=(...a)=>e.$refs.removeDialog.show&&e.$refs.removeDialog.show(...a))},I)):(0,s.Q3)("",!0),M.hasEdit?((0,s.uX)(),(0,s.CE)("div",R,[(0,s.Lk)("div",{class:(0,t.C4)(["head",{collapsed:e.editCollapsed}]),onClick:a[5]||(a[5]=(0,n.D$)((a=>e.editCollapsed=!e.editCollapsed),["stop"]))},[S,(0,s.Lk)("div",z,[(0,s.Lk)("i",{class:(0,t.C4)(["fas",{"fa-chevron-down":e.editCollapsed,"fa-chevron-up":!e.editCollapsed}])},null,2)])],2),e.editCollapsed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(G,{key:0,value:e.value},null,8,["value"]))])):(0,s.Q3)("",!0)])),(0,s.bF)(U,{title:"Alarm Running",ref:"runningModal",visible:M.isRunning},{default:(0,s.k6)((()=>[(0,s.Lk)("div",_,[A,(0,s.Lk)("div",X,[(0,s.Lk)("h3",null,[(0,s.Lk)("b",null,(0,t.v_)(e.value.name),1),(0,s.eW)(" is running")])]),(0,s.Lk)("div",W,[(0,s.Lk)("label",N,[(0,s.Lk)("button",{class:"btn btn-default",onClick:a[7]||(a[7]=(...e)=>M.snooze&&M.snooze(...e))},[Q,(0,s.eW)("   Snooze ")])]),(0,s.Lk)("label",q,[(0,s.Lk)("button",{class:"btn btn-default",onClick:a[8]||(a[8]=(...e)=>M.dismiss&&M.dismiss(...e))},[F,(0,s.eW)("   Dismiss ")])])])])])),_:1},8,["visible"]),(0,s.bF)(Z,{ref:"removeDialog",onInput:M.remove},{default:(0,s.k6)((()=>[(0,s.eW)(" Are you sure you want to remove alarm "),(0,s.Lk)("b",null,(0,t.v_)(e.value.name),1),(0,s.eW)("? ")])),_:1},8,["onInput"])])}var O=l(7594),T=l(3538),G=l(4897),U=l(1029),Z=l(9513),j=l(11),P={mixins:[G["default"]],emits:["loading"],components:{AlarmEditor:O["default"],ConfirmDialog:T.A,EntityIcon:U["default"],Modal:Z.A,ToggleSwitch:j.A},data:function(){return{collapsed:!0,editCollapsed:!0}},computed:{hasEdit(){return!this.value.static},isCollapsed(){return this.collapsed},isRunning(){return"RUNNING"===this.value.state},isSnoozed(){return"SNOOZED"===this.value.state},nextRun(){return this.value.next_run&&this.value.enabled?new Date(1e3*this.value.next_run):null},enableInputId(){return`alarm-input-${this.value.name}`}},methods:{async setEnabled(){this.$emit("loading",!0);try{await this.request("alarm.set_enabled",{name:this.value.external_id,enabled:!this.value.enabled}),await this.refresh()}finally{this.$emit("loading",!1)}},async snooze(){this.$emit("loading",!0);try{await this.request("alarm.snooze"),await this.refresh()}finally{this.$emit("loading",!1)}},async dismiss(){this.$emit("loading",!0);try{await this.request("alarm.dismiss"),await this.refresh()}finally{this.$emit("loading",!1)}},async refresh(){this.$emit("loading",!0);try{await this.request("alarm.status")}finally{this.$emit("loading",!1)}},async remove(){this.$emit("loading",!0);try{await this.request("alarm.delete",{name:this.value.name})}finally{this.$emit("loading",!1)}},prevent(e){e.stopPropagation()}},mounted(){this.$watch((()=>this.value),((e,a)=>{if(e?.state!==a?.state){const a={image:{icon:"stopwatch"}};switch(e?.state){case"RUNNING":a.text=`Alarm ${e.name} is running`;break;case"SNOOZED":a.text=`Alarm ${e.name} has been snoozed`;break;case"DISMISSED":a.text=`Alarm ${e.name} has been dismissed`;break}a.text&&this.notify(a)}}))}},B=l(6262);const H=(0,B.A)(P,[["render",M],["__scopeId","data-v-03ac0f14"]]);var J=H}}]);
//# sourceMappingURL=3780.937827e8.js.map