"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[1210,5505],{1210:function(t,i,e){e.r(i),e.d(i,{default:function(){return m}});var l=e(6252);const o={class:"media-jellyfin-container browser"},a={class:"media-jellyfin-browser"};function n(t,i,e,n,s,c){const r=(0,l.up)("MediaNav"),d=(0,l.up)("Loading"),h=(0,l.up)("Index"),u=(0,l.up)("Movies");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(r,{path:s.path,onBack:i[0]||(i[0]=i=>t.$emit("back"))},null,8,["path"]),(0,l._)("div",a,[c.isLoading?((0,l.wg)(),(0,l.j4)(d,{key:0})):"index"===c.currentView?((0,l.wg)(),(0,l.j4)(h,(0,l.dG)({key:1},c.componentData.props,(0,l.mx)(c.componentData.on),{onSelect:c.selectCollection}),null,16,["onSelect"])):"movies"===c.currentView?((0,l.wg)(),(0,l.j4)(u,(0,l.dG)({key:2},c.componentData.props,(0,l.mx)(c.componentData.on),{collection:s.collection,onSelect:c.select}),null,16,["collection","onSelect"])):(0,l.kq)("",!0)])])}e(560);var s=e(5825),c=e(6791),r=e(83),d=e(6640),h=e(4289),u={mixins:[d["default"]],components:{Index:s["default"],Loading:c.Z,MediaNav:r["default"],Movies:h["default"]},emits:["add-to-playlist","back","download","download-audio","play","play-with-opts"],data(){return{collection:null,loading_:!1,path:[]}},computed:{componentData(){return{props:{collection:this.collection,filter:this.filter,loading:this.isLoading},on:{"add-to-playlist":t=>this.$emit("add-to-playlist",t),download:t=>this.$emit("download",t),"download-audio":t=>this.$emit("download-audio",t),play:t=>this.$emit("play",t),"play-with-opts":t=>this.$emit("play-with-opts",t)}}},currentView(){if(!this.collection)return"index";switch(this.collection.type){case"movies":return"movies";default:return"index"}},isLoading(){return this.loading_||this.loading},rootItem(){const t={id:"",title:"Jellyfin",type:"index",icon:{class:"fas fa-server"}};return t.click=()=>{this.collection=null,this.select(t)},t}},methods:{select(t){if(t){if(this.path.length>0&&this.path[this.path.length-1].id===t.id)return;"index"===t.type?this.path=[this.rootItem]:this.path.push({title:t.name,...t})}else this.path=[]},selectCollection(t){this.collection=t,this.select(t)}},watch:{collection(){this.setUrlArgs({collection:this.collection?.id})}},mounted(){this.path=[this.rootItem]},unmounted(){this.setUrlArgs({collection:null})}},p=e(3744);const f=(0,p.Z)(u,[["render",n],["__scopeId","data-v-add6b9c6"]]);var m=f},5825:function(t,i,e){e.r(i),e.d(i,{default:function(){return k}});var l=e(6252),o=e(3577);const a={class:"collections index"},n={key:1,class:"collections items"},s=["onClick"],c={class:"image"},r=["src","alt","onError"],d={key:0,class:"name"};function h(t,i,e,h,u,p){const f=(0,l.up)("Loading");return(0,l.wg)(),(0,l.iD)("div",a,[p.isLoading?((0,l.wg)(),(0,l.j4)(f,{key:0})):((0,l.wg)(),(0,l.iD)("div",n,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(p.filteredCollections,(i=>((0,l.wg)(),(0,l.iD)("div",{class:"collection item",key:i.id,onClick:e=>t.$emit("select",i)},[(0,l._)("div",c,[u.fallbackImageCollections[i.id]?((0,l.wg)(),(0,l.iD)("i",{key:1,class:(0,o.C_)(p.collectionsIcons[i.type]??"fas fa-folder")},null,2)):((0,l.wg)(),(0,l.iD)("img",{key:0,src:i.image,alt:i.name,onError:t=>p.onImageError(i)},null,40,r))]),u.fallbackImageCollections[i.id]?((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("h2",null,(0,o.zw)(i.name),1)])):(0,l.kq)("",!0)],8,s)))),128))]))])}var u=e(6791),p=e(6640),f={mixins:[p["default"]],components:{Loading:u.Z},emits:["add-to-playlist","back","download","download-audio","play","play-with-opts","select"],data(){return{collections:{},fallbackImageCollections:{},loading_:!1}},computed:{collectionsIcons(){return{books:"fas fa-book",homevideos:"fas fa-video",movies:"fas fa-film",music:"fas fa-music",playlists:"fas fa-list",photos:"fas fa-image",series:"fas fa-tv"}},filteredCollections(){return Object.values(this.collections).filter((t=>!this.filter||t.name.toLowerCase().includes(this.filter.toLowerCase())))},isLoading(){return this.loading_||this.loading}},methods:{onImageError(t){this.fallbackImageCollections[t.id]=!0},async refresh(){this.loading_=!0;try{this.collections=(await this.request("media.jellyfin.get_collections")).reduce(((t,i)=>(t[i.id]=i,t)),{})}finally{this.loading_=!1}},initCollection(){const t=this.getUrlArgs().collection;if(null==t)return;const i=this.collections[t];i&&this.$emit("select",i)}},async mounted(){await this.refresh(),this.initCollection()}},m=e(3744);const g=(0,m.Z)(f,[["render",h],["__scopeId","data-v-42379b56"]]);var k=g},83:function(t,i,e){e.r(i),e.d(i,{default:function(){return v}});var l=e(6252),o=e(3577);const a=t=>((0,l.dD)("data-v-66204518"),t=t(),(0,l.Cn)(),t),n={class:"nav"},s={class:"path"},c=a((()=>(0,l._)("i",{class:"fas fa-home"},null,-1))),r=[c],d=a((()=>(0,l._)("span",{class:"separator"},[(0,l._)("i",{class:"fas fa-chevron-right"})],-1))),h=["title","onClick"],u={key:1},p={key:0,class:"separator"},f=a((()=>(0,l._)("i",{class:"fas fa-chevron-right"},null,-1))),m=[f];function g(t,i,e,a,c,f){return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("span",s,[(0,l._)("span",{class:"back token",title:"Back",onClick:i[0]||(i[0]=i=>t.$emit("back"))},r),d]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.path,((i,a)=>((0,l.wg)(),(0,l.iD)("span",{class:"path",key:a},[(0,l._)("span",{class:"token",title:i.title,onClick:t=>f.onClick(i)},[(t.icon=i.icon?.["class"])?((0,l.wg)(),(0,l.iD)("i",{key:0,class:(0,o.C_)(["icon",t.icon])},null,2)):(0,l.kq)("",!0),i.title?((0,l.wg)(),(0,l.iD)("span",u,(0,o.zw)(i.title),1)):(0,l.kq)("",!0)],8,h),(a>0||e.path.length>1)&&a<e.path.length-1?((0,l.wg)(),(0,l.iD)("span",p,m)):(0,l.kq)("",!0)])))),128))])}var k={emit:["back"],props:{path:{type:Array,default:()=>[]}},methods:{onClick(t){t.click&&t.click()}}},w=e(3744);const y=(0,w.Z)(k,[["render",g],["__scopeId","data-v-66204518"]]);var v=y}}]);
//# sourceMappingURL=1210.7c646baf.js.map