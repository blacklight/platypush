"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[1433,8411,2012,47],{6561:function(t,e,l){l.d(e,{A:function(){return d}});var i=l(641),s=l(33);const a={class:"no-items-container"};function o(t,e,l,o,n,c){return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",{class:(0,s.C4)(["no-items fade-in",{shadow:l.withShadow}])},[(0,i.RG)(t.$slots,"default",{},void 0,!0)],2)])}var n={name:"NoItems",props:{withShadow:{type:Boolean,default:!0}}},c=l(6262);const r=(0,c.A)(n,[["render",o],["__scopeId","data-v-4856c4d7"]]);var d=r},8411:function(t,e,l){l.r(e),l.d(e,{default:function(){return A}});var i=l(641),s=l(33),a=l(3751);const o=t=>((0,i.Qi)("data-v-2b3713e6"),t=t(),(0,i.jt)(),t),n={class:"collections items"},c=["onClick"],r={class:"image"},d=["src","alt","onError"],m={key:0,class:"name"},u={key:1,class:"float bottom-right"},y={key:0,class:"add-playlist floating-btn-container"},h={key:1,class:"add-playlist-modal"},p=o((()=>(0,i.Lk)("div",{class:"row"},[(0,i.Lk)("label",{for:"newPlaylistName"},"Playlist Name"),(0,i.Lk)("input",{name:"name",type:"text",id:"newPlaylistName",placeholder:"Playlist Name",required:""})],-1))),f=o((()=>(0,i.Lk)("div",{class:"row"},[(0,i.Lk)("label",{for:"newPlaylistPublic"},"Public"),(0,i.Lk)("input",{name:"public",type:"checkbox",checked:"",id:"newPlaylistPublic"})],-1))),g={class:"row buttons"},v=o((()=>(0,i.Lk)("button",{type:"submit"},"Create",-1)));function k(t,e,l,o,k,w){const C=(0,i.g2)("FloatingButton"),b=(0,i.g2)("Modal");return(0,i.uX)(),(0,i.CE)("div",{class:(0,s.C4)(["collections index",{"is-root":!l.parentId}])},[(0,i.Lk)("div",n,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(w.filteredItems,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"collection item",key:e.id,onClick:l=>t.$emit("select",e)},[(0,i.Lk)("div",r,[k.fallbackImageCollections[e.id]?((0,i.uX)(),(0,i.CE)("i",{key:1,class:(0,s.C4)(w.collectionsIcons[e.type]??"fas fa-folder")},null,2)):((0,i.uX)(),(0,i.CE)("img",{key:0,src:e.image,alt:e.name,onError:t=>w.onImageError(e)},null,40,d))]),k.fallbackImageCollections[e.id]||l.parentId?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.Lk)("h2",null,(0,s.v_)(e.name),1)])):(0,i.Q3)("",!0),e.year?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.Lk)("span",null,(0,s.v_)(e.year),1)])):(0,i.Q3)("",!0)],8,c)))),128))]),w.isPlaylistsCollection?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.bF)(C,{"icon-class":"fa fa-plus",title:"Create Playlist",disabled:k.loading,onClick:e[0]||(e[0]=t=>k.showNewPlaylist=!0)},null,8,["disabled"])])):(0,i.Q3)("",!0),k.showNewPlaylist?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bF)(b,{title:"Create Playlist",visible:!0,onClose:e[3]||(e[3]=t=>k.showNewPlaylist=!1)},{default:(0,i.k6)((()=>[(0,i.Lk)("form",{class:"modal-body",onSubmit:e[2]||(e[2]=(0,a.D$)(((...t)=>w.createPlaylist&&w.createPlaylist(...t)),["prevent"]))},[p,f,(0,i.Lk)("div",g,[(0,i.Lk)("button",{type:"button",onClick:e[1]||(e[1]=t=>k.showNewPlaylist=!1)},"Cancel"),v])],32)])),_:1})])):(0,i.Q3)("",!0)],2)}var w=l(7998),C=l(9513),b=l(2002),_={mixins:[b.A],emits:["refresh","select"],components:{FloatingButton:w.A,Modal:C.A},props:{collection:{type:Object},filter:{type:String},items:{type:Array,default:()=>[]},batchItems:{type:Number,default:100},parentId:{type:String}},data(){return{fallbackImageCollections:{},loading:!1,maxResultIndex:this.batchItems,showNewPlaylist:!1}},computed:{collectionsIcons(){return{books:"fas fa-book",homevideos:"fas fa-video",movies:"fas fa-film",music:"fas fa-music",playlists:"fas fa-list",photos:"fas fa-image",series:"fas fa-tv"}},filteredItems(){return Object.values(this.items).filter((t=>!this.filter||t.name.toLowerCase().includes(this.filter.toLowerCase()))).sort(((t,e)=>"album"===t.item_type&&"album"===e.item_type&&t.year&&e.year&&t.year!==e.year?e.year-t.year:t.name.localeCompare(e.name))).slice(0,this.maxResultIndex)},isPlaylistsCollection(){return"playlists"===this.collection?.collection_type}},methods:{async createPlaylist(t){const e=new FormData(t.target);await this.request("media.jellyfin.create_playlist",{name:e.get("name"),public:"on"===e.get("public")}),this.$emit("refresh")},onImageError(t){this.fallbackImageCollections[t.id]=!0},onScroll(t){const e=t.target;if(!e)return;const l=e.scrollHeight-e.scrollTop<=e.clientHeight+150;l&&(this.maxResultIndex+=this.batchItems)}},watch:{showNewPlaylist(t){t&&this.$nextTick((()=>this.$el.querySelector('input[name="name"]').focus()))}},mounted(){this.$el.parentElement?.addEventListener("scroll",this.onScroll)},unmounted(){this.$el.parentElement?.removeEventListener("scroll",this.onScroll)}},L=l(6262);const I=(0,L.A)(_,[["render",k],["__scopeId","data-v-2b3713e6"]]);var A=I},2012:function(t,e,l){l.r(e),l.d(e,{default:function(){return o}});var i=l(47),s={mixins:[i["default"]],emits:["add-to-playlist","back","download","play","play-with-opts","select","view"],props:{collection:{type:Object},path:{type:Array,default:()=>[]}},data(){return{items:[],loading_:!1,selectedResult:null,sort:{attr:"title",desc:!1}}},computed:{isLoading(){return this.loading_||this.loading},sortedItems(){return this.items?"playlist"===this.collection?.item_type?this.items:[...this.items].sort(((t,e)=>{const l=this.sort.attr,i=this.sort.desc;let s=t[l],a=e[l];return"number"===typeof s||"number"===typeof a?(s=s||0,a=a||0,i?a-s:s-a):(s=(s||"").toString().toLowerCase(),a=(a||"").toString().toLowerCase(),i?a.localeCompare(s):s.localeCompare(a))})).map((t=>({item_type:t.type,...t,type:"jellyfin"}))):[]}},methods:{async refresh(){const t=this.collection?.name;if(t?.length){this.loading_=!0;try{this.items=await this.request("media.jellyfin.search",{collection:t,limit:1e3})}finally{this.loading_=!1}}}},watch:{collection(){this.refresh()}}};const a=s;var o=a},1433:function(t,e,l){l.r(e),l.d(e,{default:function(){return Z}});var i=l(641),s=l(33),a=l(3751);const o=t=>((0,i.Qi)("data-v-0cf35154"),t=t(),(0,i.jt)(),t),n={class:"music index"},c={key:0,class:"artist header"},r={key:0,class:"image"},d=["src"],m={class:"info"},u=["textContent"],y={key:1,class:"album header"},h={key:0,class:"image"},p=["src"],f={class:"info"},g=["textContent"],v={key:0,class:"artist"},k=["textContent"],w=["textContent"],C={class:"details"},b={key:0,class:"row"},_=o((()=>(0,i.Lk)("span",{class:"label"},"Year:",-1))),L=["textContent"],I={key:1,class:"row"},A=o((()=>(0,i.Lk)("span",{class:"label"},"Duration:",-1))),x=["textContent"],P={key:2,class:"playlist header"},E={key:0,class:"image"},X=["src"],Q={class:"info"},$=["textContent"],j={class:"details"},N={key:0,class:"row"},D=o((()=>(0,i.Lk)("span",{class:"label"},"Duration:",-1))),F=["textContent"],S={class:"actions"},q={key:6,class:"collection-modal"};function R(t,e,l,o,R,M){const U=(0,i.g2)("Loading"),W=(0,i.g2)("DropdownItem"),B=(0,i.g2)("Dropdown"),O=(0,i.g2)("NoItems"),T=(0,i.g2)("Collections"),H=(0,i.g2)("Results"),G=(0,i.g2)("Info"),K=(0,i.g2)("Modal"),V=(0,i.g2)("ConfirmDialog");return(0,i.uX)(),(0,i.CE)("div",n,[t.isLoading?((0,i.uX)(),(0,i.Wv)(U,{key:0})):(0,i.Q3)("",!0),(0,i.Lk)("main",{class:(0,s.C4)(M.containerClass)},["artist"===M.view?((0,i.uX)(),(0,i.CE)("div",c,[t.collection.image?((0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("img",{src:t.collection.image},null,8,d)])):(0,i.Q3)("",!0),(0,i.Lk)("div",m,[(0,i.Lk)("h1",{textContent:(0,s.v_)(t.collection.name)},null,8,u)])])):"album"===M.view?((0,i.uX)(),(0,i.CE)("div",y,[t.collection.image?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("img",{src:t.collection.image},null,8,p)])):(0,i.Q3)("",!0),(0,i.Lk)("div",f,[(0,i.Lk)("h1",{textContent:(0,s.v_)(t.collection.name)},null,8,g),M.displayedArtist?.id?((0,i.uX)(),(0,i.CE)("div",v,[M.displayedArtist?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"#",textContent:(0,s.v_)(M.displayedArtist.name),onClick:e[0]||(e[0]=(0,a.D$)(((...t)=>M.selectArtist&&M.selectArtist(...t)),["prevent","stop"]))},null,8,k)):((0,i.uX)(),(0,i.CE)("span",{key:1,textContent:(0,s.v_)(M.displayedArtist.name)},null,8,w))])):(0,i.Q3)("",!0),(0,i.Lk)("div",C,[t.collection.year?((0,i.uX)(),(0,i.CE)("div",b,[_,(0,i.Lk)("span",{class:"value",textContent:(0,s.v_)(t.collection.year)},null,8,L)])):(0,i.Q3)("",!0),t.collection.duration?((0,i.uX)(),(0,i.CE)("div",I,[A,(0,i.Lk)("span",{class:"value",textContent:(0,s.v_)(t.formatDuration(t.collection.duration,!0))},null,8,x)])):(0,i.Q3)("",!0)])])])):"playlist"===M.view?((0,i.uX)(),(0,i.CE)("div",P,[t.collection.image?((0,i.uX)(),(0,i.CE)("div",E,[(0,i.Lk)("img",{src:t.collection.image},null,8,X)])):(0,i.Q3)("",!0),(0,i.Lk)("div",Q,[(0,i.Lk)("h1",{textContent:(0,s.v_)(t.collection.name)},null,8,$),(0,i.Lk)("div",j,[t.collection.duration?((0,i.uX)(),(0,i.CE)("div",N,[D,(0,i.Lk)("span",{class:"value",textContent:(0,s.v_)(t.formatDuration(t.collection.duration,!0))},null,8,F)])):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",S,[(0,i.bF)(B,{title:"Playlist Actions"},{default:(0,i.k6)((()=>[(0,i.bF)(W,{text:"Remove Playlist","icon-class":"fas fa-trash",onInput:e[1]||(e[1]=e=>t.$refs.deleteConfirmDialog.show())}),(0,i.bF)(W,{text:"Info","icon-class":"fas fa-info",onInput:e[2]||(e[2]=t=>R.showInfoModal=!0)})])),_:1})])])):(0,i.Q3)("",!0),t.items?.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(O,{key:3,"with-shadow":!1},{default:(0,i.k6)((()=>[(0,i.eW)(" No media found. ")])),_:1})),M.collections?.length>0?((0,i.uX)(),(0,i.Wv)(T,{key:4,collection:t.collection,filter:t.filter,items:M.collections,loading:t.isLoading,"parent-id":t.collection?.id,onSelect:M.selectCollection},null,8,["collection","filter","items","loading","parent-id","onSelect"])):(0,i.Q3)("",!0),M.mediaItems?.length>0?((0,i.uX)(),(0,i.Wv)(H,{key:5,results:M.mediaItems,sources:{jellyfin:!0},filter:t.filter,"list-view":!0,playlist:"playlist"===t.collection?.item_type?t.collection:null,"selected-result":t.selectedResult,"show-date":!1,onAddToPlaylist:e[3]||(e[3]=e=>t.$emit("add-to-playlist",e)),onDownload:e[4]||(e[4]=e=>t.$emit("download",e)),onMove:e[5]||(e[5]=e=>t.$emit("playlist-move",e)),onPlay:e[6]||(e[6]=e=>t.$emit("play",e)),onPlayWithOpts:e[7]||(e[7]=e=>t.$emit("play-with-opts",e)),onRemoveFromPlaylist:M.removeFromPlaylist,onSelect:e[8]||(e[8]=e=>t.selectedResult=e),onView:e[9]||(e[9]=e=>t.$emit("view",e))},null,8,["results","filter","playlist","selected-result","onRemoveFromPlaylist"])):(0,i.Q3)("",!0),R.showInfoModal?((0,i.uX)(),(0,i.CE)("div",q,[(0,i.bF)(K,{title:"Collection Info",visible:"",onClose:e[10]||(e[10]=t=>R.showInfoModal=!1)},{default:(0,i.k6)((()=>[(0,i.bF)(G,{item:t.collection,pluginName:t.pluginName},null,8,["item","pluginName"])])),_:1})])):(0,i.Q3)("",!0),(0,i.bF)(V,{ref:"deleteConfirmDialog",onInput:e[11]||(e[11]=e=>t.$emit("delete",t.collection.id))},{default:(0,i.k6)((()=>[(0,i.eW)(" Are you sure you want to delete this playlist? ")])),_:1},512)],2)])}var M=l(8411),U=l(3538),W=l(9265),B=l(9612),O=l(7711),T=l(9828),H=l(2012),G=l(9513),K=l(6561),V=l(3149),Y={mixins:[H["default"]],emits:["add-to-playlist","delete","download","play","play-with-opts","playlist-move","select","select-collection","view"],components:{Collections:M["default"],ConfirmDialog:U.A,Dropdown:W.A,DropdownItem:B.A,Info:O.A,Loading:T.A,Modal:G.A,NoItems:K.A,Results:V.A},data(){return{artist:null,showInfoModal:!1}},computed:{collections(){return(this.sortedItems?.filter((t=>["collection","artist","album"].includes(t.item_type)))??[]).sort(((t,e)=>t.name.localeCompare(e.name)))},containerClass(){return{artist:"artist"===this.view,album:"album"===this.view,playlist:"playlist"===this.view}},displayedArtist(){return this.artist||this.collection?.artist},mediaItems(){return(this.sortedItems?.filter((t=>!["collection","artist","album"].includes(t.item_type)))??[]).map((t=>(t.media_type=t.type,t.type="jellyfin",t))).sort(((t,e)=>"playlist"===this.view?0:"album"===this.view&&t.track_number&&e.track_number&&t.track_number!==e.track_number?t.track_number-e.track_number:t.name.localeCompare(e.name))).map((t=>("album"===this.view&&(t.artist=this.artist||this.collection.artist,t.album=this.collection,t.image=this.collection.image),t)))},view(){switch(this.collection?.item_type){case"artist":return"artist";case"album":return"album";case"playlist":return"playlist";default:return"index"}}},methods:{async removeFromPlaylist(t){this.loading_=!0;try{await this.request("media.jellyfin.remove_from_playlist",{playlist_id:this.collection.id,item_ids:[t.playlist_item_id]}),await this.refresh()}finally{this.loading_=!1}},async selectArtist(){const t=this.displayedArtist?.id||this.getUrlArgs().artist;if(t?.length){this.loading_=!0;try{const e=this.displayedArtist||await this.request("media.jellyfin.info",{item_id:t});e&&(this.selectCollection(e),this.$nextTick((()=>{this.setUrlArgs({artist:e.id,collection:e.id})})))}finally{this.loading_=!1}}},selectCollection(t){t&&t?.id!==this.collection?.id&&("artist"===t.item_type?this.setUrlArgs({artist:t.id}):"album"===t.item_type?this.setUrlArgs({collection:t.id}):this.setUrlArgs({collection:null}),this.$emit("select-collection",{collection_type:"music",...t}))},async init(){const t=this.getUrlArgs();let e=t?.collection;if(e){this.loading_=!0;try{e=await this.request("media.jellyfin.info",{item_id:e}),e&&this.selectCollection(e)}finally{this.loading_=!1}}},async refresh(){this.loading_=!0;try{switch(this.view){case"artist":this.artist={...this.collection},this.setUrlArgs({artist:this.collection.id,collection:this.collection.id}),this.items=(await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:25e3})).map((t=>("album"===this.collection?.item_type&&(t.image=this.collection.image),t)));break;case"album":this.setUrlArgs({collection:this.collection.id,artist:this.collection.artist?.id}),this.items=await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:25e3});break;case"playlist":this.items="playlist"===this.collection?.item_type?await this.request("media.jellyfin.get_playlist_items",{playlist_id:this.collection.id,limit:25e3}):await this.request("media.jellyfin.get_items",{parent_id:this.collection.id,limit:25e3});break;default:this.artist=null,this.items=await this.request("media.jellyfin.get_artists",{limit:5e3});break}}finally{this.loading_=!1}}},async mounted(){await this.init(),await this.refresh()},unmounted(){this.setUrlArgs({collection:null,artist:null,album:null})}},z=l(6262);const J=(0,z.A)(Y,[["render",R],["__scopeId","data-v-0cf35154"]]);var Z=J},47:function(t,e,l){l.r(e),l.d(e,{default:function(){return o}});var i=l(2002),s={mixins:[i.A],emits:["add-to-playlist","back","create-playlist","download","download-audio","path-change","play","remove-from-playlist","remove-playlist","rename-playlist"],props:{filter:{type:String,default:""},loading:{type:Boolean,default:!1},mediaPlugin:{type:String},selectedPlaylist:{default:null},selectedChannel:{default:null}},data(){return{loading_:!1}},computed:{isLoading(){return this.loading||this.loading_}}};const a=s;var o=a}}]);
//# sourceMappingURL=1433.01bd071a.js.map