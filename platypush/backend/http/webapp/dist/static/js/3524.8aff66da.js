"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[3524],{3524:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var l=s(6252),a=s(3577);const i={class:"collections items"},o=["onClick"],r={class:"image"},n=["src","alt","onError"],c={key:0,class:"name"},m={key:1,class:"float bottom-right"};function f(e,t,s,f,d,u){return(0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(["collections index",{"is-root":!s.parentId}])},[(0,l._)("div",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.filteredItems,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"collection item",key:t.id,onClick:s=>e.$emit("select",t)},[(0,l._)("div",r,[d.fallbackImageCollections[t.id]?((0,l.wg)(),(0,l.iD)("i",{key:1,class:(0,a.C_)(u.collectionsIcons[t.type]??"fas fa-folder")},null,2)):((0,l.wg)(),(0,l.iD)("img",{key:0,src:t.image,alt:t.name,onError:e=>u.onImageError(t)},null,40,n))]),d.fallbackImageCollections[t.id]||s.parentId?((0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("h2",null,(0,a.zw)(t.name),1)])):(0,l.kq)("",!0),t.year?((0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("span",null,(0,a.zw)(t.year),1)])):(0,l.kq)("",!0)],8,o)))),128))])],2)}var d={props:{filter:{type:String},items:{type:Array,default:()=>[]},batchItems:{type:Number,default:100},parentId:{type:String}},data(){return{fallbackImageCollections:{},maxResultIndex:this.batchItems}},computed:{collectionsIcons(){return{books:"fas fa-book",homevideos:"fas fa-video",movies:"fas fa-film",music:"fas fa-music",playlists:"fas fa-list",photos:"fas fa-image",series:"fas fa-tv"}},filteredItems(){return Object.values(this.items).filter((e=>!this.filter||e.name.toLowerCase().includes(this.filter.toLowerCase()))).sort(((e,t)=>"album"===e.item_type&&"album"===t.item_type&&e.year&&t.year&&e.year!==t.year?t.year-e.year:e.name.localeCompare(t.name))).slice(0,this.maxResultIndex)}},methods:{onImageError(e){this.fallbackImageCollections[e.id]=!0},onScroll(e){const t=e.target;if(!t)return;const s=t.scrollHeight-t.scrollTop<=t.clientHeight+150;s&&(this.maxResultIndex+=this.batchItems)}},mounted(){this.$el.parentElement.addEventListener("scroll",this.onScroll)},unmounted(){this.$el.parentElement.removeEventListener("scroll",this.onScroll)}},u=s(3744);const p=(0,u.Z)(d,[["render",f],["__scopeId","data-v-533af79f"]]);var h=p}}]);
//# sourceMappingURL=3524.8aff66da.js.map